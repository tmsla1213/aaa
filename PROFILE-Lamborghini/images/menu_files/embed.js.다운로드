/*! MerideEmbedFrontAPI 0.14.11 2023-06-08 09:38:02 copyright Mosaicolab srl */
!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=40)}([function(e,t,n){"use strict";!function(){var t={each:function(e,t){for(var n=e.length;0!=n--;)t(e[n],n)},error:function(e){return e=new Error(e),"function"==typeof console.error||console.debug,!1},parseArgs:function(e,t){for(var n=e.length,r=new Array(n-t);n--!==t;)r[n-t]=e[n];return r}},n=function(){this._listeners=[],this._maxListeners=10};n.prototype._parseListener=function(e,n){var r={fn:n};if("function"==typeof e)r.fn=e;else if(Array.isArray(e))r.dependencies=e;else{if("string"!=typeof e)return t.error("EventHandler is not a function.");r.dependencies=[e]}return r},n.prototype.removeAllListeners=function(e){if(e||0==e)return this.off(e);this._listeners=[]},n.prototype.setMaxListeners=function(e){this._maxListeners=e},n.prototype.on=function(e,t,n,r){"string"!=typeof e&&(e=e.toString()),this.listeners(e).length>=this._maxListeners||(n=this._parseListener(t,n),n.eventName=e,r&&(n.once=!0),this._listeners.push(n),"newListener"!=e&&this.emit("newListener",n.fn))},n.prototype.once=function(e,t,n){this.on(e,t,n,!0)},n.prototype.off=function(e,t){if(void 0!==e)if(t)for(var n=this._listeners.length;n--;)e==this._listeners[n].eventName&&this._listeners[n].fn===t&&(this.emit("removeListener",this._listeners[n].fn),this._listeners.splice(n,1));else for(var n=this._listeners.length;n--;)e==this._listeners[n].eventName&&(this.emit("removeListener",this._listeners[n].fn),this._listeners.splice(n,1))},n.prototype.listeners=function(e){if(!e)return this._listeners;var t,n=e.split("."),e=n[0],r=n[1]?"."+n[1]:null,i=[];if(t=r?this._matchWithNamespace:this._matchEvent,"function"==typeof this._listeners.filter)return this._listeners.filter(function(n){return t(e,n.eventName,r)});for(var a=0;a<this._listeners;a++)t(e,listener.eventName,r)&&i.push(listener);return i},n.prototype._matchWithNamespace=function(e,t,n){return e==t||e+n==t||0==e.indexOf(t+":")||t==n||"*"==t||"*"==e||0==e.indexOf(t.substring(0,t.indexOf("."))+":")},n.prototype._matchEvent=function(e,t){return e==t||0==e.indexOf(t+":")||0==t.indexOf(e+".")||"*"==t||"*"==e||0==e.indexOf(t.substring(0,t.indexOf("."))+":")},n.prototype._matchArray=function(e,t){var n,r,i,a;for(-1!=t.indexOf(".")?(i=t.split("."),t=i[0],a=i[1]?"."+i[1]:null,n=this._matchWithNamespace):n=this._matchEvent;r=e.pop();)if(n(t,r.eventName,a)||r.eventName.substring(r.eventName.indexOf("."))==a&&"*"!=r.eventName)return!0;return!1},n.prototype._deferredLoop=function(e,n,r){var i,a,o,s,l=this,d=0;for(i=d=e.length;a=e.pop();){if(0==d)return n?void 0:t.error("Deadlock!");if(s=!1,a.dependencies){for(var u=0;u<a.dependencies.length;u++)s=!!l._matchArray(e.slice(),a.dependencies[u])||s;s?e.unshift(a):(o=a.fn(r))&&o.then&&(n++,e.unshift(a),o.then(function(){n--,l._deferredLoop(e,n,r)})),e.length==i?d--:i=d=e.length}else e.unshift(a),d--}},n.prototype.emit=function(e){if(!e)return t.error("Nothing to emit.");"string"!=typeof e&&(e=e.toString());var n,r,i=[],a=this._listeners.slice(),o=0,s=this,l={arguments:t.parseArgs(arguments,1),event:e,stopPropagation:function(){a=[],i=[]}};if(-1!=e.indexOf(".")){var d=e.split("."),e=d[0],u=d[1]?"."+d[1]:null;n=s._matchWithNamespace}else n=s._matchEvent;if(!e)return t.error("Nothing to emit.");t.each(a,function(t,a){if(n(e,t.eventName,u)){if(t.dependencies)return void i.push(t);r=t.fn(l),r&&r.then&&(o++,i.push(t),r.then(function(){o--,s._deferredLoop(i,o,l)})),t.once&&s._listeners.splice(a,1)}}),i.length>0&&s._deferredLoop(i,o,l)},n.prototype.applyEmit=function(e){var n=this,r=t.parseArgs(arguments,0);return function(){n.emit.apply(n,r)}},n.prototype.removeListener=n.prototype.off,n.prototype.addListener=n.prototype.on,n.prototype.one=n.prototype.once,e.exports=n}()},function(e,t){var n={READY:"MERIDE_READY",MAIN_PLAY_CLICKED:"MERIDE_MAIN_PLAY_CLICKED",PLAY:"MERIDE_PLAY",PLAY_CONTENT:"MERIDE_PLAY_CONTENT",ERROR:"ERROR",PAUSE:"MERIDE_PAUSE",ENDED:"MERIDE_ENDED",AD_CLICKED:"MERIDE_AD_CLICKED",AD_REQUESTING:"MERIDE_AD_REQUESTING",AD_REQUEST_COMPLETE:"MERIDE_AD_REQUEST_COMPLETE",AD_STARTED:"MERIDE_AD_STARTED",AD_ERROR:"MERIDE_AD_ERROR",AD_EMPTY:"MERIDE_AD_EMPTY",AD_ENDED:"MERIDE_AD_ENDED",AD_LOADED:"MERIDE_AD_LOADED",LOADEDMETADATA:"MERIDE_LOADEDMETADATA",MANIFEST_PARSED:"MERIDE_MANIFEST_PARSED",ADS_MANAGER_READY:"ADS_MANAGER_READY",ENTER_FULLSCREEN:"ENTER_FULLSCREEN",EXIT_FULLSCREEN:"EXIT_FULLSCREEN",ROLLVIDEO_STARTED:"ROLLVIDEO_STARTED",ROLLVIDEO_ENDED:"ROLLVIDEO_ENDED",ADBLOCK_DETECTED:"ADBLOCK_DETECTED"};e.exports=n},function(e,t){var n={isAndroidStock:function(){var e=navigator.userAgent,t=e.indexOf("Android")>-1&&e.indexOf("Mozilla/5.0")>-1&&e.indexOf("AppleWebKit")>-1,n=new RegExp(/AppleWebKit\/([\d.]+)/),r=n.exec(e),i=null===r?null:parseFloat(n.exec(e)[1]),a=new RegExp(/Chrome\/([\d.]+)/),o=a.exec(e),s=null===o?null:parseFloat(a.exec(e)[1]);return t&&null!==i&&i<537||null!==s&&s<37},addClickTouch:function(e,t){var r=function(e){return t(e),e.preventDefault(),!1};return n.isAndroidStock()?e.addEventListener("click",r,!1):(e.addEventListener("click",r,!1),e.addEventListener("touchend",r,!1)),r},removeClickTouch:function(e,t){n.isAndroidStock()?e.removeEventListener("click",t):(e.removeEventListener("click",t),e.removeEventListener("touchstart",t))}};e.exports=n},function(e,t){var n={applyComponent:function(e,t,n,r){n&&e.setAttribute("data-txt",n),t.class&&(e.className=t.class),r&&e.setAttribute("aria-label",r),e.innerHTML=t.html},applyStyles:function(e,t){var n=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n])};if(Array.isArray(e))for(var r=0,i=e.length;r<i;r+=1)n(e[r],t);else n(e,t)},appendRawStyle:function(e){var t=document.getElementsByTagName("head"),n=null;t.length>0&&(n=t[0]),null!==n?n.appendChild(e):document.body.appendChild(e)},hexToRgb:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},isPiPSupported:function(){return!!document.pictureInPictureEnabled}};e.exports=n},function(e,t){var n={include:function(e,t,n){var r=document.getElementsByTagName("head")[0],i=document.createElement("script");i.type="text/javascript",i.src=e,n&&(!0===n.async&&i.setAttribute("async","true"),n.crossorigin&&i.setAttribute("crossorigin",n.crossorigin),n.onerror&&"function"==typeof n.onerror&&(i.onerror=n.onerror)),void 0!==i.onreadystatechange?i.onreadystatechange=function(){"loaded"!=i.readyState&&"complete"!=i.readyState||"function"!=typeof t||t()}:(i.onload,i.onload=t),r.appendChild(i)}};e.exports=n},function(e,t){var n={onDOMLoaded:function(e){if(document.addEventListener)document.addEventListener("DOMContentLoaded",e,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var t=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(e(),clearInterval(t))},10);else window.addEventListener("load",e)},getElementsByClassName:function(e){return document.getElementsByClassName?document.getElementsByClassName(e):document.querySelectorAll("."+e)},applyStyles:function(e,t){var n=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n])};if(Array.isArray(e))for(var r=0,i=e.length;r<i;r+=1)n(e[r],t);else n(e,t)},isElementInViewport:function(e){"function"==typeof jQuery&&e instanceof jQuery&&(e=e[0]);var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.top<=(window.innerHeight||document.documentElement.clientHeight)&&t.left<=(window.innerWidth||document.documentElement.clientWidth)}};e.exports=n},function(e,t){var n={emit:function(e,t,n){n=n||{};var r=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t.dispatchEvent(r)}};e.exports=n},function(e,t){var n={deviceIphone:"iphone",deviceIpad:"iPad",deviceIpod:"ipod",deviceS60:"series60",deviceSymbian:"symbian",engineWebKit:"webkit",deviceAndroid:"android",deviceWinMob:"windows ce",deviceWinPhone:"windows phone",deviceBB:"blackberry",devicePalm:"palm",uagent:navigator.userAgent.toLowerCase(),androidVersion:function(){var e=navigator.userAgent.match(/Android\s([0-9\.]*)/);return!!e&&e[1]},iOSVersion:function(){var e=window.navigator.userAgent,t=e.indexOf("OS ");return(e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1)&&t>-1&&window.Number(e.substr(t+3,3).replace("_","."))},detectIPhone:function(){return this.uagent.search(this.deviceIphone)>-1&&!this.detectWindowsPhone()},detectIPad:function(){return null!==navigator.userAgent.match(/iPad/i)},detectIPod:function(){return this.uagent.search(this.deviceIpod)>-1},detectIphoneOrIpod:function(){return!!this.detectIPhone()||!!this.detectIPod()},detectS60OssBrowser:function(){return this.uagent.search(this.engineWebKit)>-1&&(this.uagent.search(this.deviceS60)>-1||this.uagent.search(this.deviceSymbian)>-1)},detectAndroid:function(){return this.uagent.search(this.deviceAndroid)>-1&&!this.detectWindowsPhone()},detectWebkit:function(){return uagent.search(engineWebKit)>-1},detectAndroidWebKit:function(){return!!this.detectAndroid()&&!!this.detectWebkit()},detectWindowsMobile:function(){return this.uagent.search(this.deviceWinMob)>-1},detectWindowsPhone:function(){return this.uagent.search(this.deviceWinPhone)>-1},detectBlackBerry:function(){return this.uagent.search(this.deviceBB)>-1},detectPalm:function(){return this.uagent.search(this.devicePalm)>-1},isMobile:function(){return this.detectIPhone()||this.detectIPad()||this.detectIPod()||this.detectAndroid()||this.detectAndroidWebKit()||this.detectWindowsMobile()||this.detectWindowsPhone()||this.detectBlackBerry()},isTouchable:function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}};e.exports=n},function(e,t,n){"use strict";function r(){}function i(e){try{return e.then}catch(e){return g=e,y}}function a(e,t){try{return e(t)}catch(e){return g=e,y}}function o(e,t,n){try{e(t,n)}catch(e){return g=e,y}}function s(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("Promise constructor's argument is not a function");this._h=0,this._i=0,this._j=null,this._k=null,e!==r&&v(e,this)}function l(e,t,n){return new e.constructor(function(i,a){var o=new s(r);o.then(i,a),d(e,new p(t,n,o))})}function d(e,t){for(;3===e._i;)e=e._j;if(s._l&&s._l(e),0===e._i)return 0===e._h?(e._h=1,void(e._k=t)):1===e._h?(e._h=2,void(e._k=[e._k,t])):void e._k.push(t);u(e,t)}function u(e,t){m(function(){var n=1===e._i?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._i?c(t.promise,e._j):f(t.promise,e._j));var r=a(n,e._j);r===y?f(t.promise,g):c(t.promise,r)})}function c(e,t){if(t===e)return f(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var n=i(t);if(n===y)return f(e,g);if(n===e.then&&t instanceof s)return e._i=3,e._j=t,void h(e);if("function"==typeof n)return void v(n.bind(t),e)}e._i=1,e._j=t,h(e)}function f(e,t){e._i=2,e._j=t,s._m&&s._m(e,t),h(e)}function h(e){if(1===e._h&&(d(e,e._k),e._k=null),2===e._h){for(var t=0;t<e._k.length;t++)d(e,e._k[t]);e._k=null}}function p(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function v(e,t){var n=!1,r=o(e,function(e){n||(n=!0,c(t,e))},function(e){n||(n=!0,f(t,e))});n||r!==y||(n=!0,f(t,g))}var m=n(16),g=null,y={};e.exports=s,s._l=null,s._m=null,s._n=r,s.prototype.then=function(e,t){if(this.constructor!==s)return l(this,e,t);var n=new s(r);return d(this,new p(e,t,n)),n}},function(e,t,n){"use strict";function r(){}function i(e){try{return e.then}catch(e){return g=e,y}}function a(e,t){try{return e(t)}catch(e){return g=e,y}}function o(e,t,n){try{e(t,n)}catch(e){return g=e,y}}function s(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("Promise constructor's argument is not a function");this._40=0,this._65=0,this._55=null,this._72=null,e!==r&&v(e,this)}function l(e,t,n){return new e.constructor(function(i,a){var o=new s(r);o.then(i,a),d(e,new p(t,n,o))})}function d(e,t){for(;3===e._65;)e=e._55;if(s._37&&s._37(e),0===e._65)return 0===e._40?(e._40=1,void(e._72=t)):1===e._40?(e._40=2,void(e._72=[e._72,t])):void e._72.push(t);u(e,t)}function u(e,t){m(function(){var n=1===e._65?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._65?c(t.promise,e._55):f(t.promise,e._55));var r=a(n,e._55);r===y?f(t.promise,g):c(t.promise,r)})}function c(e,t){if(t===e)return f(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var n=i(t);if(n===y)return f(e,g);if(n===e.then&&t instanceof s)return e._65=3,e._55=t,void h(e);if("function"==typeof n)return void v(n.bind(t),e)}e._65=1,e._55=t,h(e)}function f(e,t){e._65=2,e._55=t,s._87&&s._87(e,t),h(e)}function h(e){if(1===e._40&&(d(e,e._72),e._72=null),2===e._40){for(var t=0;t<e._72.length;t++)d(e,e._72[t]);e._72=null}}function p(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function v(e,t){var n=!1,r=o(e,function(e){n||(n=!0,c(t,e))},function(e){n||(n=!0,f(t,e))});n||r!==y||(n=!0,f(t,g))}var m=n(16),g=null,y={};e.exports=s,s._37=null,s._87=null,s._61=r,s.prototype.then=function(e,t){if(this.constructor!==s)return l(this,e,t);var n=new s(r);return d(this,new p(e,t,n)),n}},function(e,t,n){"use strict";function r(){}function i(e){try{return e.then}catch(e){return g=e,y}}function a(e,t){try{return e(t)}catch(e){return g=e,y}}function o(e,t,n){try{e(t,n)}catch(e){return g=e,y}}function s(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("Promise constructor's argument is not a function");this._40=0,this._65=0,this._55=null,this._72=null,e!==r&&v(e,this)}function l(e,t,n){return new e.constructor(function(i,a){var o=new s(r);o.then(i,a),d(e,new p(t,n,o))})}function d(e,t){for(;3===e._65;)e=e._55;if(s._37&&s._37(e),0===e._65)return 0===e._40?(e._40=1,void(e._72=t)):1===e._40?(e._40=2,void(e._72=[e._72,t])):void e._72.push(t);u(e,t)}function u(e,t){m(function(){var n=1===e._65?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._65?c(t.promise,e._55):f(t.promise,e._55));var r=a(n,e._55);r===y?f(t.promise,g):c(t.promise,r)})}function c(e,t){if(t===e)return f(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var n=i(t);if(n===y)return f(e,g);if(n===e.then&&t instanceof s)return e._65=3,e._55=t,void h(e);if("function"==typeof n)return void v(n.bind(t),e)}e._65=1,e._55=t,h(e)}function f(e,t){e._65=2,e._55=t,s._87&&s._87(e,t),h(e)}function h(e){if(1===e._40&&(d(e,e._72),e._72=null),2===e._40){for(var t=0;t<e._72.length;t++)d(e,e._72[t]);e._72=null}}function p(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function v(e,t){var n=!1,r=o(e,function(e){n||(n=!0,c(t,e))},function(e){n||(n=!0,f(t,e))});n||r!==y||(n=!0,f(t,g))}var m=n(16),g=null,y={};e.exports=s,s._37=null,s._87=null,s._61=r,s.prototype.then=function(e,t){if(this.constructor!==s)return l(this,e,t);var n=new s(r);return d(this,new p(e,t,n)),n}},function(e,t,n){var r=n(51),i=function(){var e=navigator.language||navigator.browserLanguage,t=e.substr(0,2);return{__:function(e,n){var i="";if(r[e]&&(i=r[e][t]||r[e].en||""),n&&n.length>0&&""!==i){var a=1,o=n.length,s=new RegExp("{param}","g");for(a;a<=o;a++)a>1&&(s=new RegExp("{param"+a+"}","g")),n[a-1]=""+n[a-1],i=i.replace(s,n[a-1].replace(/_/g," "))}return i}}}();e.exports=i.__},function(e,t){var n={vendors:["","webkit","moz","o","ms"],isFullScreen:function(){return document.fullscreen||document.isFullScreen||document.webkitIsFullScreen||document.mozIsFullScreen||window.fullScreen||document.oIsFullScreen||document.msIsFullScreen||!!document.msFullscreenElement},attachOnFullScreenError:function(e,t){for(var r=0,i=n.vendors.length;r<i;++r)e.addEventListener(n.vendors[r]+"fullscreenerror",t);e.addEventListener("MSFullscreenError",t)},attachOnFullScreenChange:function(e,t){for(var r=0,i=n.vendors.length;r<i;++r)e.addEventListener(n.vendors[r]+"fullscreenchange",t);e.addEventListener("MSFullscreenChange",t)},getFullScreenAPI:function(){var e,t,n,r=document,i=r.createElement("video"),a={w3c:["fullscreenEnabled","fullscreenElement","requestFullscreen","exitFullscreen","fullscreenchange","fullscreenerror"],moz:["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],webkit:["","webkitCurrentFullScreenElement","webkitRequestFullScreen","webkitCancelFullScreen","webkitfullscreenchange",""],webkitVideo:["webkitSupportsFullscreen","webkitDisplayingFullscreen","webkitEnterFullscreen","webkitExitFullscreen","",""],ms:["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError"]},o=["w3c","moz","webkit","webkitVideo","ms"];for(e={support:{w3c:!!r[a.w3c[0]],moz:!!r[a.moz[0]],ms:"function"==typeof i[a.ms[2]],webkit:"function"==typeof r[a.webkit[3]],webkitVideo:"function"==typeof i[a.webkitVideo[2]]},used:{},spec:null},t=0,n=o.length;t<n;t++){var s=o[t];if(e.support[s]){e.spec=s,e.used[s]=!0;break}}if(null!==e.spec){var l=a[e.spec];e.api={fullscreenEnabled:!0,fullscreenElement:function(e){return e=e||r,e[l[1]]},requestFullscreen:function(e){return e[l[2]]()},exitFullscreen:function(e){return e=e||r,e[l[3]]()}},e.event={fullscreenchange:l[4],fullscreenerror:l[5]}}else e.api={fullscreenEnabled:!1,fullscreenElement:function(){return null},requestFullscreen:function(){},exitFullscreen:function(){}},e.event={};return e}};e.exports=n},function(e,t){var n={replace:function(e,t){var n=e,r="";for(var i in t)t.hasOwnProperty(i)&&(r=new RegExp("\\["+i+"\\]","gi"),n=n.replace(r,t[i]));return n},replaceTimestamp:function(e){if(null!==e.match("\\[timestamp\\]")){var t=new Date;return e.replace("[timestamp]",t.getTime())}return e},replaceRandom:function(e){if(null!==e.match("\\[random\\]")){for(var t,n=e.split("***"),r=0,i=n.length;r<i;r+=1)t=Math.floor(9e9*Math.random())+1e9,n[r]=n[r].replace(/\[random\]/g,t).replace(/%5Brandom%5D/g,t);return n.join("***")}return e},replaceRnd:function(e){if(null!==e.match("\\[rnd\\]")){for(var t,n=e.split("***"),r=0,i=n.length;r<i;r+=1)t=Math.floor(9e9*Math.random())+1e9,n[r]=n[r].replace(/\[rnd\]/g,t).replace(/%5Brnd%5D/g,t);return n.join("***")}return e},replaceReferrerURL:function(e){return null!==e.match("\\[referrer_url\\]")?e.replace("[referrer_url]",encodeURIComponent(document.location.toString())):e},replaceURL:function(e){return null!==e.match("\\[url\\]")?e.replace("[url]",encodeURIComponent(document.location.toString())):e},replaceDescriptionURL:function(e){return null!==e.match("\\[description_url\\]")?e.replace("[description_url]",encodeURIComponent(document.location.toString())):e},replaceDimensions:function(e,t,n){return null!==e.match("\\[width\\]")&&(e=e.replace("[width]",t)),null!==e.match("\\[height\\]")&&(e=e.replace("[height]",n)),e}};e.exports=n},function(e,t){var n=function(){var e="",t="",n=!1,r=null,i={getAdvState:function(){return t},setAdvState:function(e){t=e},getPlayerState:function(){return e},setPlayerState:function(t){e=t},getAdblockDetectedState:function(){return n},setAdblockDetectedState:function(e){n=e}};return{instance:function(){return null===r&&(r=i),r}}}();e.exports=n.instance()},function(e,t,n){var r=n(26),i=n(81),a={read:function(e){return new i(function(t,n){r(e,function(e,r,i){if(e&&n(e),200!==r.statusCode)return n(new Error(i));t(i)})})}};e.exports=a},function(e,t,n){"use strict";(function(t){function n(e){o.length||(a(),s=!0),o[o.length]=e}function r(){for(;l<o.length;){var e=l;if(l+=1,o[e].call(),l>d){for(var t=0,n=o.length-l;t<n;t++)o[t]=o[t+l];o.length-=l,l=0}}o.length=0,l=0,s=!1}function i(e){return function(){function t(){clearTimeout(n),clearInterval(r),e()}var n=setTimeout(t,0),r=setInterval(t,50)}}e.exports=n;var a,o=[],s=!1,l=0,d=1024,u=void 0!==t?t:self,c=u.MutationObserver||u.WebKitMutationObserver;a="function"==typeof c?function(e){var t=1,n=new c(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}(r):i(r),n.requestFlush=a,n.makeRequestCallFromTimer=i}).call(t,n(27))},function(e,t,n){var r=(n(24),n(0)),i=n(11),a=n(25),o=n(14),s=function(e){if(!e)throw new Error("No initial parameters for AdBlockManager");if(!e.containerEl)throw new Error("A containerEl param is required by AdBlockManager");if(!e.policy)throw new Error("A policy param is required by AdBlockManager");var t={},n=e.containerEl,s=n.getAttribute("data-embed"),l=!1!==e.executeBehaviour,d=!1,u=e.player,c=new r,f=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n])};t.on=function(e,t){return c.on(e,t)},t.off=function(e,t){return c.off(e,t)},t.detected=d;var h={empty:function(){},block_video:function(){f(n,{width:n.getAttribute("data-width")?n.getAttribute("data-width")+"px":"100%",height:n.getAttribute("data-height")?n.getAttribute("data-height")+"px":"100%",color:"#fff",maxWidth:"100%",maxHeight:"100%",textAlign:"center",display:"table-cell",verticalAlign:"middle"}),n.innerHTML='<div class="adblock_message">'+i("adblock_detected_block_video")+"</div>"},black_preroll:function(){var e=document.createElement("div"),t=null,r=15;f(e,{width:"100%",height:"100%",color:"#fff",backgroundColor:"#000",paddingTop:"20%",maxWidth:"100%",maxHeight:"100%",textAlign:"center",boxSizing:"border-box",position:"absolute",top:"0",left:"0",zIndex:"20"}),e.innerHTML='<div class="adblock_message" id="adblock_message_'+s+'">'+i("adblock_detected_timeout",[r])+"</div>",n.appendChild(e),setTimeout(function(){clearInterval(t),e.parentNode.removeChild(e),c.emit("meride.adblock_timeout_ended")},15e3),c.emit("meride.adblock_timeout_started"),t=setInterval(function(){r-=1,e.innerHTML='<div class="adblock_message" id="adblock_message_'+s+'">'+i("adblock_detected_timeout",[r])+"</div>"},1e3)},roll_video:function(){new a({player:u,containerEl:n,ad:e.ad||!1})}},p=function(){d=!0,o.setAdblockDetectedState(!0),c.emit("meride.adblock_detected"),!0===l&&h[e.policy](),e.onAdBlockDetected&&"function"==typeof e.onAdBlockDetected&&e.onAdBlockDetected(h[e.policy])},v=function(){d=!1,o.setAdblockDetectedState(!1),c.emit("meride.adblock_not_detected"),e.onAdBlockNotDetected&&"function"==typeof e.onAdBlockNotDetected&&e.onAdBlockNotDetected()};return"undefined"==typeof blockAdBlock?p():(blockAdBlock.setOption("checkOnLoad",!1),blockAdBlock.onDetected(p),blockAdBlock.onNotDetected(v),blockAdBlock.check(!0)),t};e.exports=s},function(e,t){var n={volumeOnSVG:'<svg width="100%" height="100%" viewBox="0 0 43 43" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <defs> <g id="merideVolumeOn" stroke="#333" stroke-width=".5"> <path d="M2.691,15.437v12.361h7.035l10.534,8.644l0.007-29.654L9.733,15.437H2.691L2.691,15.437z M24.305,14.015 c-0.617-0.608-1.599-0.608-2.217,0.006c-0.608,0.611-0.608,1.603,0.003,2.214v-0.003c1.352,1.354,2.187,3.21,2.187,5.271 c0,2.056-0.832,3.908-2.185,5.257c-0.616,0.614-0.616,1.599-0.003,2.223c0.304,0.306,0.705,0.458,1.106,0.458 c0.404,0,0.815-0.152,1.11-0.458c1.912-1.911,3.099-4.564,3.099-7.477C27.408,18.582,26.216,15.925,24.305,14.015z M27.897,10.425 c-0.618-0.611-1.6-0.611-2.214,0c-0.613,0.611-0.613,1.605,0,2.214c2.271,2.271,3.685,5.396,3.685,8.86 c0,3.465-1.402,6.587-3.683,8.861c-0.619,0.608-0.619,1.599,0,2.214c0.295,0.303,0.706,0.458,1.109,0.458 c0.402,0,0.815-0.155,1.107-0.458c2.835-2.838,4.601-6.758,4.597-11.075C32.49,17.182,30.731,13.253,27.897,10.425z M31.308,7.016 c-0.62-0.611-1.602-0.608-2.212,0.003c-0.614,0.612-0.614,1.603,0.003,2.214h-0.003c3.147,3.144,5.082,7.47,5.082,12.27 c0,4.795-1.935,9.124-5.079,12.268c-0.614,0.614-0.614,1.599,0.003,2.217c0.303,0.296,0.704,0.455,1.107,0.455 c0.4,0,0.802-0.162,1.107-0.459c3.696-3.702,5.999-8.836,5.992-14.48C37.315,15.849,35.013,10.716,31.308,7.016z"/> </g> </defs> <use xlink:href="#merideVolumeOn" class="btn"></use> </svg>',volumeOffSVG:'<svg width="100%" height="100%" viewBox="0 0 43 43" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <defs> <g id="merideVolumeOff" stroke="#333" stroke-width=".5"> <path d="M 3.59375 3.09375 C 3.081875 3.09375 2.5775 3.297 2.1875 3.6875 C 1.4055 4.4685 1.4055 5.719 2.1875 6.5 L 10.5 14.8125 L 9.71875 15.4375 L 2.6875 15.4375 L 2.6875 27.8125 L 9.71875 27.8125 L 20.25 36.4375 L 20.25 24.5625 L 22.25 26.5625 C 22.193716 26.622407 22.15199 26.691933 22.09375 26.75 C 21.47775 27.364 21.48075 28.34475 22.09375 28.96875 C 22.39775 29.27475 22.7865 29.4375 23.1875 29.4375 C 23.5915 29.4375 24.0175 29.27475 24.3125 28.96875 C 24.36977 28.91151 24.412794 28.839808 24.46875 28.78125 L 25.875 30.1875 C 25.814286 30.250578 25.749525 30.313166 25.6875 30.375 C 25.0685 30.983 25.0685 31.9475 25.6875 32.5625 C 25.9825 32.8655 26.37825 33.03125 26.78125 33.03125 C 27.18325 33.03125 27.61425 32.8655 27.90625 32.5625 C 27.964551 32.504137 28.005109 32.434272 28.0625 32.375 L 29.28125 33.59375 C 29.220311 33.656544 29.155631 33.719369 29.09375 33.78125 C 28.47975 34.39525 28.47675 35.382 29.09375 36 C 29.39675 36.296 29.81575 36.4375 30.21875 36.4375 C 30.61875 36.4375 31.0075 36.26575 31.3125 35.96875 C 31.370369 35.910787 31.411567 35.839912 31.46875 35.78125 L 35 39.3125 C 35.391 39.7035 35.89425 39.90625 36.40625 39.90625 C 36.91825 39.90625 37.4225 39.7035 37.8125 39.3125 C 38.5935 38.5315 38.5935 37.281 37.8125 36.5 L 34 32.6875 C 36.094594 29.472446 37.317603 25.614159 37.3125 21.5 C 37.3195 15.845 35.0175 10.73125 31.3125 7.03125 C 30.6925 6.42025 29.70375 6.42025 29.09375 7.03125 C 28.47975 7.64325 28.47675 8.60775 29.09375 9.21875 C 32.24075 12.36275 34.1875 16.7 34.1875 21.5 C 34.1875 24.760609 33.279968 27.802679 31.71875 30.40625 L 30.46875 29.15625 C 31.746209 26.888956 32.502575 24.279092 32.5 21.5 C 32.492 17.183 30.74025 13.2655 27.90625 10.4375 C 27.28825 9.8265 26.3015 9.8265 25.6875 10.4375 C 25.0745 11.0485 25.0745 12.016 25.6875 12.625 C 27.9585 14.896 29.375 18.036 29.375 21.5 C 29.375 23.416735 28.925739 25.22241 28.15625 26.84375 L 26.65625 25.34375 C 27.121908 24.151446 27.40625 22.8527 27.40625 21.5 C 27.40925 18.576 26.2235 15.91 24.3125 14 C 23.6955 13.392 22.71175 13.41725 22.09375 14.03125 C 21.48575 14.64225 21.48275 15.639 22.09375 16.25 C 23.435898 17.602531 24.28125 19.447521 24.28125 21.5 C 24.28125 21.960169 24.23612 22.407372 24.15625 22.84375 L 20.28125 18.96875 L 20.28125 6.78125 L 13.59375 12.28125 L 5 3.6875 C 4.6095 3.297 4.105625 3.09375 3.59375 3.09375 z"/> </g> </defs> <use xlink:href="#merideVolumeOff" class="btn"></use> </svg>',playBtnSVG:'<svg width="100%" height="100%" viewBox="0 0 92 92"><g stroke="#333" stroke-width=".0"><g><circle opacity="0.6" fill="#ffce3e" cx="46" cy="46.002" r="45" /><g><path fill="#FFFFFF" d="M31.455,66.984c0,1.422,1.021,2.037,2.273,1.355L72.7,47.232c1.249-0.676,1.249-1.779,0-2.463L33.729,23.658c-1.252-0.678-2.273-0.064-2.273,1.355V66.984z"/></g></g></svg>'};e.exports=n},function(e,t,n){"use strict";function r(){if(l.length)throw l.shift()}function i(e){var t;t=s.length?s.pop():new a,t.task=e,o(t)}function a(){this.task=null}var o=n(16),s=[],l=[],d=o.makeRequestCallFromTimer(r);e.exports=i,a.prototype.call=function(){try{this.task.call()}catch(e){i.onerror?i.onerror(e):(l.push(e),d())}finally{this.task=null,s[s.length]=this}}},function(e,t){var n=n||{};e.exports=n},function(e,t){e.exports={baseURL:"{BASE_URL}",proxyURL:"{PROXY_URL}",tokenServiceURL:"{TOKEN_SERVICE_URL}"}},function(e,t,n){var r=n(23),i=n(7),a=n(4),o=n(42),s=n(1),l=n(43),d=n(44),u=n(45),c=n(46),f=n(47),h=n(48),p=n(49),v=n(0),m=n(50),g=n(52),y=n(53),E=n(6),b=n(55),T=n(25),w=n(64),S=n(65),A=n(28),L=n(17),k=n(66),C=n(70),_=n(71),D=n(72),R=n(73),I=(n(24),n(5).applyStyles),x=n(14),O=n(11);n(74);var M=function(e){var t={},n=meride.embed.Embed,M=meride.adv.AdLoader,B=meride.player.Player,N=new v,P={},F={},U=null;t.destroy=function(){try{U.destroy()}catch(e){F.embedElement&&(F.embedElement.innerHTML="")}},t.on=function(e,t){return N.on(e,t)},t.off=function(e,t){return N.off(e,t)};var j=function(e){if(!e)throw new Error("No parameter passed to initEmbed. At least embedID required");if(!e.embedID)throw new Error("embedID is a required parameter");var t=e.embedID,v=e.embedElement,F=v.getAttribute("data-customer"),j=i.isMobile(),V=parseInt(v.getAttribute("data-width"),10),H=parseInt(v.getAttribute("data-height"),10),q=e.embed||null;null===q&&(q=new n({embedID:t,clientID:F,device:j?"mobile":"desktop",videoFormat:j?"m3u8":"f4m",bulkLabel:bulkLabel}));var G=function(n){var F,G,K,W,z,Y,X,Q={url:"",type:"",link:"",settingVolume:"-1"},J={url:"",type:"",link:"",settingVolume:"-1"},$=[],Z=n.getElementsByTagName("embed")[0],ee=!0===e.advPrefetch,te=!1!==e.showPauseBtnOnMouseOver,ne=e.type||(j?"html5":"flash"),re=e.advSuffix?e.advSuffix:null!==v.getAttribute("data-adv-suffix")?v.getAttribute("data-adv-suffix"):"",ie=e.srcSuffix?e.srcSuffix:null!==v.getAttribute("data-src-suffix")?v.getAttribute("data-src-suffix"):"",ae=e.titlePrefix||"",oe=e.advManager||null,se=e.skin||null,le=e.videoFormat||{},de=e.ima||{},ue=de.vpaidMode||null,ce=e.bulkLabel?e.bulkLabel||"NO_LABEL":v.getAttribute("data-bulk-label")||"NO_LABEL",fe=function(){try{return window.MediaSource&&"function"==typeof window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')}catch(e){return!1}}(),he=e.hls||null,pe=!1!==e.allowM3u8OnDesktop,ve=!1!==e.enableFullscreen,me=q.getOverlay("primary"),ge=q.getOverlay("initial"),ye=q.getPoster(),Ee=ae+n.getElementsByTagName("title")[0].firstChild.data,be=q.getVideo()+ie,Te=q.getAnalytic("meride"),we=null,Se=""===Z.getAttribute("wmode")&&null===Z.getAttribute("wmode")?Z.getAttribute("wmode"):"direct",Ae=e.defaultVolume||1,Le="true"===Z.getAttribute("autoplay"),ke="true"===Z.getAttribute("pip"),Ce="true"===Z.getAttribute("preload"),_e=Z.getAttribute("player-color")?Z.getAttribute("player-color"):null,De="true"===Z.getAttribute("responsive"),Re="true"===Z.getAttribute("mute"),Ie="false"!==Z.getAttribute("controlbar-auto-hide"),xe=Z.getAttribute("controlbarmode"),Oe="html5"===Z.getAttribute("desktop-player"),Me="false"!==Z.getAttribute("seekable"),Be="true"===Z.getAttribute("crop"),Ne=v.getAttribute("data-background-image")||Z.getAttribute("background-image"),Pe=v.getAttribute("data-background-color")||Z.getAttribute("background-color"),Fe=q.getAnalytic("ama"),Ue=null,je=e.scrollMode||{},Ve=q.getWatermark(),He=!1,qe=q.getAnalytic("comscore"),Ge=q.getAnalytic("nielsen"),Ke=q.getAnalytic("webtrekk"),We=Z.getElementsByTagName("video")[0],ze=["default","ima","freewheel"],Ye=!1,Xe=null,Qe="true"===v.getAttribute("data-360"),Je=!1,$e=y(navigator.userAgent),Ze=q.getVideoProvider(),et=!0===We.getAttribute("live")||"true"===We.getAttribute("live"),tt=new A({containerEl:v}),nt="true"===v.getAttribute("data-loop");null===oe&&-1!==ze.indexOf(Z.getAttribute("player-adv-manager"))&&(oe=Z.getAttribute("player-adv-manager")),ue=null===ue&&void 0!==Z.getAttribute("ima-vpaid-mode")?Z.getAttribute("ima-vpaid-mode"):ue,"ENABLED"!==ue&&"INSECURE"!==ue&&"DISABLED"!==ue&&(ue="ENABLED"),0===e.defaultVolume&&(Ae=0),!0!==Oe||e.type||(ne="html5"),e.bulkLabel||v.getAttribute("data-bulk-label")||null===Z.getAttribute("bulk-selected-label")||(ce=Z.getAttribute("bulk-selected-label")),void 0!==e.is360&&(Qe=e.is360),void 0!==e.loop&&(nt=e.loop);var rt=function(e){var t,n,r,i=e.split(":");return 3!==i.length?0:(t=parseInt(i[2],10),n=parseInt(i[1],10),r=parseInt(i[0],10),t+60*n+3600*r)},it=function(e,t){var r=!0===t?e.url:e.url.split("***")[0],i={url:decodeURIComponent(r),type:e.type,link:e.link,settingVolume:e.settingVolume};if("video"===i.type){var a=n.getElementsByTagName("preroll")[0];"akamai_adaptive_media_delivery"===n.getElementsByTagName("video")[0].getAttribute("caching_type")&&(i.url=a.getElementsByTagName("iphone")[0].firstChild.data)}return i},at=function(e,t){return e.timeSetting===t.timeSetting?0:e.timeSetting<t.timeSetting?-1:1};if(void 0!==e.wmode&&(Se=e.wmode),null!==v.getAttribute("data-autoplay")&&(Le="true"===v.getAttribute("data-autoplay")),void 0!==e.autoPlay&&(Le=e.autoPlay),null!==v.getAttribute("data-pip")&&(ke="true"===v.getAttribute("data-pip")),void 0!==e.pip&&(ke=e.pip),null!==v.getAttribute("data-video-preload")&&(Ce="true"===v.getAttribute("data-video-preload")),"metadata"!==e.preload&&"auto"!==e.preload||!e.hls||!0!==e.hls.autoStartLoad||(Ce=!0),null!==v.getAttribute("data-player-color")&&(_e=v.getAttribute("data-player-color")),void 0!==e.defaultColor&&(_e=e.defaultColor),!0===e.crop&&(Be=!0),null!==v.getAttribute("data-responsive")&&(De="true"===v.getAttribute("data-responsive")),void 0!==e.responsive&&(De=!1!==e.responsive),null!==v.getAttribute("data-muted")&&(Re="true"===v.getAttribute("data-muted")),void 0!==e.muted&&(Re=e.muted),I(v,{width:V+"px",height:H+"px"}),F=q.getPrerolls(),F.length>0)if("flash"===ne){X=F[0];for(var ot=1,st=F.length;ot<st;ot+=1)X.url+="||"+F[ot].url;Q=it(X,!0)}else X=F.splice(0,1)[0],Q=it(X,"ima"!==oe);if($=q.getMidrolls(),G=q.getEndrolls(),G.length>0&&(J=it(G[0],"html5"!==ne)),Te.staturl&&"akamai_log"===Te.tecnology&&(we=new m({baseURL:Te.staturl,embed:q,playerType:ne,playerContainer:v,videoSrc:be,bulkLabel:ce,advManager:""!==Q.url?oe:"",isLive:et}),we.init()),"html5"!==ne&&!1===o.installed?ne="html5":"html5"===ne&&!0===o.installed&&!0!==fe&&(ne="flash"),"html5"===ne){j?((void 0===le.html5||"m3u8"!==le.html5&&"mp4"!==le.html5)&&(le.html5="m3u8"),!0===i.detectWindowsPhone()&&(le.html5="mp4"),!0===Qe&&!0===i.detectIPhone()&&-1!==$e.browser.name.indexOf("Safari")&&(le.html5="mp4")):le.html5?!1===pe&&(le.html5="mp4"):le.html5=fe&&!1!==pe?"m3u8":"mp4";var lt=be.match(/\.mpd$|\.mpd\?+/i);lt=null!==lt,lt||(be=q.getVideo(le.html5)),null!==be.match(/\.mp4$/)&&(le.html5="mp4"),be+=ie;var dt={src:be,container:v,width:V,height:H,autoPlay:Le,showVolumeBar:!1!==e.showVolumeBar,clickableVideo:!0===e.clickableVideo,dblClickFullscreen:!1!==e.dblClickFullscreen,loop:!0===nt,muted:!0===Re,preload:e.preload||"metadata",isLive:et&&"dvr"!==Ze,volume:Ae,defaultColor:_e||null,enableSeek:!1!==Me,cbAutoHide:Ie,decodeURL:!1!==e.decodeURL,skin:null!==se?se:null,enableFullscreen:ve,showPauseBtnOnMouseOver:te,loadDefaultFonts:!1!==e.loadDefaultFonts,pip:ke};if(lt&&(dt.dash=e.dash||{}),Ve.logoURL&&(dt.watermark=function(){return Ve.right.length>0&&-1===Ve.right.indexOf("%")&&(Ve.right=parseInt(Ve.right,10)),Ve.top.length>0&&-1===Ve.top.indexOf("%")&&(Ve.top=parseInt(Ve.top,10)),Ve.left.length>0&&-1===Ve.left.indexOf("%")&&(Ve.left=parseInt(Ve.left,10)),Ve.bottom.length>0&&-1===Ve.bottom.indexOf("%")&&(Ve.bottom=parseInt(Ve.bottom,10)),Ve.displayTime.length>0&&(Ve.displayTime=1e3*parseInt(Ve.displayTime,10)),Ve}()),Q&&""!==Q.url&&!0===Le&&"ima"===oe&&(dt.autoPlay=!1),"freewheel"===oe&&(!0===e.autoPlay&&(e.freewheel.prerollAtTime||e.freewheel.prerollDelay)?dt.autoPlay=!0:dt.autoPlay=!1),dt.hlsOpts={maxBufferLength:8,maxMaxBufferLength:8},he&&(void 0!==he.capLevelToPlayerSize&&(dt.hlsOpts.capLevelToPlayerSize=he.capLevelToPlayerSize),void 0!==he.startLevel&&(dt.hlsOpts.startLevel=he.startLevel,dt.hlsOpts.capLevelToPlayerSize=!1),void 0!==he.loadLevel&&(dt.hlsOpts.loadLevel=he.loadLevel),void 0!==he.autoLevelCapping&&(dt.hlsOpts.autoLevelCapping=he.autoLevelCapping),!1===he.enableWebVTT&&(dt.hlsOpts.enableWebVTT=!1),!1===he.enableCEA708Captions&&(dt.hlsOpts.enableCEA708Captions=!1),!1===he.enableWorker&&(dt.hlsOpts.enableWorker=!1),!0===he.emeEnabled&&(dt.hlsOpts.emeEnabled=!0),void 0!==he.autoStartLoad&&(dt.hlsOpts.autoStartLoad=he.autoStartLoad),void 0!==he.widevineLicenseUrl&&(dt.hlsOpts.widevineLicenseUrl=he.widevineLicenseUrl),void 0!==he.fairplayLicenseUrl&&(dt.hlsOpts.fairplayLicenseUrl=he.fairplayLicenseUrl),void 0!==he.fairplaySPCUrl&&(dt.hlsOpts.fairplaySPCUrl=he.fairplaySPCUrl),void 0!==he.debug&&(dt.hlsOpts.debug=he.debug),void 0!==he.xhrSetup&&"function"==typeof he.xhrSetup&&(dt.hlsOpts.xhrSetup=he.xhrSetup)),"freewheel"!==oe&&(dt.controls=["keyboard"]),!0===Qe&&(dt.is360=!0,dt.config360={},"true"===v.getAttribute("data-360")&&("true"===v.getAttribute("data-360-vrmode")&&(dt.config360.vrModeUI=!0),"false"===v.getAttribute("data-360-embedded")&&(dt.config360.embedded=!1)),!0===e.is360&&(dt.config360=e.config360),dt.config360.scriptURL=r.BASE_URL+"scripts/vr/aframe.0.9.2.min.js","xr"in window.navigator&&(navigator.xr.requestDevice=navigator.xr.requestDevice||function(){return new Promise(function(e,t){e({supportsSession:new Promise(function(e,t){e({immersive:!0,exclusive:!0})})})})})),!1===Ce?(dt.preload="none",dt.hlsOpts.autoStartLoad=!1):"none"===dt.preload&&!1===dt.hlsOpts.autoStartLoad&&(Ce=!1),U=new B(dt),Fe.beacon&&""!==Fe.beacon&&null===Ue){var ut={akamaiVars:{title:encodeURIComponent(Ee),category:document.domain,deliveryType:"O",device:$e.os.name+" "+$e.os.version+" "+$e.device.model},configUrl:Fe.beacon,embedID:t,prerollURL:Q.url,embDiv:v,player:U};Ue=new p(ut)}if(ye&&new S({container:v,video:U.video,src:ye}),!0===Re&&U.video.setAttribute("muted","muted"),("hidden"===xe||"hidden"===e.controlbarMode&&"visible"!==e.controlbarMode)&&U.disableControlBar(),"visible"===e.controlbarMode&&U.enableControlBar(),H>=V){new R({container:v,player:U,crop:Be})}!0===Be&&(I(U.video,{"object-fit":"cover"}),I(v,{overflow:"hidden"})),U.on("meride.enterfullscreen",function(){E.emit(s.ENTER_FULLSCREEN,v)}),U.on("meride.exitfullscreen",function(){E.emit(s.EXIT_FULLSCREEN,v)}),U.on("meride.manifest_parsed",function(){E.emit(s.MANIFEST_PARSED,v),!0===et&&U.video.dispatchEvent(new Event("canplay"))}),U.on("meride.hlsobject_error",function(e){if(e.arguments){var t=e.arguments[1]||{};!0===t.fatal&&(tt.init(),tt.show(O("fatal_error")),E.emit(s.ERROR,v,{error:t}))}}),U.video.addEventListener("error",function(e){if(E.emit(s.ERROR,v,{error:{details:"generic_error"}}),!0===fe&&"m3u8"===le.html5&&null!==U.hls)try{var t=function(){U.hls.off(Hls.Events.MEDIA_ATTACHED,t),U.hls.loadSource(be),U.hls.on(Hls.Events.MANIFEST_PARSED,function(e,t){U.hls.startLoad(0),U.video.play().catch(function(e){})})},n=function(){U.hls.off(Hls.Events.MEDIA_DETACHED,n),U.hls.on(Hls.Events.MEDIA_ATTACHED,t),U.hls.attachMedia(U.video)};U.video.src="",U.hls.detachMedia(U.video),U.hls.on(Hls.Events.MEDIA_DETACHED,n)}catch(e){}}),U.video.addEventListener("stalled",function(e){}),U.video.addEventListener("loadedmetadata",function(e){E.emit(s.LOADEDMETADATA,v,{player:U.video})}),U.video.addEventListener("playing",function(e){tt.reset(),U.video.src!==Q.url&&U.video.src!==J.url&&E.emit(s.PLAY,v)}),U.video.addEventListener("pause",function(e){U.video.src!==Q.url&&U.video.src!==J.url&&E.emit(s.PAUSE,v)}),U.video.addEventListener("ended",function(e){U.video.src!==be&&null===U.video.src.match(/^blob:/)||E.emit(s.ENDED,v)});var ct=function(e){setTimeout(function(){Xe=U.video.getAttribute("data-meride-adv"),!isNaN(U.video.duration)&&U.video.duration>0&&!1===Ye&&"started"!==Xe&&!U.video.paused&&!1===Je&&(Je=!0,U.video.removeEventListener("durationchange",ct),E.emit(s.PLAY_CONTENT,v))},500)},ft=function(){!1===Ce&&U.load()};if(U.container.addEventListener(Meride.EventType.AD_STARTED,function(){Ye=!0},!1),U.container.addEventListener(Meride.EventType.AD_ENDED,function(){Ye=!1},!1),U.container.addEventListener(Meride.EventType.AD_ERROR,function(){Ye=!1},!1),U.container.addEventListener(Meride.EventType.ADBLOCK_DETECTED,function(){ft()},!1),W=new L({ad:K,containerEl:v,policy:"empty",player:U,onAdBlockDetected:function(e){E.emit(s.ADBLOCK_DETECTED,v)},onAdBlockNotDetected:function(){}}),U.video.addEventListener("durationchange",ct,!1),U.video.addEventListener("play",ct,!1),N.emit("meride.video_rendered"),Ne&&I(v,{backgroundImage:"url('"+Ne+"')",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}),Pe&&I(v,{backgroundColor:Pe}),E.emit(s.READY,v,{player:U.video,title:Ee,poster:ye}),!0===De){new g(U.video,v,{responsiveVertical:!0===e.responsiveVertical})}else v.style.maxWidth="none";var ht=function(){if(Ge.clientid&&""!==Ge.clientid){Ge.title=Ee,Ge.src=U.video.src;var t=!1,n=null;e.analytics&&e.analytics.nielsen&&(e.analytics.nielsen.vcid&&(Ge.vcid=e.analytics.nielsen.vcid),e.analytics.nielsen.title&&"string"==typeof e.analytics.nielsen.title&&(Ge.title=e.analytics.nielsen.title),!0===e.analytics.nielsen.sdk&&(t=!0,e.analytics.nielsen.appid&&(Ge.appid=e.analytics.nielsen.appid),!0===e.analytics.nielsen.sdkdebug&&(Ge.sdkdebug="debug"))),!0===t?(n=new u({params:Ge,player:U,containerEl:v,type:"html5",isLive:et,hls:U.hls}),n.init()):(n=new d({params:Ge,player:U,type:"html5"}),n.init())}},pt=function(){if(Ke.trackId&&""!==Ke.trackId&&Ke.trackDomain&&""!==Ke.trackDomain){Ke.title=Ee,Ke.isLive=et,Ke.player=U,Ke.advManager=""!==Q.url?oe:"",Ke.playerContainer=v,Ke.autoPlay=Le,v.getAttribute("data-webtrekk-mg")&&(Ke.mg=v.getAttribute("data-webtrekk-mg")),v.getAttribute("data-webtrekk-title")&&(Ke.title=ae+v.getAttribute("data-webtrekk-title")),e.webtrekk&&(e.webtrekk.mg&&(Ke.mg=e.webtrekk.mg),e.webtrekk.title&&(Ke.title=ae+e.webtrekk.title)),Ke.scriptURL=r.BASE_URL+"scripts/webtrekk/webtrekk_tracking.js";new f(Ke).init()}},vt=function(){if(qe.user&&""!==qe.user){qe.title=Ee;new c({params:qe}).init()}},mt=!(""===ge.url&&""===me.url&&""===Q.url&&""===J.url&&0===$.length);if(!0===mt&&"video"===Q.type){new T({player:U,containerEl:v,ad:q.getRollVideo(),originalSrc:be,disableControlBar:"hidden"===xe||"hidden"===e.controlbarMode&&"visible"!==e.controlbarMode})}!0===mt&&"black_preroll"===P.policy&&v.addEventListener(Meride.EventType.AD_ERROR,function(){W=new L({containerEl:v,policy:P.policy,executeBehaviour:!1,onAdBlockDetected:function(e){He=!0,U.video.pause(),W.on("meride.adblock_timeout_ended",function(){U.video.play()}),e()},onAdBlockNotDetected:function(){}})},!1);var gt=function(){null!==U.watermark&&U.watermark.show()},yt=function(){null!==U.watermark&&U.watermark.hide()};if(!0===mt&&null!==U.watermark&&U.watermark.hide(),v.addEventListener(Meride.EventType.AD_ERROR,function(){U.video.removeAttribute("data-meride-adv"),gt()},!1),v.addEventListener(Meride.EventType.PLAY_CONTENT,function(){setTimeout(function(){"started"!==U.video.getAttribute("data-meride-adv")&&gt(),"hidden"===xe||"hidden"===e.controlbarMode&&"visible"!==e.controlbarMode||(v.querySelector(".md-progressBar").style.display="block")},1e3)},!1),v.addEventListener(Meride.EventType.AD_EMPTY,function(){U.video.removeAttribute("data-meride-adv"),gt()},!1),v.addEventListener(Meride.EventType.ROLLVIDEO_ENDED,function(){U.video.removeAttribute("data-meride-adv")},!1),"freewheel"!==oe&&v.addEventListener(Meride.EventType.AD_ENDED,function(){U.video.removeAttribute("data-meride-adv")},!1),v.addEventListener(Meride.EventType.AD_ENDED,function(){gt()},!1),v.addEventListener(Meride.EventType.AD_STARTED,function(){U.video.setAttribute("data-meride-adv","started"),(!e.watermark||e.watermark&&!1!==e.watermark.hideOnAdv)&&yt()},!1),v.addEventListener(Meride.EventType.ROLLVIDEO_STARTED,function(){U.video.setAttribute("data-meride-adv","started")},!1),v.addEventListener(Meride.EventType.PLAY,function(){"started"!==U.video.getAttribute("data-meride-adv")&&!0===Me&&U.enableSeek(),U.video.removeAttribute("data-meride-adv")},!1),"freewheel"===oe){var Et=function(){var t=e.freewheel||{};t.player=U,t.hideControls=!1!==t.hideControls,t.originalSource=be,t.playBtns=[v.querySelector(".playBtn"),v.querySelector(".playSmallBtn")],t.autoPlay=Le,U.video.autoplay=!1,t.hlsOpts=he;var n=!1;try{var r=new C(t);n=!0}catch(e){U.video.autoplay=Le}!0===n&&(r.on("meride.freewheel_requestcomplete",function(){!0===Le&&(U.video.setAttribute("autoplay","true"),setTimeout(function(){r.play()},500))}),r.init(),r.on("meride.freewheel_loaded",function(){(new _({freewheel:r,containerEl:v}).init(),!0===t.hideControls)&&new D({freewheel:r,containerEl:v,autoPlay:Le,showCountdown:!0===t.showCountdown}).init();r.requestAds()}),r.on("meride.freewheel_slot_ended",function(){U.video.removeAttribute("data-meride-adv")}),r.on("meride.freewheel_current_context_change",function(e){E.emit(s.ADS_MANAGER_READY,v,{adsManager:e.arguments[0]})}))},bt=null,Tt=function(){v.removeEventListener(s.AD_ERROR,Tt),v.removeEventListener(s.AD_ENDED,Tt),v.removeEventListener(s.AD_STARTED,Tt),v.removeEventListener(s.AD_REQUEST_COMPLETE,Tt),null!==bt&&bt.reset()},wt=null,St=e.freewheel.prerollDelay,At=function(){e.freewheel.prerollAtTime=parseInt(e.freewheel.prerollAtTime||0,10),e.freewheel.prerollDelay=parseInt(e.freewheel.prerollDelay||0,10);var t=function(){v.removeEventListener(s.PLAY_CONTENT,t),wt=setInterval(function(){if(3===(St-=1)&&!0===e.freewheel.showCountdown){bt=new A({containerEl:v}),bt.init(),bt.show(O("view_video_pre_countdown"))}0===St&&(clearInterval(wt),wt=null,Et())},1e3)},n=0,r=function(){U.video.currentTime>1&&(n=U.video.currentTime),e.freewheel.prerollAtTime&&U.video.currentTime>e.freewheel.prerollAtTime&&Et()},i=function(){U.video.removeEventListener("timeupdate",r)},a=function(){var e=function(){""!==x.getAdvState()&&x.getAdvState()!==s.AD_ENDED&&x.getAdvState()!==s.PLAY_CONTENT||(U.video.removeEventListener("playing",e),U.video.currentTime=n)};v.removeEventListener(s.AD_ERROR,a),v.removeEventListener(s.AD_ENDED,a),U.video.removeEventListener("timeupdate",r),U.video.addEventListener("playing",e,!1)};e.freewheel.prerollDelay&&v.addEventListener(s.PLAY_CONTENT,t,!1),e.freewheel.prerollDelay&&v.addEventListener(s.PLAY_CONTENT,t,!1),U.video.addEventListener("timeupdate",r,!1),v.addEventListener(s.AD_ERROR,a,!1),v.addEventListener(s.AD_ENDED,a,!1),v.addEventListener(s.AD_EMPTY,a,!1),v.addEventListener(s.AD_STARTED,i,!1)};if(W=new L({containerEl:v,policy:"empty",onAdBlockDetected:function(e){},onAdBlockNotDetected:function(){if(e.freewheel.prerollAtTime||e.freewheel.prerollDelay){if(At(),e.freewheel.prerollAtTime){var t=parseInt(e.freewheel.prerollAtTime,10),n=function(){t-U.video.currentTime<=3&&(U.video.removeEventListener("timeupdate",n),bt=new A({containerEl:v}),bt.show(O("view_video_pre_countdown")))};U.video.addEventListener("timeupdate",n,!1)}v.addEventListener(s.AD_ERROR,Tt,!1),v.addEventListener(s.AD_ENDED,Tt,!1),v.addEventListener(s.AD_STARTED,Tt,!1),v.addEventListener(s.AD_REQUEST_COMPLETE,Tt,!1)}else Et()}}),Fe.beacon&&""!==Fe.beacon&&null===Ue){var ut={akamaiVars:{title:encodeURIComponent(Ee),category:document.domain,deliveryType:"O",device:$e.os.name+" "+$e.os.version+" "+$e.device.model},configUrl:Fe.beacon,embedID:t,prerollURL:Q.url,embDiv:v,player:U};Ue=new p(ut)}qe.user&&""!==qe.user&&vt(),Ke.trackId&&""!==Ke.trackId&&Ke.trackDomain&&""!==Ke.trackDomain&&pt(),ht()}else if("ima"===oe&&!0===mt){var Lt=function(){var e={debug:!0===de.debug,width:U.video.offsetWidth,height:U.video.offsetHeight,videoID:t,player:U,container:v,originSrc:be,autoPlay:!0===Le,sources:[{type:"video/mp4",src:U.video.src}],settingVolume:Q.settingVolume,vpaidMode:ue,advPrefetch:ee,muted:!0===Le,videoPreload:Ce,playerOptions:dt};if(de.loadVideoTimeout&&(e.loadVideoTimeout=de.loadVideoTimeout),de.locale&&(e.locale=de.locale),!1===de.loadVideoAfterPreroll&&(e.loadVideoAfterPreroll=!1),Q&&Q.url&&(e.preroll=Q.url+re),""!==J.url&&(e.postroll=J.url+decodeURIComponent(re)),""!==ge.url&&(e.overlayInitial=decodeURIComponent(ge.url),e.overlayInitialAfterTime=ge.afterTime>8?1e3*ge.afterTime:1e3*ge.afterTime+1e3*(8-ge.afterTime),e.overlayInitialShowTime=1e3*ge.stayTime),""!==me.url&&(e.overlay=decodeURIComponent(me.url),e.overlayFixed="0"!==me.fixed,e.overlayAfterTime=1e3*me.afterTime,!1===e.overlayFixed&&(e.overlayShowTime=me.stayTime>8?1e3*me.stayTime:1e3*me.stayTime+1e3*(8-me.stayTime),e.overlayUpdateTime=1e3*me.delayTime,e.overlayMaxWidth=me.maxDimensionWidth,e.overlayMaxHeight=me.maxDimensionHeight)),Fe.beacon&&""!==Fe.beacon&&null===Ue){var n={akamaiVars:{title:encodeURIComponent(Ee),category:document.domain,deliveryType:"O",device:$e.os.name+" "+$e.os.version+" "+$e.device.model},configUrl:Fe.beacon,embedID:t,prerollURL:Q.url,embDiv:v,player:U};Ue=new p(n)}vt(),pt(),ht(),!0===fe&&"m3u8"===le.html5&&(e.hlsObj=U.hls),e.scrollMode=je,e.midrolls=$,e.isHlsSupported=fe,e.preload=dt.preload,e.hlsAutoStartLoad=dt.hlsOpts.autoStartLoad,e.dashOpts=dt.dash;var r=function(){v.removeEventListener(s.READY,r),Y=new k(e),Y.on("meride.imascript_loaded",function(){N.emit("meride.imascript_loaded",{googleIMA:Y})}),Y.on("meride.ima_main_play_clicked",function(){E.emit(s.MAIN_PLAY_CLICKED,v)})};if(null===se)r();else{var i=null,a=10;i=setInterval(function(){0===a&&(clearInterval(i),i=null);try{null!==v.querySelector(".playBtn")&&(clearInterval(i),i=null,r())}catch(e){}a-=1},100)}};"roll_video"===P.policy?(K=q.getRollVideoAdBlock(),W=new L({ad:K,containerEl:v,policy:P.policy,player:U,executeBehaviour:!1,onAdBlockDetected:function(e){var t=function(){v.removeEventListener(s.AD_ERROR,t,!1),e()};v.addEventListener(s.AD_ERROR,t,!1),Lt()},onAdBlockNotDetected:function(){Lt()}})):Lt()}else if("default"===oe){"roll_video"===P.policy&&(K=q.getRollVideoAdBlock(),W=new L({ad:K,containerEl:v,policy:P.policy,player:U,onAdBlockDetected:function(e){},onAdBlockNotDetected:function(){}}));var kt=function(){try{U.video.removeEventListener("play",kt)}catch(e){}if(me&&""!==me.url){var e=function(){new w({loader:new M({ads:[{uri:me.url+re}],videoEl:U.video}),data:me,videoEl:U.video,containerEl:v,onLoad:function(e){e.render()},onAdEnded:function(){me.delayTime&&""!==me.delayTime&&setTimeout(e,1e3*parseInt(me.delayTime,10))}})};me.afterTime&&""!==me.afterTime?(setTimeout(e,1e3*parseInt(me.afterTime,10)),me.afterTime=""):e()}},Ct=function(){new w({loader:new M({ads:[{uri:ge.url+re}],videoEl:U.video}),data:ge,videoEl:U.video,containerEl:v,onLoad:function(e){e.render()},onAdEnded:kt})};if(""===Q.url&&(ge&&""!==ge.url&&Ct(),!me||""===me.url||ge&&""!==ge.url||U.video.addEventListener("play",kt)),""!==Q.url&&"dart"===Q.type){var _t=!1,Dt=new b({containerEl:v,player:U,useAdWaterfall:!0,originSrc:be,rolls:q.getPrerolls(),advSuffix:re,adBlock:P,autoPlay:Le}),Rt=function(e){if(Dt.off("meride.rollvastended",Rt),ht(),ge&&""!==ge.url&&Ct(),!me||""===me.url||ge&&""!==ge.url||kt(),!0===fe&&"m3u8"===le.html5){var t=v.querySelector(".qualityContainer");t&&(t.style.display="table-cell")}},It=function(e){if(Dt.off("meride.rollvasterror",It),ht(),U.video.display="block",!0===fe&&"m3u8"===le.html5){var t=v.querySelector(".qualityContainer");t&&(t.style.display="table-cell")}U.video.play(),_t=!0},xt=function(e){if(Dt.off("meride.rollvastready",xt),!0===fe&&"m3u8"===le.html5){U.hls.stopLoad();var n=v.querySelector(".qualityContainer");n&&(n.style.display="none")}if(qe.user&&""!==qe.user){new h({user:qe.user,playerID:t,player:U,renderer:e.arguments[0].renderer}).init()}};Dt.on("meride.rollvastready",xt),Dt.on("meride.rollvasterror",It),Dt.on("meride.rollvastended",Rt),!1===ee?U.on("meride.first_play",function(){U.video.pause(),Dt.loadRoll({autoPlay:!0})}):Dt.loadRoll({autoPlay:Le})}if($.length>0){for(var Ot=0,Mt=$.length;Ot<Mt;Ot+=1)$[Ot].timeSetting=rt($[Ot].timeSetting);$=$.sort(at),z=$.shift();var Bt=function(){U.video.removeEventListener("playing",Bt),U.video.currentTime=z.timeSetting;var e=setInterval(function(){U.video.currentTime<z.timeSetting?U.video.currentTime=z.timeSetting:clearInterval(e)},20),t=function(){U.video.removeEventListener("playing",t),z=$.shift(),U.video.addEventListener("timeupdate",Vt)};U.video.addEventListener("playing",t,!1)},Nt=null,Pt=function(e){if(Nt.off("meride.rollvastended",Pt),!0===fe&&"m3u8"===le.html5){var t=v.querySelector(".qualityContainer");t&&(t.style.display="table-cell")}},Ft=function(e){if(Nt.off("meride.rollvasterror",Ft),U.video.display="block",!0===fe&&"m3u8"===le.html5){var t=v.querySelector(".qualityContainer");t&&(t.style.display="table-cell")}},Ut=function(e){if(Nt.off("meride.rollvastready",Ut),!0===fe&&"m3u8"===le.html5){U.hls.stopLoad();var t=v.querySelector(".qualityContainer");t&&(t.style.display="none")}},jt=function(e){Nt.off("meride.rollvastended",jt),U.video.addEventListener("playing",Bt,!1)},Vt=function(){U.video.currentTime>z.timeSetting&&(U.video.removeEventListener("timeupdate",Vt),midrollPlaying=!0,Nt=new b({containerEl:v,player:U,useAdWaterfall:!0,originSrc:be,rolls:z.rolls,advSuffix:re,adBlock:P,autoPlay:!0}),Nt.on("meride.rollvastready",Ut),Nt.on("meride.rollvasterror",Ft),Nt.on("meride.rollvastended",Pt),Nt.on("meride.rollvastended",jt),Nt.loadRoll())},Ht=function(){try{v.removeEventListener(s.PLAY,Ht),v.removeEventListener(s.AD_ENDED,Ht),v.removeEventListener(s.AD_ERROR,Ht)}catch(e){}U.video.addEventListener("timeupdate",Vt)};""===Q.url?v.addEventListener(s.PLAY,Ht,!1):(v.addEventListener(s.AD_ENDED,Ht,!1),v.addEventListener(s.AD_ERROR,Ht,!1))}if(J.url&&""!==J.url){var qt=function(){v.removeEventListener(s.ENDED,qt);var e=new b({containerEl:v,player:U,useAdWaterfall:!0,originSrc:be,rolls:G,advSuffix:re,adBlock:P,autoPlay:!1}),t=function(n){if(e.off("meride.rollvastended",t),!0===fe&&"m3u8"===le.html5){var r=v.querySelector(".qualityContainer");r&&(r.style.display="table-cell")}var i=function(){U.video.removeEventListener("playing",i),U.video.pause()};U.video.addEventListener("playing",i,!1)},n=function(t){if(e.off("meride.rollvasterror",n),U.video.display="block",!0===fe&&"m3u8"===le.html5){var r=v.querySelector(".qualityContainer");r&&(r.style.display="table-cell")}},r=function(t){if(e.off("meride.rollvastready",r),!0===fe&&"m3u8"===le.html5){U.hls.stopLoad();var n=v.querySelector(".qualityContainer");n&&(n.style.display="none")}};e.on("meride.rollvastready",r),e.on("meride.rollvasterror",n),e.on("meride.rollvastended",t),e.loadRoll()};v.addEventListener(s.ENDED,qt)}if(Fe.beacon&&""!==Fe.beacon&&null===Ue){var ut={akamaiVars:{title:encodeURIComponent(Ee),category:document.domain,deliveryType:"O",device:$e.os.name+" "+$e.os.version+" "+$e.device.model},configUrl:Fe.beacon,embedID:t,prerollURL:Q.url,embDiv:v,player:U};Ue=new p(ut)}qe.user&&""!==qe.user&&vt(),Ke.trackId&&""!==Ke.trackId&&Ke.trackDomain&&""!==Ke.trackDomain&&pt(),Q&&Q.url||ht()}else qe.user&&""!==qe.user&&vt(),Ke.trackId&&""!==Ke.trackId&&Ke.trackDomain&&""!==Ke.trackDomain&&pt(),Q&&Q.url||ht()}else{var Gt,Kt=document.createElement("div"),Wt="meride_flash_"+t,zt=null,Yt={};Kt.setAttribute("id",Wt),v.appendChild(Kt);var Xt=new l({embedID:t,container:v});null!==we&&we.registerFlashObject(Xt);var Qt,Jt=!0,$t=function(){Qt=document.createElement("div"),I(Qt,{width:"100%",height:"100%",position:"absolute",top:"0",left:"0"});var e=document.createElement("a");I(e,{display:"block",width:"100%",height:"100%",position:"absolute",top:"0",left:"0"}),e.setAttribute("href",Q.link),e.setAttribute("onclick","window.open(this.href, 'meride_adv_link'); return false;"),Qt.appendChild(e),v.appendChild(Qt)},Zt=function(){Qt.parentNode.removeChild(Qt)},en=function(){if(""!==Q.url&&"video"===Q.type){try{Kt.getElementsByTagName("embed")[0].hideControlBar()}catch(e){}try{Kt.getElementsByTagName("object")[0].hideControlBar()}catch(e){}}},tn=function(){E.emit(s.PLAY,v),!0===Jt&&(Jt=!1,""!==Q.link&&$t())},nn=function(){E.emit(s.PAUSE,v)},rn=function(e){"black_preroll"===P.policy&&(W=new L({containerEl:v,policy:P.policy,executeBehaviour:!1,onAdBlockDetected:function(e){He=!0,null!==zt&&F.length>0&&(W.on("meride.adblock_timeout_ended",function(){zt.play2()}),e())},onAdBlockNotDetected:function(){}}))},an=function(){if(""!==Q.url&&"video"===Q.type){""!==Q.link&&Zt();var e=function(){Xt.off("meride.ready",e),zt.play2()};Xt.on("meride.ready",e),zt.setMediaResourceURL(be),zt.showControlBar()}Xt.off("meride.ready",en),Xt.off("meride.playing",tn),Xt.off("meride.pause",nn),Xt.off("meride.complete",an)},on=function(){Xt.off("meride.playing",on),!0===He&&zt.pause()},sn=function(e){Xt.off("meride.ready",sn),zt=e.arguments[0].player,Xt.on("meride.aderror",rn)},ln=0,dn=function(e){ln=e.arguments[1]},un=function(e){e.arguments[1]>ln&&zt.seek(ln)};if(Xt.on("meride.ready",en),Xt.on("meride.ready",sn),Xt.on("meride.complete",an),Xt.on("meride.playing",tn),Xt.on("meride.playing",on),Xt.on("meride.paused",nn),!1===Me&&(Xt.on("meride.currentTimeChange",dn),Xt.on("meride.seekingChange",un)),""!==Q.url&&"video"===Q.type){var cn=Q.url.match(/\.m3u8/);if("akamai_stream_packaging"===We.getAttribute("caching_type")&&null!==cn){var fn=We.getElementsByTagName("iphone")[0].firstChild.data;fn&&(be=fn)}}if("http_smoothstreaming"===Ze||"dvr_smoothstreaming"===Ze){var hn=We.getElementsByTagName("default")[0].firstChild.data;hn&&(be=hn)}if("http"!==Ze||null!==We.getAttribute("caching_type")&&""!==We.getAttribute("caching_type")||!0!==We.getAttribute("live")&&"true"!==We.getAttribute("live")||(be=We.getElementsByTagName("default")[0].firstChild.data?We.getElementsByTagName("default")[0].firstChild.data:be),Yt={src:""!==Q.url&&"video"===Q.type?Q.url:be,width:V,height:H,autoPlay:Le,controlBarAutoHide:Ie,scaleMode:"letterbox",backgroundColor:"#000000",target:"meride_target_"+t,wmode:Se,javascriptCallbackFunction:"merideJsCallback"+t,playButtonOverlay:!0,initialBufferTime:3,expandedBufferTime:20,muted:!0===Re,volume:0===Ae?"0":Ae},"dvr"===Ze&&(Yt.akamaiStream=!0),"http_smoothstreaming"!==Ze&&"dvr_smoothstreaming"!==Ze||(Yt.isSmoothStreaming=!0),Ve.logoURL&&(Yt.watermark=function(){return Ve.right.length>0&&-1===Ve.right.indexOf("%")&&(Ve.right=parseInt(Ve.right,10)),Ve.top.length>0&&-1===Ve.top.indexOf("%")&&(Ve.top=parseInt(Ve.top,10)),Ve.left.length>0&&-1===Ve.left.indexOf("%")&&(Ve.left=parseInt(Ve.left,10)),Ve.bottom.length>0&&-1===Ve.bottom.indexOf("%")&&(Ve.bottom=parseInt(Ve.bottom,10)),Ve.displayTime.length>0&&(Ve.displayTime=1e3*parseInt(Ve.displayTime,10)),Ve}(),Yt.watermark=encodeURIComponent(JSON.stringify(Yt.watermark))),$.length>0){Yt.midrolls=[];for(var pn=0,vn=$.length;pn<vn;pn+=1){for(var mn={time:rt($[pn].timeSetting),type:$[pn].mode,adv:[]},gn=0,yn=$[pn].rolls.length;gn<yn;gn+=1)mn.adv.push({url:$[pn].rolls[gn].url});Yt.midrolls.push(mn)}Yt.midrolls=encodeURIComponent(JSON.stringify(Yt.midrolls))}if(Ge.clientid&&""!==Ge.clientid){Ge.title=Ee,Ge.src=be;new d({params:Ge,player:Xt,type:"flash"}).init()}var En=q.getAnalytic("comscore");if(En.user&&""!==En.user){En.title=Ee;var bn={user:En.user,adtrack:{standard:En.adtrack_standard,start:En.adtrack_start,complete:En.adtrack_complete}};Yt.comscore=encodeURIComponent(JSON.stringify(bn));new c({params:En}).init()}Fe.beacon&&""!==Fe.beacon&&(Yt.isAkamaiAnalytics=!0,Yt.akamaianalytic_configPath=Fe.beacon,Yt.akamaianalytic_playerId="meride-video-player-"+t,Yt.akamaianalytic_title=encodeURIComponent(Ee),Yt.akamaianalytic_category=document.domain,Yt.akamaianalytic_deliveryType="O"),window["merideJsCallback"+t]=Xt.javascriptCallbackFunction;null!==Yt.src.match(/\.m3u8$|\.m3u8\?+/i)&&(Yt.cachingType="akamai_adaptive_media_delivery"),(""!==Q.url||""!==J.url||ge.url||me.url)&&(Yt.dfp_width=V,Yt.dfp_height=H,Yt.dfp_companiontype="html",Yt.isAFV=!0,Yt.isDART=!0),""!==Q.url&&"dart"===Q.type&&(Yt.dfp_preroll=encodeURIComponent(Q.url+re),Yt.dfp_tag=Yt.dfp_preroll.split("||")[0]+re),""!==J.url&&"dart"===J.type&&(Yt.dfp_tagEnd=encodeURIComponent(J.url+re)),ge&&""!==ge.url&&(Yt.dfp_overlayInitial=encodeURIComponent(ge.url+re),Yt.dfp_overlayInitialShowTime=ge.stayTime,Yt.dfp_overlayInitialAfterTime=ge.afterTime),me&&""!==me.url&&(Yt.dfp_overlay=encodeURIComponent(me.url+re),Yt.dfp_overlayAfterTime=me.afterTime,!1!==me.fixed&&"0"!==me.fixed||(Yt.dfp_overlayShowTime=me.stayTime,Yt.dfp_overlayUpdateTime=me.delayTime,Yt.dfp_overlayMaxWidth=me.maxDimensionWidth,Yt.dfp_overlayMaxHeight=me.maxDimensionHeight)),("hidden"===xe||"hidden"===e.controlbarMode&&"visible"!==e.controlbarMode)&&(Yt.controlBarMode="none"),a.include(r.WCORE_URL+"WCore.js",function(){var e=function(){a.include(r.WCORE_URL+"WPlayer/WPlayer.js",function(){WPlayer.factory(null,Yt,"f4m",function(e){if(Gt=e,Kt.innerHTML=e.render(),!0===De){new g(Kt.getElementsByTagName("object")[0],v),new g(Kt.getElementsByTagName("embed")[0],v)}})},!0)};"roll_video"===P.policy?(K=q.getRollVideoAdBlock(),W=new L({containerEl:v,policy:P.policy,executeBehaviour:!1,onAdBlockDetected:function(t){Q.url=K.url.mp4,Q.type="video",Q.link=K.link,Yt.src=Q.url,E.emit(s.ROLLVIDEO_STARTED,v),e()},onAdBlockNotDetected:function(){e()}})):e()},!0)}},K=function(e){var t=e.getElementsByTagName("embed")[0].getAttribute("adblock-policy");t=null===t||""===t?"":t,P={policy:t},"block_video"===t?new L({containerEl:v,policy:t,onAdBlockDetected:function(e){},onAdBlockNotDetected:function(){G(e)}}):G(e)};e.response&&""!==e.response?K(e.response):q.read().then(K).catch(function(e){})};return t.init=function(e){return F=e,j(e)},t};e.exports=M},function(e,t){var n={BASE_URL:"https://medialamborghini-meride-tv.akamaized.net/",WCORE_URL:"https://medialamborghini-meride-tv.akamaized.net/libs/wcore/latest/",DATA_URL:"https://medialamborghini-meride-tv.akamaized.net/meride/",TOKEN_SERVICE_URL:"{{TOKEN_SERVICE_URL}}"};e.exports=n},function(e,t){!function(e){var t=function(t){this._options={checkOnLoad:!1,resetOnEnd:!1,loopCheckTime:50,loopMaxNumber:5,baitClass:"pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links",baitStyle:"width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;",debug:!1},this._var={version:"3.2.1",bait:null,checking:!1,loop:null,loopNumber:0,event:{detected:[],notDetected:[]}},void 0!==t&&this.setOption(t);var n=this,r=function(){setTimeout(function(){!0===n._options.checkOnLoad&&(!0===n._options.debug&&n._log("onload->eventCallback","A check loading is launched"),null===n._var.bait&&n._creatBait(),setTimeout(function(){n.check()},1))},1)};void 0!==e.addEventListener?e.addEventListener("load",r,!1):e.attachEvent("onload",r)};t.prototype._options=null,t.prototype._var=null,t.prototype._bait=null,t.prototype._log=function(e,t){},t.prototype.setOption=function(e,t){if(void 0!==t){var n=e;e={},e[n]=t}for(var r in e)this._options[r]=e[r],!0===this._options.debug&&this._log("setOption",'The option "'+r+'" he was assigned to "'+e[r]+'"');return this},t.prototype._creatBait=function(){var t=document.createElement("div");t.setAttribute("class",this._options.baitClass),t.setAttribute("style",this._options.baitStyle),this._var.bait=e.document.body.appendChild(t),this._var.bait.offsetParent,this._var.bait.offsetHeight,this._var.bait.offsetLeft,this._var.bait.offsetTop,this._var.bait.offsetWidth,this._var.bait.clientHeight,this._var.bait.clientWidth,!0===this._options.debug&&this._log("_creatBait","Bait has been created")},t.prototype._destroyBait=function(){e.document.body.removeChild(this._var.bait),this._var.bait=null,!0===this._options.debug&&this._log("_destroyBait","Bait has been removed")},t.prototype.check=function(e){if(void 0===e&&(e=!0),!0===this._options.debug&&this._log("check","An audit was requested "+(!0===e?"with a":"without")+" loop"),!0===this._var.checking)return!0===this._options.debug&&this._log("check","A check was canceled because there is already an ongoing"),!1;this._var.checking=!0,null===this._var.bait&&this._creatBait();var t=this;return this._var.loopNumber=0,!0===e&&(this._var.loop=setInterval(function(){t._checkBait(e)},this._options.loopCheckTime)),setTimeout(function(){t._checkBait(e)},1),!0===this._options.debug&&this._log("check","A check is in progress ..."),!0},t.prototype._checkBait=function(t){var n=!1;if(null===this._var.bait&&this._creatBait(),null===e.document.body.getAttribute("abp")&&null!==this._var.bait.offsetParent&&0!=this._var.bait.offsetHeight&&0!=this._var.bait.offsetLeft&&0!=this._var.bait.offsetTop&&0!=this._var.bait.offsetWidth&&0!=this._var.bait.clientHeight&&0!=this._var.bait.clientWidth||(n=!0),void 0!==e.getComputedStyle){var r=e.getComputedStyle(this._var.bait,null);!r||"none"!=r.getPropertyValue("display")&&"hidden"!=r.getPropertyValue("visibility")||(n=!0)}!0===this._options.debug&&this._log("_checkBait","A check ("+(this._var.loopNumber+1)+"/"+this._options.loopMaxNumber+" ~"+(1+this._var.loopNumber*this._options.loopCheckTime)+"ms) was conducted and detection is "+(!0===n?"positive":"negative")),!0===t&&++this._var.loopNumber>=this._options.loopMaxNumber&&this._stopLoop(),!0===n?(this._stopLoop(),this._destroyBait(),this.emitEvent(!0),!0===t&&(this._var.checking=!1)):null!==this._var.loop&&!1!==t||(this._destroyBait(),this.emitEvent(!1),!0===t&&(this._var.checking=!1))},t.prototype._stopLoop=function(e){clearInterval(this._var.loop),this._var.loop=null,this._var.loopNumber=0,!0===this._options.debug&&this._log("_stopLoop","A loop has been stopped")},t.prototype.emitEvent=function(e){!0===this._options.debug&&this._log("emitEvent","An event with a "+(!0===e?"positive":"negative")+" detection was called");var t=this._var.event[!0===e?"detected":"notDetected"];for(var n in t)!0===this._options.debug&&this._log("emitEvent","Call function "+(parseInt(n)+1)+"/"+t.length),t.hasOwnProperty(n)&&t[n]();return!0===this._options.resetOnEnd&&this.clearEvent(),this},t.prototype.clearEvent=function(){this._var.event.detected=[],this._var.event.notDetected=[],!0===this._options.debug&&this._log("clearEvent","The event list has been cleared")},t.prototype.on=function(e,t){return this._var.event[!0===e?"detected":"notDetected"].push(t),!0===this._options.debug&&this._log("on",'A type of event "'+(!0===e?"detected":"notDetected")+'" was added'),this},t.prototype.onDetected=function(e){return this.on(!0,e)},t.prototype.onNotDetected=function(e){return this.on(!1,e)},e.BlockAdBlock=t,void 0===e.blockAdBlock&&(e.blockAdBlock=new t({checkOnLoad:!0,resetOnEnd:!0}))}(window)},function(e,t,n){var r=n(5),i=n(1),a=n(0),o=n(11),s=n(6),l=function(e){if(!e)throw new Error("RollVideo requires some parameter");if(!e.containerEl)throw new Error("RollVideo requires a containerEl parameter");if(!e.player)throw new Error("RollVideo requires a Player - player parameter");if(!e.ad)throw new Error("RollVideo reaquires an adv definition - ad parameter");var t,n={},l=e.player,d=e.ad,u=new a,c=document.createElement("div"),f=e.originalSrc,h=!0===e.disableControlBar,p=function(){var e=function(t,n){l.hls.off(Hls.Events.MANIFEST_PARSED,e);try{l.video.currentTime=0,l.play()}catch(e){}},t=function(){l.hls.on(Hls.Events.MANIFEST_PARSED,e),l.hls.attachMedia(l.video),l.hls.loadSource(f);try{l.video.currentTime=0,l.play()}catch(e){}};null!==l.hls?(l.hls.on(Hls.Events.MEDIA_DETACHED,t),l.video.pause(),l.hls.detachMedia()):(l.reload(f),l.video.load(),l.video.play()),l.enableSeek()},v=function(){try{c.parentNode.removeChild(c)}catch(e){}p()},m=document.createElement("div");n.on=function(e,t){return u.on(e,t)},n.off=function(e,t){return u.off(e,t)};var g=function(){var e=d.url.mp4;return null!==f.match(/\.m3u8$/)&&d.url.iphone&&(e=d.url.iphone),e};r.applyStyles(m,{position:"absolute",top:"0px",left:"0px",height:"4px",width:"0%",backgroundColor:"#0088cc"}),r.applyStyles(c,{width:"100%",height:"100%",position:"absolute",zIndex:"9",top:"0px",left:"0px"}),c.appendChild(m);var y=function(){l.video.play()},E=function(){l.video.removeEventListener("ended",E),u.emit("meride.rollvideo_ended"),s.emit(i.ROLLVIDEO_ENDED,e.containerEl),l.video.addEventListener("loadedmetadata",y),v()};l.video.addEventListener("ended",E),l.reload(g()),l.video.addEventListener("timeupdate",function(){t=parseFloat(l.video.duration-l.video.currentTime,10),m.style.width=100*l.video.currentTime/l.video.duration+"%"});var b=function(){if(l.video.removeEventListener("play",b),l.disableSeek(),h||(e.containerEl.querySelector(".md-progressBar").style.display="block"),u.emit("meride.rollvideo_started"),s.emit(i.ROLLVIDEO_STARTED,e.containerEl),d.link&&""!==d.link){var t=document.createElement("div");t.innerHTML=o("adv_open_advertiser"),r.applyStyles(t,{cursor:"pointer",color:"#fff",padding:"10px",backgroundColor:"rgba(0, 0, 0, 0.7)",border:"1px solid #fff",position:"absolute",bottom:"15%",right:"0"}),t.addEventListener("click",function(t){t.preventDefault(),u.emit("meride.adclicked",{clickTracking:d.link||null}),window.open(d.link,"ad_meride_window"),s.emit(i.AD_CLICKED,e.containerEl,{clickThroughUrl:d.link})}),c.appendChild(t)}};return"play"===l.video.getAttribute("autoPlay")&&(l.video.load(),l.video.play()),e.containerEl.appendChild(c),l.video.addEventListener("play",b,!1),n};e.exports=l},function(e,t,n){"use strict";function r(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function i(e,t,n){var r=e;return u(t)?(n=t,"string"==typeof e&&(r={uri:e})):r=f(t,{uri:e}),r.callback=n,r}function a(e,t,n){return t=i(e,t,n),o(t)}function o(e){function t(){4===u.readyState&&setTimeout(o,0)}function n(){var e=void 0;if(e=u.response?u.response:u.responseText||s(u),b)try{e=JSON.parse(e)}catch(e){}return e}function i(e){return clearTimeout(p),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,d(e,T)}function o(){if(!h){var t;clearTimeout(p),t=e.useXDR&&void 0===u.status?200:1223===u.status?204:u.status;var r=T,i=null;return 0!==t?(r={body:n(),statusCode:t,method:m,headers:{},url:v,rawRequest:u},u.getAllResponseHeaders&&(r.headers=c(u.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),d(i,r,r.body)}}if(void 0===e.callback)throw new Error("callback argument missing");var l=!1,d=function(t,n,r){l||(l=!0,e.callback(t,n,r))},u=e.xhr||null;u||(u=e.cors||e.useXDR?new a.XDomainRequest:new a.XMLHttpRequest);var f,h,p,v=u.url=e.uri||e.url,m=u.method=e.method||"GET",g=e.body||e.data,y=u.headers=e.headers||{},E=!!e.sync,b=!1,T={body:void 0,headers:{},statusCode:0,method:m,url:v,rawRequest:u};if("json"in e&&!1!==e.json&&(b=!0,y.accept||y.Accept||(y.Accept="application/json"),"GET"!==m&&"HEAD"!==m&&(y["content-type"]||y["Content-Type"]||(y["Content-Type"]="application/json"),g=JSON.stringify(!0===e.json?g:e.json))),u.onreadystatechange=t,u.onload=o,u.onerror=i,u.onprogress=function(){},u.onabort=function(){h=!0},u.ontimeout=i,u.open(m,v,!E,e.username,e.password),E||(u.withCredentials=!!e.withCredentials),!E&&e.timeout>0&&(p=setTimeout(function(){if(!h){h=!0,u.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",i(e)}},e.timeout)),u.setRequestHeader)for(f in y)y.hasOwnProperty(f)&&u.setRequestHeader(f,y[f]);else if(e.headers&&!r(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(u.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(u),u.send(g||null),u}function s(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(e){}return null}function l(){}var d=n(57),u=n(58),c=n(59),f=n(63);e.exports=a,e.exports.default=a,a.XMLHttpRequest=d.XMLHttpRequest||l,a.XDomainRequest="withCredentials"in new a.XMLHttpRequest?a.XMLHttpRequest:d.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],function(e){a["delete"===e?"del":e]=function(t,n,r){return n=i(t,n,r),n.method=e.toUpperCase(),o(n)}})},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(5),i=function(e){if(!e||!e.containerEl)throw new Error("TopMessage requires containerEl");var t={},n=null,i=null,a=e.containerEl,o=function(){try{i.parentNode.removeChild(i),i=null}catch(e){}};t.show=function(e){o(),e&&(n.innerHTML=e),a.appendChild(i)},t.reset=o,t.setMessage=function(e){null!==n&&e&&(n.innerHTML=e)};var s=function(){null===i&&(i=document.createElement("div"),r.applyStyles(i,{position:"absolute",top:"0px",left:"0px",height:"22px",lineHeight:"22px",textAlign:"center",width:"100%",backgroundColor:"rgba(60, 60, 60, 0.3)",color:"#fff",fontSize:"14px"})),null===n&&(n=document.createElement("div")),i.appendChild(n)};return t.init=s,t};e.exports=i},function(e,t,n){var r=n(7),i=n(1),a=n(2),o=n(18);DOM=n(5);var s=function(e){function t(){I.ad&&I.ad.isLinear()&&(K===B||K===P?(ne(),m.play()):(g.addEventListener("ended",I.onVideoEnded),g.addEventListener("loadedmetadata",I.loadedMetadataHandler),null===C?(g.src=y,g.load()):(C.attachMedia(g),C.loadSource(y))))}function n(){g.seekable.length?g.seekable.end(0)>J&&(g.currentTime=J,g.removeEventListener("loadedmetadata",I.loadedMetadataHandler),!1===I.videoIsEnded?(g.addEventListener("ended",I.onVideoEnded,!1),m.play()):g.pause()):setTimeout(n,100)}var s,l,d,u,c,f,h,p,v,m,g,y,E,b,T,w,S,A,L,k,C,_,D,R,I={},x="",O="",M="",B="",N=!0,P="",F=e.loadVideoTimeout||15e3,U=e.locale||null,j=e.scrollMode||{},V=!1,H=!0,q=[],G=!1,K="",W="-1",z=o.volumeOnSVG,Y=o.volumeOffSVG,X=document.createElement("button"),Q=document.createElement("button"),J=0,$="ENABLED",Z=function(e){A.setVolume(0),X.style.display="none",Q.style.display="inline-block",e.preventDefault()};I.volumeOnClicked=X;var ee=function(e){A.setVolume(1),Q.style.display="none",X.style.display="inline-block",e.preventDefault()};I.volumeOffClicked=ee;var te=function(){"none"!==W&&(X.innerHTML=z,Q.innerHTML=Y,DOM.applyStyles([X,Q],{backgroundColor:"transparent",cursor:"pointer",border:"none",width:"40px",height:"40px",position:"absolute",top:"3%",left:"2%",zIndex:"999"}),"defaultOn"===W||"-1"===W?(A.setVolume(1),Q.style.display="none",X.style.display="inline-block"):(A.setVolume(0),X.style.display="none",Q.style.display="inline-block"),a.addClickTouch(X,Z),a.addClickTouch(Q,ee),b.appendChild(X),b.appendChild(Q))};I.setUpVolumeButton=te;var ne=function(e){var t=!0===e;try{b.style.display="none",void 0!==A&&!0===t&&A.stop(),b.innerHTML=""}catch(e){}};I.resetAds=ne;var re=function(e,t){K=!0===t?decodeURIComponent(e):e,b.style.display="block";try{google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode[$])}catch(e){google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED)}null!==U&&google.ima.settings.setLocale(U);var n=r.iOSVersion();!1!==n&&n>9&&google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),google.ima.settings.setNumRedirects(9),T=new google.ima.AdDisplayContainer(b,g),w=new google.ima.AdsLoader(T),""!==K&&ie(K)};I.startPlayback=re;var ie=function(e){""!==e&&(adsLoaded=!1,T.initialize(),w.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,de,!1),w.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,I.onAdError,!1),S=new google.ima.AdsRequest,S.adTagUrl=e,S.linearAdSlotWidth=p,S.linearAdSlotHeight=2*v,void 0!==f&&void 0!==h&&e===B?(S.nonLinearAdSlotWidth=f>0?f:p,S.nonLinearAdSlotHeight=h>0?h:v-80):(S.nonLinearAdSlotWidth=2*p,S.nonLinearAdSlotHeight=v-80),S.setAdWillAutoPlay(D),S.setAdWillPlayMuted(R),!0===j.enabled&&(S.setAdWillAutoPlay(!0),S.setAdWillPlayMuted(!0)),w.requestAds(S))},ae=function(e){0===A.getVolume()?(X.style.display="none",Q.style.display="inline-block"):(Q.style.display="none",X.style.display="inline-block")};I.onVolumeChanged=ae;var oe=function(e){X.style.display="none",Q.style.display="inline-block"};I.onVolumeMuted=oe;var se=function(){void 0!==A&&A.removeEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,se),setTimeout(function(){ne()},500),g.currentTime=0,g.pause(),g.setAttribute("autoplay","false");var e=function(){g.removeEventListener("play",e),g.removeEventListener("playing",e),g.removeEventListener("loadedmetadata",e),g.pause(),g.currentTime=0};g.addEventListener("play",e,!1),g.addEventListener("playing",e,!1),g.addEventListener("loadedmetadata",e,!1)},le=function(){A.removeEventListener(google.ima.AdEvent.Type.STARTED,le),M=""},de=function(t){var n=new google.ima.AdsRenderingSettings;n.loadVideoTimeout=F,n.restoreCustomPlaybackStateOnAdBreakComplete=!0,!0===e.advPrefetch&&(n.enablePreloading=!0),A=t.getAdsManager(g,n);var r=new CustomEvent(i.ADS_MANAGER_READY,{bubbles:!0,cancelable:!0,detail:{adsManager:A}});E.dispatchEvent(r),A.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,I.onAdError),A.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,I.onContentPauseRequested),A.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,I.onContentResumeRequested),A.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,I.onAdEvent),A.addEventListener(google.ima.AdEvent.Type.LOADED,I.onAdEvent),A.addEventListener(google.ima.AdEvent.Type.STARTED,I.onAdEvent),A.addEventListener(google.ima.AdEvent.Type.COMPLETE,I.onAdEvent),A.addEventListener(google.ima.AdEvent.Type.CLICK,I.onAdEvent),A.addEventListener(google.ima.AdEvent.Type.PAUSED,fe),A.addEventListener(google.ima.AdEvent.Type.RESUMED,he),A.addEventListener(google.ima.AdEvent.Type.USER_CLOSE,ve),A.addEventListener(google.ima.AdEvent.Type.SKIPPED,pe),A.addEventListener(google.ima.AdEvent.Type.VOLUME_CHANGED,ae),A.addEventListener(google.ima.AdEvent.Type.VOLUME_MUTED,oe),!0===I.videoIsEnded&&""!==M&&(A.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,se,!1),A.addEventListener(google.ima.AdEvent.Type.STARTED,le,!1));try{!0===V?A.init(screen.width,screen.height,google.ima.ViewMode.FULLSCREEN):S.adTagUrl==P||S.adTagUrl==B?A.init(p,v-60,google.ima.ViewMode.NORMAL):A.init(p,v,google.ima.ViewMode.NORMAL),A.setVolume(g.muted||e.muted?0:g.volume),!0!==j.enabled&&!0!==R||A.setVolume(0),A.start()}catch(e){ne(),adCompleted=!0,m.play()}};I.onAdsManagerLoaded=de;var ue=o.playBtnSVG,ce=document.createElement("button");ce.setAttribute("data-txt",">"),ce.className="boxcenter boxcenterBtn playBtn",ce.innerHTML=ue,ce.style.display="inline-block",ce.addEventListener("click",function(){A.resume()},!1);var fe=function(){b.appendChild(ce)},he=function(){try{b.removeChild(ce)}catch(e){}},pe=function(){I.ad&&!1===I.ad.isLinear()&&m.play()},ve=function(){ne(!0),m.enableSeek(),I.ad&&!1===I.ad.isLinear()&&m.play()},me=function(){""!==B&&(clearTimeout(L),clearInterval(k),setTimeout(function(){l=0,re(B),void 0!==s&&void 0!==d&&!1===N&&(L=setTimeout(function(){clearTimeout(L),ne(),k=setInterval(function(){me()},d)},s))},l))},ge=function(){""!==P&&setTimeout(function(){c=0,re(P),void 0!==u&&(L=setTimeout(function(){ne(),me()},u))},c)},ye=function(){adLinearPlaying=!1,adCompleted=!0,""!==P?ge():""!==B&&me()},Ee=function(e){setTimeout(function(){if(V){var t=screen.height,n=screen.width;b.style.width=n+"px",b.style.height=t+"px",A.resize(n,t,google.ima.ViewMode.FULLSCREEN)}else{var t=!1===e?E.offsetHeight-60:E.offsetHeight;b.style.width=E.offsetWidth+"px",b.style.height=t+"px",A.resize(E.offsetWidth,t,google.ima.ViewMode.NORMAL)}},300)};I.resizeAdv=Ee;var be=!1,Te={clickThroughUrl:null},we=function(){null===C?I.videoIsEnded||y!==g.src||(g.addEventListener("ended",I.onVideoEnded,!1),setTimeout(function(){m.play(),""===B&&""===P||ye()},500)):(""===B&&""===P||(b.style.display="block",ye()),!0===I.videoIsEnded?Le():(K===O?(O="",!1===e.videoPreload?(!1===e.loadVideoAfterPreroll&&(m.container.querySelector(".loadingSpinner").style.display="none",setTimeout(function(){m.container.querySelector(".loadingSpinner").style.display="none"},1e3)),m.load()):m.reload()):K===P||K===B&&I.ad&&I.ad.isLinear()?I.ad.isLinear()&&m.play():(C.attachMedia(g),C.loadSource(y)),!1!==e.loadVideoAfterPreroll&&m.play()))},Se=function(){m.enableKeyboard(!0);var e=function(){g.removeEventListener("playing",e),ne()};g.addEventListener("playing",e,!1),ne(),null!==y.match(/.m3u8$/)&&null!==C&&(C.widevineLicenseUrl||C.fairplayLicenseUrl)?m.load():y.match(/.mpd$/)&&null!==_?m.reload():we()};I.onAllAdsCompleted=Se,I.ad=null;var Ae=function(e){switch(I.ad=e.getAd(),e.type){case google.ima.AdEvent.Type.CLICK:!1===be?(be=!0,I.ad.isLinear()&&(adLinearPlaying=!1)):I.ad.isLinear()&&(A.resume(),adLinearPlaying=!0);var t=new CustomEvent(i.AD_CLICKED,{bubbles:!0,cancelable:!0,detail:{clickThroughUrl:Te.clickThroughUrl}});E.dispatchEvent(t);break;case google.ima.AdEvent.Type.LOADED:adsLoaded=!0,Te=e.getAdData(),b.style.display="block",DOM.applyStyles(g,{visibility:"visible",display:"block"}),I.ad.isLinear()&&te();var n=new CustomEvent(i.AD_LOADED,{bubbles:!0,cancelable:!0,detail:{tag:K}});E.dispatchEvent(n);break;case google.ima.AdEvent.Type.STARTED:I.ad.isLinear()?(null===C?g.src="":(C.stopLoad(),C.detachMedia(g)),b.style.zIndex="20",g.style.display="block",adLinearPlaying=!0,m.enableKeyboard(!1)):b.style.zIndex="9",window.addEventListener("resize",function(e){Ee(I.ad.isLinear())}),window.addEventListener("orientationchange",function(e){Ee(I.ad.isLinear())}),Ee(I.ad.isLinear());var r=new CustomEvent(i.AD_STARTED,{bubbles:!0,cancelable:!0,detail:{tag:K,clickThroughUrl:Te.clickThroughUrl}});E.dispatchEvent(r);break;case google.ima.AdEvent.Type.COMPLETE:break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:I.onAllAdsCompleted();var a=new CustomEvent(i.AD_ENDED,{bubbles:!0,cancelable:!0,detail:{tag:K}});E.dispatchEvent(a)}};I.onAdEvent=Ae;var Le=function(){try{var e=function(){C.off(Hls.Events.MEDIA_ATTACHED,e),C.loadSource(y),C.on(Hls.Events.MANIFEST_PARSED,function(e,t){C.startLoad(0),se()})},t=function(){C.off(Hls.Events.MEDIA_DETACHED,t),C.on(Hls.Events.MEDIA_ATTACHED,e),C.attachMedia(g)};g.pause(),g.src="",null!==C?(C.stopLoad(),C.on(Hls.Events.MEDIA_DETACHED,t),C.detachMedia(g)):(g.src=y,g.load(),g.pause())}catch(e){}},ke=function(){!1===e.videoPreload?m.load():m.reload()},Ce=function(e){var t=e.getError(),n=new CustomEvent(i.AD_ERROR,{bubbles:!0,cancelable:!1,detail:{errorCode:t.getErrorCode(),message:t.getMessage()}});if(E.dispatchEvent(n),1009===t.getErrorCode()){var r=new CustomEvent(i.AD_EMPTY,{bubbles:!0,cancelable:!1,detail:{errorCode:t.getErrorCode(),message:t.getMessage()}});E.dispatchEvent(r)}ne(),g.style.visibility="visible";var a=function(){C.off(Hls.Events.MANIFEST_PARSED,a),C.startLoad(),!1===I.videoIsEnded||!0===g.loop?setTimeout(function(){m.play()},500):(setTimeout(function(){g.pause()},500),g.pause())};if(I.ad&&!0===I.ad.isLinear())!isNaN(g.duration)&&Math.abs(g.duration-g.currentTime)<=1&&(I.videoIsEnded=!0),m.enableKeyboard(!0),!1===I.videoIsEnded?K===O&&(null!==C&&(C.on(Hls.Events.MANIFEST_PARSED,a),ke()),setTimeout(function(){m.play()},150)):Le();else if(null===C||0!=g.currentTime||!isNaN(g.duration)&&0!==g.duration||K!==P&&K!==B){if(null!==C&&K===O)C.on(Hls.Events.MANIFEST_PARSED,a),ke();else if(null!==C&&K===M)Le();else if(null===C&&g.src!==y){var o=function(e){g.removeEventListener("loadedmetadata",o);var t=g.play();t&&t.catch(function(e){g.pause()})};g.src="",g.src=y,g.addEventListener("loadedmetadata",I.loadedMetadataHandler,!1),g.addEventListener("loadedmetadata",o,!1),g.load()}}else C.on(Hls.Events.MANIFEST_PARSED,a),ke();switch(t.getErrorCode()){case 1005:""===B&&""===P||(b.style.display="block",ye())}if(K===O){var s=g.play();s&&s.catch(function(e){g.pause()})}K===O?O="":K===M&&(M="")};I.onAdError=Ce;var _e=function(){I.ad&&I.ad.isLinear()&&(g.removeEventListener("ended",I.onVideoEnded),J=g.currentTime,g.pause())};I.onContentPauseRequested=_e,I.onContentResumeRequested=t,I.loadedMetadataHandler=n;var De=function(e){!0!==H&&!1!==G||(H=!1,g.addEventListener("play",function(){var e=new CustomEvent(i.PLAY,{bubbles:!0,cancelable:!0,detail:{}});E.dispatchEvent(e)},!1),g.addEventListener("pause",function(){var e=new CustomEvent(i.PAUSE,{bubbles:!0,cancelable:!0,detail:{}});E.dispatchEvent(e)},!1),g.addEventListener("ended",function(){var e=new CustomEvent(i.ENDED,{bubbles:!0,cancelable:!0,detail:{}});E.dispatchEvent(e)},!1),null===C?(g.setAttribute("src",y),g.addEventListener("loadedmetadata",function(t){G=!0;var n=new CustomEvent(i.LOADEDMETADATA,{bubbles:!0,cancelable:!0,detail:{player:g}});E.dispatchEvent(n),DOM.applyStyles(g,{visibility:"visible",display:"block"}),g.pause(),void 0!==e&&"function"==typeof e&&e()},!1),g.load(),navigator.userAgent.toLowerCase().indexOf("android")>-1&&m.play()):(C.on(Hls.Events.MANIFEST_PARSED,function(){setTimeout(function(){m.play()},150)}),C.attachMedia(g),C.loadSource(y)))};I.initializeContent=De;var Re=function(e){!1===G?(De(function(){m.play()}),m.play()):m.play()};I.playFunction=Re;var Ie=function(e){"object"==typeof A&&A.pause(),g.pause()};I.pauseFunction=Ie,I.setAutoplayAllowed=function(e){D=e},I.setAutoplayRequiresMuted=function(e){R=e},I.videoIsEnded=!1;var xe=!1,Oe=function(e){if(g.src===y||null!==g.src.match(/^blob:/)){g.removeEventListener("ended",I.onVideoEnded),I.videoIsEnded=!0;try{L&&clearTimeout(L),k&&clearInterval(k),ne(),""!==M&&!1===xe&&(xe=!0,setTimeout(function(){g.removeAttribute("autoplay"),g.currentTime=0,g.pause(),re(M)},650))}catch(e){}}};return I.onVideoEnded=Oe,function(){videoID=e.videoID,sources=e.sources,debug=e.debug||!1,x=e.adContainerID,mainContainerID=e.mainContainerID,C=e.hlsObj||null,_=e.dashOpts||null;var t=e.preroll||"";q=t.split("||"),q.reverse(),O=q.pop(),M=e.postroll||"",B=e.overlay||"",P=e.overlayInitial||"",m=e.player,g=m.video,y=e.originSrc,E=e.container,p=g.offsetWidth,v=g.offsetHeight,b=document.getElementById(x),N=void 0===e.overlayFixed||e.overlayFixed,s=e.overlayShowTime,l=e.overlayAfterTime||0,d=e.overlayUpdateTime,u=e.overlayInitialShowTime,c=e.overlayInitialAfterTime||0,f=e.overlayMaxWidth,h=e.overlayMaxHeight,videoTitle=e.videoTitle||"",videoDescription=e.videoDescription||"",W=e.settingVolume||"-1",$=e.vpaidMode||"ENABLED",O=decodeURIComponent(O),M=decodeURIComponent(M),(g.muted||e.muted)&&(W="defaultOff"),E.addEventListener(i.ENTER_FULLSCREEN,function(e){V=!0},!1),E.addEventListener(i.EXIT_FULLSCREEN,function(e){V=!1},!1),M&&""!==M&&g.addEventListener("ended",I.onVideoEnded,!1)}(),I};e.exports=s},function(e,t,n){"use strict";e.exports=n(88)},function(e,t,n){var r=n(32),i=n(15),a=n(13),o=function(e,t,n){this.name="AdError",this.message=e,this.code=t,!this.message&&this.code&&(this.message=r[this.code]),n&&n.reportTo&&i.read({uri:a.replace(n.reportTo,{ERRORCODE:this.code})})};o.prototype=Object.create(Error.prototype),e.exports=o},function(e,t){var n={100:"XML parsing error",101:"VAST schema validation error",102:"VAST version of response not supported",200:"Trafficking error. Video player received an Ad type that it was not expecting and/or cannot display",201:"Video player expecting different linearity",202:"Video player expecting different duration",203:"Video player expecting different size",300:"General Wrapper error",301:"Timeout of VAST URI provided in Wrapper element, or of VAST URI provided in a subsequent Wrapper element. (URI was either unavailable or reached a timeout as defined by the video player.)",302:"Wrapper limit reached, as defined by the video player. Too many Wrapper responses have been received with no InLine response",303:"No Ads VAST response after one or more Wrappers",400:"General Linear error. Video player is unable to display the Linear Ad",401:"File not found. Unable to fine Linear/MediaFile from URI",402:"Timeout of MediaFile URI",403:"Couldn’t find MediaFile that is supported by this video player, based on the attributes of the MediaFile element",405:"Problem displaying MediaFile. Video player found a MediaFile with supported type but couldn’t display it. MediaFile may include: unsupported codecs, different MIME type than MediaFile@type, unsupported delivery method, etc.",500:"General NonLinearAds error",501:"Unable to display NonLinear Ad because creative dimensions do not align with creative display area (i.e. creative dimension too large)",502:"Unable to fetch NonLinearAds/NonLinear resource",503:"Couldn't find NonLinear resource with supported type",600:"General CompanionAds error",601:"Unable to display Companion because creative dimensions do not fit within Companiondisplay area (i.e., no available space)",602:"Unable to display Required Companion",603:"Unable to fetch CompanionAds/Companion resource",604:"Couldn't find Companion resource with supported type",900:"Undefined Error",901:"General VPAID error",1001:"Empty VAST with Error tag",1002:"General error reading VAST file"};e.exports=n},function(e,t,n){"use strict";e.exports=n(105)},function(e,t,n){function r(e){e=e||{},this.css=e.css||null,this.components=e.components||new i,this.render=function(t){if(this.components.render(t),e.defaultColor){var n=e.defaultColor,r=this.components.playBtn.querySelector("circle");r&&r.setAttribute("fill",n);var i=this.components.pauseBtn.querySelector("circle");i&&i.setAttribute("fill",n);var o=this.components.liveBtn.querySelector("circle");o&&o.setAttribute("fill",n);var s=this.components.qualityHDBtn.querySelector(".md_hd_apex");s&&s.setAttribute("fill",n);var l=this.components.audioTracksContainer.querySelector(".audioTracksLabel");l&&a.applyStyles(l,{color:n}),a.applyStyles([this.components.loadingSpinner,this.components.progressBarSpinner,this.components.volumeBarSpinner],{backgroundColor:n});var d=document.createElement("style"),u=a.hexToRgb(n);d.innerText=".meride-video-container .settingChooseMenu .hd_apex {                                    color: "+n+" !important;                                }",null!==u&&(d.innerHTML+="                            .meride-video-container .settingChooseMenu .settingChooseMenuLinkActive {                                background-color: rgba("+u.r+", "+u.g+", "+u.b+", .5) !important;                            }                            .meride-video-container .settingChooseMenu .settingChooseMenuLink:hover {                                background-color: rgba("+u.r+", "+u.g+", "+u.b+", .3) !important;                            }"),a.appendRawStyle(d)}},!0===e.loadDefaultFonts&&n(118)}var i=n(35),a=n(3);e.exports=r},function(e,t,n){function r(e){e=e||{},this.components=e.components||i,this.playBtn=document.createElement("button"),this.playSmallBtn=document.createElement("button"),this.pauseBtn=document.createElement("button"),this.pauseSmallBtn=document.createElement("button"),this.fullBtn=document.createElement("button"),this.reduceBtn=document.createElement("button"),this.settingBtn=document.createElement("button"),this.audioTracksBtn=document.createElement("button"),this.subtitleTracksBtn=document.createElement("button"),this.seekBtn=document.createElement("button"),this.closeSettingsBtn=document.createElement("button"),this.volumeOnBtn=document.createElement("button"),this.volumeOn1_3Btn=document.createElement("button"),this.volumeOn2_3Btn=document.createElement("button"),this.volumeOffBtn=document.createElement("button"),this.qualityBtn=document.createElement("button"),this.qualityHDBtn=document.createElement("button"),this.vrBtn=document.createElement("button"),this.timeTooltip=document.createElement("div"),this.controlBarContainer=document.createElement("div"),this.controlBar=document.createElement("div"),this.topBar=document.createElement("div"),this.timeUpdate=document.createElement("span"),this.duration=document.createElement("span"),this.progressBar=document.createElement("div"),this.bufferContainer=document.createElement("div"),this.progressBarSpinner=document.createElement("div"),this.settings=document.createElement("div"),this.loadingSpinner=document.createElement("div"),this.pipBtn=document.createElement("button"),this.pipExitBtn=document.createElement("button"),this.controlBarCenter=document.createElement("div"),this.playPauseSmallBtnContainer=document.createElement("div"),this.timeUpdateContainer=document.createElement("div"),this.durationContainer=document.createElement("div"),this.volumeContainer=document.createElement("div"),this.volumeBarContainer=document.createElement("div"),this.volumeBarInnerContainer=document.createElement("div"),this.volumeBarSpinner=document.createElement("div"),this.volumeBarLevel=document.createElement("div"),this.volumeHandlerBtn=document.createElement("button"),this.fullscreenBtnContainer=document.createElement("div"),this.qualityContainer=document.createElement("div"),this.qualitySelectionContainer=document.createElement("div"),this.vrBtnContainer=document.createElement("div"),this.audioTracksContainer=document.createElement("div"),this.audioTracksSelectionContainer=document.createElement("div"),this.audioTracksLabel=document.createElement("div"),this.subtitleTracksContainer=document.createElement("div"),this.subtitleTracksSelectionContainer=document.createElement("div"),this.subtitleTracksLabel=document.createElement("div"),this.liveBtn=document.createElement("button"),this.liveBtnContainer=document.createElement("div"),this.pipBtnContainer=document.createElement("div")}var i=n(36),a=n(3),o=n(116);r.prototype.render=function(e){var t=document.createDocumentFragment(),n=document.createDocumentFragment();this.progressBar.className="md-progressBar",this.bufferContainer.className="md-bufferContainer",this.progressBarSpinner.className="md-spinner",this.settings.className="md-settings",this.seekBtn.innerHTML=this.components.seekBtn.html,this.seekBtn.className="md-seekBtn",this.components.seekBtn.class&&(this.seekBtn.className+=" "+this.components.seekBtn.class),this.timeTooltip.className="md-timeTooltip",this.progressBar.appendChild(this.bufferContainer),this.progressBar.appendChild(this.progressBarSpinner),this.progressBar.appendChild(this.seekBtn),this.progressBar.appendChild(this.timeTooltip),a.applyComponent(this.playBtn,this.components.playBtn,">",o("play")),a.applyComponent(this.playSmallBtn,this.components.playSmallBtn,">",o("play")),a.applyComponent(this.pauseBtn,this.components.pauseBtn,"||",o("pause")),a.applyComponent(this.pauseSmallBtn,this.components.pauseSmallBtn,"||",o("pause")),a.applyComponent(this.fullBtn,this.components.fullBtn,"&#8596;",o("fullscreen")),a.applyComponent(this.reduceBtn,this.components.reduceBtn,"&#8596;",o("minimize")),a.applyComponent(this.settingBtn,this.components.settingBtn,"&#8362;",o("settings")),a.applyComponent(this.volumeOnBtn,this.components.volumeOnBtn,"vol. on",o("volumeOn")),a.applyComponent(this.volumeOn1_3Btn,this.components.volumeOn1_3Btn,"vol. 1/3",o("volumeOn1_3")),a.applyComponent(this.volumeOn2_3Btn,this.components.volumeOn2_3Btn,"vol. 2/3",o("volumeOn2_3")),a.applyComponent(this.volumeOffBtn,this.components.volumeOffBtn,"vol. off",o("volumeOff")),a.applyComponent(this.qualityBtn,this.components.qualityBtn,"Q",o("quality")),a.applyComponent(this.qualityHDBtn,this.components.qualityHDBtn,"Q-hd",o("qualityHD")),a.applyComponent(this.vrBtn,this.components.vrBtn,"VR",o("vr")),a.applyComponent(this.loadingSpinner,this.components.loadingSpinner,"loading...",o("loading")),a.applyComponent(this.audioTracksBtn,this.components.audioTracksBtn,"&#9834;",o("audioTracks")),a.applyComponent(this.subtitleTracksBtn,this.components.subtitleTracksBtn,"&#9834;",o("subtitleTracks")),a.applyComponent(this.closeSettingsBtn,this.components.closeSettingsBtn,"X",o("close")),a.applyComponent(this.liveBtn,this.components.liveBtn,"Live",o("live")),a.applyComponent(this.pipBtn,this.components.pipBtn,"&#8600;",o("pipModeOn")),a.applyComponent(this.pipExitBtn,this.components.pipExitBtn,"&#8598;",o("pipModeOff")),this.settings.appendChild(this.closeSettingsBtn),e.appendChild(this.settings),this.timeUpdate.className="timeUpdate",this.duration.className="duration",e.appendChild(this.playBtn),e.appendChild(this.pauseBtn),e.appendChild(this.loadingSpinner),this.reduceBtn.style.display="none",this.playPauseSmallBtnContainer.className="controlBarCell",this.timeUpdateContainer.className="controlBarCell",this.durationContainer.className="controlBarCell",this.liveBtnContainer.className="controlBarCell",this.controlBarCenter.className="controlBarCell controlBarCenter",this.fullscreenBtnContainer.className="controlBarCell controlBarCellRight",this.vrBtnContainer.className="controlBarCell controlBarCellRight",this.pipBtnContainer.className="controlBarCell controlBarCellRight",this.playPauseSmallBtnContainer.appendChild(this.playSmallBtn),this.playPauseSmallBtnContainer.appendChild(this.pauseSmallBtn),this.timeUpdateContainer.appendChild(this.timeUpdate),this.controlBarCenter.appendChild(this.progressBar),this.durationContainer.appendChild(this.duration),this.liveBtnContainer.appendChild(this.liveBtn),t.appendChild(this.playPauseSmallBtnContainer),t.appendChild(this.liveBtnContainer),t.appendChild(this.timeUpdateContainer),t.appendChild(this.controlBarCenter),t.appendChild(this.durationContainer),this.volumeBarContainer.className="volumeBarContainer inactive",this.volumeBarInnerContainer.className="volumeBarInnerContainer",this.volumeBarSpinner.className="volumeBarSpinner",this.volumeBarLevel.className="volumeBarLevel",this.volumeHandlerBtn.className="volumeHandlerBtn",this.volumeHandlerBtn.innerHTML=this.components.volumeHandlerBtn.html,this.volumeBarLevel.appendChild(this.volumeHandlerBtn),this.volumeBarLevel.appendChild(this.volumeBarSpinner),this.volumeBarInnerContainer.appendChild(this.volumeBarLevel),this.volumeBarContainer.appendChild(this.volumeBarInnerContainer),this.volumeContainer.className="volumeContainer controlBarCell controlBarCellRight",this.volumeContainer.appendChild(this.volumeOnBtn),this.volumeContainer.appendChild(this.volumeOn1_3Btn),this.volumeContainer.appendChild(this.volumeOn2_3Btn),this.volumeContainer.appendChild(this.volumeOffBtn),this.volumeContainer.appendChild(this.volumeBarContainer),this.qualityContainer.className="qualityContainer controlBarCell controlBarCellRight",this.qualitySelectionContainer.className="qualitySelectionContainer inactive",this.qualityContainer.appendChild(this.qualityBtn),this.qualityContainer.appendChild(this.qualityHDBtn),this.qualityContainer.appendChild(this.qualitySelectionContainer),this.fullscreenBtnContainer.appendChild(this.fullBtn),this.fullscreenBtnContainer.appendChild(this.reduceBtn),this.vrBtnContainer.appendChild(this.vrBtn),this.audioTracksContainer.className="audioTracksContainer controlBarCell controlBarCellRight",this.audioTracksSelectionContainer.className="audioTracksSelectionContainer inactive",this.audioTracksLabel.className="audioTracksLabel",this.audioTracksContainer.appendChild(this.audioTracksBtn),this.audioTracksContainer.appendChild(this.audioTracksLabel),this.audioTracksContainer.appendChild(this.audioTracksSelectionContainer),this.subtitleTracksContainer.className="subtitleTracksContainer controlBarCell controlBarCellRight",this.subtitleTracksSelectionContainer.className="subtitleTracksSelectionContainer inactive",this.subtitleTracksLabel.className="subtitleTracksLabel",this.subtitleTracksContainer.appendChild(this.subtitleTracksBtn),this.subtitleTracksContainer.appendChild(this.subtitleTracksLabel),this.subtitleTracksContainer.appendChild(this.subtitleTracksSelectionContainer),this.pipBtnContainer.appendChild(this.pipBtn),this.pipBtnContainer.appendChild(this.pipExitBtn),t.appendChild(this.qualityContainer),t.appendChild(this.audioTracksContainer),t.appendChild(this.subtitleTracksContainer),t.appendChild(this.volumeContainer),t.appendChild(this.vrBtnContainer),t.appendChild(this.pipBtnContainer),t.appendChild(this.fullscreenBtnContainer),n.appendChild(this.settingBtn);var r=document.createElement("div");r.className="otherComponents",this.controlBar.className="controlBar",this.controlBar.appendChild(t),this.controlBarContainer.className="controlBarContainer",this.controlBarContainer.appendChild(this.controlBar),r.appendChild(this.controlBarContainer),this.topBar.className="topBar",this.topBar.appendChild(n),r.appendChild(this.topBar),e.appendChild(r)},e.exports=r},function(e,t){var n={playBtn:{html:'<svg width="100%" height="100%" viewBox="0 0 92 92"><g stroke="#333" stroke-width=".0"><g><circle opacity="0.6" fill="#ffce3e" cx="46" cy="46.002" r="45" /><g><path fill="#FFFFFF" d="M31.455,66.984c0,1.422,1.021,2.037,2.273,1.355L72.7,47.232c1.249-0.676,1.249-1.779,0-2.463L33.729,23.658c-1.252-0.678-2.273-0.064-2.273,1.355V66.984z"/></g></g> </svg>',class:"boxcenter boxcenterBtn playBtn"},playSmallBtn:{html:'<svg width="100%" height="100%" viewBox="0 0 92 92"><g stroke="#333" stroke-width=".0"><g><path fill="#FFFFFF" d="M31.455,66.984c0,1.422,1.021,2.037,2.273,1.355L72.7,47.232c1.249-0.676,1.249-1.779,0-2.463L33.729,23.658c-1.252-0.678-2.273-0.064-2.273,1.355V66.984z"/></g> </svg>',class:"playSmallBtn"},pauseBtn:{html:'<svg width="100%" height="100%" viewBox="0 0 92 92"><g stroke="#333" stroke-width=".0"><g><circle opacity="0.6" fill="#ffce3e" cx="46" cy="46.002" r="45"/><g><g><g><path fill="#FFFFFF" d="M42.603,64.973c0,1.387-1.016,2.527-2.262,2.527h-7.923c-1.242,0-2.261-1.141-2.261-2.527V27.029c0-1.389,1.019-2.529,2.261-2.529h7.923c1.246,0,2.262,1.141,2.262,2.529V64.973z"/></g><g><path fill="#FFFFFF" d="M61.843,64.973c0,1.387-1.02,2.527-2.262,2.527h-7.924c-1.245,0-2.261-1.141-2.261-2.527V27.029c0-1.389,1.016-2.529,2.261-2.529h7.924c1.242,0,2.262,1.141,2.262,2.529V64.973z"/></g></g></g></g> </svg>',class:"boxcenter boxcenterBtn pauseBtn"},pauseSmallBtn:{html:'<svg width="100%" height="100%" viewBox="0 0 92 92"><g stroke="#333" stroke-width=".0"><g><g><g><path fill="#FFFFFF" d="M42.603,64.973c0,1.387-1.016,2.527-2.262,2.527h-7.923c-1.242,0-2.261-1.141-2.261-2.527V27.029c0-1.389,1.019-2.529,2.261-2.529h7.923c1.246,0,2.262,1.141,2.262,2.529V64.973z"/></g><g><path fill="#FFFFFF" d="M61.843,64.973c0,1.387-1.02,2.527-2.262,2.527h-7.924c-1.245,0-2.261-1.141-2.261-2.527V27.029c0-1.389,1.016-2.529,2.261-2.529h7.924c1.242,0,2.262,1.141,2.262,2.529V64.973z"/></g></g></g> </svg>',class:"pauseSmallBtn"},fullBtn:{html:'<svg width="100%" height="100%" viewBox="0 0 35 35"><g fill="#FFF"><path d="M9.492 10.964H3.43c-.208 0-.376.168-.376.375v6.063c0 .207.168.375.375.375h1.563c.207 0 .375-.168.375-.375v-4.125h4.124c.207 0 .375-.168.375-.375V11.34c0-.208-.168-.376-.375-.376zM22.6 10.964h-6.065c-.207 0-.375.168-.375.375v1.563c0 .207.168.375.375.375h4.125v4.125c0 .207.168.375.375.375H22.6c.206 0 .374-.168.374-.375V11.34c0-.208-.168-.376-.375-.376zM22.6 20.55h-1.565c-.207 0-.375.167-.375.374v4.125h-4.125c-.207 0-.375.167-.375.374v1.564c0 .207.168.375.375.375H22.6c.206 0 .374-.168.374-.375v-6.064c0-.207-.168-.375-.375-.375zM9.492 25.05H5.368v-4.126c0-.207-.168-.375-.375-.375H3.43c-.208 0-.376.167-.376.374v6.064c0 .207.168.375.375.375H9.49c.207 0 .375-.168.375-.375v-1.564c0-.207-.168-.375-.375-.375z"/></g></svg>',class:"fullBtn controlBarBtn"},reduceBtn:{html:'<svg width="100%" height="100%" viewBox="0 0 35 35"><g fill="#FFF"><path d="M3.43 17.778H9.49c.207 0 .375-.168.375-.375V11.34c0-.208-.168-.376-.375-.376H7.928c-.207 0-.375.168-.375.375v4.124H3.43c-.208 0-.376.168-.376.375v1.563c0 .207.168.375.375.375zM16.534 17.778h6.064c.207 0 .375-.168.375-.375V15.84c0-.208-.168-.376-.375-.376h-4.125V11.34c0-.208-.168-.376-.375-.376h-1.564c-.207 0-.375.168-.375.375v6.063c0 .207.167.375.374.375zM16.534 27.363h1.564c.207 0 .375-.168.375-.375v-4.125h4.125c.207 0 .375-.168.375-.375v-1.564c0-.207-.168-.375-.375-.375h-6.064c-.207 0-.375.167-.375.374v6.064c0 .207.167.375.374.375zM3.43 22.863h4.123v4.125c0 .207.168.375.375.375h1.564c.207 0 .375-.168.375-.375v-6.064c0-.207-.168-.375-.375-.375H3.43c-.208 0-.376.167-.376.374v1.564c0 .207.168.375.375.375z"/></g></svg>',class:"reduceBtn controlBarBtn"},settingBtn:{html:'<svg width="7px" height="100%" viewBox="0 0 7 28"><g stroke="#333" stroke-width=".5"><path pointer-events="all" d="M3.5,28C1.566,28,0,26.434,0,24.5C0,22.568,1.566,21,3.5,21C5.433,21,7,22.568,7,24.5 C7,26.434,5.433,28,3.5,28z M7,3.5C7,1.568,5.433,0,3.5,0C1.566,0,0,1.568,0,3.5C0,5.434,1.566,7,3.5,7C5.433,7,7,5.434,7,3.5z M7,14c0-1.932-1.567-3.5-3.5-3.5C1.566,10.5,0,12.068,0,14c0,1.934,1.566,3.5,3.5,3.5C5.433,17.5,7,15.934,7,14z"> </path> </g> </svg>',class:"toright topBarBtn"},closeSettingsBtn:{html:'<svg width="100%" height="100%" viewBox="0 0 24 24"><g><path d="M3.39,0.043c-0.177-0.02-0.34,0.032-0.462,0.152L0.196,2.929c-0.239,0.24-0.175,0.684,0.125,0.982 l8.137,8.139l-8.137,8.136c-0.3,0.301-0.364,0.741-0.125,0.982l2.732,2.732c0.241,0.242,0.686,0.208,0.983-0.09l8.137-8.14 l8.138,8.14c0.3,0.298,0.742,0.332,0.983,0.09l2.733-2.732c0.238-0.241,0.176-0.682-0.124-0.982l-8.137-8.136l8.137-8.139 c0.3-0.299,0.362-0.742,0.124-0.982L21.17,0.195c-0.241-0.239-0.684-0.175-0.983,0.123l-8.138,8.14l-8.137-8.14 C3.762,0.169,3.567,0.062,3.39,0.043z"/> </g> </defs> </svg>',class:"closeSettingBtn"},ccBtn:{html:'<svg width="100%" height="100%" viewBox="0 0 55 55"><g><path d="M22.107,29.635l3.156,1c-0.484,1.76-1.289,3.068-2.415,3.92c-1.125,0.855-2.553,1.283-4.283,1.283 c-2.141,0-3.9-0.732-5.279-2.193c-1.378-1.465-2.067-3.465-2.067-6c0-2.684,0.692-4.77,2.079-6.252 c1.386-1.486,3.207-2.229,5.466-2.229c1.973,0,3.574,0.582,4.806,1.748c0.733,0.689,1.283,1.68,1.65,2.971l-3.223,0.77 c-0.19-0.836-0.588-1.496-1.194-1.98c-0.604-0.482-1.339-0.725-2.204-0.725c-1.195,0-2.165,0.428-2.908,1.285 c-0.746,0.859-1.117,2.248-1.117,4.17c0,2.037,0.366,3.49,1.1,4.355s1.687,1.297,2.859,1.297c0.865,0,1.609-0.275,2.233-0.824 C21.389,31.68,21.836,30.814,22.107,29.635z"/> <path d="M40.626,29.635l3.156,1c-0.484,1.76-1.289,3.068-2.415,3.92c-1.125,0.855-2.553,1.283-4.283,1.283 c-2.141,0-3.9-0.732-5.279-2.193c-1.378-1.465-2.067-3.465-2.067-6c0-2.684,0.693-4.77,2.079-6.252 c1.386-1.486,3.208-2.229,5.466-2.229c1.973,0,3.574,0.582,4.807,1.748c0.732,0.689,1.283,1.68,1.649,2.971l-3.223,0.77 c-0.19-0.836-0.588-1.496-1.193-1.98c-0.604-0.482-1.34-0.725-2.205-0.725c-1.195,0-2.165,0.428-2.908,1.285 c-0.745,0.859-1.117,2.248-1.117,4.17c0,2.037,0.366,3.49,1.1,4.355s1.687,1.297,2.86,1.297c0.864,0,1.609-0.275,2.232-0.824 C39.907,31.68,40.354,30.814,40.626,29.635z"/> </g> </svg>',class:"settingBtn ccBtn"},infoBtn:{html:'<svg width="100%" height="100%" viewBox="0 0 55 55"><g><path fill="#FFFFFF" d="M29.812,23.572c-0.604-0.583-1.456-0.924-2.312-0.924c-0.857,0-1.707,0.341-2.311,0.924 c-0.602,0.584-0.947,1.404-0.934,2.223v12.763c-0.014,0.812,0.327,1.624,0.919,2.207c0.592,0.582,1.427,0.929,2.275,0.94 c0.865,0.012,1.733-0.323,2.346-0.908c0.611-0.585,0.961-1.412,0.949-2.239V25.795C30.756,24.977,30.413,24.156,29.812,23.572z"/> <circle fill="#FFFFFF" cx="27.499" cy="16.803" r="3.507"/> <path fill="#54ACEE" d="M27.499,5C15.073,5,5,15.072,5,27.499S15.073,50,27.499,50C39.924,50,50,39.926,50,27.499 S39.924,5,27.499,5z M29.795,40.797c-0.612,0.585-1.48,0.92-2.346,0.908c-0.849-0.012-1.684-0.358-2.275-0.94 c-0.592-0.583-0.933-1.396-0.919-2.207V25.795c-0.014-0.818,0.332-1.639,0.934-2.223c0.604-0.583,1.453-0.924,2.311-0.924 c0.856,0,1.709,0.341,2.312,0.924c0.602,0.584,0.944,1.404,0.933,2.223v12.763C30.756,39.385,30.406,40.212,29.795,40.797z M27.499,20.31c-1.937,0-3.508-1.57-3.508-3.507c0-1.938,1.571-3.507,3.508-3.507c1.936,0,3.51,1.569,3.51,3.507 C31.009,18.739,29.435,20.31,27.499,20.31z"/> </g> </svg>',class:"settingBtn infoBtn"},audioTracksBtn:{html:'<svg viewBox="0 0 35 35"><path d="M8 17.48c2.925-3.402.513 1.65.66-.694.505-1.55 1.528-3.133 3.198-3.468 1.008-.31 2.078-.217 3.035.223 1.438.443 2.856 1.33 4.404 1.095 1.587-.533 2.34-2.212 3.32-3.46.64.504.9 1.862 1.394 2.68.997 2.196 2.002 4.388 2.99 6.588-.996 1.347-1.794 3.12-3.485 3.653-1.72.165-3.256-.843-4.868-1.293-1.028-.408-2.375-.52-3.133.475-.99 1.06-1.524 2.448-2.197 3.722 0 0-2.404-3.155-5.317-9.52z" fill="#fff"/></svg>',class:"audioTracksBtn controlBarBtn"},subtitleTracksBtn:{html:'<svg viewBox="0 0 35 35"><g aria-label="cc" fill="#fff" stroke-width=".611"><path d="M16.69 15.471h-1.894q-.18-1.24-.902-1.894-.721-.676-1.893-.676-1.533 0-2.413 1.262-.856 1.24-.856 3.45 0 2.096.879 3.291.88 1.195 2.435 1.195 2.412 0 2.886-2.84h1.893q-.18 2.164-1.443 3.381-1.262 1.195-3.381 1.195-2.413 0-3.833-1.668-1.398-1.691-1.398-4.554 0-2.931 1.42-4.69 1.444-1.758 3.833-1.758 2.052 0 3.27 1.105 1.24 1.104 1.397 3.201zM28.094 15.471h-1.893q-.18-1.24-.902-1.894-.722-.676-1.894-.676-1.533 0-2.412 1.262-.857 1.24-.857 3.45 0 2.096.88 3.291.879 1.195 2.434 1.195 2.412 0 2.886-2.84h1.894q-.18 2.164-1.443 3.381-1.263 1.195-3.382 1.195-2.412 0-3.832-1.668-1.398-1.691-1.398-4.554 0-2.931 1.42-4.69 1.443-1.758 3.833-1.758 2.051 0 3.269 1.105 1.24 1.104 1.397 3.201z" /></g></svg>',class:"subtitleTracksBtn controlBarBtn"},vrBtn:{html:'<svg width="100%" height="100%" viewBox="0 0 35 35"><path class="fill" d="M25.248 11.694H5.323c-.744 0-1.369.648-1.369 1.449v11.865c0 .8.625 1.454 1.397 1.454h5.447c.585 0 1.085-.37 1.295-.897l1.58-2.54a1.777 1.777 0 0 1 1.647-1.136c.738 0 1.374.466 1.641 1.136l1.58 2.54c.21.528.71.897 1.266.897h5.435a1.43 1.43 0 0 0 1.432-1.448V13.148c0-.8-.625-1.454-1.426-1.454zm-15.046 8.379a2.412 2.412 0 0 1-2.414-2.414 2.412 2.412 0 0 1 2.414-2.414 2.412 2.412 0 0 1 2.414 2.414 2.412 2.412 0 0 1-2.414 2.414zm10.224 0a2.412 2.412 0 0 1-2.414-2.414 2.412 2.412 0 0 1 2.414-2.414 2.412 2.412 0 0 1 2.414 2.414 2.412 2.412 0 0 1-2.414 2.414z" fill="none" stroke="#fff" stroke-width="1.8"/></svg>',class:"vrBtn controlBarBtn"},seekBtn:{html:'<svg width="100%" height="100%" viewBox="0 0 35 35"><g><image overflow="visible" opacity=".25" width="27" height="28" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAcCAYAAACQ0cTtAAAACXBIWXMAAAsSAAALEgHS3X78AAAA GXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAn1JREFUeNqkVoty0zAQjGQltkOh oUCBwsD0/7+K1wCltIE0jh2ciBOz19mqkuMOmdmxotfqTnerM5OH/Uyiz//P4twcM0DmxxCbEWMW bUvQ357g8c2SugEiJXDAFN8CY2HDnaAX/MG3HyI0GSKLTQNBKaiBSjDDeNh0K2gFG6AD8Y6szZKx NYFkLngsOBYs0K4w3oNoJVgKfqHdgLSPCV2GKGx4JHgqeCE4xTcQPiKyNYh+CC7wvcZebUzoojsq 4Kaw4TPBmeCt4I3gleAEYwVcFciuBN9gdYkDeyK5jVS2TK2qYUHY/L3gXPBO8BL9NZFtYNkx9e8p WPTudrFlFgExhwWvQXIO657DtSUFSIe+ig7Q4t7u3Z2LwlzJFrinM5Ce0ukdhX6JNRZEDSz9Cffe gPAfR8qNFfy/gIUahXMKeyXTnNvDpSeJqLVxNHKATDFxDtSwgBNayQylSU1rKuzD8+8piBK6CJYs Mgk5s4k1RZzH9oA2mgEBfvBcm1BwDVVGTu88CXJqjU8JsSeinjSvRVtzhl3IB8utuZPYLnoueoTq Gjq3Qvge0VwbkXWIxBtas45y7Nay2KoNFgSNu0Qol5jfR3mm86+RW5dor9B/x7oi87Q45NSUNo9d 3GDTK4jwZ8EHwSfBVyR3gydnH7uRT7qEuM4w1qJPk1XlSp+YYNEXwUesW5JlPhUgfGcrnHaC/7/x 3Kiyqw525PLvwAX6utwTw0Gypajr4Yqw2ZNIsnRug8MsAX1AtxwcuZc6lq2aMCNF4TvcEFoqDfg9 y9YgQ8UOB9VuoOjxh2qQMWWcSSjOqHJujOZNMgI8iYrTg4XqmIp4zNxRJfhfAQYA2JgMxCr5ERYA AAAASUVORK5CYII=" transform="translate(4 5.164)"/><circle fill="#FFF" cx="17.5" cy="19.164" r="7.5"/> </g> </svg>'},volumeHandlerBtn:{html:'<svg width="100%" height="100%" viewBox="0 0 35 35"><g><circle fill="#FFF" cx="17.5" cy="19.164" r="14"/> </g> </svg>'},volumeOnBtn:{html:'<svg width="100%" height="100%" viewBox="0 0 35 35"><g fill="#FFF"><path d="M14.283 11.41c-.182-.095-.402-.082-.57.035l-5.088 3.503H3.608c-.306 0-.555.25-.555.556v7.5c0 .306.25.554.555.554H8.63l5.093 3.333c.09.058.196.09.303.09.09 0 .18-.022.262-.065.18-.097.29-.284.29-.487v-14.53c0-.205-.114-.392-.295-.488zM18.694 14.998c-.36-.358-.943-.358-1.303 0-.358.36-.358.944 0 1.305 1.58 1.577 1.58 4.144 0 5.723-.358.358-.358.943 0 1.303.18.178.417.27.652.27.236 0 .472-.09.65-.27 2.3-2.298 2.3-6.036.002-8.332z"/><path d="M21.632 11.834c-.36-.36-.943-.36-1.304 0-.36.36-.36.943 0 1.303 3.323 3.323 3.323 8.73 0 12.053-.36.358-.36.942 0 1.303.18.18.415.272.65.272.235 0 .472-.092.652-.272 1.958-1.957 3.036-4.56 3.036-7.328s-1.077-5.374-3.034-7.33z"/><path d="M24.905 8.933c-.36-.358-.943-.358-1.303 0s-.36.943 0 1.303c2.384 2.387 3.697 5.556 3.697 8.93 0 3.37-1.315 6.54-3.698 8.925-.36.36-.36.944 0 1.304.18.18.415.27.65.27.235 0 .473-.09.652-.27 2.732-2.73 4.238-6.365 4.238-10.23.002-3.864-1.504-7.498-4.237-10.23z"/></g> </svg>',class:"volumeOnBtn controlBarBtn"},volumeOn1_3Btn:{html:'<svg width="100%" height="100%" viewBox="0 0 35 35"><g fill="#FFF"><path d="M14.283 11.41c-.182-.095-.402-.082-.57.035l-5.088 3.503H3.608c-.306 0-.555.25-.555.556v7.5c0 .306.25.554.555.554H8.63l5.093 3.333c.09.058.196.09.303.09.09 0 .18-.022.262-.065.18-.097.29-.284.29-.487v-14.53c0-.205-.114-.392-.295-.488zM18.694 14.998c-.36-.358-.943-.358-1.303 0-.358.36-.358.944 0 1.305 1.58 1.577 1.58 4.144 0 5.723-.358.358-.358.943 0 1.303.18.178.417.27.652.27.236 0 .472-.09.65-.27 2.3-2.298 2.3-6.036.002-8.332z"/></g> </svg>',class:"volumeOn1_3Btn controlBarBtn"},volumeOn2_3Btn:{html:'<svg width="100%" height="100%" viewBox="0 0 35 35"> <g fill="#FFF"> <path d="M14.283 11.41c-.182-.095-.402-.082-.57.035l-5.088 3.503H3.608c-.306 0-.555.25-.555.556v7.5c0 .306.25.554.555.554H8.63l5.093 3.333c.09.058.196.09.303.09.09 0 .18-.022.262-.065.18-.097.29-.284.29-.487v-14.53c0-.205-.114-.392-.295-.488zM18.694 14.998c-.36-.358-.943-.358-1.303 0-.358.36-.358.944 0 1.305 1.58 1.577 1.58 4.144 0 5.723-.358.358-.358.943 0 1.303.18.178.417.27.652.27.236 0 .472-.09.65-.27 2.3-2.298 2.3-6.036.002-8.332z"/><path d="M21.632 11.834c-.36-.36-.943-.36-1.304 0-.36.36-.36.943 0 1.303 3.323 3.323 3.323 8.73 0 12.053-.36.358-.36.942 0 1.303.18.18.415.272.65.272.235 0 .472-.092.652-.272 1.958-1.957 3.036-4.56 3.036-7.328s-1.077-5.374-3.034-7.33z"/></g> </svg>',class:"volumeOn2_3Btn controlBarBtn"},volumeOffBtn:{html:'<svg width="100%" height="100%" viewBox="0 0 35 35"><g fill="#FFF"><path d="M14.283 11.41c-.182-.095-.402-.082-.57.035l-5.088 3.503H3.608c-.306 0-.555.25-.555.556v7.5c0 .306.25.554.555.554H8.63l5.093 3.333c.09.058.196.09.303.09.09 0 .18-.022.262-.065.18-.097.29-.284.29-.487v-14.53c0-.205-.114-.392-.295-.488zM19.436 19.09l-2.197-3.338h2.11l1.325 2.174 1.337-2.174h2.11l-2.22 3.34 2.325 3.484H22.11l-1.436-2.338-1.44 2.338h-2.112l2.314-3.485z"/></g> </svg>',class:"volumeOffBtn controlBarBtn"},qualityBtn:{html:'<svg viewBox="0 0 35 35"><path d="M16.145 9.664c-.5 0-.905.404-.905.905v1.242c-.468.144-.918.326-1.343.55l-.877-.876c-.354-.354-.925-.354-1.28 0l-1.912 1.917c-.354.354-.354.925 0 1.28l.876.875c-.226.425-.408.875-.55 1.343h-1.25c-.5 0-.904.406-.904.907v2.714c0 .5.404.906.905.906h1.244c.143.468.324.918.55 1.343l-.876.876c-.354.354-.354.925 0 1.28l1.916 1.915c.354.355.925.355 1.28 0l.875-.876c.425.226.875.408 1.343.55v1.245c0 .5.405.904.906.904h2.714c.5 0 .905-.404.905-.905v-1.245c.466-.143.912-.326 1.336-.55l.876.876c.354.355.925.355 1.28 0l1.922-1.915c.353-.354.353-.925 0-1.28l-.885-.883c.225-.423.415-.87.558-1.335h1.245c.5 0 .905-.404.905-.905v-2.714c0-.5-.404-.905-.905-.905H24.85c-.142-.465-.333-.91-.557-1.335l.884-.884c.353-.353.353-.924 0-1.278l-1.924-1.916c-.354-.354-.925-.354-1.28 0l-.875.876c-.422-.225-.87-.408-1.335-.55V10.57c0-.5-.404-.904-.905-.904h-2.713v.002zm1.357 4.976c2.498 0 4.524 2.025 4.524 4.524 0 2.498-2.025 4.524-4.524 4.524-2.498 0-4.524-2.025-4.524-4.524 0-2.498 2.025-4.524 4.524-4.524z" fill="#fff"/></svg>',class:"qualityBtn controlBarBtn"},liveBtn:{html:'<svg width="100%" height="100%" viewBox="0 0 35 35"><g stroke="#333" stroke-width=".0"><circle opacity="1" fill="#ffce3e" cx="0" cy="17" r="6" /><text x="10" y="23" fill="#fff" style="font-size: 17px;">LIVE</text></svg>',class:"liveBtn"},qualityHDBtn:{html:'<svg viewBox="0 0 35 35"><g fill="#FFF"><path d="M16.145 9.664c-.5 0-.905.404-.905.905v1.242c-.468.144-.918.326-1.343.55l-.877-.876c-.354-.354-.925-.354-1.28 0l-1.912 1.917c-.354.354-.354.925 0 1.28l.876.875c-.226.425-.408.875-.55 1.343h-1.25c-.5 0-.904.406-.904.907v2.714c0 .5.404.906.905.906h1.244c.143.468.324.918.55 1.343l-.876.876c-.354.354-.354.925 0 1.28l1.916 1.915c.354.355.925.355 1.28 0l.875-.876c.425.226.875.408 1.343.55v1.245c0 .5.405.904.906.904h2.714c.5 0 .905-.404.905-.905v-1.245c.466-.143.912-.326 1.336-.55l.876.876c.354.355.925.355 1.28 0l1.922-1.915c.353-.354.353-.925 0-1.28l-.885-.883c.225-.423.415-.87.558-1.335h1.245c.5 0 .905-.404.905-.905v-2.714c0-.5-.404-.905-.905-.905H24.85c-.142-.465-.333-.91-.557-1.335l.884-.884c.353-.353.353-.924 0-1.278l-1.924-1.916c-.354-.354-.925-.354-1.28 0l-.875.876c-.422-.225-.87-.408-1.335-.55V10.57c0-.5-.404-.904-.905-.904h-2.713v.002zm1.357 4.976c2.498 0 4.524 2.025 4.524 4.524 0 2.498-2.025 4.524-4.524 4.524-2.498 0-4.524-2.025-4.524-4.524 0-2.498 2.025-4.524 4.524-4.524z"/><path d="M26.793 10.265H25.57V7.77h-2.29v2.495h-1.23V4.48h1.227v2.27h2.29V4.48h1.223v5.783zm6.257-2.948c0 .953-.27 1.683-.81 2.19-.544.504-1.326.76-2.35.76h-1.637V4.48h1.816c.944 0 1.677.252 2.2.75.52.497.78 1.194.78 2.087zm-1.273.033c0-1.242-.547-1.864-1.645-1.864h-.65V9.25h.526c1.18 0 1.77-.632 1.77-1.9z" class="md_hd_apex" fill="#ffce3e"/></g></svg>',class:"qualityHDBtn controlBarBtn"},loadingSpinner:{html:"<div></div>",class:"loadingSpinner"},pipBtn:{html:'<svg viewBox="0 0 35 35"><defs/><g fill="#FFF"><path d="M5.368 25.05l-.001-11.773H20.66v11.772l-15.292.001zM22.6 27.362a.375.375 0 00.374-.375V11.34a.375.375 0 00-.375-.376h.001H3.43a.375.375 0 00-.376.375v15.648c0 .207.168.375.375.375H22.6z"/><path fill="#fff" d="M12.74 18.864h7.064v5.298H12.74z"/></g></svg>',class:"pipBtn controlBarBtn"},pipExitBtn:{html:'<svg viewBox="0 0 35 35"><defs/><g fill="#FFF"><path d="M6.056 12.817l6.307 6.406a.25.25 0 010 .35l-.853.866a.24.24 0 01-.344 0l-6.307-6.406a.25.25 0 010-.35l.853-.866a.24.24 0 01.344 0z" paint-order="stroke fill markers"/><path d="M9.492 10.964H3.43a.375.375 0 00-.376.375v6.063c0 .207.168.375.375.375h1.563a.375.375 0 00.375-.375v-4.125h4.124a.375.375 0 00.375-.375V11.34a.375.375 0 00-.375-.376zm13.482.376a.375.375 0 00-.375-.376h.001-10.065a.375.375 0 00-.375.375v1.563c0 .207.168.375.375.375h8.125v11.772l-15.292.001v-4.126a.375.375 0 00-.375-.375H3.43a.375.375 0 00-.376.374v6.064c0 .207.168.375.375.375H22.6a.375.375 0 00.374-.375V11.34z"/></g></svg>',class:"pipExitBtn controlBarBtn"}};e.exports=n},function(e,t){function n(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var a=r(i);return[n].concat(i.sources.map(function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"})).concat([a]).join("\n")}return[n].join("\n")}function r(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var r=n(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var a=this[i][0];"number"==typeof a&&(r[a]=!0)}for(i=0;i<e.length;i++){var o=e[i];"number"==typeof o[0]&&r[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=p[r.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](r.parts[a]);for(;a<r.parts.length;a++)i.parts.push(u(r.parts[a],t))}else{for(var o=[],a=0;a<r.parts.length;a++)o.push(u(r.parts[a],t));p[r.id]={id:r.id,refs:1,parts:o}}}}function i(e,t){for(var n=[],r={},i=0;i<e.length;i++){var a=e[i],o=t.base?a[0]+t.base:a[0],s=a[1],l=a[2],d=a[3],u={css:s,media:l,sourceMap:d};r[o]?r[o].parts.push(u):n.push(r[o]={id:o,parts:[u]})}return n}function a(e,t){var n=m(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=E[E.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),E.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function o(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=E.indexOf(e);t>=0&&E.splice(t,1)}function s(e){var t=document.createElement("style");return e.attrs.type="text/css",d(t,e.attrs),a(e,t),t}function l(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",d(t,e.attrs),a(e,t),t}function d(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function u(e,t){var n,r,i,a;if(t.transform&&e.css){if(!(a=t.transform(e.css)))return function(){};e.css=a}if(t.singleton){var d=y++;n=g||(g=s(t)),r=c.bind(null,n,d,!1),i=c.bind(null,n,d,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=l(t),r=h.bind(null,n,t),i=function(){o(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(t),r=f.bind(null,n),i=function(){o(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}function c(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=T(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function f(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function h(e,t,n){var r=n.css,i=n.sourceMap,a=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||a)&&(r=b(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var o=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}var p={},v=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),m=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e.call(this,n)),t[n]}}(function(e){return document.querySelector(e)}),g=null,y=0,E=[],b=n(120);e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},t.attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=v()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=i(e,t);return r(n,t),function(e){for(var a=[],o=0;o<n.length;o++){var s=n[o],l=p[s.id];l.refs--,a.push(l)}if(e){r(i(e,t),t)}for(var o=0;o<a.length;o++){var l=a[o];if(0===l.refs){for(var d=0;d<l.parts.length;d++)l.parts[d]();delete p[l.id]}}}};var T=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){function r(e){if(!e)throw new Error("Slider needs some parameter");if(!e.handlerEl)throw new Error("Slider needs a handlerEl param");if(!e.barEl)throw new Error("Slider needs a barEl param");var t,n,r,o=this,s=e.handlerEl,l=e.barEl,d=(a.addClickTouch,"vertical"===e.scrollDirection?"clientY":"clientX"),u="vertical"===e.scrollDirection?"offsetHeight":"offsetWidth",c=(e.scrollDirection,"vertical"===e.scrollDirection?"top":"left"),f="vertical"===e.scrollDirection?"clientHeight":"clientWidth",h="vertical"===e.scrollDirection?"height":"width",p=!1,v=new i,m=e.spinnerEl||null,g=0,y=e.initLoad||0;o.on=function(e,t){return v.on(e,t)},o.off=function(e,t){return v.off(e,t)},o.mouseDown=function(){return p};var E={mouseMoveVertical:function(e){g=-1*parseInt(s[u]/2),e[d]>=l.getClientRects()[0][c]&&s.offsetTop>=g?(s.offsetTop<=l[f]&&(s.style[c]=e[d]-s[u]/2-l.getClientRects()[0][c]+"px"),s.offsetTop>l[f]-s[u]/2&&(s.style[c]=l[f]-s[u]+"px")):s.style[c]=g+"px",null!==m&&(m.style[h]=l.offsetHeight-s.offsetTop-s.offsetHeight/2+"px")},mouseMoveHorizontal:function(e){void 0!==l.getClientRects()[0]?e[d]>=l.getClientRects()[0][c]&&e[d]<=l.getClientRects()[0][h]+l.getClientRects()[0][c]?e[d]<l.getClientRects()[0][h]+l.getClientRects()[0][c]?s.style[c]=e[d]-l.getClientRects()[0][c]+"px":s.style[c]=l.getClientRects()[0][h]+l.getClientRects()[0][c]+"px":e[d]<l.getClientRects()[0][c]?s.style[c]="0":e[d]>l.getClientRects()[0][h]+l.getClientRects()[0][c]&&(s.style[c]=l.getClientRects()[0][h]+"px"):s.style[c]="0",null!==m&&(m.style[h]=l.offsetWidth-s.offsetLeft-s.offsetWidth/2+"px")}},b=function(e){!0===p&&void 0!==l.getClientRects()[0]&&(r(e),v.emit("meride.slider_mousemove")),e.preventDefault()},T=function(e){document.removeEventListener("mouseup",T),document.removeEventListener("mousemove",b),p=!1,v.emit("meride.slider_mouseup")},w=function(e){p=!0,document.addEventListener("mouseup",T,!1),document.addEventListener("mousemove",b,!1),v.emit("meride.slider_mousedown"),e.preventDefault()},S=function(e){v.emit("meride.slider_movetouch"),void 0!==l.getClientRects()[0]&&void 0!==t[0]?t[0][d]>=l.getClientRects()[0][c]&&t[0][d]<=l.getClientRects()[0][h]+l.getClientRects()[0][c]?t[0][d]<l.getClientRects()[0][h]+l.getClientRects()[0][c]?s.style[c]=t[0][d]-l.getClientRects()[0][c]+"px":s.style[c]=l.getClientRects()[0][h]+l.getClientRects()[0][c]+"px":t[0][d]<l.getClientRects()[0][c]?s.style[c]="1px":t[0][d]>l.getClientRects()[0][h]+l.getClientRects()[0][c]&&(s.style[c]=l.getClientRects()[0][h]+"px"):s.style[c]="0",n=0},A=function(e){v.emit("meride.slider_movetouch_notreqanim"),void 0!==l.getClientRects()[0]&&void 0!==e.touches[0]&&(s.style[c]=e.touches[0][d]-s[u]/2-l.getClientRects()[0][c]+"px")},L=function(e){t=e.touches,!n&&window.requestAnimationFrame&&(n=window.requestAnimationFrame(S)),e.cancelable&&e.preventDefault()},k=function(e){v.emit("meride.slider_touchend"),e.target.removeEventListener("touchend",k),e.target.removeEventListener("touchcancel",k),e.target.removeEventListener("touchmove",L),e.preventDefault()},C=function(e){v.emit("meride.slider_touchstart"),e.target.addEventListener("touchend",k,!1),e.target.addEventListener("touchcancel",k,!1),e.target.addEventListener("touchmove",L,!1),e.defaultPrevented&&e.preventDefault()},_=function(t){if(!t)throw new Error("Slider.setPosition requires some opts");if(void 0===t.level)throw new Error("Slider.setPosition requires a level option");setTimeout(function(){var n,r;"vertical"===e.scrollDirection?(n=l[f]-t.level*l[f],0===t.level?n-=s[u]:n-=s[u]/2,s.style[c]=n+"px"):(n=t.level*l[f]-s[u]/l[f]/2,s.style[c]=n+"px"),null!==m&&(r=t.level*l[f],m.style[h]=r+"px")},500)};o.setPosition=_,o.init=function(e){s.addEventListener("mousedown",w,!1),s.addEventListener("mouseup",T,!1),s.addEventListener("touchstart",C,{passive:!0}),window.requestAnimationFrame||s.addEventListener("touchstart",A,{passive:!0});var t=y;e&&e.level&&(t=e.level),_({level:t})},o.end=function(){s.removeEventListener("mousedown",w),s.removeEventListener("mouseup",T),s.removeEventListener("touchstart",C),window.requestAnimationFrame||s.removeEventListener("touchstart",A)},r="vertical"===e.scrollDirection?E.mouseMoveVertical:E.mouseMoveHorizontal}var i=n(0),a=n(2);e.exports=r},function(e,t,n){if(window.Meride&&window.Meride.initEmbed&&window.Meride.initAll)throw new Error("Meride already loaded. You should include the script only once.");var r=n(41),i=n(5),a=n(23);n(77),n(102),n(113);window.Meride=r,meride.embed.EmbedConfig.proxyURL=a.BASE_URL+"proxy/bulkproxynew/embedproxy_bulk.php/",meride.embed.EmbedConfig.tokenServiceURL=a.TOKEN_SERVICE_URL,document.querySelectorAll||function(){var e=document,t=e.createStyleSheet();e.querySelectorAll=function(n,r,i,a,o){for(o=e.all,r=[],n=n.replace(/\[for\b/gi,"[htmlFor").split(","),i=n.length;i--;){for(t.addRule(n[i],"k:v"),a=o.length;a--;)o[a].currentStyle.k&&r.push(o[a]);t.removeRule(0)}return r}}(),"function"!=typeof Object.create&&(Object.create=function(){var e=function(){};return function(t){if(arguments.length>1)throw Error("Second argument not supported");if("object"!=typeof t)throw TypeError("Argument must be an object");e.prototype=t;var n=new e;return e.prototype=null,n}}()),window.CustomEvent||-1!=navigator.appVersion.indexOf("MSIE 8.")||-1!=navigator.appVersion.indexOf("MSIE 7.")||-1!=navigator.appVersion.indexOf("MSIE 6.")||function(){var e;e=function(e,t){var n;t=t||{bubbles:!1,cancelable:!1,detail:void 0};try{n=document.createEvent("CustomEvent"),n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail)}catch(i){n=document.createEvent("Event");for(var r in t)n[r]=t[r];n.initEvent(e,t.bubbles,t.cancelable)}return n},e.prototype=window.Event.prototype,window.CustomEvent=e}(),(-1!=navigator.appVersion.indexOf("MSIE 9.")||-1!=navigator.appVersion.indexOf("MSIE 10.")||navigator.userAgent.match(/Trident\//)&&navigator.userAgent.match(/rv/))&&function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e}(),function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}if("function"==typeof window.CustomEvent)return!1;e.prototype=window.Event.prototype,window.CustomEvent=e}(),function(e){e.forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),i.onDOMLoaded(function(){!0!==window.Meride.preventOnDOMLoaded&&r.initAll()})},function(e,t,n){var r=n(22),i=n(75),a=n(1),o=n(76),s=n(4),l=n(7),d=window.Meride||{};d.embeds=[],d.EventType=a,d.initEmbed=function(e){if(!e.embedID&&!e.embedSelector)throw new Error("embedID or embedSelector required by initEmbed");var t=function(t){if(!t)throw new Error("Meride - Embed not found");var n,i=meride.embed.Embed,u=t.getAttribute("data-customer"),c=t.getAttribute("data-holacdn"),f=l.isMobile(),h=e.bulkLabel?e.bulkLabel||"NO_LABEL":t.getAttribute("data-bulk-label")||"NO_LABEL",p=new i({embedID:e.embedID,clientID:u,device:f?"mobile":"desktop",videoFormat:f?"m3u8":"f4m",bulkLabel:h});null!==c&&void 0===window.hola_cdn&&s.include("//player.h-cdn.com/loader.js?customer="+c,function(){},{async:!0,crossorigin:"anonymous"}),p.read().then(function(i){try{var s=p.getScrollMode(),l=!(!e.scrollMode||!0!==e.scrollMode.enabled)||!0===s.enabled;if(e.response=i,e.embed=p,e.embedElement=t,l){if(!e.scrollMode&&(e.scrollMode=s,e.scrollMode.destroyOn))for(var u in e.scrollMode.destroyOn)e.scrollMode.destroyOn.hasOwnProperty(u)&&(e.scrollMode.destroyOn[u]=a[e.scrollMode.destroyOn[u]]);e.advManager&&"ima"===e.advManager&&(e.advManager="default");new o(e)}else{n=new r;var c={id:e.embedID,destroy:n.destroy};d.embeds.push(c),n.init(e)}}catch(e){}}).catch(function(e){})};try{if(e.embedSelector){var n=document.querySelector(e.embedSelector);if(n){if(null===n.getAttribute("data-embed"))throw new Error("data-embed is required on Meride element");e.embedID=n.getAttribute("data-embed"),n.setAttribute("data-ack","true"),t(n)}}else{var i=document.querySelectorAll(".meride-video-container[data-embed='"+e.embedID+"']:not([data-ack='true'])");for(var u in i)i.hasOwnProperty(u)&&(i[u].setAttribute("data-ack","true"),t(i[u]))}}catch(e){}},d.findEmbeds=function(e){if(!e.embedID)throw new Error("embedID required by findEmbed");var t=[];for(var n in d.embeds)d.embeds.hasOwnProperty(n)&&d.embeds[n].id==e.embedID&&t.push(d.embeds[n]);return t},d.initAll=function(e){for(var t=document.getElementsByClassName("meride-video-container"),n=0,r=t.length;n<r;n+=1){var i={};for(var a in e)e.hasOwnProperty(a)&&(i[a]=e[a]);i.embedID=t[n].getAttribute("data-embed"),d.initEmbed(i)}},d.getPlayer=function(e){if(!e.embedID&&!e.embedSelector)throw new Error("embedID or embedSelector required by getPlayer");return e.embedID?document.querySelector(".meride-video-container[data-embed='"+e.embedID+"']"):e.embedSelector?document.querySelector(e.embedSelector):void 0},d.getPlayerContainer=d.getPlayer,d.preventOnDOMLoaded=!1,d.resize=function(e){if(!e)throw new Error("resize method requires embedID property");var t=d.getPlayer({embedID:e.embedID});if(null!==t){var n=t.querySelector("video");t.style.width=(e.width||t.offsetWidth)+"px",t.style.height=(e.height||t.offsetHeight)+"px",n.style.width=(e.width||n.offsetWidth)+"px",n.style.height=(e.height||n.offsetHeight)+"px",n.setAttribute("width",e.width||n.offsetWidth),n.setAttribute("height",e.height||n.offsetHeight)}},d.initEmbedFullWindow=function(e){return new i(e)},e.exports=d},function(e,t){var n=new function(){var e=this;e.installed=!1,e.raw="",e.major=-1,e.minor=-1,e.revision=-1,e.revisionStr="";var t=[{name:"ShockwaveFlash.ShockwaveFlash.7",version:function(e){return n(e)}},{name:"ShockwaveFlash.ShockwaveFlash.6",version:function(e){var t="6,0,21";try{e.AllowScriptAccess="always",t=n(e)}catch(e){}return t}},{name:"ShockwaveFlash.ShockwaveFlash",version:function(e){return n(e)}}],n=function(e){var t=-1;try{t=e.GetVariable("$version")}catch(e){}return t};e.majorAtLeast=function(t){return e.major>=t},e.minorAtLeast=function(t){return e.minor>=t},e.revisionAtLeast=function(t){return e.revision>=t},e.versionAtLeast=function(t){var n=[e.major,e.minor,e.revision],r=Math.min(n.length,arguments.length);for(i=0;i<r;i++){if(!(n[i]>=arguments[i]))return!1;if(!(i+1<r&&n[i]==arguments[i]))return!0}},e.FlashDetect=function(){var n,r,i,a,o;if(navigator.plugins&&0<navigator.plugins.length){var s=navigator.mimeTypes;if(s&&s["application/x-shockwave-flash"]&&s["application/x-shockwave-flash"].enabledPlugin&&s["application/x-shockwave-flash"].enabledPlugin.description){n=s=s["application/x-shockwave-flash"].enabledPlugin.description;var s=n.split(/ +/),l=s[2].split(/\./),s=s[3];r=parseInt(l[0],10),i=parseInt(l[1],10),a=s,o=parseInt(s.replace(/[a-zA-Z]/g,""),10)||e.revision,e.raw=n,e.major=r,e.minor=i,e.revisionStr=a,e.revision=o,e.installed=!0}}else if(-1==navigator.appVersion.indexOf("Mac")&&window.execScript)for(s=-1,l=0;l<t.length&&-1==s;l++){n=-1;try{n=new ActiveXObject(t[l].name)}catch(e){n={activeXError:!0}}n.activeXError||(e.installed=!0,-1!=(s=t[l].version(n))&&(n=s,a=n.split(","),r=parseInt(a[0].split(" ")[1],10),i=parseInt(a[1],10),o=parseInt(a[2],10),a=a[2],e.raw=n,e.major=r,e.minor=i,e.revision=o,e.revisionStr=a))}}()};n.JS_RELEASE="1.0.4",e.exports=n},function(e,t,n){var r=n(0),i=n(1),a=n(6),o=function(e){if(!e.embedID)throw new Error("embedID required by FlashObject");var t={},n=null,o=e.embedID,s=e.container,l=new r;t.embedID=o,t.on=function(e,t){return l.on(e,t)},t.off=function(e,t){return l.off(e,t)};var d=function(){l.emit("meride."+n.getState(),o)},u=function(e){l.emit("meride.durationChange",o,e)},c=function(e){l.emit("meride.playing",o,e)},f=function(e){l.emit("meride.currentTimeChange",o,e)},h=function(e){l.emit("meride.seekingChange",o,e)},p=function(){a.emit(i.ENDED,s),l.emit("meride.complete",o)},v=function(e){a.emit(i.AD_STARTED,s,{tag:e}),l.emit("meride.adstarted",o,e)},m=function(){a.emit(i.AD_ENDED,s),l.emit("meride.adcompleted",o)},g=function(){a.emit(i.AD_ERROR,s),l.emit("meride.aderror",o)},y=function(e){a.emit(i.AD_CLICKED,s,{clickThroughUrl:e.clickThroughUrl||"",adID:e.adID,adTitle:e.adTitle,adSystem:e.adSystem}),l.emit("meride.adclicked",o,e)};return t.javascriptCallbackFunction=function(e){null===n&&(n=document.getElementById(e),l.emit("meride.ready",{player:n}),a.emit(i.READY,s,{player:n}),window["merideOnMediaPlayerStateChange"+o]=d,window["durationChange"+o]=u,window["currentTimeChange"+o]=f,window["seekingChange"+o]=h,window["complete"+o]=p,window["adStarted"+o]=v,window["adCompleted"+o]=m,window["adError"+o]=g,window["adClicked"+o]=y,window["playing"+o]=c,n.addEventListener("mediaPlayerStateChange","merideOnMediaPlayerStateChange"+o),n.addEventListener("durationChange","durationChange"+o),n.addEventListener("currentTimeChange","currentTimeChange"+o),n.addEventListener("seekingChange","seekingChange"+o),n.addEventListener("playing","playing"+o),n.addEventListener("complete","complete"+o),n.addAdvEventListener("AD_STARTED","adStarted"+o),n.addAdvEventListener("ALL_ADS_COMPLETED","adCompleted"+o),n.addAdvEventListener("AD_LOAD_ERROR","adError"+o),n.addAdvEventListener("AD_CLICKED","adClicked"+o))},t};e.exports=o},function(e,t,n){var r=n(4),i=function(e){if(!e.params)throw new Error("Nielsen requires some parameters (params)");if(!e.player)throw new Error("Nielsen requires a player object (FlashObject or video tag HTML5)");if(!e.type)throw new Error("Nielsen requires a type (html5|flash)");var t={},n=e.params,i=0,a=!1,o=null,s=e.player,l=!1,d=!1,u=function(){s.on("meride.playing",function(e){e.arguments[0]===s.embedID&&i>0&&!1===a&&(a=!0,o.ggPM(15,n.src,"content","<length>"+parseInt(i,10)+"</length><title>"+n.title.replace("'","'")+"</title><censuscategory>content_"+n.vcid+"</censuscategory>"))}),s.on("meride.durationChange",function(e){e.arguments[0]===s.embedID&&(i=e.arguments[1])}),s.on("meride.complete",function(e){e.arguments[0]===s.embedID&&(a=!1,o.ggPM(7,parseInt(i,10)))})},c=function(){var e=[0,0],t={pause:function(){l=!0,o.ggPM(6,Math.floor(s.video.currentTime))},seeked:function(t){void 0!==e[0]&&void 0!==e[1]&&Math.abs(Math.floor(e[0])-Math.floor(e[1]))>2&&o.ggPM(8,Math.floor(e[0]),Math.floor(e[1]))},seekStart:function(e){},ended:function(){a=!1,o.ggPM(7,Math.floor(s.video.duration))},timeupdate:function(t){e.push(s.video.currentTime),e.splice(0,1)},playing:function(){!1===d?(d=!0,o.ggPM(3,n.src,"content","<length>"+Math.floor(s.video.duration)+"</length><title>"+n.title.replace("'","'")+"</title><censuscategory>content_"+n.vcid+"</censuscategory>"),o.ggPM(5,Math.floor(s.video.currentTime))):!0===l&&(l=!1,o.ggPM(5,Math.floor(s.video.currentTime))),!1===a&&(a=!0,s.video.addEventListener("pause",t.pause,!1),s.video.addEventListener("seeked",t.seeked,!1),s.video.addEventListener("ended",t.ended,!1))}};s.video.addEventListener("playing",t.playing,!1),s.video.addEventListener("timeupdate",t.timeupdate,!1)};return t.init=function(){r.include("https://secure-it.imrworldwide.com/novms/js/2/ggcmb390.js",function(){if(o=new gg,o.ggInitialize(n,0,!1,!0),"flash"===e.type)u();else{if("html5"!==e.type)throw new Error("Invalid parameter for Nielsen type");c()}})},t};e.exports=i},function(e,t,n){var r=n(14),i=n(1),a=function(e){if(!e.params)throw new Error("NielsenNewSDK requires some parameters (params)");if(!e.params.appid)throw new Error("NielsenNewSDK requires an appid");if(!e.player)throw new Error("NielsenNewSDK requires a player object (FlashObject or video tag HTML5)");if(!e.containerEl)throw new Error("NielsenNewSDK requires a containerEl object (main Meride div)");if(!e.type)throw new Error("NielsenNewSDK requires a type (html5|flash)");var t={},n=e.params,a=0,o=!1,s=e.player,l=e.containerEl,d=!1,u=!1,c=!1,f=!1,h=0,p=!1,v=null,m={},g=!1,y=!0===e.isLive,E=null,b={clientid:n.clientid,vcid:n.vcid},T=0,w=e.hls?e.hls:null,S=null,A=!1,L=0,k=function(){s.on("meride.playing",function(e){e.arguments[0]===s.embedID&&a>0&&!1===o&&(o=!0,v.ggPM("5",m))}),s.on("meride.durationChange",function(e){e.arguments[0]===s.embedID&&(a=e.arguments[1])}),s.on("meride.complete",function(e){e.arguments[0]===s.embedID&&(o=!1,v.ggPM("57",parseInt(a,10)))})},C=function(){var e=[0,0],t="",n=function(e,n,a){""!==(t=r.getAdvState())&&t!==i.AD_ENDED||(void 0!==a?v.ggPM(e,n,a):v.ggPM(e,n))},a=function(){return!0===y?Math.floor(Date.now()/1e3):Math.floor(s.video.currentTime)},b=function(){try{clearInterval(E),E=null}catch(e){}},k=function(){var e=a();T===e||s.video.paused||u||f||(T=e,n("49",a()))},C=function(){E=setInterval(function(){k()},500)},_=function(){setTimeout(function(){!1===A&&!isNaN(s.video.duration)&&s.video.duration>0&&!1===g&&(g=!0,m.length=!0===y?"86400":Math.floor(s.video.duration).toString(),n("3",m),s.video.addEventListener("pause",D.pause,!1),s.video.addEventListener("ended",D.ended,!1),null===w?(s.video.addEventListener("stalled",D.stalled,!1),s.video.addEventListener("error",D.error,!1),s.video.addEventListener("canplay",D.canplay,!1)):s.on("meride.hlsobject_error",D.hlsError),s.on("meride.seek_start",D.seekStart),s.video.addEventListener("playing",D.playing,!1),s.video.addEventListener("play",function(){},!1),s.video.addEventListener("timeupdate",D.timeupdate,!1),n("5",0),s.video.addEventListener("seeked",D.seeked,!1),C())},500)},D={pause:function(){d=!0,n("6",a())},seeked:function(t){f||c||void 0!==e[0]&&void 0!==e[1]&&e[0]>0&&e[1]>0&&(n("6",Math.floor(L)),n("8",Math.floor(L),Math.floor(e[1]))),s.video.paused||(s.video.play(),f||c||0===a()||n("5",a()))},seekStart:function(e){f=!0,h=a(),s.video.pause()},ended:function(){if(r.getAdvState()!==i.AD_REQUESTING){var e=function(){s.video.removeEventListener("play",e),n("3",m),f=!1,setTimeout(function(){s.video.addEventListener("seeked",D.seeked)},500)};o=!1,n("57",a()),n("7",a()),s.video.removeEventListener("seeked",D.seeked),s.video.addEventListener("play",e,!1),p=!1}},timeupdate:function(t){(0===e[0]&&0===e[1]||Math.abs(s.video.currentTime-e[0])>=1)&&(L=e[0],e.push(s.video.currentTime),e.splice(0,1))},stalled:function(){u=!0,D.pause()},error:function(){c=!0},canplay:function(){u=!1,c=!1},durationchange:function(){setTimeout(function(){S=s.video.getAttribute("data-meride-adv"),isNaN(s.video.duration)||!(s.video.duration>0)||!1!==A||"started"===S||s.video.paused&&!1!==s.video.autoplay||(s.video.removeEventListener("durationchange",D.durationchange),_())},500)},playing:function(){f&&(f=!1,n("8",h,a())),c=!1,!0===d&&(d=!1,0!==a()&&n("5",a())),!0===u&&(u=!1),!1===o&&(o=!0)},beforeunload:function(){n("57",a()),n("7",a()),b()},hlsError:function(e){c=!0,e.arguments&&e.arguments[1]&&!0===e.arguments[1].fatal&&(f=!1,d=!0,n("6",a()))}};l.addEventListener(Meride.EventType.AD_STARTED,function(){A=!0},!1),l.addEventListener(Meride.EventType.AD_ENDED,function(){A=!1},!1),l.addEventListener(Meride.EventType.AD_ERROR,function(){A=!1},!1),s.video.addEventListener("durationchange",D.durationchange,!1),"onpagehide"in window?window.addEventListener("pagehide",D.beforeunload):window.addEventListener("beforeunload",D.beforeunload),window.addEventListener("scroll",k)},_=function(e){return e.replace("&#039;"," ").replace("''"," ").replace("à","a").replace("ò","o").replace("è","e").replace("é","e").replace("ù","u").replace("ì","i").replace("+"," ").replace("+","").replace("&","_e_").replace("%26","_e_").replace("€","_eur_").replace("£","_pound_").replace("&amp;"," ")};return t.init=function(){!function(e,t){e[t]=e[t]||{nlsQ:function(n,r,i,a,o,s){return o=e.document,a=o.createElement("script"),a.async=1,a.src=("http:"===e.location.protocol?"http:":"https:")+"//cdn-gl.imrworldwide.com/conf/"+n+".js#name="+r+"&ns="+t,s=o.getElementsByTagName("script")[0],s.parentNode.insertBefore(a,s),e[r]=e[r]||{g:i,ggPM:function(t,n,i,a,o){(e[r].q=e[r].q||[]).push([t,n,i,a,o])}},e[r]}}}(window,"NOLBUNDLE"),n.sdkdebug&&"debug"===n.sdkdebug&&(b.nol_sdkDebug="debug");var t=_(n.title);if(m={type:"content",assetid:s.container.getAttribute("data-embed"),program:t.substr(0,25),title:t.substr(0,40),airdate:"19700101 00:00:00",isfullepisode:"y",adloadtype:"2"},void 0===(v=NOLBUNDLE.nlsQ(n.appid,t,b)))throw new Error("NielsenNewSDK - nSdkInstance is undefined. Please check if title is less then 11 characters.");if("flash"===e.type)k();else{if("html5"!==e.type)throw new Error("Invalid parameter for NielsenNewSDK type");C()}},t};e.exports=a},function(e,t,n){var r=n(4),i=function(e){if(!e.params)throw new Error("Comscore requires some parameters (params)");if(!e.params.user)throw new Error("Comscore requires a user inside params");var t={},n=e.params;return t.init=function(){r.include("https://sb.scorecardresearch.com/beacon.js",function(){COMSCORE.beacon({c1:1,c2:n.user,c3:n.title,c5:"02"})})},t};e.exports=i},function(e,t,n){var r=n(4),i=n(1),a=function(e){if(!e)throw new Error("Webtrekk requires some parameter");if(!e.scriptURL)throw new Error("Webtrekk requires scriptURL param");if(!e.trackDomain)throw new Error("Webtrekk requires trackDomain param");if(!e.trackId)throw new Error("Webtrekk requires trackId param");if(!e.player)throw new Error("Webrekk requires a player {Player} param");if(!e.playerContainer)throw new Error("Webrekk requires a playerContainer {DOMElement} param");var t={},n=e.player.video,a=e.playerContainer,o=e.title?e.title:"No title",s=function(){wt_sendinfo_media.apply(this,arguments)},l=!1,d=e.mg||"",u=null,c=-1,f=function(){null!==u&&(clearInterval(u),u=null)},h=function(t){if(null===u){var r=n.currentTime;u=setInterval(function(){r=Math.floor(n.currentTime),!0===e.isLive&&0!==r&&r%30==0?s(o,"alive",r,c,d,"",100*n.volume,!0===n.muted?"1":"0",Date.now()):!1===e.isLive&&r%10==0&&0!==r&&s(o,"pos",r,c,d,"",100*n.volume,!0===n.muted?"1":"0",Date.now())},1e3)}c<=0?setTimeout(function(){s(o,"play",Math.floor(n.currentTime),c,d,"",100*n.volume,!0===n.muted?"1":"0",Date.now())},500):s(o,"play",Math.floor(n.currentTime),c,d,"",100*n.volume,!0===n.muted?"1":"0",Date.now())},p=function(e){!1===l&&Math.floor(n.currentTime)!==c&&(s(o,"pause",Math.floor(n.currentTime),c,d,"",100*n.volume,!0===n.muted?"1":"0",Date.now()),f())},v=function(e){s(o,"eof",c,c,d,"",100*n.volume,!0===n.muted?"1":"0",Date.now()),n.addEventListener("play",m,!1),n.removeEventListener("play",h,!1),f()},m=function(e){n.removeEventListener("play",m),s(o,"init",Math.floor(n.currentTime),c,d,"",100*n.volume,!0===n.muted?"1":"0",Date.now()),s(o,"play",Math.floor(n.currentTime),c,d,"",100*n.volume,!0===n.muted?"1":"0",Date.now()),n.addEventListener("play",h,!1)},g=function(e){n.removeEventListener("seeked",g),l=!1,setTimeout(function(){!0===n.paused?p():h()},500)},y=function(e){n.addEventListener("seeked",g,!1),l=!0,s(o,"seek",Math.floor(n.currentTime),c,d,"",100*n.volume,!0===n.muted?"1":"0",Date.now())},E=function(e){try{a.removeEventListener(i.AD_ENDED,E)}catch(e){}try{a.removeEventListener(i.AD_ERROR,E)}catch(e){}n.addEventListener("play",h,!1)},b=function(t){a.removeEventListener(i.LOADEDMETADATA,b),c=Math.floor(n.duration),s(o,"init",Math.floor(n.currentTime),c,d,"",100*n.volume,!0===n.muted?"1":"0",Date.now()),!0===e.autoPlay&&s(o,"autoplay_on",Math.floor(n.currentTime),c,d,"",100*n.volume,!0===n.muted?"1":"0",Date.now())},T=function(e){a.removeEventListener(i.AD_STARTED,T),s(o,"preroll1-start",Math.floor(n.currentTime),c,d,"",100*n.volume,!0===n.muted?"1":"0",Date.now())},w=function(e){a.removeEventListener(i.AD_ENDED,w),s(o,"preroll1-stop",Math.floor(n.currentTime),c,d,"",100*n.volume,!0===n.muted?"1":"0",Date.now())},S=function(t){a.removeEventListener(i.PLAY_CONTENT,w),n.addEventListener("pause",p,!1),n.addEventListener("ended",v,!1),e.player.on("meride.seek_start",y)};return t.init=function(){r.include(e.scriptURL,function(){wt_init_media(e.trackDomain,e.trackId,e.samplingRate||null),a.addEventListener(i.LOADEDMETADATA,b,!1),e.advManager?(a.addEventListener(i.AD_STARTED,T,!1),a.addEventListener(i.PLAY_CONTENT,S,!1),a.addEventListener(i.AD_ENDED,w,!1),a.addEventListener(i.AD_ENDED,E,!1),a.addEventListener(i.AD_ERROR,E,!1)):(n.addEventListener("play",h,!1),n.addEventListener("pause",p,!1),n.addEventListener("ended",v,!1),e.player.on("meride.seek_start",y))})},t};e.exports=a},function(e,t,n){var r=(n(1),function(e){if(!e)throw new Error("ComscoreVA requires some parameters");if(!e.user)throw new Error("ComscoreVA requires a user param");if(!e.playerID)throw new Error("ComscoreVA requires a playerID param");if(!e.player)throw new Error("ComscoreVA requires a player param");if(!e.renderer)throw new Error("ComscoreVA requires a renderer param");var t={},n=(e.user,e.playerID),r=e.player,i=e.renderer,a=i.tracker,o=["start","complete","pause","mute","unmute","resume","creativeView","error","impression","viewable_impression"];t.init=function(){for(var e=function(e){e.arguments[0]&&null!==e.arguments[0].match("vce4v=1")&&(a.blockNetTracking=!0,cs_vce_.trackEvent(e.event.replace("meride:tracking:",""),e.arguments[0],{ns_ad_cd:r.video.duration,ns_ad_fs:!1,ns_ad_vs:0!==r.video.volume,ns_ad_ctp:!1,ns_ad_sz:r.video.offsetWidth+"x"+r.video.offsetHeight},n))},t=0,i=o.length;t<i;t+=1)a.on("meride:tracking:"+o[t],e)};return"undefined"==typeof cs_vce_&&function(){!function(){var e="encodeURIComponent",t="decodeURIComponent",n="createElement",r="location",i="getElementById",a="length",o="setAttribute",s="indexOf",l="charAt",d="href",u="split",c="substr",f="src",h="width",p="height",v="http",m="addEventListener",g="queryParams",y="optionalParams",E="ns_ad_",b=E+"pcd",T=E+"sz",w=E+"ps",S=E+"vs",A="defaultTrackingURL",L="handlerForVCECallback",k="loader",C="playerId",_="partnerId",D="notInited",R=window,I=document;ns_=R.ns_||{},ns_.vce_vh=ns_.vce_vh||{},ns_.vce_vh.player_cache=ns_.vce_vh.player_cache||{},ns_.vce_vh.Loader=ns_.vce_vh.Loader||function(){function E(e){return e?e.replace(/\s+/g,""):e}function A(){try{return ns_.vce_v.R&&ns_.vce_v&&ns_}catch(e){return!1}}function L(){var e=E(ue);return e=e+"#cs_vp_sv="+Z+"&ns_ad_pa="+G+"&ns_swfid="+ee}function k(e){var t=I[n]("script");t.type="text/javascript",t[f]=e,t.async=!0;try{var r=I[i](K);if(!r)return;r[m]("loadedmetadata",function(e){var t=this.videoWidth,n=this.videoHeight,i=this[h],a=this[p];ne[b]=r.duration,ne[T]=t+"x"+n,ne[w]=i+"x"+a,ne[S]=0!==r.volume},!1),r.parentNode.insertBefore(t,r.nextSibling)}catch(e){}}function C(e){var t={};return t=N(e),!t[w]&&ne[w]&&(t[w]=ne[w]),!t[T]&&ne[T]&&(t[T]=ne[T]),!t[b]&&ne[b]&&(t[b]=ne[b]),!t[S]&&ne[S]&&(t[S]=ne[S]),t}function _(e,t,n){t||(t=z),e&&t&&(n?Y.push({eventType:e,eventURL:t,optionalParams:n}):Y.push({eventType:e,eventURL:t,optionalParams:{}}),setTimeout(D,0))}function D(){var e=0,t=Y[a],n={},r="",i={};if(X>Q){for(e=0;e<t;++e)x(Y[e]);return void(Y[a]=0)}if(!A())return X+=J,void setTimeout(D,J);if(0!==t){for(e=0;e<t;++e){try{n=B(Y[e].eventURL),r=n.url+"?"+M(n[g]),P(),i=C(Y[e][y]),i.bufferTime=X}catch(e){}try{ns_.vce_v.Tr(ee,Y[e].eventType,r,M(i))}catch(e){}}Y[a]=0}}function x(e){var t,n,r={},i="",a={},o="v_"+e.eventType,s=e[y],l={},d="";try{r=B(e.eventURL),i=r.url;for(t in r[g])a[t]=r[g][t];if(n=a.c2+""+a.c3,a.ns__t=(new Date).getTime(),n in ce?(a.ns__p=ce[n],te=ce[n]):ce[n]=a.ns__t,a.ns_ad_vevent=o,a.ns_ad_event="video",a.ns_ad_pa=G,te)for(var u=["c3","ca3","cb3","cc3","cd3","ce3","cf3","cg3","ch3","ci3","cj3","ck3","cl3"],c=0;c<u.length;c++){var f=u[c],h=f.replace(/3/gi,1);a.hasOwnProperty(f)&&3==a[h]&&(a[f]="_e0_"+a[f])}if(a.cs_vp_sv=Z,a.ns_ad_wt=X,s){P(),l=C(s);for(var p in l)a[p]=l[p]}d=i+"?"+M(a),F(d)}catch(e){}}function O(e){var t,n=0;for(t in e)e[t]&&n++;return n}function M(e){var t="";for(var n in e)""!==t&&(t+="&"),t+=n+"="+oe(e[n]).replace(/-/g,"%2D").replace(/@/g,"%40").replace(/\*/g,"%2A");return t}function B(e){var n="",r={},i="",o=0,d=[];if(!e)return{url:null,queryParams:null};if(e=E(e),0!==e[s](v)&&(e=v+"://"+e),le[l](4)!=e[l](4)&&(e=le+("s"==le[l](4)?e[c](7):e[c](9))),-1!=e[s]("?")){if(n=e[c](0,e[s]("?")),i=e[c](e[s]("?")+1),-1!=i[s]("&")){r={},i=i.replace(/&amp;/gi,"&").replace(/amp;/gi,"");var f=i[u]("&");for(o=0;o<f[a];++o)if(d=f[o][u]("="),2==d[a])try{r[R[t](d[0])]=R[t](d[1])}catch(e){r[d[0]]=d[1]}}else if(d=i[u]("="),2==d[a]){r={};try{r[R[t](d[0])]=R[t](d[1])}catch(e){r[d[0]]=d[1]}}}else n=e;return{url:n,queryParams:r}}function N(e){var n,r={};if(!e)return{};if(0===O(e))return{};for(n in e)try{r[R[t](n)]=R[t](e[n])}catch(i){n=R[t](n),r[n]=e[n]}return r}function P(){if(K){var e=I[i](K);if(ne[b]||(ne[b]=e.duration),!ne[T]){var t=e.videoWidth,n=e.videoHeight;ne[T]=t+"x"+n}if(!ne[w]){var r=e[h],a=e[p];ne[w]=r+"x"+a}ne[S]||(ne[S]=0!==e.volume)}}function F(e){var t=I[n]("img");t[o](f,e),t[o](p,"1px"),t[o](h,"1px"),I.body.appendChild(t)}function U(){for(var e=I[i](K),t=!1,n=0,r=ae[a];n<r;++n)t=t||e==I[ae[n]],I[ae[n]]&&(t=t||e==I[ae[n]].getElementsByTagName("video")[0]),t=t||re;return t}function j(e,t){W&&W(e,t)}function V(){var e,t=$+"evt",n=$+"fs";K&&(e=I[i](K)),e&&(e[t]=j,e[n]=U)}function H(e){W=e}function q(e,t,n){G=e;var r=I[i](t);r&&(r[ee]=function(){return!0},K=t,k(L()),V(),n&&(z=n),r[m]("webkitbeginfullscreen",function(){re=!0},!1),r[m]("webkitendfullscreen",function(){re=!1},!1))}var G,K,W,z,Y=[],X=0,Q=5e3,J=500,$="cs_",Z="1.1501.28h",ee=$+Math.floor(1e13*Math.random()+1),te=0,ne={},re=!1,ie="FullscreenElement",ae=["ms"+ie,"webkit"+ie,"mozFullScreenElement","fullscreenElement","o"+ie,"khtml"+ie],oe=R[e]?R[e]:escape,se=oe(I[r]&&I[r][d]?I[r][d]:I.URL),le="http"+("s"==se[l](4)?"s://s":"://"),de=le+"b.scorecardresearch.com",ue=de+"/c2/vce4v/rs.js",ce={};return{init:q,addCallback:H,trackEvent:_}},ns_.vce_vh.boot=ns_.vce_vh.boot||function(){function e(e){if(e.length<2)return!1;var t=e[0];if("string"==typeof t&&t.trim().length>0){for(var n=1,r=e.length;n<r;++n){var i=e[n];if(i.constructor!==Object||!i[C])break}if(n===r)return!0}return!1}function t(){if(e(arguments)){for(var t=arguments,n=t[0].trim(),a=1,o=t.length;a<o;++a){var s=t[a],l=s[C],d=new i;r[l]={},r[l][k]=d,r[l][_]=n,r[l][A]=s[A]?s[A].trim():null,r[l][L]=s[L],r[l][D]=!0}for(var u in r)if(r.hasOwnProperty(u)){var c=r[u],f=c[_];if(c[D]){var h=c[L];h&&h instanceof Function&&c[k].addCallback(h),c[k].init(f,u,c[A]),c[D]=!1}}}}function n(e,t,n,i){var a="",o="";if(i)a=i;else for(var s in r)if(r.hasOwnProperty(s)){a=s;break}a&&r[a]&&(o=t||r[a][A],r[a][k].trackEvent(e,o,n))}var r=ns_.vce_vh.player_cache,i=ns_.vce_vh.Loader;return{init:t,redirect:n}}(),R.cs_vce_=R.cs_vce_||{init:ns_.vce_vh.boot.init,trackEvent:ns_.vce_vh.boot.redirect}}()}(),t});e.exports=r},function(e,t,n){var r=n(4),i=n(1),a=function(e){var t={},n=e.configUrl,a=e.akamaiVars;a.pageUrl=window.location.href,a.pageReferrer=document.referrer?document.referrer:"",a.playerId=e.embedID,embDiv=e.embDiv,player=e.player,window.AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH=n;var o=function(){player.off("meride.manifest_parsed"),null!==player.hls?player.hls.on(Hls.Events.LEVEL_LOADED,function(e,t){"function"==typeof akamaiHandleBitRateSwitch&&akamaiHandleBitRateSwitch(player.hls.levels[t.level].bitrate)}):null!==player.dash&&player.dash.on("qualityChangeRequested",function(){"function"==typeof akamaiHandleBitRateSwitch&&akamaiHandleBitRateSwitch(player.dash.getBitrateInfoListFor("video")[player.dash.getQualityFor("video")].bitrate)})},s=function(){r.include("https://79423.analytics.edgekey.net/html5/akamaihtml5-min.js",function(){for(var t in a)setAkamaiMediaAnalyticsData(t,a[t],e.embedID)},!0),player.on("meride.manifest_parsed",o)};return e.prerollURL.length>0?(embDiv.addEventListener(i.AD_ENDED,function(e){s()}),embDiv.addEventListener(i.AD_ERROR,function(e){s()})):s(),t};e.exports=a},function(e,t,n){var r=n(7),i=n(1),a=n(17),o=function(e){if(!e)throw new Error("Some parameter is required by MerideAkamai");if(!e.baseURL)throw new Error("A baseURL is required by MerideAkamai");if(!e.embed)throw new Error("A embed is required by MerideAkamai");if(!e.playerContainer)throw new Error("A playerContainer is required by MerideAkamai");var t={},n=e.playerContainer,o=e.isLive||!1,s=null,l=!1,d=n.getAttribute("data-customer")+".gif",u="image"===e.driver||"ajax"===e.driver?e.driver:"image",c=e.baseURL,f=!0,h=[],p=1,v=0,m=0,g=null,y=null,E=0,b=0,T=null,w=null,S={d:r.isMobile()?"m":"d",e:e.embed.id,bl:encodeURIComponent(e.bulkLabel)||"",ty:e.playerType||"def",u:encodeURIComponent(window.location.href),pu:"",tu:"",t:-1,tv:0,re:!1,lm:!1,qr:0,er:!1,ads:!1,adc:!1,ade:!1,adey:!1,adurl:"",adb:!1,adrs:!1,adrc:!1,lv:!0===o?1:0},A=function(){!1===l&&(s=new a({containerEl:e.playerContainer,policy:"nopolicy",executeBehaviour:!1,onAdBlockDetected:function(){l=!0,L[u]({paramsString:"adb=1"})}}))},L={image:function(e){var t=document.createElement("img"),n=parseInt(1e7*Math.random(),10),r="?d="+S.d+"&e="+S.e+"&ty="+S.ty+"&bl="+S.bl+"&lv="+S.lv+"&rn="+n+(e.paramsString?"&"+e.paramsString:"");t.style.display="none",t.setAttribute("src",c+d+r),document.body.appendChild(t),document.body.removeChild(t)}},k=function(e){b=T.currentTime.toFixed(2),w=T.getAttribute("data-meride-adv"),!0===f&&"started"!==w&&!isNaN(v)&&v>0&&4===T.readyState&&!1===h[p-1]&&b>p*v&&(p>0&&p<12&&!1===o&&(T.duration<=200?3===p?L[u]({paramsString:"q1=1&tv="+m+"&rs="+b}):6===p?L[u]({paramsString:"q2=1&tv="+m+"&rs="+b}):9===p&&L[u]({paramsString:"q3=1&tv="+m+"&rs="+b}):L[u]({paramsString:"tv="+v+"&rs="+b})),h[p-1]=!0,p+=1)},C=function(e){n.removeEventListener(i.READY,C),L[u]({paramsString:"i=1&u="+S.u+"&pu="+S.pu+"&tu="+S.tu}),A(),T=e.detail.player,T.addEventListener("seeking",function(){f=!1}),T.addEventListener("seeked",function(){var e=Math.ceil(12*T.currentTime/T.duration);e!==p&&(p=e),f=!0});for(var t=0;t<11;t+=1)h[t]=!1;w=T.getAttribute("data-meride-adv"),!0===o&&(T.addEventListener("playing",q),T.addEventListener("pause",H),T.addEventListener("ended",V))},_=function(){"started"!==(w=T.getAttribute("data-meride-adv"))&&(f=!0,n.removeEventListener(i.PLAY,_),L[u]({paramsString:"py=1&u="+S.u+"&pu="+S.pu+"&tu="+S.tu}),E=T.duration,v=(E/12).toFixed(2),m=(3*v).toFixed(2),T.addEventListener("timeupdate",k))},D=function(){n.removeEventListener(i.PLAY,D),L[u]({paramsString:"py=1&u="+S.u+"&pu="+S.pu+"&tu="+S.tu});var e=0,t=function(){E=T.duration,v=E/12,e+=200},r=setInterval(function(){e>5e3?clearInterval(r):isNaN(v)?t():(clearInterval(r),T.addEventListener("timeupdate",k))},200)},R=function(){"started"!==w&&(n.removeEventListener(i.ENDED,R),p=1,isNaN(v)||!1!==o?L[u]({paramsString:"co=1"}):T.duration<=200?L[u]({paramsString:"co=1&q4=1&tv="+m+"&rs="+b}):L[u]({paramsString:"co=1&q4=1&tv="+v+"&rs="+b}))},I=function(){n.removeEventListener(i.ROLLVIDEO_STARTED,I),L[u]({paramsString:"adrs=1"})},x=function(){n.removeEventListener(i.ROLLVIDEO_ENDED,x),L[u]({paramsString:"adrc=1"})},O=function(){n.removeEventListener(i.AD_STARTED,O),L[u]({paramsString:"ads=1"})},M=function(){n.removeEventListener(i.AD_ENDED,M),L[u]({paramsString:"adc=1"})},B=function(){n.removeEventListener(i.ERROR,B),L[u]({paramsString:"er=1"})},N=function(e){n.removeEventListener(i.AD_ERROR,N);var t="ade=1";try{1009!==e.detail.errorCode&&101!==e.detail.errorCode||(t+="&adey=1")}catch(e){}L[u]({paramsString:t}),A()},P=function(e){var t="ck=1&cktr="+encodeURIComponent(e.detail.clickThroughUrl);e.detail.adID&&(t+="&ckadid="+encodeURIComponent(e.detail.adID)),e.detail.adTitle&&(t+="&ckadtt="+encodeURIComponent(e.detail.adTitle)),e.detail.adSystem&&(t+="&ckadsy="+encodeURIComponent(e.detail.adSystem)),L[u]({paramsString:t})},F=function(e){try{n.removeEventListener(i.AD_ENDED,F)}catch(e){}try{n.removeEventListener(i.AD_ERROR,F)}catch(e){}n.addEventListener(i.PLAY,_,!1),n.addEventListener(i.ENDED,R,!1)};t.init=function(){for(var t=0;t<11;t+=1)h[t]=!1;try{window.parent.location.href!==window.location.href&&(S.pu=encodeURIComponent(window.parent.location.href))}catch(e){S.pu=encodeURIComponent(document.referrer||"")}try{window.top.location.href!==window.parent.location.href&&(S.tu=encodeURIComponent(window.top.location.href))}catch(e){}n.addEventListener(i.READY,C,!1),n.addEventListener(i.AD_STARTED,O,!1),n.addEventListener(i.ROLLVIDEO_STARTED,I,!1),n.addEventListener(i.ROLLVIDEO_ENDED,x,!1),n.addEventListener(i.AD_ENDED,M,!1),n.addEventListener(i.AD_ERROR,N,!1),n.addEventListener(i.AD_CLICKED,P,!1),n.addEventListener(i.ERROR,B,!1),!e.advManager||"default"!==e.advManager&&"freewheel"!==e.advManager?(n.addEventListener(i.PLAY,_,!1),n.addEventListener(i.ENDED,R,!1)):(n.addEventListener(i.AD_ENDED,F,!1),n.addEventListener(i.AD_ERROR,F,!1))};var U=function(e){isNaN(v)||(b=e.arguments[1])>v*p&&(L[u]({paramsString:"tv="+v+"&rs="+e.arguments[1]}),h[p-1]=!0,p+=1)},j=function(e){e.arguments[1]&&e.arguments[1]>0&&(g.off("meride.durationChange",j),E=parseFloat(e.arguments[1]),v=E/12,g.on("meride.currentTimeChange",U))},V=function(){null!==y&&(clearInterval(y),y=null)},H=function(){clearInterval(y),y=null},q=function(){null===y&&(y=setInterval(function(){L[u]({paramsString:"tv=15"})},15e3))};return t.registerFlashObject=function(e){g=e,!0===o?(g.on("meride.paused",H),g.on("meride.playing",q)):(g.on("meride.durationChange",j),g.on("meride.complete",V)),n.removeEventListener(i.PLAY,_,!1),n.addEventListener(i.PLAY,D,!1)},t};e.exports=o},function(e,t){var n={adv_open_advertiser:{it:"Scopri di pi&ugrave;",en:"More details &#8594;"},adv_open_advertiser_short:{it:"Vedi offerta &#8594;",en:"More &#8594;"},skip:{it:"Salta annuncio",en:"Skip advertising"},skip_short:{it:"X",en:"X"},skip_countdown:{it:"Salta annuncio tra {param} secondi",en:"Skip advertising in {param} seconds"},view_video_countdown:{it:"Il video riprender&agrave; tra {param} secondi",en:"The video will start in {param} seconds"},view_video_pre_countdown:{it:"Il video riprender&agrave; dopo l'inserzione",en:"The video will start after the advertisment"},adblock_detected_block_video:{it:"AdBlock &egrave; stato rilevato. Disattivarlo per visualizzare il video.",en:"AdBlock was detected. Disable it to watch the video."},adblock_detected_timeout:{it:"AdBlock &egrave; stato rilevato. Attendi {param} secondi per visualizzare il video.",en:"AdBlock was detected. Please wait {param} seconds to watch the video."},fatal_error:{it:"Errore nella riproduzione del video",en:"Error trying to reproduce the video"}};e.exports=n},function(e,t,n){var r=n(12),i=n(5).applyStyles,a=function(e,t,n){var a=null,o=0,s=0,l=1.78,d=n||{},u=!0===d.responsiveVertical,c=0,f=0,h=function(){a.offsetWidth<o?(c=parseInt(a.offsetWidth,10),f=parseInt(c/l,10),i(t,{width:c+"px",height:f+"px"}),e.setAttribute("width",c),e.setAttribute("height",f),i(e,{width:"100%",height:f+"px"})):(i(t,{width:o+"px",height:s+"px"}),i(e,{width:o+"px",height:s+"px"}))},p=function(){i(t,{width:screen.width+"px",height:screen.height+"px"}),i(e,{width:screen.width+"px",height:screen.height+"px"})},v=function(e){r.isFullScreen()?p():h()};a=t.parentNode,o=parseInt(t.getAttribute("data-width"),10),s=parseInt(t.getAttribute("data-height"),10),l=o/s,window.addEventListener("resize",v,!1),window.addEventListener("orientationchange",v,!1),!0===u&&function(){i(t,{maxHeight:"100vh"}),i(e,{maxHeight:"100vh"})}(),h()};e.exports=a},function(e,t,n){var r;!function(i,a){"use strict";var o="model",s="name",l="type",d="vendor",u="version",c="mobile",f="tablet",h={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},p={rgx:function(e,t){for(var n,r,i,a,o,s,l=0;l<t.length&&!o;){var d=t[l],u=t[l+1];for(n=r=0;n<d.length&&!o;)if(o=d[n++].exec(e))for(i=0;i<u.length;i++)s=o[++r],a=u[i],"object"==typeof a&&a.length>0?2==a.length?"function"==typeof a[1]?this[a[0]]=a[1].call(this,s):this[a[0]]=a[1]:3==a.length?"function"!=typeof a[1]||a[1].exec&&a[1].test?this[a[0]]=s?s.replace(a[1],a[2]):void 0:this[a[0]]=s?a[1].call(this,s,a[2]):void 0:4==a.length&&(this[a[0]]=s?a[3].call(this,s.replace(a[1],a[2])):void 0):this[a]=s||void 0;l+=2}},str:function(e,t){for(var n in t)if("object"==typeof t[n]&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(h.has(t[n][r],e))return"?"===n?void 0:n}else if(h.has(t[n],e))return"?"===n?void 0:n;return e}},v={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},m={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[s,u],[/(opios)[\/\s]+([\w\.]+)/i],[[s,"Opera Mini"],u],[/\s(opr)\/([\w\.]+)/i],[[s,"Opera"],u],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark)\/([\w\.-]+)/i],[s,u],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[s,"IE"],u],[/(edge|edgios|edga)\/((\d+)?[\w\.]+)/i],[[s,"Edge"],u],[/(yabrowser)\/([\w\.]+)/i],[[s,"Yandex"],u],[/(puffin)\/([\w\.]+)/i],[[s,"Puffin"],u],[/(focus)\/([\w\.]+)/i],[[s,"Firefox Focus"],u],[/(opt)\/([\w\.]+)/i],[[s,"Opera Touch"],u],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[s,"UCBrowser"],u],[/(comodo_dragon)\/([\w\.]+)/i],[[s,/_/g," "],u],[/(micromessenger)\/([\w\.]+)/i],[[s,"WeChat"],u],[/(brave)\/([\w\.]+)/i],[[s,"Brave"],u],[/(qqbrowserlite)\/([\w\.]+)/i],[s,u],[/(QQ)\/([\d\.]+)/i],[s,u],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[s,u],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[s,u],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[s,u],[/(MetaSr)[\/\s]?([\w\.]+)/i],[s],[/(LBBROWSER)/i],[s],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[u,[s,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[u,[s,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[s,u],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[u,[s,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[s,/(.+)/,"$1 WebView"],u],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[s,/(.+(?:g|us))(.+)/,"$1 $2"],u],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[u,[s,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[s,u],[/(dolfin)\/([\w\.]+)/i],[[s,"Dolphin"],u],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[s,"Chrome"],u],[/(coast)\/([\w\.]+)/i],[[s,"Opera Coast"],u],[/fxios\/([\w\.-]+)/i],[u,[s,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[u,[s,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[u,s],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[s,"GSA"],u],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[s,[u,p.str,v.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[s,u],[/(navigator|netscape)\/([\w\.-]+)/i],[[s,"Netscape"],u],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[s,u]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",h.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",h.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",h.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[o,d,[l,f]],[/applecoremedia\/[\w\.]+ \((ipad)/],[o,[d,"Apple"],[l,f]],[/(apple\s{0,1}tv)/i],[[o,"Apple TV"],[d,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[d,o,[l,f]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[o,[d,"Amazon"],[l,f]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[o,p.str,v.device.amazon.model],[d,"Amazon"],[l,c]],[/android.+aft([bms])\sbuild/i],[o,[d,"Amazon"],[l,"smarttv"]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[o,d,[l,c]],[/\((ip[honed|\s\w*]+);/i],[o,[d,"Apple"],[l,c]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[d,o,[l,c]],[/\(bb10;\s(\w+)/i],[o,[d,"BlackBerry"],[l,c]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[o,[d,"Asus"],[l,f]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[d,"Sony"],[o,"Xperia Tablet"],[l,f]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[o,[d,"Sony"],[l,c]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[d,o,[l,"console"]],[/android.+;\s(shield)\sbuild/i],[o,[d,"Nvidia"],[l,"console"]],[/(playstation\s[34portablevi]+)/i],[o,[d,"Sony"],[l,"console"]],[/(sprint\s(\w+))/i],[[d,p.str,v.device.sprint.vendor],[o,p.str,v.device.sprint.model],[l,c]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[d,o,[l,f]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[d,[o,/_/g," "],[l,c]],[/(nexus\s9)/i],[o,[d,"HTC"],[l,f]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[o,[d,"Huawei"],[l,c]],[/(microsoft);\s(lumia[\s\w]+)/i],[d,o,[l,c]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[o,[d,"Microsoft"],[l,"console"]],[/(kin\.[onetw]{3})/i],[[o,/\./g," "],[d,"Microsoft"],[l,c]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[o,[d,"Motorola"],[l,c]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[o,[d,"Motorola"],[l,f]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[d,h.trim],[o,h.trim],[l,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[o,/^/,"SmartTV"],[d,"Samsung"],[l,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[o,[d,"Sharp"],[l,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[d,"Samsung"],o,[l,f]],[/smart-tv.+(samsung)/i],[d,[l,"smarttv"],o],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[d,"Samsung"],o,[l,c]],[/sie-(\w*)/i],[o,[d,"Siemens"],[l,c]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[d,"Nokia"],o,[l,c]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[o,[d,"Acer"],[l,f]],[/android.+([vl]k\-?\d{3})\s+build/i],[o,[d,"LG"],[l,f]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[d,"LG"],o,[l,f]],[/(lg) netcast\.tv/i],[d,o,[l,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[o,[d,"LG"],[l,c]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[o,[d,"Lenovo"],[l,f]],[/linux;.+((jolla));/i],[d,o,[l,c]],[/((pebble))app\/[\d\.]+\s/i],[d,o,[l,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[d,o,[l,c]],[/crkey/i],[[o,"Chromecast"],[d,"Google"]],[/android.+;\s(glass)\s\d/i],[o,[d,"Google"],[l,"wearable"]],[/android.+;\s(pixel c)[\s)]/i],[o,[d,"Google"],[l,f]],[/android.+;\s(pixel( [23])?( xl)?)\s/i],[o,[d,"Google"],[l,c]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[o,/_/g," "],[d,"Xiaomi"],[l,c]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[o,/_/g," "],[d,"Xiaomi"],[l,f]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[o,[d,"Meizu"],[l,f]],[/(mz)-([\w-]{2,})/i],[[d,"Meizu"],o,[l,c]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[o,[d,"OnePlus"],[l,c]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[o,[d,"RCA"],[l,f]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[o,[d,"Dell"],[l,f]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[o,[d,"Verizon"],[l,f]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[d,"Barnes & Noble"],o,[l,f]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[o,[d,"NuVision"],[l,f]],[/android.+;\s(k88)\sbuild/i],[o,[d,"ZTE"],[l,f]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[o,[d,"Swiss"],[l,c]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[o,[d,"Swiss"],[l,f]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[o,[d,"Zeki"],[l,f]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[d,"Dragon Touch"],o,[l,f]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[o,[d,"Insignia"],[l,f]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[o,[d,"NextBook"],[l,f]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[d,"Voice"],o,[l,c]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[d,"LvTel"],o,[l,c]],[/android.+;\s(PH-1)\s/i],[o,[d,"Essential"],[l,c]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[o,[d,"Envizen"],[l,f]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[d,o,[l,f]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[o,[d,"MachSpeed"],[l,f]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[d,o,[l,f]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[o,[d,"Rotor"],[l,f]],[/android.+(KS(.+))\s+build/i],[o,[d,"Amazon"],[l,f]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[d,o,[l,f]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[l,h.lowerize],d,o],[/(android[\w\.\s\-]{0,9});.+build/i],[o,[d,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[u,[s,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[s,u],[/rv\:([\w\.]{1,9}).+(gecko)/i],[u,s]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[s,u],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[s,[u,p.str,v.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[s,"Windows"],[u,p.str,v.os.windows.version]],[/\((bb)(10);/i],[[s,"BlackBerry"],u],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]*)/i,/linux;.+(sailfish);/i],[s,u],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[s,"Symbian"],u],[/\((series40);/i],[s],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[s,"Firefox OS"],u],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[s,u],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[s,"Chromium OS"],u],[/(sunos)\s?([\w\.\d]*)/i],[[s,"Solaris"],u],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[s,u],[/(haiku)\s(\w+)/i],[s,u],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[u,/_/g,"."],[s,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[s,"Mac OS"],[u,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[s,u]]},g=function(e,t){if("object"==typeof e&&(t=e,e=void 0),!(this instanceof g))return new g(e,t).getResult();var n=e||(i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),r=t?h.extend(m,t):m;return this.getBrowser=function(){var e={name:void 0,version:void 0};return p.rgx.call(e,n,r.browser),e.major=h.major(e.version),e},this.getCPU=function(){var e={architecture:void 0};return p.rgx.call(e,n,r.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return p.rgx.call(e,n,r.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return p.rgx.call(e,n,r.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return p.rgx.call(e,n,r.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this};g.VERSION="0.7.19",g.BROWSER={NAME:s,MAJOR:"major",VERSION:u},g.CPU={ARCHITECTURE:"architecture"},g.DEVICE={MODEL:o,VENDOR:d,TYPE:l,CONSOLE:"console",MOBILE:c,SMARTTV:"smarttv",TABLET:f,WEARABLE:"wearable",EMBEDDED:"embedded"},g.ENGINE={NAME:s,VERSION:u},g.OS={NAME:s,VERSION:u},void 0!==t?(void 0!==e&&e.exports&&(t=e.exports=g),t.UAParser=g):n(54)?void 0!==(r=function(){return g}.call(t,n,t,e))&&(e.exports=r):i&&(i.UAParser=g);var y=i&&(i.jQuery||i.Zepto);if(void 0!==y&&!y.ua){var E=new g;y.ua=E.getResult(),y.ua.get=function(){return E.getUA()},y.ua.set=function(e){E.setUA(e);var t=E.getResult();for(var n in t)y.ua[n]=t[n]}}}("object"==typeof window?window:this)},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,n){var r=n(0),i=n(6),a=n(1),o=n(56),s=(n(26),n(17)),l=function(e){if(!e)throw new Error("RollVAST requires some parameter");if(!e.containerEl)throw new Error("RollVAST requires a containerEl parameter");if(!e.player)throw new Error("RollVAST requires a Player - player parameter");if(!e.rolls)throw new Error("RollVAST requires a rolls parameter as array of rolls");if(0===e.rolls.length)throw new Error("RollVAST requires a rolls parameter as array with at least one roll");var t,n,l,d,u={},c=new r,f=e.autoPlay||!0,h=meride.adv.AdLoader,p=meride.adv.MediaFactoryRenderer,v=e.containerEl,m=e.player,g=e.originSrc||m.video.src,y=[],E=function(){return y.splice(0,1)},b=e.useAdWaterfall||!0,T=[],w=e.rolls||[],S=e.advSuffix||"",A=!1,L=(e.prefetch,e.adBlock||{}),k={url:"",type:"",link:"",settingVolume:""},C=function(e,t){var n=!0===t?e.url:e.url.split("***")[0];return{url:decodeURIComponent(n),type:e.type,link:e.link,settingVolume:e.settingVolume}},_=!1;u.on=function(e,t){return c.on(e,t)},u.off=function(e,t){return c.off(e,t)};var D=function(e){var t=document.createElement("img");t.style.display="none",t.setAttribute("src",e.url),document.body.appendChild(t),document.body.removeChild(t)},R=function(e){m.off("meride.first_play",R),!0===A&&(A=!1,m.pause()),e&&"function"==typeof e&&e()},I=function(){var e=function(t,n){m.hls.off(Hls.Events.MANIFEST_PARSED,e);try{m.video.currentTime=0,!0===f&&m.play()}catch(e){}};if(null!==m.hls){m.hls.on(Hls.Events.MANIFEST_PARSED,e),m.reload(g);var t=m.video.play();t&&t.catch(function(e){})}else n.restoreOriginalVideo(!0)},x=function(e){var r={tag:k.url,message:"",errorCode:""};e.arguments[0]&&"AdError"===e.arguments[0].name?(r.message=e.arguments[0].message,r.errorCode=e.arguments[0].code):r.message=e.arguments[0],i.emit(a.AD_ERROR,v,r),101===r.errorCode&&i.emit(a.AD_EMPTY,v,r),"black_preroll"===L.policy?t=new s({containerEl:v,policy:L.policy,executeBehaviour:!1,onAdBlockDetected:function(e){_=!0,A=!0,w.length>0&&(m.on("meride.first_play",function(){R(e)}),t.on("meride.adblock_timeout_ended",function(){m.play()}))},onAdBlockNotDetected:function(){}}):y.length>0?("defaultOff"===k.settingVolume&&(m.video.muted=!0),k.url=E(),O({autoPlay:!0})):w.length>0?(k=C(prerolls.splice(0,1)[0],!0),O({autoPlay:!0})):(m.video.addEventListener("loadedmetadata",function(){m.video.play()},!1),n.restoreOriginalVideo(!0))},O=function(e){e&&(f=!1!==e.autoPlay),n=new h({ads:[{uri:decodeURIComponent(k.url)+S}],videoEl:m.video}),n.on("VAST_ERROR",x),n.on("LOAD_ERROR",x),n.load().then(function(e){if(d=e,"ad"===e.type){l=new p("Linear",{videoEl:m.video,containerEl:v,ad:e});var t=new o({renderer:l,loader:n,ad:e,player:m}),r=function(e){if(e.arguments[0]&&e.arguments[0].clickTracking)for(var t=0,n=e.arguments[0].clickTracking.length;t<n;t+=1)D({url:e.arguments[0].clickTracking[t]})};t.on("meride.adclicked",r),l.on("meride.aderror",function(e){I()}),l.on("meride.adstarted",function(e){window.loadedAd=d;var t={tag:"",clickThrough:""},n=d.Ad.getElementsByTagName("ClickThrough");n.length>0&&null!==n.item(0).firstChild&&(t.clickThrough=n.item(0).firstChild.data);try{t.tag=k.url}catch(e){}i.emit(a.AD_STARTED,v,t)});var s=function(){w.length>0?(k=C(w.splice(0,1)[0],b),O({autoPlay:!0})):(l.off("meride.adcompleted",s),c.emit("meride.rollvastended"),i.emit(a.AD_ENDED,v),I())};l.on("meride.adcompleted",s),t.on("meride.ad_skipped",s),l.init(),c.emit("meride.rollvastready",{renderer:l}),!0===f&&(null!==m.hls&&(m.hls.detachMedia(),m.hls.destroy()),l.render())}}).catch(function(e){c.emit("meride.rollvasterror",[{roll:k}])})};if(u.loadRoll=O,k=C(w.splice(0,1)[0],b),T=k.url.split("***"),T.length>1){for(var M=0,B=T.length;M<B;M+=1)y.push(T[M]);k.url=E()}return"defaultOff"===k.settingVolume&&(m.video.muted=!0),u};e.exports=l},function(e,t,n){var r=n(11),i=n(0),a=n(6),o=n(1),s=n(5),l=n(18),d=n(2),u=function(e){if(!e.renderer)throw new Error("Renderer required by LinearGUI");if(!e.loader)throw new Error("AdLoader required by LinearGUI");if(!e.ad)throw new Error("Ad required by LinearGUI");if(!e.player)throw new Error("Player required by LinearGUI");var t,n,u,c,f={},h=e.renderer,p=(e.loader,e.ad),v=h.containerEl,m=e.player,g=h.videoEl,y=document.createElement("div"),E="",b=[],T=!1!==e.playOnSkip,w=new i,S=l.volumeOnSVG,A=l.volumeOffSVG,L=document.createElement("button"),k=document.createElement("button"),C=function(){h.off("start"),h.off("complete"),h.off("pause"),h.off("mute"),h.off("unmute"),h.off("impression"),h.off("error"),h.off("resume");try{y.parentNode.removeChild(y)}catch(e){}g.style.display="block",m.enableSeek(),m.enableKeyboard(!0),B()&&(v.querySelector(".controlBarContainer").style.visibility="visible",M())},_=document.createElement("div"),D=-1,R=null;f.on=function(e,t){return w.on(e,t)},f.off=function(e,t){return w.off(e,t)};var I=function(e){g.muted=!0,L.style.display="none",k.style.display="inline-block",e.preventDefault()},x=function(e){g.muted=!1,k.style.display="none",L.style.display="inline-block",e.preventDefault()},O=function(){L.innerHTML=S,k.innerHTML=A,s.applyStyles(L,{backgroundColor:"transparent",cursor:"pointer",border:"none",width:"40px",height:"40px",position:"absolute",top:"3%",left:"2%",zIndex:"999"}),s.applyStyles(k,{backgroundColor:"transparent",cursor:"pointer",border:"none",width:"40px",height:"40px",position:"absolute",top:"3%",left:"2%",zIndex:"999"}),g.volume>0&&!0==!g.muted?(k.style.display="none",L.style.display="inline-block"):(L.style.display="none",k.style.display="inline-block"),d.addClickTouch(L,I),d.addClickTouch(k,x),v.appendChild(L),v.appendChild(k)},M=function(){try{L.parentNode.removeChild(L),k.parentNode.removeChild(k)}catch(e){}};s.applyStyles(_,{position:"absolute",top:"0px",left:"0px",height:"4px",width:"0%",backgroundColor:"#0088cc"});var B=function(){return null!==R?R:R=g.offsetWidth<540};g.addEventListener("timeupdate",function(){if(c=parseFloat(g.duration-g.currentTime,10),_.style.width=100*g.currentTime/g.duration+"%",t)if(D=parseInt(t-(g.duration-c),10),n&&D>0)n.innerHTML=r("skip_countdown",[D]);else if(n&&0===D){D=-1;try{n.parentNode.removeChild(n)}catch(e){}s.applyStyles(u,{display:"block"})}}),B()&&(v.querySelector(".controlBarContainer").style.visibility="hidden"),s.applyStyles(y,{width:"100%",height:"100%",position:"absolute",zIndex:"9",top:"0px",left:"0px"}),y.appendChild(_);var N=p.Ad.getElementsByTagName("Linear")[0];if(N){E=N.getElementsByTagName("ClickThrough")[0];var P=N.getElementsByTagName("ClickTracking");if(P)for(var F=0,U=P.length;F<U;F+=1)try{b.push(P[F].firstChild.data)}catch(e){}if(E&&null!==E.firstChild){E=E.firstChild.data;var j=document.createElement("div");j.innerHTML=r("adv_open_advertiser"),j.className="meride-open-advlink-btn",B()?s.applyStyles(j,{cursor:"pointer",color:"#fff",padding:"4px",backgroundColor:"rgba(100, 100, 100, 0.8)",position:"absolute",top:"4px",right:"0",textAlign:"center",fontSize:"14px",border:"1px solid #fff",borderRight:"none"}):s.applyStyles(j,{cursor:"pointer",color:"#fff",padding:"12px 8px",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"absolute",bottom:"60px",right:"0",fontSize:"14px"}),d.addClickTouch(j,function(e){e.preventDefault(),w.emit("meride.adclicked",{clickTracking:b}),window.open(E,"ad_meride_window");var t=p.Ad.getElementsByTagName("AdTitle")[0],n=p.Ad.getElementsByTagName("AdSystem")[0];t&&(t=t.firstChild.data),n&&(n=n.firstChild.data),a.emit(o.AD_CLICKED,v,{clickThroughUrl:E,adID:p.id,adTitle:t,adSystem:n})}),y.appendChild(j)}t=N.getAttribute("skipoffset"),t&&(t=parseInt(t.split(":")[2].replace(/(\.[0-9]+)/g,""),10),n=document.createElement("div"),u=document.createElement("div"),n.innerHTML=r("skip_countdown",[t]),u.innerHTML=r("skip"),d.addClickTouch(u,function(e){e.preventDefault(),w.emit("meride.ad_skipped"),C(),T||m.video.removeAttribute("autoplay");var t=function(){m.video.removeEventListener("loadedmetadata",t),m.video.currentTime=0};m.video.addEventListener("loadedmetadata",t,!1)}),B()?(s.applyStyles(u,{cursor:"pointer",color:"#fff",padding:"2px",backgroundColor:"rgba(100, 100, 100, 0.8)",position:"absolute",bottom:"20px",right:"0",display:"none",fontSize:"14px",border:"1px solid #fff",borderRight:"none"}),s.applyStyles(n,{color:"#fff",padding:"2px",backgroundColor:"rgba(100, 100, 100, 0.8)",position:"absolute",bottom:"20px",right:"0",fontSize:"12px",border:"1px solid #fff",borderRight:"none"})):(s.applyStyles(u,{cursor:"pointer",color:"#fff",padding:"8px",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"absolute",top:"0",right:"0",display:"none",fontSize:"14px"}),s.applyStyles(n,{color:"#fff",padding:"8px",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"absolute",top:"0",right:"0",fontSize:"12px"})),y.appendChild(n),y.appendChild(u))}return h.on("start",function(){m.enableKeyboard(!1),v.appendChild(y),m.disableSeek(),B()&&O()}),h.on("complete",function(){C()}),h.on("pause",function(){}),h.on("mute",function(){}),h.on("unmute",function(){}),h.on("impression",function(){}),h.on("error",function(){C()}),h.on("resume",function(){}),f};e.exports=u},function(e,t,n){(function(t){var n;n="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},e.exports=n}).call(t,n(27))},function(e,t){function n(e){var t=r.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}e.exports=n;var r=Object.prototype.toString},function(e,t,n){var r=n(60),i=n(61),a=function(e){return"[object Array]"===Object.prototype.toString.call(e)};e.exports=function(e){if(!e)return{};var t={};return i(r(e).split("\n"),function(e){var n=e.indexOf(":"),i=r(e.slice(0,n)).toLowerCase(),o=r(e.slice(n+1));void 0===t[i]?t[i]=o:a(t[i])?t[i].push(o):t[i]=[t[i],o]}),t}},function(e,t){function n(e){return e.replace(/^\s*|\s*$/g,"")}t=e.exports=n,t.left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}},function(e,t,n){"use strict";var r=n(62),i=Object.prototype.toString,a=Object.prototype.hasOwnProperty,o=function(e,t,n){for(var r=0,i=e.length;r<i;r++)a.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))},s=function(e,t,n){for(var r=0,i=e.length;r<i;r++)null==n?t(e.charAt(r),r,e):t.call(n,e.charAt(r),r,e)},l=function(e,t,n){for(var r in e)a.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))},d=function(e,t,n){if(!r(t))throw new TypeError("iterator must be a function");var a;arguments.length>=3&&(a=n),"[object Array]"===i.call(e)?o(e,t,a):"string"==typeof e?s(e,t,a):l(e,t,a)};e.exports=d},function(e,t,n){"use strict";var r=Function.prototype.toString,i=/^\s*class\b/,a=function(e){try{var t=r.call(e);return i.test(t)}catch(e){return!1}},o=function(e){try{return!a(e)&&(r.call(e),!0)}catch(e){return!1}},s=Object.prototype.toString,l="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;e.exports=function(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;if(l)return o(e);if(a(e))return!1;var t=s.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t}},function(e,t){function n(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var i in n)r.call(n,i)&&(e[i]=n[i])}return e}e.exports=n;var r=Object.prototype.hasOwnProperty},function(e,t,n){var r=n(6),i=n(1),a=n(0),o=function(e){if(!e.loader)throw new Error("A loader (meride.adv.AdLoader) is required by Overlay");if(!e.videoEl)throw new Error("A videoEl is required by Overlay");if(!e.containerEl)throw new Error("A containerEl is required by Overlay");var t,n={},o=e.loader,s=e.data,l=new a;return n.on=function(e,t){return l.on(e,t)},n.off=function(e,t){return l.off(e,t)},o.on("VAST_ERROR",function(t){r.emit(i.AD_ERROR,e.containerEl)}),o.on("LOAD_ERROR",function(t){r.emit(i.AD_ERROR,e.containerEl)}),o.load().then(function(n){"ad"===n.type&&(t=new meride.adv.MediaFactoryRenderer("NonLinear",{videoEl:e.videoEl,containerEl:e.containerEl,ad:n,btnInitAction:document.getElementById("playBtn"),stayTime:s.stayTime||null,afterTime:s.afterTime||null}),e.onLoad&&"function"==typeof e.onLoad&&e.onLoad(t),e.onAdEnded&&"function"==typeof e.onAdEnded&&t.on("meride.nonlinear_adcompleted",e.onAdEnded),e.onPlay&&"function"==typeof e.onPlay&&e.videoEl.addEventListener("play",function(){e.onPlay(t)}))}),n};e.exports=o},function(e,t){var n=function(e){if(!e)throw new Error("Poster requires some param");if(!e.src)throw new Error("Poster requires a src param");if(!e.container)throw new Error("Poster requires a container param");if(!e.video)throw new Error("Poster requires a video param");var t={},n=document.createElement("div");return function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n])}(n,{backgroundImage:"url("+e.src+")",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",position:"absolute",width:"100%",height:"100%",zIndex:"8",top:"0",left:"0"}),e.container.appendChild(n),e.video.addEventListener("play",function(){n.style.visibility="hidden",n.style.display="none"}),e.video.addEventListener("ended",function(){n.style.visibility="visible",n.style.display="block"}),t};e.exports=n},function(e,t,n){var r=n(1),i=n(4),a=n(67),o=n(68),s=n(7),l=n(5),d=n(2),u=n(0),c=n(69),f=function(e){if(!e)throw new Error("No parameters passed to GoogleIMA");if(!e.container)throw new Error("No container passed to GoogleIMA");if(!e.player)throw new Error("No player passed to GoogleIMA");if(!e.videoID)throw new Error("No videoID passed to GoogleIMA");var t={},n=e.hlsObj||null,f=e.container,h=e.player,p=e.player.video,v=document.createElement("div"),m="adContainer-"+e.videoID+"-"+parseInt(1e4*Math.random(),10),g=f.querySelector(".playBtn"),y=g.cloneNode(!0),E=e.preroll||"",b=E.split("||"),T=e.midrolls||[],w=e.postroll||"",S={},A=new u,L=!1,k=null,C=s.isMobile(),_=e.isHlsSupported||!0,D=0,R=function(e){var t=e;return t=c.replaceTimestamp(t),t=c.replaceRandom(t),t=c.replaceRnd(t),t=c.replaceReferrerURL(t),t=c.replaceURL(t),t=c.replaceDescriptionURL(t),null!==h.video&&(t=c.replaceDimensions(t,h.video.offsetWidth,h.video.offsetHeight)),t};for(var I in b)b.hasOwnProperty(I)&&(b[I]=R(b[I]));for(var x in T)if(T.hasOwnProperty(x)&&T[x].rolls&&T[x].rolls.length>0)for(var O in T[x].rolls)T[x].rolls.hasOwnProperty(O)&&(T[x].rolls[O].url=R(T[x].rolls[O].url));w&&""!==w&&(w=R(w)),t.on=function(e,t){return A.on(e,t)},t.off=function(e,t){return A.off(e,t)},t.setUpHlsObj=function(e){n=e};for(var M in e)e.hasOwnProperty(M)&&(S[M]=e[M]);v.setAttribute("id",m),v.className="meride-ad-container",l.applyStyles(v,{position:"absolute",display:"none",width:S.width+"px",height:"100px",top:"0",left:"0",zIndex:"9"}),f.addEventListener(r.ADS_MANAGER_READY,function(e){v.style.display="block"},!1),f.addEventListener(r.AD_STARTED,function(e){h.container.querySelector(".loadingSpinner").style.display="none"},!1),f.addEventListener(r.AD_ERROR,function(e){h.container.querySelector(".loadingSpinner").style.display="none",h.enableSeek()},!1),f.addEventListener(r.AD_ENDED,function(e){h.enableSeek()},!1),f.appendChild(v),S.adContainerID=m,g.style.display="none",g.parentNode.appendChild(y),b.reverse(),S.preroll=b.pop(),p.style.visibility="hidden",S.vpaidMode=S.vpaidMode?S.vpaidMode:"ENABLED","ENABLED"!==S.vpaidMode&&"INSECURE"!==S.vpaidMode&&"DISABLED"!==S.vpaidMode&&(S.vpaidMode="ENABLED");var B=!0===S.debug?"https://s0.2mdn.net/instream/html5/ima3_debug.js":"https://s0.2mdn.net/instream/html5/ima3.js";S.hlsObj=n;var N=function(){p.removeEventListener("play",N),p.removeEventListener("playing",N);try{y.parentNode.removeChild(y)}catch(e){}},P=function(e,t){var n=e||0,r=!1!==t,i=function(e,t){S.hlsObj.off(Hls.Events.MANIFEST_PARSED,i);try{p.currentTime=n,!0!==S.autoPlay&&!0!==r||h.play()}catch(e){}},a=function(e,t){h.video.removeEventListener("loadedmetadata",a);try{p.currentTime=n,!0!==S.autoPlay&&!0!==r||h.play(),D=0}catch(e){D=0}};S.originSrc.match(/.m3u8$/)?(S.hlsObj.on(Hls.Events.MANIFEST_PARSED,i),h.load()):S.originSrc.match(/.mpd$/)?(h.video.addEventListener("loadedmetadata",a,!1),h.reload()):(h.video.addEventListener("loadedmetadata",a,!1),p.src=S.originSrc,p.load(),p.play())},F=function(){p.removeEventListener("play",F),p.removeEventListener("playing",F),p.removeEventListener("loadedmetadata",F),p.pause(),p.currentTime=0},U=function(){L=!0;try{y.parentNode.removeChild(y)}catch(e){}if(""!==S.preroll&&void 0!==S.preroll?(h.container.querySelector(".loadingSpinner").style.display="inline-block",h.disableSeek(),p.addEventListener("play",F,!1),p.addEventListener("playing",F,!1),p.addEventListener("loadedmetadata",F,!1),f.addEventListener(Meride.EventType.AD_ERROR,function(e){p.removeEventListener("play",F),p.removeEventListener("playing",F),p.removeEventListener("loadedmetadata",F)}),k.startPlayback(S.preroll,!0)):""!==e.overlayInitial&&void 0!==e.overlayInitial?(P(0,!1),p.style.visibility="visible",setTimeout(function(){h.play(),k.showOverlayInitial()},500),h.play()):""!==e.overlay&&void 0!==e.overlay?(P(0,!1),p.style.visibility="visible",setTimeout(function(){h.play(),k.showOverlay()},500),h.play()):""!==w&&void 0!==w&&(p.style.visibility="visible",setTimeout(function(){h.play()},500),h.play()),T.length>0){for(var t=function(e,t){return e.timeSetting===t.timeSetting?0:e.timeSetting<t.timeSetting?-1:1},n=0,i=T.length;n<i;n+=1)T[n].timeSetting=function(e){var t,n,r,i=e.split(":");return 3!==i.length?0:(t=parseInt(i[2],10),n=parseInt(i[1],10),r=parseInt(i[0],10),t+60*n+3600*r)}(T[n].timeSetting);T=T.sort(t);var a=T.shift(),s=null,l=function(e){if(f.removeEventListener(Meride.EventType.AD_ENDED,l),s=null,!0===_){var t=f.querySelector(".qualityContainer");t&&(t.style.display="table-cell")}a=T.shift(),a&&p.addEventListener("timeupdate",u),P(D,!0)},d=function(e){if(f.removeEventListener(Meride.EventType.AD_ERROR,d),s=null,p.display="block",!0===_){var t=f.querySelector(".qualityContainer");t&&(t.style.display="table-cell")}P(D,!0)},u=function(){if(!a)return void p.removeEventListener("timeupdate",u);p.currentTime>a.timeSetting&&(p.removeEventListener("timeupdate",u),f.addEventListener(Meride.EventType.AD_ERROR,d),f.addEventListener(Meride.EventType.AD_ENDED,l),S.hlsObj&&(S.hlsObj.autoStartLoad=!0,S.hlsObj.stopLoad()),h.disableSeek(),D=p.currentTime,null!==s&&s.resetAds(),s=new o(S),s.startPlayback(a.rolls[0].url,!0))},c=function(){try{f.removeEventListener(r.PLAY_CONTENT,c)}catch(e){}p.addEventListener("timeupdate",u)};f.addEventListener(r.PLAY_CONTENT,c,!1)}},j=function(e){d.removeClickTouch(y,j),U(),A.emit("meride.ima_main_play_clicked")},V=function(){""!==S.preroll&&void 0!==S.preroll&&p.pause()},H=function(){k=new a(S),p.addEventListener("play",N,!1),p.addEventListener("playing",N,!1),A.emit("meride.imascript_loaded");var t=function(){p.removeEventListener("play",t),!1===L&&(V(),U())};if(p.style.visibility="visible",p.style.display="block",V(),!0===S.autoPlay&&!1===e.videoPreload)U();else if(!0!==S.autoPlay||C&&!1===p.muted)d.addClickTouch(y,j),p.addEventListener("play",t,!1);else{var n=p.play();void 0!==n&&n.then(function(){k.setAutoplayAllowed(!0),k.setAutoplayRequiresMuted(!1),V(),U()}).catch(function(e){k.setAutoplayAllowed(!1);var n=p.muted;p.volume=0,p.muted=!0;var r=p.play();void 0!==r&&r.then(function(){V(),k.setAutoplayAllowed(!0),k.setAutoplayRequiresMuted(!0),U()}).catch(function(e){n||(p.volume=1,p.muted=!1),k.setAutoplayAllowed(!1),k.setAutoplayRequiresMuted(!1),d.addClickTouch(y,j),p.addEventListener("play",t,!1)})})}},q=function(){p.style.display="block",p.style.visibility="visible",p.addEventListener("play",N,!1),p.addEventListener("playing",N,!1),!1===e.videoPreload&&h.load(),!0===S.autoPlay&&h.play(),d.removeClickTouch(y,j),d.addClickTouch(y,function(){h.play()})};return window.google&&window.google.ima&&"function"==typeof window.google.ima.AdsLoader?H():i.include(B,H,{onerror:q}),t};e.exports=f},function(e,t,n){var r=n(29),i=function(e){return new r(e)};e.exports=i},function(e,t,n){var r=n(1),i=n(29),a=function(e){var t=new i(e);return t.onAllAdsCompleted=function(){e.player.enableKeyboard(!0),t.resetAds()},t.onContentResumeRequested=function(){t.ad&&t.ad.isLinear()&&(e.player.video.addEventListener("ended",t.onVideoEnded),e.player.video.addEventListener("loadedmetadata",t.loadedMetadataHandler),null===e.hlsObj?(e.player.video.src=e.originSrc,e.player.video.load()):(e.hlsObj.attachMedia(e.player.video),e.hlsObj.loadSource(e.originSrc)))},t.onAdError=function(n){var i=n.getError(),a=new CustomEvent(r.AD_ERROR,{bubbles:!0,cancelable:!1,detail:{errorCode:i.getErrorCode(),message:i.getMessage()}});if(e.container.dispatchEvent(a),1009===i.getErrorCode()){var o=new CustomEvent(r.AD_EMPTY,{bubbles:!0,cancelable:!1,detail:{errorCode:i.getErrorCode(),message:i.getMessage()}});e.container.dispatchEvent(o)}t.resetAds(),e.player.video.ended||e.player.play(),e.player.video.style.visibility="visible"},t.onVideoEnded=function(e){},t};e.exports=a},function(e,t){var n={replace:function(e,t){var n=e,r="";for(var i in t)t.hasOwnProperty(i)&&(r=new RegExp("\\["+i+"\\]","gi"),n=n.replace(r,t[i]));return n},replaceTimestamp:function(e){if(null!==e.match("\\[timestamp\\]")){var t=new Date;return e.replace(/\[timestamp\]/g,t.getTime())}return e},replaceRandom:function(e){if(null!==e.match("\\[random\\]")){for(var t,n=e.split("***"),r=0,i=n.length;r<i;r+=1)t=Math.floor(9e9*Math.random())+1e9,n[r]=n[r].replace(/\[random\]/g,t).replace(/%5Brandom%5D/g,t);return n.join("***")}return e},replaceRnd:function(e){if(null!==e.match("\\[rnd\\]")){for(var t,n=e.split("***"),r=0,i=n.length;r<i;r+=1)t=Math.floor(9e9*Math.random())+1e9,n[r]=n[r].replace(/\[rnd\]/g,t).replace(/%5Brnd%5D/g,t);return n.join("***")}return e},replaceReferrerURL:function(e){return null!==e.match("\\[referrer_url\\]")?e.replace(/\[referrer_url\]/g,encodeURIComponent(document.location.toString())):e},replaceURL:function(e){return null!==e.match("\\[url\\]")?e.replace(/\[url\]/g,encodeURIComponent(document.location.toString())):e},replaceDescriptionURL:function(e){return null!==e.match("\\[description_url\\]")?e.replace(/\[description_url\]/g,encodeURIComponent(document.location.toString())):e},replaceDimensions:function(e,t,n){return null!==e.match("\\[width\\]")&&(e=e.replace(/\[width\]/g,t)),null!==e.match("\\[height\\]")&&(e=e.replace(/\[height\]/g,n)),e}};e.exports=n},function(e,t,n){var r=n(0),i=n(4),a=n(2),o=function(e){if(!e)throw new Error("No initial parameters for Freewheel");if(!e.player)throw new Error("No player (Player) for Freewheel");if(!e.playBtns)throw new Error("No playBtns for Freewheel");if(!e.networkID)throw new Error("No networkID for Freewheel");if(!e.server)throw new Error("No server for Freewheel");if(!e.profile)throw new Error("No profile for Freewheel");if(!e.displayBaseID)throw new Error("No displayBaseID for Freewheel");if(!e.assetID)throw new Error("No assetID for Freewheel");if(!e.sectionID)throw new Error("No sectionID for Freewheel");var t,n={},o=new r,s=e.playBtns,l=[],d=null,u=e.networkID,c=e.server,f=e.profile,h=e.player,p=h.video,v=e.displayBaseID,m=[],g=[],y=e.keyValues||[],E=[],b=!1,T=!0===e.temporalSlotMode,w=!0===e.debug,S=!0===e.autoPlay,A=e.originalSource||p.currentSrc||p.src,L=e.scriptURL&&-1!==e.scriptURL.indexOf("fwmrm.net")?e.scriptURL:"//adm.fwmrm.net/p/vitest-js/AdManager.js";n.on=function(e,t){return o.on(e,t)},n.off=function(e,t){return o.off(e,t)};var k=function(e){if(d)return d.setVideoState(e)},C=function(){if(0==E.length)return void p.removeEventListener("timeupdate",C);for(var e=0;e<E.length;e++){var t=E[e],n=t.getTimePosition(),r=p.currentTime;if(Math.abs(r-n)<.5)return E.splice(e,1),void t.play()}},_=function(){p.removeEventListener("ended",_),k(tv.freewheel.SDK.VIDEO_STATE_STOPPED)},D=function(){P(),B(),H(),!0===S&&(N(),h.video.setAttribute("autoplay","true"),h.play())},R=function(e){if(o.emit("meride.freewheel_request_complete"),!0===e.success){b=!0;for(var t=d.getTemporalSlots(),r=0;r<t.length;r++){var i=t[r];switch(0===i.getAdCount()&&o.emit("meride.freewheel_ad_empty"),i.getTimePositionClass()){case tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL:m.push(i);break;case tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY:E.push(i);break;case tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL:g.push(i)}}!1===S&&n.play();try{0===e.response.ads.ads.length&&e.response.errors.errors.length>0&&D()}catch(e){}}else o.emit("meride.freewheel_ad_error"),D()},I=function(){},x=function(e){switch(e.slot.getTimePositionClass()){case tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL:M()}},O=!1,M=function(){if(m.length){var e=m.shift();try{e.play()}catch(e){O=!0,M()}}else B(),setTimeout(N,100),!0===O&&(O=!1,P(),o.emit("meride.freewheel_error"))},B=function(){h.video.removeAttribute("data-meride-adv"),h.enableSeek(),null===h.hls?p.currentSrc!=A&&(p.src=A):h.reload(A)},N=function(){!0===b&&(p.addEventListener("ended",_),p.addEventListener("timeupdate",C),k(tv.freewheel.SDK.VIDEO_STATE_PLAYING),o.emit("meride.playing_content")),h.play()},P=function(e){h.enableSeek()},F=function(e){if(e.subType===tv.freewheel.SDK.EVENT_AD_AUTO_PLAY_BLOCKED&&(n.play(),H()),e.subType===tv.freewheel.SDK.EVENT_AD_IMPRESSION&&!1===h.video.playing&&!0===S){n.play(),q();for(var t=0,r=l.length;t<r;t+=1)l[t].style.display="inline-block"}e.subType===tv.freewheel.SDK.EVENT_AD_INITIATED&&o.emit("meride.freewheel_ad_initiated")},U=function(e){h.disableSeek()};n.requestAds=function(){o.emit("meride.freewheel_requesting"),d=t.newContext(),o.emit("meride.freewheel_current_context_change",d),X(),d.setProfile(f),!0===T?d.setVideoAsset(e.assetID,h.video.duration||500,u):d.setVideoAsset(e.assetID),d.setSiteSection(e.sectionID);for(var n in y)y.hasOwnProperty(n)&&"vprn"!==n&&d.addKeyValue(n,y[n]);d.addKeyValue("vprn",parseInt(1e8*Math.random(),10).toString()),!0===T&&d.addTemporalSlot("Preroll_1",tv.freewheel.SDK.ADUNIT_PREROLL,0),d.addEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,R),d.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,I),d.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,x),d.addEventListener(tv.freewheel.SDK.EVENT_ERROR,P),d.addEventListener(tv.freewheel.SDK.EVENT_AD,F),d.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,U),d.registerVideoDisplayBase(v),d.submitRequest()},n.play=function(){try{!1!==h.video.playing||!0!==S?m.length?M():N():!0===S&&(m.length?M():N())}catch(e){B(),H(),h.enableSeek(),!0===S&&h.play(),P()}};var j=function(){for(var e=0,t=s.length;e<t;e+=1)l[e]=s[e].cloneNode(!0),l[e].setAttribute("meride-cloned-adv-btn","cloned"),a.addClickTouch(l[e],K)},V=function(){for(var e=0,t=s.length;e<t;e+=1)s[e].style.display="none"},H=function(){try{for(var e=0,t=l.length;e<t;e+=1)if(l[e])try{l[e].parentNode.removeChild(l[e])}catch(e){}for(var e=0,t=s.length;e<t;e+=1)s[e]&&(s[e].parentNode.appendChild(s[e]),s[e].style.display="inline-block")}catch(e){}},q=function(){for(var e=0,t=s.length;e<t;e+=1)l[e]&&s[e].parentNode.appendChild(l[e])},G=function(){for(var e=0,t=l.length;e<t;e+=1){a.removeClickTouch(l[e],K);try{l[e].parentNode.removeChild(l[e])}catch(e){}}},K=function(e){o.emit("meride.freewheel_main_play_clicked"),h.video.removeEventListener("playing",W),!1===h.video.playing&&!0===S?n.play():m.length&&M(),G()},W=function(){h.video.removeEventListener("playing",W),d&&!1===S&&n.play(),G()},z=function(){h.video.removeEventListener("loadedmetadata",z)},Y=function(e){k(tv.freewheel.SDK.VIDEO_STATE_PAUSED)},X=function(){d&&(d.addEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,function(e){o.emit("meride.freewheel_requestcomplete",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,function(e){h.video.addEventListener("pause",Y,!1),o.emit("meride.freewheel_slot_started",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,function(e){h.video.removeEventListener("pause",Y),o.emit("meride.freewheel_slot_ended",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_ERROR,function(e){o.emit("meride.freewheel_error",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,function(e){o.emit("meride.freewheel_ad_impression",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,function(e){o.emit("meride.freewheel_ad_impression_end",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_AD_CLICK,function(e){o.emit("meride.freewheel_ad_click",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_AD_FIRST_QUARTILE,function(e){o.emit("meride.freewheel_ad_first_quartile",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_AD_MIDPOINT,function(e){o.emit("meride.freewheel_ad_midpoint",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_AD_THIRD_QUARTILE,function(e){o.emit("meride.freewheel_third_quartile",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_AD_COMPLETE,function(e){o.emit("meride.freewheel_ad_complete",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_AD_MUTE,function(e){o.emit("meride.freewheel_ad_mute",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_AD_UNMUTE,function(e){o.emit("meride.freewheel_ad_unmute",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_AD_COLLAPSE,function(e){o.emit("meride.freewheel_ad_collapse",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_AD_EXPAND,function(e){o.emit("meride.freewheel_ad_expand",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_AD_PAUSE,function(e){k(tv.freewheel.SDK.VIDEO_STATE_PAUSED),o.emit("meride.freewheel_ad_pause",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_AD_RESUME,function(e){o.emit("meride.freewheel_ad_resume",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_AD_REWIND,function(e){o.emit("meride.freewheel_ad_rewind",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_AD_ACCEPT_INVITATION,function(e){o.emit("meride.freewheel_accept_invitation",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_AD_CLOSE,function(e){o.emit("meride.freewheel_ad_close",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_AD_MINIMIZE,function(e){o.emit("meride.freewheel_ad_minimize",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_RESELLER_NO_AD,function(e){o.emit("meride.freewheel_reseller_no_ad",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_AD,function(e){}))},Q=function(){null!==h.hls&&(h.hls.detachMedia(),h.hls.destroy(),h.video.addEventListener("loadedmetadata",z,!1)),i.include(L,function(){j(),h.video.addEventListener("playing",W,!1),V(),h.video.playing=!1,h.video.addEventListener("play",function(){this.playing=!0},!1),!1===w?tv.freewheel.SDK.setLogLevel(tv.freewheel.SDK.LOG_LEVEL_QUIET):tv.freewheel.SDK.setLogLevel(tv.freewheel.SDK.LOG_LEVEL_DEBUG),t=new tv.freewheel.SDK.AdManager,t.setNetwork(u),t.setServer(c),o.emit("meride.freewheel_loaded"),!1===S&&q()},{onerror:function(){D()}})};return n.init=Q,n};e.exports=o},function(e,t,n){var r=n(6),i=n(1),a=n(14),o=function(e){if(!e)throw new Error("No parameter to FreewheelMerideEvents");if(!e.freewheel)throw new Error("No freewheel parameter to FreewheelMerideEvents");if(!e.containerEl)throw new Error("No containerEl parameter to FreewheelMerideEvents");var t={},n=e.freewheel,o=e.containerEl,s=function(){n.on("meride.freewheel_main_play_clicked",function(){r.emit(i.MAIN_PLAY_CLICKED,o)}),n.on("meride.freewheel_request_complete",function(){a.setAdvState(i.AD_REQUEST_COMPLETE),r.emit(i.AD_REQUEST_COMPLETE,o)}),n.on("meride.freewheel_requesting",function(){a.setAdvState(i.AD_REQUESTING),r.emit(i.AD_REQUESTING,o)}),n.on("meride.freewheel_ad_initiated",function(){a.setAdvState(i.AD_REQUESTING)}),n.on("meride.playing_content",function(){a.setPlayerState(i.PLAY_CONTENT),a.setAdvState("")}),n.on("meride.freewheel_ad_impression",function(){a.setAdvState(i.AD_STARTED),r.emit(i.AD_STARTED,o)}),n.on("meride.freewheel_ad_impression_end",function(){r.emit(i.AD_ENDED,o),a.setAdvState(i.AD_ENDED)}),n.on("meride.freewheel_ad_click",function(e){var t=e.arguments[0];window.clickEv=t,t&&t.adInstance.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK).length>0&&r.emit(i.AD_CLICKED,o,{clickThroughUrl:t.adInstance.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK)[0]})}),n.on("meride.freewheel_error",function(){a.setAdvState(""),r.emit(i.AD_ERROR,o)}),n.on("meride.freewheel_ad_error",function(){r.emit(i.AD_ERROR,o)}),n.on("meride.freewheel_reseller_no_ad",function(){r.emit(i.AD_EMPTY,o)}),n.on("meride.freewheel_ad_empty",function(){r.emit(i.AD_EMPTY,o)})};return t.init=s,t};e.exports=o},function(e,t,n){var r=n(18),i=n(28),a=n(2),o=n(5),s=n(1),l=n(11),d=function(e){if(!e)throw new Error("No parameter to ControlsManager");if(!e.freewheel)throw new Error("No freewheel parameter to ControlsManager");if(!e.containerEl)throw new Error("No containerEl parameter to ControlsManager");var t,n,d,u={},c=e.freewheel,f=e.containerEl,h=!0===e.autoPlay,p=o.applyStyles,v=null,m=null,g=null,y=null,E=function(){for(var e=f.querySelectorAll(".boxcenterBtn"),t=0,n=e.length;t<n;t+=1)e[t].style.visibility="hidden"},b=function(){for(var e=f.querySelectorAll(".otherComponents"),t=0,n=e.length;t<n;t+=1)e[t].style.visibility="hidden"},T=function(){E(),b()},w=function(){for(var e=f.querySelectorAll(".boxcenterBtn"),t=0,n=e.length;t<n;t+=1)e[t].style.visibility="visible"},S=function(){for(var e=f.querySelectorAll(".otherComponents"),t=0,n=e.length;t<n;t+=1)e[t].style.visibility="visible"},A=function(){w(),S()},L=null,k=function(){null===y&&(y=new i({containerEl:f}),y.show()),L=d.getContentVideoElement(),g=setInterval(function(){L&&!1===L.paused&&!0===L.playing&&(v-=1,y.setMessage(l("view_video_countdown",[v])),0===v&&C())},1e3)},C=function(){null!==g&&(clearInterval(g),g=null,null!==y&&y.reset())},_=function(){t=document.createElement("button"),n=document.createElement("button"),t.innerHTML=r.volumeOnSVG,n.innerHTML=r.volumeOffSVG,p(t,{backgroundColor:"transparent",cursor:"pointer",border:"none",width:"40px",height:"40px",position:"absolute",top:"18px",left:"2%",zIndex:"999999",display:"none"}),p(n,{backgroundColor:"transparent",cursor:"pointer",border:"none",width:"40px",height:"40px",position:"absolute",top:"18px",left:"2%",zIndex:"999999",display:"none"}),a.addClickTouch(t,D),a.addClickTouch(n,R),f.appendChild(t),f.appendChild(n)},D=function(){d&&d.setAdVolume(0)},R=function(){d&&d.setAdVolume(1)},I=function(){try{t.parentNode.removeChild(t),n.parentNode.removeChild(n)}catch(e){}},x=function(){d&&(d.getAdVolume()>0?(p(n,{display:"none"}),p(t,{display:"inline-block"})):(p(t,{display:"none"}),p(n,{display:"inline-block"})))},O=function(e){e.subType==tv.freewheel.SDK.EVENT_AD_VOLUME_CHANGE&&x()},M=function(){A(),I(),!0===e.showCountdown&&C()},B=function(){!0===h?T():b(),f.addEventListener(s.PLAY_CONTENT,function(){A()}),c.on("meride.freewheel_current_context_change",function(e){d=e.arguments[0],x(),d.addEventListener(tv.freewheel.SDK.EVENT_AD,O)}),c.on("meride.freewheel_ad_impression",function(){T()}),c.on("meride.freewheel_main_play_clicked",function(){T()}),c.on("meride.freewheel_slot_started",function(t){_(),x(),!0===e.showCountdown&&(t.arguments&&t.arguments[0]&&t.arguments[0].slot&&(m=t.arguments[0].slot,v=parseInt(m.getTotalDuration(),10)),k())}),c.on("meride.freewheel_slot_ended",function(){M()}),c.on("meride.freewheel_error",function(){M()}),c.on("meride.freewheel_ad_error",function(){M()}),c.on("meride.freewheel_reseller_no_ad",function(){M()}),c.on("meride.freewheel_ad_empty",function(){M()})};return u.init=B,u};e.exports=d},function(e,t,n){var r=n(12),i=n(5).applyStyles,a=function(e){if(!e)throw new Error("No opts passed to VerticalVideo");if(!e.container)throw new Error("No opts.container passed to VerticalVideo");if(!e.player)throw new Error("No opts.player passed to VerticalVideo");var t=e.player,n=e.container,a=parseInt(n.getAttribute("data-width"),10),o=parseInt(n.getAttribute("data-height"),10),s=function(){i(t.video,{"object-fit":"contain"})},l=function(){o>=a?!0===e.crop?i(t.video,{"object-fit":"cover"}):i(t.video,{"object-fit":"fill"}):i(t.video,{"object-fit":"contain"})},d=function(e){o=n.offsetHeight,a=n.offsetWidth,r.isFullScreen()?s():l()};window.addEventListener("resize",d,!1),window.addEventListener("orientationchange",d,!1),d()};e.exports=a},function(module,exports){var JSON;JSON||(JSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,a,o,s=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(l)){for(a=l.length,n=0;n<a;n+=1)o[n]=str(n,l)||"null";return i=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+s+"]":"["+o.join(",")+"]",gap=s,i}if(rep&&"object"==typeof rep)for(a=rep.length,n=0;n<a;n+=1)"string"==typeof rep[n]&&(r=rep[n],(i=str(r,l))&&o.push(quote(r)+(gap?": ":":")+i));else for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(i=str(r,l))&&o.push(quote(r)+(gap?": ":":")+i);return i=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+s+"}":"{"+o.join(",")+"}",gap=s,i}}var global=Function("return this")(),JSON=global.JSON;JSON||(JSON={}),"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;r<n;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&"object"==typeof i)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),void 0!==r?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}),global.JSON=JSON,module.exports=JSON}()},function(e,t){var n=function(e){if(!e)throw new Error("No parameter passed to MerideEmbedFullWindow");if(!e.embedOptions)throw new Error("No embedOptions parameter passed to MerideEmbedFullWindow");if(!e.embedOptions.embedID)throw new Error("No embedOptions.embedID parameter passed to MerideEmbedFullWindow");if(!e.clientID)throw new Error("No clientID parameter passed to MerideEmbedFullWindow");var t,n,r=e.container||document.body,i=e.embedOptions,a=e.embedOptions.embedID,o=e.clientID,s="absolute"===e.position?"absolute":"fixed",l=window.innerWidth,d=window.innerHeight,u=null,c=function(){null!==u&&(u.style.width="100%",u.style.height="100%"),r.style.width="100%",r.style.height="100%",r.style.position=s,t.style.height="100%",t.style.width="100%",n.style.height="100%",n.style.width="100%"},f=function(){document.fullscreen||c()};!function(){i.responsive=!1,r.innerHTML='<div class="meride-video-container" data-embed="'+a+'" data-customer="'+o+'" data-nfs="'+o+'" data-width="'+l+'" data-height="'+d+'"></div>',Meride.initEmbed(i),t=Meride.getPlayerContainer({embedID:a}),t.style.height="100% !important",t.addEventListener(Meride.EventType.READY,function(e){n=e.detail.player,u=document.getElementById("meride_flash_"+a),c(),window.addEventListener("resize",c,!1)}),document.addEventListener("fullscreenchange",f,!1),document.addEventListener("webkitfullscreenchange",f,!1),document.addEventListener("mozfullscreenchange",f,!1)}()};e.exports=n},function(e,t,n){var r=n(22),i=n(5),a=n(7),o=n(1),s=function(e){if(!e.embedID)throw new Error("embedID required by ScrollMode");if(!e.embed)throw new Error("embed required by ScrollMode");if(!e.response)throw new Error("response required by ScrollMode");var t={},n=!1,s=!1,l=null,d=document.querySelector(".meride-video-container[data-embed='"+e.embedID+"']"),u=null,c=null,f=e.embedID,h=e.scrollMode.actionContainer?"absolute":"fixed";actionContainer=e.scrollMode.actionContainer||document.body,restoreAudioAfterPreroll=!0===e.scrollMode.restoreAudioAfterPreroll,pauseVideoAfterPreroll=!0===e.scrollMode.pauseVideoAfterPreroll,muteOnMouseOver=!1!==e.scrollMode.muteOnMouseOver,preload=!0===e.scrollMode.preload,embDiv=document.querySelector(".meride-video-container[data-embed='"+e.embedID+"']"),embedRoot=e.response.getElementsByTagName("embed")[0],autoPlay="true"===embedRoot.getAttribute("autoplay"),contentInitialized=!1,adsLoaded=!1,adsStarted=!1,adsError=!1,adsEnded=!1,isMobile=a.isMobile(),isAndroid=a.detectAndroid(),prerolls=e.embed.getPrerolls(),null!==embDiv.getAttribute("data-autoplay")&&(autoPlay="true"===embDiv.getAttribute("data-autoplay")),void 0!==e.autoPlay&&(autoPlay=e.autoPlay);var p=function(e){u.muted=!1},v=function(e){u.muted=!0},m=function(e){c.setVolume(1)},g=function(e){c.setVolume(0)},y=document.createElement("button");y.className="meride-scrollmode-layer-btn";var E=function(e){s=!0,u.removeEventListener("play",E),u.removeEventListener("playing",E),document.body.removeEventListener("touchstart",T);try{y.removeEventListener("touchstart",C),y.removeEventListener("touchmove",C),y.removeEventListener("touchend",C),y.removeEventListener("click",C),y.remove()}catch(e){}},b=function(){!0===autoPlay&&u.play()},T=function(e){b()},w=function(e){u.removeEventListener("playing",w),u.removeEventListener("play",w),u.pause()},S=document.createElement("div");S.className="meride-black-panel";var A=function(){var e=prerolls.length>0&&!0===pauseVideoAfterPreroll&&(!0===adsEnded||!0===adsError);if(u.removeEventListener("loadedmetadata",A),prerolls.length>0&&!0===restoreAudioAfterPreroll&&(!0===adsEnded||!0===adsError)?u.muted=!1:u.muted=!0,!0===autoPlay){if(adsEnded||adsError||adsLoaded||adsStarted){u.currentTime=0;try{l.removeChild(S)}catch(e){}}else!isAndroid&&prerolls.length>0&&(i.applyStyles(S,{position:"absolute",top:"0",left:"0",width:u.offsetWidth+"px",height:u.offsetHeight+"px",background:"#000",zIndex:11}),l.appendChild(S));prerolls.length>0&&!isMobile&&u.pause(),u.play()}!0===e&&(u.addEventListener("playing",w,!1),u.addEventListener("play",w,!1)),!0===muteOnMouseOver&&(l.addEventListener("mouseover",p,!1),l.addEventListener("mouseout",v,!1))},L=function(){!0!==adsError&&!0!==adsStarted||(u.removeEventListener("play",L),u.addEventListener("playing",L)),isMobile||u.pause()},k=function(){if(0===prerolls.length?(u.addEventListener("loadedmetadata",A,!1),n||u.load(),s||u.play()):(u.addEventListener("loadedmetadata",A,!1),u.addEventListener("play",L,!1),u.addEventListener("playing",L,!1)),!n)try{u.load()}catch(e){}if(!s)try{u.play()}catch(e){}},C=function(e){return!0===preload?k():(D(),k()),!1},_=function(){var t=function(e){u.addEventListener("play",function(){u.pause(),u.src=""},!1);try{l.parentNode.removeChild(l)}catch(e){}};l.addEventListener(o.READY,function(){if(u=l.querySelector("video"),!0===autoPlay&&isAndroid&&u.setAttribute("autoplay","autoplay"),u.setAttribute("muted","muted"),u.addEventListener("play",E,!1),u.addEventListener("playing",E,!1),e.scrollMode.destroyOn)for(var n in e.scrollMode.destroyOn)e.scrollMode.destroyOn.hasOwnProperty(n)&&l.addEventListener(e.scrollMode.destroyOn[n],t,!1);i.applyStyles(y,{width:actionContainer.offsetWidth+"px",height:actionContainer.offsetHeight+"px"})},!1),l.addEventListener(o.ADS_MANAGER_READY,function(e){c=e.detail.adsManager,!0===autoPlay&&(l.querySelector(".playBtn").style.display="none",l.querySelector(".loadingSpinner").style.display="inline-block"),adsLoaded=!0,!0===muteOnMouseOver&&(c.setVolume(0),l.addEventListener("mouseover",m,!1),l.addEventListener("mouseout",g,!1))}),l.addEventListener(o.AD_STARTED,function(e){adsStarted=!0;try{l.removeChild(S)}catch(e){}try{y.removeEventListener("touchstart",C),y.removeEventListener("touchmove",C),y.removeEventListener("touchend",C),y.removeEventListener("touchend",C),y.remove()}catch(e){}},!1),l.addEventListener(o.AD_ERROR,function(e){adsError=!0;try{l.removeChild(S)}catch(e){}if(!0===muteOnMouseOver&&(l.removeEventListener("mouseover",m),l.removeEventListener("mouseout",g)),isAndroid)try{u.play()}catch(e){}},!1),l.addEventListener(o.AD_ENDED,function(e){adsEnded=!0,!0===muteOnMouseOver&&(l.removeEventListener("mouseover",m),l.removeEventListener("mouseout",g));try{l.removeChild(S)}catch(e){}},!1),l.addEventListener(o.ROLLVIDEO_ENDED,function(e){adsEnded=!0;try{l.removeChild(S)}catch(e){}},!1),l.addEventListener(o.LOADEDMETADATA,A,!1)},D=function(){if(!n){n=!0,window.removeEventListener("DOMContentLoaded",I),window.removeEventListener("load",I),window.removeEventListener("scroll",I),window.removeEventListener("resize",I);var t=new r;l=Meride.getPlayerContainer({embedID:f}),_(),e.videoFormat={html5:"mp4"},t.init(e),!0===autoPlay&&(l.querySelector(".playBtn").style.display="none")}},R=function(){i.applyStyles(y,{width:actionContainer.offsetWidth+"px",height:actionContainer.offsetHeight+"px",position:h,top:"0",left:"0",border:"none",backgroundColor:"transparent",zIndex:"999999"}),y.addEventListener("touchstart",C,!1),y.addEventListener("touchmove",C,!1),y.addEventListener("touchend",C,!1),y.addEventListener("click",C,!1),actionContainer.appendChild(y)},I=function(){!0===i.isElementInViewport(d)&&(D(),!0===isMobile&&R())},x=function(){e.scrollMode.actionContainer||k()};return!0===preload?(window.addEventListener("DOMContentLoaded",x,!1),window.addEventListener("load",x,!1),window.addEventListener("scroll",x,!1),window.addEventListener("resize",x,!1),!0===isMobile&&R(),function(){var t=new r;l=Meride.getPlayerContainer({embedID:f}),_(),l.removeEventListener(o.LOADEDMETADATA,A),e.videoFormat={html5:"mp4"},i.isElementInViewport(d)||(e.autoPlay=!1),t.init(e),n=!0}()):(window.addEventListener("DOMContentLoaded",I,!1),window.addEventListener("load",I,!1),window.addEventListener("scroll",I,!1),window.addEventListener("resize",I,!1),i.isElementInViewport(d)&&(D(),!0===isMobile&&R())),t};e.exports=s},function(e,t,n){var r=n(78);window.meride=r},function(e,t,n){var r=n(79),i=n(96),a=n(32),o=window.meride||{};o.adv={},o.adv.AdLoader=r,o.adv.MediaFactoryRenderer=i,o.adv.VASTErrorCodes=a,e.exports=o},function(e,t,n){var r=n(80),i=n(94),a=n(95),o=n(31),s=n(13),l=n(30),d=n(0),u=function(e){var t={},n=e,u=new d,c=n.videoEl||null,f=c?c.src:"";t.on=function(e,t){return u.on(e,t)},t.off=function(e,t){return u.off(e,t)};var h=function(e){c.removeEventListener("loadedmetadata",h);var t=c.play();t&&t.then(function(){}).catch(function(e){})},p=function(e){if(c.src!==f){c.setAttribute("src",f),!0===e&&c.addEventListener("loadedmetadata",h,!1);var t=c.load();t&&t.then(function(){}).catch(function(e){})}if(!0===e){var n=c.play();n&&n.then(function(){}).catch(function(e){})}};t.restoreOriginalVideo=function(e){return p(e)};var v=function(e){return null!==c&&(e=s.replaceDimensions(e,c.offsetWidth,c.offsetHeight)),e};if(t.load=function(){var e=n.ads.map(function(e){var t=v(e.uri);return new r({uri:t,videoEl:c}).read(t)});return l.all(e).then(function(e){return new l(function(t,n){if(e)if(e&&1===e.length&&0===e[0].length)u.emit("VAST_ERROR",new o(null,101));else if(1===e.length)try{t(new i({ads:e[0]}))}catch(e){u.emit("VAST_ERROR",e)}else e.length>1&&t(new a({ads:e}));else n("Empty result in the responses")})}).catch(function(e){var t=new o(null,900);throw u.emit("LOAD_ERROR",t),t})},!n)throw new Error("No initialization parameters passed");if(!n.ads)throw new Error("No advertisment passed. Please use the ads attribute ad an array of ads");if(n.ads&&!n.ads.hasOwnProperty("length"))throw new Error("Ads attribute must be an array");return t};e.exports=u},function(e,t,n){var r=n(15),i=n(30),a=n(13),o=function(e){var t={},n=(e.uri,0),o=!1,s=null,l=null,d=[],u={},c=[],f=[],h=e.videoEl||null;if(!e)throw new Error("You have to pass init parameters to VASTReader");if(!e.uri)throw new Error("You have to pass uri parameters to VASTReader");var p=function(e){var t=e;return t=a.replaceTimestamp(t),t=a.replaceRandom(t),t=a.replaceRnd(t),t=a.replaceReferrerURL(t),t=a.replaceURL(t),t=a.replaceDescriptionURL(t),null!==h&&(t=a.replaceDimensions(t,h.offsetWidth,h.offsetHeight)),t},v=function(e){if(document.implementation&&document.implementation.createDocument)xmlDoc=(new DOMParser).parseFromString(e,"text/xml");else{if(!window.ActiveXObject)return null;xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),xmlDoc.loadXML(e)}return xmlDoc},m=function(e){return r.read({uri:p(e),responseType:"text",useXDR:!0,withCredentials:!1})},g=function(e){if(e=v(e),s=e.getElementsByTagName("Wrapper")[0],l=e.getElementsByTagName("VASTAdTagURI")[0],s&&l){if((n+=1)>3)return!1;var r=e.getElementsByTagName("Impression"),i=0,a=0;if(r&&r.length>0)for(i=0,a=r.length;i<a;i+=1)d.push(r[i]);var h=e.getElementsByTagName("Linear"),p=[];if(h){var m=h[0].getElementsByTagName("Tracking");for(var g in m)if(m.hasOwnProperty(g)&&(p=h.item(0).getElementsByTagName("Tracking"))&&p.length>0)for(i=0,a=p.length;i<a;i+=1)c.push(p[i])}var y=e.getElementsByTagName("ClickTracking");for(var E in y)y.hasOwnProperty(E)&&f.push(y[E]);u=e.getElementsByTagName("Tracking");var b=l.firstChild.data;return null!==b.match(/^\[CDATA\[/)&&null!==b.match(/\]\]$/)&&(b=b.replace("[CDATA[","").replace("]]","")),t.read(b)}return!!e.getElementsByTagName("InLine")[0]&&(o=!0,e)},y=function(e){if(!e||e&&0===e.length)return[];var t=0,n=0,r=e.getElementsByTagName("InLine");if(r.length>0)for(r=r[0],t=0,n=d.length;t<n;t+=1)r.appendChild(d[t]);var i=e.getElementsByTagName("Linear"),a=null;if(i.length>0){if((a=i[0].getElementsByTagName("TrackingEvents"))&&a.length>0)for(t=0,n=c.length;t<n;t+=1)try{a[0].appendChild(c[t])}catch(e){}null}var o=e.getElementsByTagName("VideoClicks")[0];if(o)for(var s in f)f.hasOwnProperty(s)&&o.appendChild(f[s]);return e};return t.read=function(e){return new i(function(t,n){m(e).then(g).then(function(e){!1!==e?(e=y(e),t(e)):t([])}).catch(function(e){n("Error retrieving advertising while reading VAST file.")})})},t};e.exports=o},function(e,t,n){"use strict";e.exports=n(82)},function(e,t,n){"use strict";e.exports=n(8),n(83),n(84),n(85),n(86),n(87)},function(e,t,n){"use strict";var r=n(8);e.exports=r,r.prototype.done=function(e,t){(arguments.length?this.then.apply(this,arguments):this).then(null,function(e){setTimeout(function(){throw e},0)})}},function(e,t,n){"use strict";var r=n(8);e.exports=r,r.prototype.finally=function(e){return this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})})}},function(e,t,n){"use strict";function r(e){var t=new i(i._n);return t._i=1,t._j=e,t}var i=n(8);e.exports=i;var a=r(!0),o=r(!1),s=r(null),l=r(void 0),d=r(0),u=r("");i.resolve=function(e){if(e instanceof i)return e;if(null===e)return s;if(void 0===e)return l;if(!0===e)return a;if(!1===e)return o;if(0===e)return d;if(""===e)return u;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new i(t.bind(e))}catch(e){return new i(function(t,n){n(e)})}return r(e)},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,n){function r(o,s){if(s&&("object"==typeof s||"function"==typeof s)){if(s instanceof i&&s.then===i.prototype.then){for(;3===s._i;)s=s._j;return 1===s._i?r(o,s._j):(2===s._i&&n(s._j),void s.then(function(e){r(o,e)},n))}var l=s.then;if("function"==typeof l){return void new i(l.bind(s)).then(function(e){r(o,e)},n)}}t[o]=s,0==--a&&e(t)}if(0===t.length)return e([]);for(var a=t.length,o=0;o<t.length;o++)r(o,t[o])})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){e.forEach(function(e){i.resolve(e).then(t,n)})})},i.prototype.catch=function(e){return this.then(null,e)}},function(e,t,n){"use strict";function r(e,t){for(var n=[],r=0;r<t;r++)n.push("a"+r);var i=["return function ("+n.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(n).concat([s]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],i)(a,e)}function i(e){for(var t=Math.max(e.length-1,3),n=[],r=0;r<t;r++)n.push("a"+r);var i=["return function ("+n.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+t+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+s+";","var res;","switch (argLength) {",n.concat(["extra"]).map(function(e,t){return"case "+t+":res = fn.call("+["self"].concat(n.slice(0,t)).concat("cb").join(",")+");break;"}).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],i)(a,e)}var a=n(8),o=n(19);e.exports=a,a.denodeify=function(e,t){return"number"==typeof t&&t!==1/0?r(e,t):i(e)};var s="function (err, res) {if (err) { rj(err); } else { rs(res); }}";a.nodeify=function(e){return function(){var t=Array.prototype.slice.call(arguments),n="function"==typeof t[t.length-1]?t.pop():null,r=this;try{return e.apply(this,arguments).nodeify(n,r)}catch(e){if(null===n||void 0===n)return new a(function(t,n){n(e)});o(function(){n.call(r,e)})}}},a.prototype.nodeify=function(e,t){if("function"!=typeof e)return this;this.then(function(n){o(function(){e.call(t,null,n)})},function(n){o(function(){e.call(t,n)})})}},function(e,t,n){"use strict";var r=n(8);e.exports=r,r.enableSynchronous=function(){r.prototype.isPending=function(){return 0==this.getState()},r.prototype.isFulfilled=function(){return 1==this.getState()},r.prototype.isRejected=function(){return 2==this.getState()},r.prototype.getValue=function(){if(3===this._i)return this._j.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._j},r.prototype.getReason=function(){if(3===this._i)return this._j.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._j},r.prototype.getState=function(){return 3===this._i?this._j.getState():-1===this._i||-2===this._i?0:this._i}},r.disableSynchronous=function(){r.prototype.isPending=void 0,r.prototype.isFulfilled=void 0,r.prototype.isRejected=void 0,r.prototype.getValue=void 0,r.prototype.getReason=void 0,r.prototype.getState=void 0}},function(e,t,n){"use strict";e.exports=n(9),n(89),n(90),n(91),n(92),n(93)},function(e,t,n){"use strict";var r=n(9);e.exports=r,r.prototype.done=function(e,t){(arguments.length?this.then.apply(this,arguments):this).then(null,function(e){setTimeout(function(){throw e},0)})}},function(e,t,n){"use strict";var r=n(9);e.exports=r,r.prototype.finally=function(e){return this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})})}},function(e,t,n){"use strict";function r(e){var t=new i(i._61);return t._65=1,t._55=e,t}var i=n(9);e.exports=i;var a=r(!0),o=r(!1),s=r(null),l=r(void 0),d=r(0),u=r("");i.resolve=function(e){if(e instanceof i)return e;if(null===e)return s;if(void 0===e)return l;if(!0===e)return a;if(!1===e)return o;if(0===e)return d;if(""===e)return u;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new i(t.bind(e))}catch(e){return new i(function(t,n){n(e)})}return r(e)},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,n){function r(o,s){if(s&&("object"==typeof s||"function"==typeof s)){if(s instanceof i&&s.then===i.prototype.then){for(;3===s._65;)s=s._55;return 1===s._65?r(o,s._55):(2===s._65&&n(s._55),void s.then(function(e){r(o,e)},n))}var l=s.then;if("function"==typeof l){return void new i(l.bind(s)).then(function(e){r(o,e)},n)}}t[o]=s,0==--a&&e(t)}if(0===t.length)return e([]);for(var a=t.length,o=0;o<t.length;o++)r(o,t[o])})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){e.forEach(function(e){i.resolve(e).then(t,n)})})},i.prototype.catch=function(e){return this.then(null,e)}},function(e,t,n){"use strict";function r(e,t){for(var n=[],r=0;r<t;r++)n.push("a"+r);var i=["return function ("+n.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(n).concat([s]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],i)(a,e)}function i(e){for(var t=Math.max(e.length-1,3),n=[],r=0;r<t;r++)n.push("a"+r);var i=["return function ("+n.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+t+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+s+";","var res;","switch (argLength) {",n.concat(["extra"]).map(function(e,t){return"case "+t+":res = fn.call("+["self"].concat(n.slice(0,t)).concat("cb").join(",")+");break;"}).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],i)(a,e)}var a=n(9),o=n(19);e.exports=a,a.denodeify=function(e,t){return"number"==typeof t&&t!==1/0?r(e,t):i(e)};var s="function (err, res) {if (err) { rj(err); } else { rs(res); }}";a.nodeify=function(e){return function(){var t=Array.prototype.slice.call(arguments),n="function"==typeof t[t.length-1]?t.pop():null,r=this;try{return e.apply(this,arguments).nodeify(n,r)}catch(e){if(null===n||void 0===n)return new a(function(t,n){n(e)});o(function(){n.call(r,e)})}}},a.prototype.nodeify=function(e,t){if("function"!=typeof e)return this;this.then(function(n){o(function(){e.call(t,null,n)})},function(n){o(function(){e.call(t,n)})})}},function(e,t,n){"use strict";var r=n(9);e.exports=r,r.enableSynchronous=function(){r.prototype.isPending=function(){return 0==this.getState()},r.prototype.isFulfilled=function(){return 1==this.getState()},r.prototype.isRejected=function(){return 2==this.getState()},r.prototype.getValue=function(){if(3===this._65)return this._55.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._55},r.prototype.getReason=function(){if(3===this._65)return this._55.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._55},r.prototype.getState=function(){return 3===this._65?this._55.getState():-1===this._65||-2===this._65?0:this._65}},r.disableSynchronous=function(){r.prototype.isPending=void 0,r.prototype.isFulfilled=void 0,r.prototype.isRejected=void 0,r.prototype.getValue=void 0,r.prototype.getReason=void 0,r.prototype.getState=void 0}},function(e,t,n){var r=n(31),i=function(e){var t={},n=null;if(t.opts=e,t.type="ad",!e.ads||0===e.ads.length)throw new Error("Ads must be passed as ads element");n=e.ads.getElementsByTagName("VAST")[0];var i=e.ads.getElementsByTagName("InLine")[0],a=e.ads.getElementsByTagName("Wrapper")[0],o=e.ads.getElementsByTagName("Error")[0];if(!(n=e.ads.getElementsByTagName("VAST")[0]))throw new r("NO VAST element found",101);if(!n.hasChildNodes())throw new r("Empty VAST found",101);if(!i&&!a&&o)throw new r(null,1001,{reportTo:o.firstChild.data});var s=e.ads;if(t.Ad=s.getElementsByTagName("Ad")[0],t.tracking=s.getElementsByTagName("Tracking"),t.id=t.Ad.getAttribute("id"),t.isVPAID=!1,t.VPAID={},t.mediaFile=s.getElementsByTagName("MediaFile"),t.mediaFile&&t.mediaFile.length>0)for(var l=0,d=t.mediaFile.length;l<d;l+=1)t.mediaFile[l]&&"VPAID"===t.mediaFile[l].getAttribute("apiFramework")&&"application/javascript"===t.mediaFile[l].getAttribute("type")&&(t.isVPAID=!0,t.VPAID={type:t.mediaFile[l].getAttribute("type"),adParameters:s.getElementsByTagName("AdParameters").length>0?JSON.parse(s.getElementsByTagName("AdParameters")[0].firstChild.wholeText):{},mediaFile:t.mediaFile[l].firstChild.data},"function"==typeof t.VPAID.mediaFile.trim&&""===t.VPAID.mediaFile.trim()&&(t.VPAID.mediaFile=t.mediaFile[l].textContent));return t};e.exports=i},function(e,t){var n=function(e){var t={};if(t.opts=e,t.type="adGroup",!e.ads)throw new Error("Ads must be passed as ads element");return t};e.exports=n},function(e,t,n){var r=n(20),i=(n(97),n(100),function(e,t){return new r[e+"Renderer"](t)});e.exports=i},function(e,t,n){var r=n(20),i=n(98),a=n(0),o=n(99),s=n(4);r.LinearRenderer=function(e){var t,n={},r=e.videoEl||null,l=e.containerEl||null,d="",u=r.getAttribute("src"),c=e.ad.Ad.getElementsByTagName("Linear"),f=c.item(0).getElementsByTagName("MediaFile"),h=e.ad.Ad.getElementsByTagName("Tracking"),p="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,v=p?"touchstart":"click",m=e.btnInitAction||null,g=new a,y=e.preventReproduceMainVideo||!1,E=!1,b=!1,T={play:0},w={start:"timeupdate",complete:"ended",pause:"pause",mute:"volumechange",unmute:"volumechange",resume:"play",error:"error",impression:"timeupdate"},S={onstart:function(){r.currentTime>0&&(r.removeEventListener(w.start,S.onstart),T.play+=1,g.emit("start"),g.emit("meride.adstarted"))},onimpression:function(){r.removeEventListener(w.impression,S.onimpression),g.emit("impression")},oncomplete:function(){r.removeEventListener(w.complete,S.oncomplete),g.emit("complete"),g.emit("meride.adcompleted")},onpause:function(e){g.emit("pause")},onFirstQuartile:function(){},onMidpoint:function(){},onThirdQuartile:function(){},onerror:function(){g.emit("error"),g.emit("meride.aderror")},onmute:function(e){r.muted&&(b=!0,g.emit("mute"))},onunmute:function(e){!r.muted&&b&&(b=!1,g.emit("unmute"))},onrewind:function(e){},onresume:function(e){T.play>1&&g.emit("resume"),T.play+=1},onfullscreen:function(e){},onexitFullscreen:function(e){},onexpand:function(e){},oncollapse:function(e){},onacceptInvitationLinear:function(e){},"oncloseLinear:":function(e){},onskip:function(e){},onprogress:function(e){}};n.on=function(e,t){return g.on(e,t)},n.off=function(e,t){return g.off(e,t)};var A=function(){r.removeEventListener("loadedmetadata",L),r.removeEventListener("ended",C);for(var e in w)w.hasOwnProperty(e)&&h[e]&&r.removeEventListener(w[e],S["on"+e])},L=function(e){r.removeEventListener("loadedmetadata",L),E=!0,r.play()},k=function(e){r.removeEventListener("loadedmetadata",k);var t=r.play();t&&t.then(function(){}).catch(function(e){})},C=function(e){if(r.removeEventListener("ended",C),r.setAttribute("src",u),g.emit("LINEAR_ENDED"),!y){r.addEventListener("loadedmetadata",k);var t=r.load();t&&t.then(function(){}).catch(function(e){});var n=r.play();n&&n.then(function(){}).catch(function(e){})}},_=function(e){if(r.removeEventListener("error",_),A(),r.setAttribute("src",u),g.emit("LINEAR_ENDED"),!y){r.addEventListener("loadedmetadata",k);var t=r.load();t&&t.then(function(){}).catch(function(e){});var n=r.play();n&&n.then(function(){}).catch(function(e){})}},D=function(){r.addEventListener("error",_),r.addEventListener("loadedmetadata",L),r.addEventListener("ended",C);for(var e in w)w.hasOwnProperty(e)&&r.addEventListener(w[e],S["on"+e])},R=function(){var t;s.include(e.ad.VPAID.mediaFile,function(){if(void 0!==window.getVPAIDAd){var n=getVPAIDAd,i=null,a=[],o=[],s=function(){try{l.removeChild(i)}catch(e){}};n&&"function"==typeof n&&(t=n()),i=document.createElement("div"),i.style.position="absolute",i.style.top="0",i.style.left="0",l.appendChild(i),o.slot=i,o.videoSlot=r,a.AdParameters=JSON.stringify(e.ad.VPAID.adParameters),t.subscribe(function(){t.startAd()},"AdLoaded"),t.subscribe(function(){r.src===u&&r.pause()},"AdVideoStart"),t.subscribe(function(){S.onFirstQuartile()},"AdVideoFirstQuartile"),t.subscribe(function(){S.onMidpoint()},"AdVideoMidpoint"),t.subscribe(function(){S.onThirdQuartile()},"AdVideoThirdQuartile"),t.subscribe(function(){S.onstart()},"AdStarted"),t.subscribe(function(){t.resizeAd(0,0,"normal"),s()},"AdStopped"),t.subscribe(function(){S.oncomplete(),s(),g.emit("LINEAR_ENDED")},"AdVideoComplete"),t.subscribe(function(){S.onskip(),s()},"AdSkipped"),t.subscribe(function(){S.onerror(),s()},"AdError"),t.initAd(l.offsetWidth,l.offsetHeight,"normal",256,a,o)}},!0)},I=function(){if(!0===e.ad.isVPAID)R();else{var a=i.selectVideo(f,r);if(!1===a)throw new Error("No reproducible video found");d=a.src,r.setAttribute("src",d)}A(),D(),t=new o({videoEl:r,tracks:h,impressions:e.ad.Ad.getElementsByTagName("Impression"),errors:e.ad.Ad.getElementsByTagName("Error")}),n.tracker=t};if(n.tracker=t,n.init=I,n.render=function(){r.setAttribute("preload","none"),r.style.display="block",m&&m.addEventListener(v,function(e){e.preventDefault(),E?r.play():(r.load(),r.play())}),r.load(),r.play()},n.containerEl=l,n.videoEl=r,navigator.userAgent.match(/(iPod|iPhone|iPad)/)){var x=document.createElement("style");x.type="text/css",x.innerHTML="video { -webkit-transform-style: preserve-3d; }",document.body.appendChild(x)}return n},e.exports=r},function(e,t){e.exports={selectVideo:function(e,t){var n="",r=!1,i=0,a=0,o="";for(i=0,a=e.length;i<a;i+=1)if(n=e[i].getAttribute("type"),"maybe"===(r=t.canPlayType(n))){o=1===e[i].childNodes?e[i].firstChild.data:e[i].firstChild.wholeText.replace(/[\n\r]/g,"");break}if(!r)for(i=0,a=e.length;i<a;i+=1)if(n=e[i].getAttribute("type"),"probably"===(r=t.canPlayType(n))){o=1===e[i].childNodes?e[i].firstChild.data:e[i].firstChild.wholeText.replace(/[\n\r]/g,"");break}return!!r&&{type:n,src:o}}}},function(e,t,n){var r=n(13),i=n(0),a=function(e){if(!e.videoEl)throw new Error("Tracker require a video element (videoEl param)");if(!e.tracks)throw new Error("Tracker require tracking elements");var t,n={},a=e.videoEl,o={},s={start:"timeupdate",complete:"ended",pause:"pause",mute:"volumechange",unmute:"volumechange",resume:"play",creativeView:"timeupdate",error:"error",impression:"timeupdate",viewable_impression:"timeupdate"},l={play:0},d=new i,u=a.duration,c=0,f=!1,h=!1,p=!1,v=!1,m={onstart:function(){a.currentTime>0&&(a.removeEventListener(s.start,m.onstart),l.play+=1,S("start"))},onimpression:function(){a.removeEventListener(s.impression,m.onimpression),S("impression")},onviewable_impression:function(){a.removeEventListener(s.viewable_impression,m.onviewable_impression),S("viewable_impression")},oncomplete:function(){a.removeEventListener(s.complete,m.oncomplete),S("complete")},onpause:function(e){S("pause")},oncreativeView:function(){a.currentTime>1&&(a.removeEventListener(s.creativeView,m.oncreativeView),S("creativeView"))},onFirstQuartile:function(){},onMidpoint:function(){},onThirdQuartile:function(){},onerror:function(){b(),a.removeEventListener(s.error,m.onerror),S("error")},onmute:function(e){a.muted&&(v=!0,S("mute"))},onunmute:function(e){!a.muted&&v&&(v=!1,S("unmute"))},onrewind:function(e){},onresume:function(e){l.play>1&&S("resume"),l.play+=1},onfullscreen:function(e){},onexitFullscreen:function(e){},onexpand:function(e){},oncollapse:function(e){},onacceptInvitationLinear:function(e){},"oncloseLinear:":function(e){},onskip:function(e){},onprogress:function(e){}};n.blockNetTracking=!1,n.on=function(e,t){return d.on(e,t)},n.off=function(e,t){return d.off(e,t)};for(var g=0,y=e.tracks.length;g<y;g+=1)t=e.tracks[g].getAttribute("event"),o[t]||(o[t]=[]),o[t].push(e.tracks[g].firstChild.data);if(e.impressions)for(o.impression=[],g=0,y=e.impressions.length;g<y;g+=1)o.impression.push(e.impressions[g].firstChild.data);if(e.errors){for(o.error=[],g=0,y=e.errors.length;g<y;g+=1)o.error.push(e.errors[g].firstChild.data);a.addEventListener(s.error,m.onerror)}for(var E in s)s.hasOwnProperty(E)&&o[E]&&a.addEventListener(s[E],m["on"+E]);var b=function(){a.removeEventListener("ended",b);for(var e in s)s.hasOwnProperty(e)&&o[e]&&a.removeEventListener(s[e],m["on"+e]);a.removeEventListener("durationchange",w),a.removeEventListener("timeupdate",T)};a.addEventListener("ended",b);var T=function(e){4===a.readyState&&(a.currentTime>1*c&&!f&&o.firstQuartile&&(f=!0,S("firstQuartile")),a.currentTime>2*c&&!h&&o.midpoint&&(h=!0,S("midpoint")),a.currentTime>3*c&&!p&&o.thirdQuartile&&(p=!0,S("thirdQuartile")))},w=function(e){u=a.duration,c=u/4};(o.firstQuartile||o.midpoint||o.thirdQuartile)&&a.addEventListener("timeupdate",T),a.addEventListener("durationchange",w);var S=function(e,t){for(var i in o[e])if(o[e].hasOwnProperty(i)&&(d.emit("meride:tracking:"+e,i),!0!==n.blockNetTracking)){var a=document.createElement("img");a.style.display="none",a.setAttribute("src",r.replace(o[e][i],t)),document.body.appendChild(a),a.parentNode.removeChild(a)}n.blockNetTracking=!1};return n.track=function(e){if(!e.eventName)throw new Error("Tracker needs an event");if(!o[e.eventName])throw new Error("Trying to track an unexistent event");S(e.eventName,e.uri,e.replacements||{})},n};e.exports=a},function(e,t,n){var r=n(20),i=n(0),a=n(101);r.NonLinearRenderer=function(e){var t,n={},r=e.videoEl||null,o=e.containerEl||null,s=e.ad.Ad.getElementsByTagName("NonLinear"),l=e.ad.Ad.getElementsByTagName("Tracking"),d=document.createElement("div"),u=e.ad.Ad.getElementsByTagName("NonLinearClickThrough"),c=new i,f=function(){var e=document.getElementsByClassName("merideNonLinearContainer")[0];if(null===e||void 0===e){var t,r,i,a=parseInt(s[0].getAttribute("width"),10);d.setAttribute("class","merideNonLinearContainer"),d.style.width=a+"px",d.style.height=s[0].getAttribute("height")+"px",d.style.position="absolute",d.style.bottom="40px",d.style.left="50%",d.style.marginLeft="-"+Math.round(a/2)+"px",t=s[0].getElementsByTagName("StaticResource")[0].firstChild.data,r=document.createElement("img"),r.setAttribute("src",t);try{i=s[0].getElementsByTagName("NonLinearClickThrough")[0].firstChild.data}catch(e){}if(i){var l=document.createElement("a");l.setAttribute("href",i),l.setAttribute("title","Adv link"),l.addEventListener("click",function(e){return c.emit("meride.nonlinear_adclicked"),window.open(this.href,"meride_adv_link"),e.preventDefault(),!1}),l.appendChild(r),d.appendChild(l)}else d.appendChild(r);o.style.position="relative",o.appendChild(d),c.emit("meride.nonlinear_adshowed"),null!==n.stayTime&&setTimeout(function(){d.parentNode.removeChild(d),c.emit("meride.nonlinear_adcompleted")},parseInt(1e3*n.stayTime,10))}};return n.on=function(e,t){return c.on(e,t)},n.off=function(e,t){return c.off(e,t)},n.stayTime=e.stayTime||null,n.afterTime=e.afterTime||null,n.delayTime=e.delayTime||null,n.tracker=t,n.render=function(){t=new a({videoEl:r,tracks:l,impressions:e.ad.Ad.getElementsByTagName("Impression"),errors:e.ad.Ad.getElementsByTagName("Error"),nonLinearClickThrough:u,renderer:n}),n.tracker=t,c.emit("meride.nonlinear_adstarted"),null!==n.afterTime?setTimeout(function(){f()},parseInt(1e3*n.afterTime,10)):f()},n},e.exports=r},function(e,t,n){var r=n(13),i=n(0),a=function(e){if(!e.videoEl)throw new Error("NonLinearTracker require a video element (videoEl param)");if(!e.tracks)throw new Error("NonLinearTracker require tracking elements");if(!e.renderer)throw new Error("NonLinearTracker require a renderer");var t={},n=(e.videoEl,{}),a=new i,o=e.renderer;t.on=function(e,t){return a.on(e,t)},t.off=function(e,t){return a.off(e,t)};for(var s=0,l=e.tracks.length;s<l;s+=1)_event=e.tracks[s].getAttribute("event"),n[_event]||(n[_event]=[]),n[_event].push(e.tracks[s].firstChild.data);if(e.impressions)for(n.impression=[],s=0,l=e.impressions.length;s<l;s+=1)n.impression.push(e.impressions[s].firstChild.data);if(e.nonLinearClickThrough)for(n.nonLinearClickThrough=[],s=0,l=e.nonLinearClickThrough.length;s<l;s+=1)n.nonLinearClickThrough.push(e.nonLinearClickThrough[s].firstChild.data);if(e.errors)for(n.error=[],s=0,l=e.errors.length;s<l;s+=1)n.error.push(e.errors[s].firstChild.data);o.on("meride.nonlinear_adstarted",function(){d("impression")}),o.on("meride.nonlinear_adshowed",function(){d("creativeView"),d("start")}),o.on("meride.nonlinear_adcompleted",function(){}),o.on("meride.nonlinear_adclicked",function(){d("nonLinearClickThrough")});var d=function(e,i){for(var o in n[e])if(n[e].hasOwnProperty(o)&&(a.emit("meride:tracking:"+e,o),!0!==t.blockNetTracking)){var s=document.createElement("img");s.style.display="none",s.setAttribute("src",r.replace(n[e][o],i)),document.body.appendChild(s),s.parentNode.removeChild(s)}t.blockNetTracking=!1};return t.track=function(e){if(!e.eventName)throw new Error("Tracker needs an event");if(!n[e.eventName])throw new Error("Trying to track an unexistent event");d(e.eventName,e.uri,e.replacements||{})},t};e.exports=a},function(e,t,n){var r=n(103);window.meride=r},function(e,t,n){var r=n(104),i=n(21),a=window.meride||{};a.embed={},a.embed.Embed=r,a.embed.EmbedConfig=i,e.exports=a},function(e,t,n){var r=(n(0),n(15)),i=n(33),a=n(21),o=n(111),s=n(112),l=function(e){if(!e)throw new Error("No parameters passed to embed");if(!e.embedID)throw new Error("Embed requires a embedID param");if(!e.clientID)throw new Error("Embed requires a clientID param");var t,n={},l=e.bulkLabel||"NO_LABEL",d=e.videoFormat||"f4m",u=e.requestType||"default",c=e.device||"desktop",f=e.advSuffix||"",h="";n.id=e.embedID;var p=function(){var e=void 0!==document.location.origin?document.location.origin:document.location.protocol+"//"+document.location.hostname;return"/"===e[e.length-1]?e+="*":e+="/*",e=s.encode(e),e=e.replace(/\//g,"-"),e=e.replace(/\+/g,",")};n.read=function(){var n=a.proxyURL+e.embedID+"/"+e.clientID+"/"+c+"/"+l+"/"+d+"/"+u+"/"+p();return new i(function(e,i){r.read({uri:n,responseType:"document",useXDR:!0}).then(function(n){t=n;var r=t.getElementsByTagName("video")[0];if("true"===r.getAttribute("token_protection"))try{o.requestTokenSMP({authKey:r.getAttribute("token_protection_key")}).then(function(t){h=t,e(n)}).catch(function(e){throw new Error("Unable to get a token.")})}catch(e){}else e(n)}).catch(function(e){throw new Error("Error reading embed data.")})})};var v=function(){var e=t.getElementsByTagName("video")[0],n="";if(n="desktop"===c&&e.attributes.caching_type&&""!==e.attributes.caching_type.value?"akamai_adaptive_media_delivery"===e.attributes.caching_type.value?e.getElementsByTagName("iphone")[0].firstChild.data:e.getElementsByTagName("default")[0].firstChild.data:e.getElementsByTagName("iphone")[0].firstChild.data,null!==n.match(/\.m3u8$/)&&"mobile"===c){if(!document.createElement("video").canPlayType("application/vnd.apple.mpegurl")){var r=e.getElementsByTagName("mp4")[0].firstChild.data;""!==r&&(n=r)}}return n+h},m=function(e){var n=t.getElementsByTagName("video")[0];switch(e){case"mp4":return n.getElementsByTagName("mp4")[0].firstChild.data+h;case"f4m":return n.getElementsByTagName("default")[0].firstChild.data+h;default:return n.getElementsByTagName("iphone")[0].firstChild.data+h}};n.getVideo=function(e){return e?m(e):v()},n.getPoster=function(){var e=t.getElementsByTagName("video")[0];try{return e.getElementsByTagName("poster")[0].firstChild.data}catch(e){throw new Error("Video format "+format+" not exists")}};var g=function(e){for(var t=e.split("||"),n=null,r=0,i=0,a=t.length;i<a;i+=1){n=t[i].split("***");for(var o=0,s=n.length;o<s;o+=1)r=Math.floor(9e9*Math.random())+1e9,n[o]=n[o].replace(/\[random\]/g,r).replace(/%5Brandom%5D/g,r),""!==f&&(n[o]+=f);t[i]=n.join("***")}return t.join("||")};n.getPrerolls=function(e){for(var n,r,i,a,o=t.getElementsByTagName("preroll"),s=[],l=0,d=o.length;l<d;l+=1)n=o[l],n.getElementsByTagName("iphone")[0].firstChild.data,r=n.getElementsByTagName("default")[0].firstChild.data,i=r,""!==i&&!0===e&&(i=g(i)),i&&""!==i&&(a=i.split("||"),a.forEach(function(e){s.push({url:e,link:n.getElementsByTagName("link")[0].firstChild.data,type:n.getAttribute("type"),skip:n.getAttribute("skip"),skipTime:n.getAttribute("skip-time"),settingVolume:n.getAttribute("setting-volume")})}));return s},n.getMidrolls=function(e){for(var n,r,i,a,o,s,l=t.getElementsByTagName("midroll"),d=[],u=0,c=l.length;u<c;u+=1){a={mode:l[u].getAttribute("mode"),timeSetting:l[u].getAttribute("time_setting"),rolls:[]},o=l[u].getElementsByTagName("roll");for(var f=0,h=o.length;f<h;f+=1)n=o[f],n.getElementsByTagName("iphone")[0].firstChild.data,r=n.getElementsByTagName("default")[0].firstChild.data,i=r,""!==i&&!0===e&&(i=g(i)),i&&""!==i&&(s=i.split("||"),s.forEach(function(e){a.rolls.push({url:e,link:n.getElementsByTagName("link")[0].firstChild.data,type:n.getAttribute("type"),skip:n.getAttribute("skip"),skipTime:n.getAttribute("skip-time"),settingVolume:n.getAttribute("setting-volume")})}));d.push(a)}return d},n.getEndrolls=function(e){var n=t.getElementsByTagName("endroll")[0],r=[],i=(n.getElementsByTagName("iphone")[0].firstChild.data,n.getElementsByTagName("default")[0].firstChild.data),a=i;if(""!==a&&!0===e&&(a=g(a)),a&&""!==a){a.split("||").forEach(function(e){r.push({url:e,link:n.getElementsByTagName("link")[0].firstChild.data,type:n.getAttribute("type"),skip:n.getAttribute("skip"),skipTime:n.getAttribute("skip-time"),settingVolume:n.getAttribute("setting-volume")})})}return r};var y=function(e,n){var r=t.getElementsByTagName(n)[0];if(r&&"video"===r.getAttribute("type")){var i=r.getElementsByTagName("iphone")[0].firstChild.data,a=r.getElementsByTagName("default")[0].firstChild.data,o=r.getElementsByTagName("mp4")[0].firstChild.data,s=r.getElementsByTagName("link")[0].firstChild.data,l=a;return""!==l&&!0===e&&(l=g(l)),{url:{iphone:i,default:a,mp4:o},link:s,type:r.getAttribute("type"),skip:r.getAttribute("skip"),skipTime:r.getAttribute("skip-time"),settingVolume:r.getAttribute("setting-volume"),cachingType:r.getAttribute("caching_type"),id:r.getAttribute("id")}}return{}};return n.getRollVideo=function(e){return y(e,"preroll")},n.getRollVideoAdBlock=function(e){return y(e,"adblock-preroll")},n.getOverlay=function(e,n){if(!e||null===e.match(/initial|primary/))throw new Error("Invalid overlay type");var r=t.getElementsByTagName("overlay")[0],i=r.getElementsByTagName(e)[0],a=i.getElementsByTagName("tagurl")[0].firstChild.data,o={};return""!==a&&!0===n&&(a=g(a)),o.url=decodeURIComponent(a),o.stayTime=i.getAttribute("stay-time"),o.afterTime=i.getAttribute("after-time"),"primary"===e&&(o.fixed=i.getAttribute("fixed"),o.delayTime=i.getAttribute("delay-time"),o.maxDimensionWidth=i.getAttribute("max-dimension-width"),o.maxDimensionHeight=i.getAttribute("max-dimension-height")),o},n.getScrollMode=function(){var e=t.getElementsByTagName("scrollmode")[0],n={};if(e){n.enabled="1"===e.getAttribute("enabled"),n.muteOnMouseOver="1"===e.getAttribute("mute-on-mouse-over"),n.addVolumeIcon="1"===e.getAttribute("icon-volume");var r=e.getElementsByTagName("destroyOn");n.destroyOn=[];for(var i=0,a=r.length;i<a;i+=1)n.destroyOn.push(r[i].firstChild.data)}return n},n.getWatermark=function(){var e=t.getElementsByTagName("watermark")[0],n={};if(e){var r=e.getElementsByTagName("image"),i=e.getElementsByTagName("link"),a=e.getElementsByTagName("display");n.logoURL=r.length>0?e.getElementsByTagName("image")[0].firstChild.data:"",n.link=i.length>0?e.getElementsByTagName("link")[0].firstChild.data:"";var o=a.length>0?e.getElementsByTagName("display")[0]:null;null!==o&&(n.displayTime=o.getAttribute("time"),n.bottom=o.getAttribute("position-bottom"),n.right=o.getAttribute("position-right"),n.top=o.getAttribute("position-top"),n.left=o.getAttribute("position-left"),n.hide=o.getAttribute("hide")||!1,n.hide="1"===n.hide,n.opacity=o.getAttribute("opacity")||1,n.width=o.getAttribute("width"),n.height=o.getAttribute("height"))}return n},n.get_meride=function(e){try{var t=e.getElementsByTagName("meride")[0];return{staturl:t.getAttribute("staturl"),tecnology:t.getAttribute("tecnology")}}catch(e){return{}}},n.get_ama=function(e){try{return{beacon:e.getElementsByTagName("ama")[0].getElementsByTagName("beacon")[0].firstChild.data}}catch(e){return{}}},n.get_comscore=function(e){try{var t=e.getElementsByTagName("comscore")[0];return{user:t.getElementsByTagName("user")[0].firstChild.data,adtrack_start:t.getElementsByTagName("adtrack_start")[0].firstChild.data,adtrack_complete:t.getElementsByTagName("adtrack_complete")[0].firstChild.data,adtrack_standard:t.getElementsByTagName("adtrack_standard")[0].firstChild.data}}catch(e){return{}}},n.get_nielsen=function(e){try{var t=e.getElementsByTagName("nielsen")[0];return{clientid:t.getElementsByTagName("clientid")[0].firstChild.data,vcid:t.getElementsByTagName("vcid")[0].firstChild.data,cisuffix:t.getElementsByTagName("cisuffix")[0].firstChild.data,sfcode:t.getElementsByTagName("sfcode")[0].firstChild.data,prod:t.getElementsByTagName("prod")[0].firstChild.data}}catch(e){return{}}},n.get_webtrekk=function(e){try{var t=e.getElementsByTagName("webtrekk")[0];return{trackId:t.getElementsByTagName("track_id")[0].firstChild.data,trackDomain:t.getElementsByTagName("track_domain")[0].firstChild.data,mg:t.getElementsByTagName("mg")[0].firstChild.data}}catch(e){return{}}},n.getAnalytic=function(e){if(!e||"function"!=typeof this["get_"+e])throw new Error("Invalid analytics type");var n=t.getElementsByTagName("analytics")[0];return this["get_"+e](n)},n.getVideoProvider=function(){var e=t.getElementsByTagName("video")[0];return e.attributes.provider?e.attributes.provider.value:void 0},n};e.exports=l},function(e,t,n){"use strict";e.exports=n(10),n(106),n(107),n(108),n(109),n(110)},function(e,t,n){"use strict";var r=n(10);e.exports=r,r.prototype.done=function(e,t){(arguments.length?this.then.apply(this,arguments):this).then(null,function(e){setTimeout(function(){throw e},0)})}},function(e,t,n){"use strict";var r=n(10);e.exports=r,r.prototype.finally=function(e){return this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})})}},function(e,t,n){"use strict";function r(e){var t=new i(i._61);return t._65=1,t._55=e,t}var i=n(10);e.exports=i;var a=r(!0),o=r(!1),s=r(null),l=r(void 0),d=r(0),u=r("");i.resolve=function(e){if(e instanceof i)return e;if(null===e)return s;if(void 0===e)return l;if(!0===e)return a;if(!1===e)return o;if(0===e)return d;if(""===e)return u;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new i(t.bind(e))}catch(e){return new i(function(t,n){n(e)})}return r(e)},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,n){function r(o,s){if(s&&("object"==typeof s||"function"==typeof s)){if(s instanceof i&&s.then===i.prototype.then){for(;3===s._65;)s=s._55;return 1===s._65?r(o,s._55):(2===s._65&&n(s._55),void s.then(function(e){r(o,e)},n))}var l=s.then;if("function"==typeof l){return void new i(l.bind(s)).then(function(e){r(o,e)},n)}}t[o]=s,0==--a&&e(t)}if(0===t.length)return e([]);for(var a=t.length,o=0;o<t.length;o++)r(o,t[o])})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){e.forEach(function(e){i.resolve(e).then(t,n)})})},i.prototype.catch=function(e){return this.then(null,e)}},function(e,t,n){"use strict";function r(e,t){for(var n=[],r=0;r<t;r++)n.push("a"+r);var i=["return function ("+n.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(n).concat([s]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],i)(a,e)}function i(e){for(var t=Math.max(e.length-1,3),n=[],r=0;r<t;r++)n.push("a"+r);var i=["return function ("+n.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+t+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+s+";","var res;","switch (argLength) {",n.concat(["extra"]).map(function(e,t){return"case "+t+":res = fn.call("+["self"].concat(n.slice(0,t)).concat("cb").join(",")+");break;"}).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],i)(a,e)}var a=n(10),o=n(19);e.exports=a,a.denodeify=function(e,t){return"number"==typeof t&&t!==1/0?r(e,t):i(e)};var s="function (err, res) {if (err) { rj(err); } else { rs(res); }}";a.nodeify=function(e){return function(){var t=Array.prototype.slice.call(arguments),n="function"==typeof t[t.length-1]?t.pop():null,r=this;try{return e.apply(this,arguments).nodeify(n,r)}catch(e){if(null===n||void 0===n)return new a(function(t,n){n(e)});o(function(){n.call(r,e)})}}},a.prototype.nodeify=function(e,t){if("function"!=typeof e)return this;this.then(function(n){o(function(){e.call(t,null,n)})},function(n){o(function(){e.call(t,n)})})}},function(e,t,n){"use strict";var r=n(10);e.exports=r,r.enableSynchronous=function(){r.prototype.isPending=function(){return 0==this.getState()},r.prototype.isFulfilled=function(){return 1==this.getState()},r.prototype.isRejected=function(){return 2==this.getState()},r.prototype.getValue=function(){if(3===this._65)return this._55.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._55},r.prototype.getReason=function(){if(3===this._65)return this._55.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._55},r.prototype.getState=function(){return 3===this._65?this._55.getState():-1===this._65||-2===this._65?0:this._65}},r.disableSynchronous=function(){r.prototype.isPending=void 0,r.prototype.isFulfilled=void 0,r.prototype.isRejected=void 0,r.prototype.getValue=void 0,r.prototype.getReason=void 0,r.prototype.getState=void 0}},function(e,t,n){var r=n(21),i=n(15),a=n(33),o={requestTokenSMP:function(e){if(!e)throw new Error("TokenService requires some parameters");if(!e.authKey)throw new Error("TokenService requires a 'key' parameters");return new a(function(t,n){i.read({uri:r.tokenServiceURL,method:"post",responseType:"json",useXDR:!0,headers:{"Content-Type":"application/json",Accept:"application/json","api-token":e.authKey}}).then(function(e){t("?hdnts="+e.token)}).catch(function(e){throw new Error("Error reading embed data.")})})}};e.exports=o},function(e,t){var n={encode:function(e){var t,n,r,i,a,o,s,l,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u=0,c=0,f="",h=[];if(!e)return e;e=unescape(encodeURIComponent(e));do{t=e.charCodeAt(u++),n=e.charCodeAt(u++),r=e.charCodeAt(u++),l=t<<16|n<<8|r,i=l>>18&63,a=l>>12&63,o=l>>6&63,s=63&l,h[c++]=d.charAt(i)+d.charAt(a)+d.charAt(o)+d.charAt(s)}while(u<e.length);f=h.join("");var p=e.length%3;return(p?f.slice(0,p-3):f)+"===".slice(p||3)}};e.exports=n},function(e,t,n){var r=n(114);n(140);window.meride=r},function(e,t,n){var r=n(115),i=n(35),a=n(34),o=window.meride||{};o.player={},o.player.Player=r,o.player.PlayerComponents=i,o.player.Skin=a,e.exports=o},function(e,t,n){function r(e){if(!e)throw new Error("No parameter to instanciate Player.");if(!e.src)throw new Error("No src parameter passed to Player.");if(!e.container)throw new Error("No container of the video element (container) parameter passed to Player.");if(e.container&&null===e.container.className.match(/meride-video-container/))throw new Error("Invalid Meride video container.");if(!1!==e.decodeURL){var t=function(e){return e!==decodeURIComponent(e||"")}(e.src);!0===t&&(e.src=decodeURIComponent(e.src))}var n=this;n.container=e.container,n.hls=null,n.dash=null,n.video=document.createElement("video");var r=!1!==e.loadDefaultFonts,p={loadDefaultFonts:r};e.defaultColor&&(p.defaultColor=e.defaultColor);var v=e.skin||new i(p),m=v.components,g=function(){try{return window.MediaSource&&"function"==typeof window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')}catch(e){return!1}}(),y=!(!0!==g||!e.src.match(/\.m3u8/)),E=null!==e.src.match(/\.mpd/),b=e.hlsOpts||{},T=e.dash||{},w=e.controls||[],S=!1!==e.showPauseBtnOnMouseOver,A=null,L=new s,k=function(){var e=n.container.querySelector("video");null!==e&&(D(e),C(),_()),n.container.innerHTML=""},C=function(){if(null!==n.dash)try{n.dash.destroy()}catch(e){}},_=function(e){if(null!==n.hls)try{"function"==typeof e&&n.hls.on(f.Events.MEDIA_DETACHED,e),n.hls.stopLoad(),n.hls.destroy()}catch(e){}},D=function(e){e.pause(),e.src="",e.load(),e.remove()};n.on=function(e,t){return L.on(e,t)},n.off=function(e,t){return L.off(e,t)};var R=function(){L.emit("meride.first_play")},I=function(){L.emit("meride.enterfullscreen")},x=function(){L.emit("meride.exitfullscreen")},O=function(){L.emit("meride.seek_start")},M=function(){L.emit("meride.loadedmetadata")};n.watermark=null,n.enableSeek=function(){A.disableSeek(),A.enableSeek()},n.disableSeek=function(){A.disableSeek()},n.toggleControlBar=function(){"none"===m.controlBar.style.display?(m.controlBar.style.display="block",L.emit("meride.controlbarShown")):(m.controlBar.style.display="none",L.emit("meride.controlbarHidden"))},n.disableControlBar=function(){m.controlBarContainer.style.visibility="hidden",m.controlBar.style.visibility="hidden",L.emit("meride.controlbarDisabled")},n.enableControlBar=function(){m.controlBarContainer.style.visibility="visible",m.controlBar.style.visibility="visible",L.emit("meride.controlbarDisabled")},n.reload=function(t){_(),C(),t?(y=!(!0!==g||!t.match(/\.m3u8/)),E=null!==t.match(/\.mpd/),e.src=t,y?(n.container.style.visibility="hidden",j({src:t}),n.container.style.visibility="visible"):E?F({src:t}):n.video.setAttribute("src",t)):y?(n.container.style.visibility="hidden",j({src:e.src}),n.container.style.visibility="visible"):E?F({src:e.src,settings:T.settings||{},drm:T.drm}):n.video.setAttribute("src",t)},n.load=function(){if(y){var e=function(t){n.hls.off(f.Events.MEDIA_ATTACHED,e),n.hls.startLoad()},t=function(r){n.hls.off(f.Events.MEDIA_DETACHED,t),n.hls.on(f.Events.MEDIA_ATTACHED,e),n.hls.attachMedia(n.video),n.hls.startLoad()};n.hls.on(f.Events.MEDIA_DETACHED,t),n.hls.detachMedia()}else n.video.load()},n.stopLoad=function(){y?n.hls.stopLoad():(n.video.src="",n.video.load(),n.video.remove())};var B=function(){A.destroy(),A.off("firstPlaying",R),A.off("meride.enterfullscreen",I),A.off("meride.exitfullscreen",x),A.off("meride.seek_start",O),n.video.removeEventListener("loadedmetadata",M),null!==n.hls&&_(),null!==n.dash?C():D(existingVideoChild);try{var e=n.container.cloneNode(!0);n.container.parentNode.replaceChild(e,n.container),n.container.innerHTML=""}catch(e){}};n.destroy=B;var N=function(e){-1!==e.arguments[0]?(n.dash.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!1}}}}),n.dash.setQualityFor("video",e.arguments[0])):n.dash.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:!0}}}})},P=function(e){L.emit("meride.manifest_parsed");var t=[];A.on("meride.qualityChanged",N),t=n.dash.getBitrateInfoListFor("video"),A.qualityLevels(t),A.levelChanged(t[n.dash.getQualityFor("video")]),n.dash.on("qualityChangeRequested",function(e){A.levelChanged(t[e.newQuality])})},F=function(e){n.dash=dashjs.MediaPlayer().create(),e.drm&&n.dash.setProtectionData(e.drm),n.dash.initialize(n.video,e.src,!0),n.dash.updateSettings(e.settings);try{n.video.removeEventListener(P)}catch(e){}try{A.off("meride.qualityChanged",N)}catch(e){}n.video.addEventListener("loadedmetadata",P,!1)},U=function(){var e=n.video.play();e&&e.catch(function(e){})},j=function(t){if(b.fairplayLicenseUrl&&window.WebKitMediaKeys&&window.WebKitMediaKeys.isTypeSupported("com.apple.fps.1_0","video/mp4")){new h({fairplayLicenseUrl:b.fairplayLicenseUrl,fairplaySPCUrl:b.fairplaySPCUrl,src:e.src}).loadCertificate()}else{null!==n.hls&&(n.hls.stopLoad(),n.video.src="",n.hls.detachMedia(),n.hls.destroy());var r=function(){n.hls.off(f.Events.MEDIA_ATTACHED,r),n.hls.loadSource(t.src),n.hls.on(f.Events.LEVEL_PTS_UPDATED,function(e,t){A.levelChanged(t.level)}),n.hls.on(f.Events.AUDIO_TRACKS_UPDATED,function(e,t){A.audioTracks(t.audioTracks)}),n.hls.on(f.Events.AUDIO_TRACK_LOADED,function(e,t){A.audioTrackChanged(t)}),n.hls.on(f.Events.SUBTITLE_TRACKS_UPDATED,function(e,t){A.subtitleTracks(t.subtitleTracks)}),n.hls.on(f.Events.SUBTITLE_TRACK_LOADED,function(e,t){A.subtitleTrackChanged(t)}),n.hls.on(f.Events.MANIFEST_PARSED,function(t,r){n.hls.autoLevelCapping>0&&n.hls.levels.length-1<=n.hls.autoLevelCapping&&(n.hls.autoLevelCapping=n.hls.levels.length-1),L.emit("meride.manifest_parsed"),void 0!==b.loadLevel&&!1!==b.autoStartLoad&&n.hls.startLoad(),!0===e.isLive&&!0===e.autoPlay&&U(),A.on("meride.qualityChanged",function(e){n.hls.currentLevel=e.arguments[0]}),A.on("meride.audioTrackChanged",function(e){n.hls.audioTrack=parseInt(e.arguments[0],10)}),A.on("meride.subtitleTrackChanged",function(e){n.hls.subtitleTrack=e.arguments[0]}),void 0!==b.autoLevelCapping&&b.autoLevelCapping>-1?n.hls.autoLevelCapping=b.autoLevelCapping:n.hls.autoLevelCapping=-1;var i=n.hls.levels.filter(function(e,t){return-1===n.hls.autoLevelCapping||t<n.hls.levels.length&&t<=n.hls.autoLevelCapping});A.qualityLevels(i)})};void 0!==b.loadLevel&&(b.autoStartLoad=!0),n.hls=new f(b),A.setHls(n.hls),void 0!==b.loadLevel&&(n.hls.loadLevel=b.loadLevel),n.hls.on(f.Events.ERROR,function(e,t){if(L.emit("meride.hlsobject_error",e,t),t.fatal)switch(t.type){case f.ErrorTypes.NETWORK_ERROR:n.hls.startLoad();break;case f.ErrorTypes.MEDIA_ERROR:n.hls.swapAudioCodec(),n.hls.recoverMediaError();break;default:n.hls.destroy()}else switch(t.type){case f.ErrorTypes.MEDIA_ERR_DECODE:n.hls.swapAudioCodec(),n.hls.recoverMediaError()}}),n.video.addEventListener("error",function(e){if("error"===e.type){var t=e.currentTarget.error;switch(t.code){case t.MEDIA_ERR_DECODE:n.hls.swapAudioCodec(),n.hls.recoverMediaError()}}}),n.hls.attachMedia(n.video),n.hls.on(f.Events.MEDIA_ATTACHED,r),L.emit("meride.hlsobject_ready")}};n.enableKeyboard=function(e){return A.enableKeyboard(e)},function(){if(k(),n.container.setAttribute("data-plr-rnd-id",parseInt(9999*Math.random(),10)),n.video.setAttribute("width",e.width||540),n.video.setAttribute("height",e.height||302),n.video.setAttribute("playsinline",""),n.video.setAttribute("webkit-playsinline",""),n.video.style.width=(e.width||540)+"px",n.video.style.height=(e.height||302)+"px",n.container.style.width=(e.width||540)+"px",n.container.style.height=(e.height||302)+"px",e.autoPlay&&!0===e.autoPlay&&(n.video.setAttribute("autoplay","true"),e.preload&&"none"===e.preload&&(e.preload="auto",b.autoStartLoad=!0)),e.loop&&!0===e.loop&&n.video.setAttribute("loop","true"),void 0===b.maxBufferLength&&(b.maxBufferLength=8),void 0===b.maxMaxBufferLength&&(b.maxMaxBufferLength=8),void 0===b.capLevelToPlayerSize&&(b.capLevelToPlayerSize=!1),A=new a({video:n.video,controls:w,clickableVideo:!0===e.clickableVideo,dblClickFullscreen:!1!==e.dblClickFullscreen,skin:v,container:n.container,showPauseBtnOnMouseOver:S,cbAutoHide:!1!==e.cbAutoHide,showVolumeBar:!1!==e.showVolumeBar,showQualitySelection:!1!==e.showQualitySelection,showAudioTracksSelection:!1!==e.showAudioTracksSelection,showSubtitleTracksSelection:!1!==e.showSubtitleTracksSelection,volume:e.volume,muted:e.muted,canPlayHLS:y,canPlayDASH:E,enableFullscreen:!1!==e.enableFullscreen,is360:!0===e.is360,config360:e.config360||{},preload:e.preload||"metadata",isLive:!0===e.isLive,enableSeek:!1!==e.enableSeek,pip:!1!==e.pip}),A.on("firstPlaying",R),A.on("meride.enterfullscreen",I),A.on("meride.exitfullscreen",x),A.on("meride.seek_start",O),n.video.setAttribute("src",e.src),n.video.addEventListener("loadedmetadata",M,!1),e.tracks){new o({tracks:e.tracks,video:n.video}).render();new l({tracks:e.tracks,container:v.components.settings,video:n.video})}if(e.watermark){e.watermark.container=n.container,e.watermark.interactionManager=A;var t=new d(e.watermark);n.watermark=t,t.render()}if(navigator.userAgent.match(/(iPod|iPhone|iPad)/)){var r=document.createElement("style");r.type="text/css",r.innerHTML="video { -webkit-transform-style: preserve-3d; } video::-webkit-media-controls-start-playback-button { display: none; }",document.body.appendChild(r)}if(!0===y)n.container.style.visibility="hidden",j({src:e.src}),n.container.style.visibility="visible";else if(!0===E)n.container.style.visibility="hidden",T.scriptURL||(T.scriptURL="https://data.meride.tv/scripts/dash/v4.2.0/dash.all.min.js"),u.include(T.scriptURL,function(){F({src:e.src,settings:T.settings||{},drm:T.drm}),n.container.style.visibility="visible"});else if(e.src.match(/\.m3u8/)&&b.fairplayLicenseUrl&&window.WebKitMediaKeys&&window.WebKitMediaKeys.isTypeSupported("com.apple.fps.1_0","video/mp4")){var i=new h({fairplayLicenseUrl:b.fairplayLicenseUrl,fairplaySPCUrl:b.fairplaySPCUrl,src:e.src});i.loadCertificate()}else n.video.src=e.src;if(null!==v.css){n.container.style.visibility="hidden";var s=function(){v.render(n.container),n.container.style.visibility="visible"};c.include(v.css,s,s)}else v.render(n.container)}()}var i=n(34),a=n(121),o=n(133),s=n(0),l=n(134),d=n(136),u=n(4),c=n(137),f=n(138),h=n(139);window.Hls=f,r.prototype.playVideo=function(){var e=this.video.play();e&&e.catch(function(e){})},r.prototype.play=function(){this.playVideo()},r.prototype.pause=function(){this.video.pause()},r.prototype.rewind=function(e){try{this.video.currentTime=0,!0===e&&this.video.play()}catch(e){}},r.prototype.resize=function(e){this.container.style.width=(e.width||this.container.offsetWidth)+"px",this.container.style.height=(e.height||this.container.offsetHeight)+"px",this.video.style.width=(e.width||this.video.offsetWidth)+"px",this.video.style.height=(e.height||this.video.offsetHeight)+"px",this.video.setAttribute("width",e.width||this.video.offsetWidth),this.video.setAttribute("height",e.height||this.video.offsetHeight)},e.exports=r},function(e,t,n){var r=n(117),i=function(){var e=navigator.language||navigator.browserLanguage,t=e.substr(0,2);return{__:function(e,n){var i="";if(r[e]&&(i=r[e][t]||r[e].en||""),n&&n.length>0&&""!==i){var a=1,o=n.length,s=new RegExp("{param}","g");for(a;a<=o;a++)a>1&&(s=new RegExp("{param"+a+"}","g")),n[a-1]=""+n[a-1],i=i.replace(s,n[a-1].replace(/_/g," "))}return i}}}();e.exports=i.__},function(e,t){var n={play:{it:"Riproduci",en:"Play",zh:"播放",ja:"再生",ru:"Воспроизвести",fr:"Lecture",de:"Wiedergabe",es:"Reproducir"},pause:{it:"Pausa",en:"Pause",zh:"暂停",ja:"一時停止",ru:"Пауза",fr:"Pause",de:"Pause",es:"Pausa"},fullscreen:{it:"Schermo intero",en:"Fullscreen",zh:"全屏",ja:"フルスクリーンフルスクリーン",ru:"ПРЯМОЙ ЭФИР",fr:"Plein écran",de:"Vollbild",es:"Pantalla completa"},minimize:{it:"Chiudi Schermo intero",en:"Exit Fullscreen",zh:"退出全屏",ja:"フルスクリーン以外",ru:"Неполноэкранный режим",fr:"Fenêtré",de:"Vollbildmodus beenden",es:"Pantalla no completa"},settings:{it:"Impostazioni",en:"Settings",zh:"设置",ja:"設定",ru:"Настройки",fr:"Paramètres",de:"Einstellungen",es:"Ajustes"},volumeOn:{it:"Attivare l’audio",en:"Unmute",zh:"开启音效",ja:"サウンドをオン",ru:"Со звуком",fr:"Activer le son",de:"Ton einschalten",es:"Activar el sonido"},volumeOn1_3:{it:"Livello del volume 33%",en:"Volume Level 33%",zh:"音量33%",ja:"ボリュームレベル33%",ru:"Уровень громкости 33%",fr:"Niveau de volume 33%",de:"Lautstärke 33%",es:"Nivel de volumen 33%"},volumeOn2_3:{it:"Livello del volume 66%",en:"Volume Level 66%",zh:"音量66%",ja:"ボリュームレベル66%",ru:"Уровень громкости 66%",fr:"Niveau de volume 66%",de:"Lautstärke 66%",es:"Nivel de volumen 66%"},volumeOff:{it:"Disattivare l’audio",en:"Mute",zh:"静音",ja:"ミュート",ru:"Без звука",fr:"Mettre en sourdine",de:"Stumm schalten",es:"Desactivar el sonido"},quality:{it:"Qualità",en:"Quality",zh:"质量",ja:"品質",ru:"Качество",fr:"Qualité",de:"Qualität",es:"Calidad"},qualityHD:{it:"Qualità HD",en:"HD Quality",zh:"高清质量",ja:"HD品質",ru:"HD качество",fr:"Qualité HD",de:"HD-Qualität",es:"Calidad HD"},loading:{it:"Caricamento",en:"Loading",zh:"加载中",ja:"読み込み中",ru:"Загрузка",fr:"Chargement",de:"Laden",es:"Cargando"},pipModeOn:{it:"Picture-in-Picture",en:"Picture-in-Picture",zh:"画中画",ja:"ピクチャーインピクチャー",ru:"Картинка в картинке",fr:"Image dans l'image",de:"Bild-im-Bild-Modus",es:"Salir de imagen sobre imagen"},pipModeOff:{it:"Esci dalla modalità Picture-in-Picture",en:"Exit Picture-in-Picture",zh:"退出画中画",ja:"ピクチャーインピクチャー機能の終了",ru:"Закрыть картинку в картинке",fr:"Quitter le mode image dans l'image",de:"Bild-im-Bild-Modus beenden",es:"Imagen sobre imagen"},live:{it:"LIVE",en:"LIVE",zh:"直播",ja:"ライブ",ru:"ПРЯМОЙ ЭФИР",fr:"En direct",de:"Live",es:"En Vivo"},close:{it:"Chiudi",en:"Close",zh:"关闭",ja:"閉じる",ru:"Закрыть",fr:"Fermer",de:"Schließen",es:"Cerrar"},vr:{it:"VR",en:"VR",zh:"VR",ja:"VR",ru:"VR",fr:"VR",de:"VR",es:"VR"},audioTracks:{it:"Traccia audio",en:"Audio Track",zh:"音频轨道",ja:"オーディオトラック",ru:"Аудиодорожка",fr:"Piste audio",de:"Tonspur",es:"Pista de audio"},subtitleTracks:{it:"Sottotitoli",en:"Subtitles",zh:"字幕",ja:"サブタイトル",ru:"Субтитры",fr:"Sous-titres",de:"Untertitel",es:"Subtítulos"}};e.exports=n},function(e,t,n){var r=n(119);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(38)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(37)(!1),t.push([e.i,"@import url(https://fonts.googleapis.com/css?family=Open+Sans:700);",""]),t.push([e.i,"",""])},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(i))return e;var a;return a=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(a)+")"})}},function(e,t,n){function r(e){if(!e.video)throw new Error("InteractionManager needs a video element");if(!e.skin)throw new Error("InteractionManager needs a Skin");if(!e.container)throw new Error("InteractionManager needs a video container element");var t,n=e.video,r=e.container,E=e.skin,b=E.components,T=new s,w=!1,S=!0,A=!1!==e.enableFullscreen,L=!1!==e.cbAutoHide,k=!1!==e.showVolumeBar,C=!1!==e.showQualitySelection,_=!1!==e.showAudioTracksSelection,D=!1!==e.showSubtitleTracksSelection,R=void 0!==e.volume?e.volume:.8,I=!1!==e.showPauseBtnOnMouseOver,x=!0===e.clickableVideo,O=!1!==e.dblClickFullscreen,M=a.addClickTouch,B=a.removeClickTouch,N=!1,P=!1,F=!0===e.is360,U=!0===e.isLive,j=!0===e.canPlayHLS,V=!0===e.canPlayDASH,H=null,q=e.preload||"metadata";this.on=function(e,t){return T.on(e,t)},this.off=function(e,t){return T.off(e,t)};var G=function(){b.progressBar.style.display="block",M(r,re)};T.on("firstPlaying",G),u.applyStyles([b.progressBar,b.topBar],{display:"none"}),u.applyStyles(b.liveBtnContainer,{display:"none"}),!0===U&&(u.applyStyles(b.controlBarCenter,{visibility:"hidden"}),u.applyStyles([b.durationContainer,b.timeUpdateContainer],{display:"none"}),u.applyStyles(b.liveBtnContainer,{display:"table-cell"}));var K,W,z=function(t){n.removeEventListener("loadedmetadata",z),N=!0,!1!==e.enableSeek?(xe(),Re()):(Oe(),Ie()),n.offsetWidth<=380&&(b.playBtn.className=b.playBtn.className+" boxcenterBtnSmall",b.pauseBtn.className=b.pauseBtn.className+" boxcenterBtnSmall")},Y=function(){P||N||(P=!0,null!==H?H.startLoad():n.load()),Ve(),u.applyStyles([b.playBtn,b.playSmallBtn],{display:"none"}),u.applyStyles([b.pauseBtn,b.pauseSmallBtn],{display:"inline-block"})},X=function(e){if(!0===L&&!n.paused&&!w){var t=function(){b.controlBarContainer.style.display="none",T.emit("meride.controlbarHidden")};e&&!1===e.timeout?t():setTimeout(function(){t()},1e3)}},Q=function(){b.controlBarContainer.style.display="block",T.emit("meride.controlbarShown")},J=function(e){Y(),e.preventDefault()},$=function(e){n.pause(),e.preventDefault()},Z=null,ee=function(){Z=setTimeout(function(){n.paused?ne():(X({timeout:!1}),u.applyStyles([b.playBtn,b.pauseBtn],{display:"none"}))},2e3)},te=function(e){u.applyStyles([b.playBtn,b.playSmallBtn,b.loadingSpinner],{display:"none"}),u.applyStyles([b.pauseBtn,b.pauseSmallBtn],{display:"inline-block"}),ee()},ne=function(e){clearTimeout(Z),Q(),u.applyStyles([b.pauseBtn,b.pauseSmallBtn],{display:"none"}),u.applyStyles([b.playBtn,b.playSmallBtn],{display:"inline-block"})},re=function(e){n.paused||F||(u.applyStyles([b.pauseBtn,b.controlBarContainer],{display:"block"}),clearTimeout(Z),ee()),e.preventDefault()},ie=function(e){S&&(S=!1,T.emit("firstPlaying")),b.loadingSpinner.style.display="none"},ae=function(e){b.progressBarSpinner.style.width=100*n.currentTime/n.duration+"%",b.seekBtn.style.left=b.progressBarSpinner.style.width,b.timeUpdate.innerHTML=o.formatTime(n.currentTime.toFixed(0))},oe=function(){try{W=n.buffered}catch(e){W=[]}W.length>0?(b.bufferContainer.style.width=100*W.end(0)/n.duration+"%",W.end(0)===n.duration&&clearInterval(K)):clearInterval(K)},se=function(e){b.duration.innerHTML=o.formatTime(n.duration.toFixed(0)),K=setInterval(oe,1e3)},le=function(){b.loadingSpinner.style.display="inline-block",u.applyStyles([b.playBtn,b.playSmallBtn,b.pauseBtn,b.pauseSmallBtn],{display:"none"})},de=function(){b.loadingSpinner.style.display="none",n.paused?(u.applyStyles([b.playBtn,b.playSmallBtn],{display:"inline-block"}),u.applyStyles([b.pauseBtn,b.pauseSmallBtn],{display:"none"})):(u.applyStyles([b.pauseBtn,b.pauseSmallBtn],{display:"inline-block"}),u.applyStyles([b.playBtn,b.playSmallBtn],{display:"none"}))},ue=function(){b.loadingSpinner.style.display="none"},ce=0,fe=0,he=0,pe=function(e){"none"===b.settings.style.display||""===b.settings.style.display?b.settings.style.display="block":b.settings.style.display="none",e.preventDefault()},ve=function(e){b.settings.style.display="none",e.preventDefault()},me=!n.paused,ge=function(e){me=!n.paused,n.pause(),T.emit("meride.seek_start")},ye=function(e){if(!isNaN(n.duration))try{be=b.seekBtn.getClientRects()[0],Te=b.progressBar.getClientRects()[0],ce=b.seekBtn.offsetLeft,ce<b.seekBtn.offsetWidth/2*-1?n.currentTime=0:(he=(be.left+b.seekBtn.offsetWidth-Te.left-b.seekBtn.offsetWidth/2)/Te.width*n.duration,n.currentTime=isFinite(he)?he:n.currentTime)}catch(e){ce=b.seekBtn.offsetLeft,ce<0?n.currentTime=0:(fe=ce/(b.progressBar.offsetWidth-b.seekBtn.offsetWidth/2),he=parseFloat(n.duration*fe).toFixed(1),n.currentTime=isFinite(he)?he:n.currentTime)}},Ee=function(e){me&&Ve(),n.paused||X()},be=[],Te=[],we=function(e){if(!isNaN(n.duration))try{be=b.seekBtn.getClientRects()[0],Te=b.progressBar.getClientRects()[0],ce=b.seekBtn.offsetLeft,ce<b.seekBtn.offsetWidth/2*-1?n.currentTime=0:(he=(be.left+b.seekBtn.offsetWidth-Te.left-b.seekBtn.offsetWidth/2)/Te.width*n.duration,n.currentTime=isFinite(he)?he:n.currentTime)}catch(e){ce=b.seekBtn.offsetLeft,ce<0?n.currentTime=0:(fe=ce/(b.progressBar.offsetWidth-b.seekBtn.offsetWidth/2),he=parseFloat(n.duration*fe).toFixed(1),n.currentTime=isFinite(he)?he:n.currentTime)}},Se=function(e){w=!1,me&&Ve(),n.paused||X(),b.seekBtn.className="md-seekBtn"},Ae=function(e){w=!0,me=!n.paused,n.pause(),T.emit("meride.seek_start"),b.seekBtn.className="md-seekBtn moving"},Le=function(e){var t=function(){var t=b.progressBar.getBoundingClientRect(),r=e.pageX-t.left;r<0&&(r=0),r>t.width&&(r=t.width),this.style.left=r+"px",r>this.offsetWidth/2&&r<b.progressBar.offsetWidth-this.offsetWidth/2?this.style.left=r-this.offsetWidth/2+"px":(r<=b.progressBar.offsetLeft+this.offsetWidth/2&&(this.style.left="0px"),r>=b.progressBar.offsetWidth-this.offsetWidth/2&&(this.style.left=b.progressBar.offsetWidth-this.offsetWidth+"px")),this.innerText=o.formatTime(Math.floor(r*n.duration/b.progressBar.offsetWidth))};isNaN(n.duration)||e.target===b.timeTooltip||(b.timeTooltip.style.visibility="visible",t.apply(b.timeTooltip))},ke=function(e){b.timeTooltip.style.visibility="hidden"},Ce=function(e){var t=b.progressBar.offsetWidth,r=b.progressBar.getBoundingClientRect(),i=0,a=0;i=window.TouchEvent&&e instanceof TouchEvent&&e.changedTouches.length>0?e.changedTouches[0].pageX-r.left:e.pageX-r.left,a=i/t;try{n.currentTime=a*n.duration}catch(e){}},_e=function(){},De=function(){return n.offsetWidth>380?"md-progressBar":"md-progressBar progressBarTop"},Re=function(){b.progressBar.className=De(),_e=M(b.progressBar,Ce)},Ie=function(){b.progressBar.className=De()+" disabled",B(b.progressBar,_e)},xe=function(){b.seekBtn.style.display="inline-block",void 0===t&&(t=new d({handlerEl:b.seekBtn,barEl:b.progressBar})),t.on("meride.slider_mousemove",ye),t.on("meride.slider_mouseup",Ee),t.on("meride.slider_mousedown",ge),t.on("meride.slider_movetouch",we),t.on("meride.slider_movetouch_notreqanim",we),t.on("meride.slider_touchend",Se),t.on("meride.slider_touchstart",Ae);var e=0;try{e=n.currentTime/n.duration}catch(e){}t.init({level:e})},Oe=function(){b.seekBtn.style.display="none",void 0!==t&&(t.off("meride.slider_mousemove",ye),t.off("meride.slider_mouseup",Ee),t.off("meride.slider_mousedown",ge),t.off("meride.slider_movetouch",we),t.off("meride.slider_movetouch_notreqanim",we),t.off("meride.slider_touchend",Se),t.off("meride.slider_touchstart",Ae),T.off("firstPlaying",G),t.end())};b.pauseBtn.style.display="none";var Me=-1,Be=-1,Ne=function(e){Q(),i.isFullScreen()&&(r.style.cursor="default"),n.paused||!0!==I||(b.pauseBtn.style.display="inline-block"),setTimeout(function(){e.clientX===Me&&e.clientY===Be&&(X(),i.isFullScreen()&&(r.style.cursor="none"),n.paused||(b.pauseBtn.style.display="none"))},2e3),Me=e.clientX,Be=e.clientY};r.addEventListener("mousemove",Ne);var Pe=function(e){n.duration&&n.duration!==1/0&&(n.currentTime=n.duration-1),e.preventDefault()};if(M(b.playBtn,J),M(b.pauseBtn,$),M(b.playSmallBtn,J),M(b.pauseSmallBtn,$),M(b.settingBtn,pe),M(b.closeSettingsBtn,ve),M(b.liveBtn,Pe),!1===A)b.fullBtn.style.display="none";else{new c({skinComponents:b,video:n,container:r,interactionManagerDispatcher:T,dblClickFullscreen:O}).init()}if(n.addEventListener("loadedmetadata",z,!1),n.addEventListener("timeupdate",ae,!1),n.addEventListener("durationchange",se,!1),n.addEventListener("playing",ie,!1),n.addEventListener("play",te,!1),n.addEventListener("pause",ne,!1),n.addEventListener("waiting",le,!1),n.addEventListener("canplay",de,!1),n.addEventListener("seeked",ue,!1),n.setAttribute("src",e.src),n.setAttribute("preload",q),e.poster&&n.setAttribute("poster",e.poster),!0===F){var Fe=e.config360||{};new g({container:r,video:n,driver:"AFrame",scriptURL:Fe.scriptURL,vrModeUI:Fe.vrModeUI,embedded:Fe.embedded,skinComponents:b,interactionManagerDispatcher:T}).setUp().init(),r.addEventListener("touchstart",Ne)}else u.applyStyles([b.vrBtnContainer],{display:"none"}),r.appendChild(n);if(u.isPiPSupported(n)&&!0===e.pip){new y({video:n,skinComponents:b,interactionManagerDispatcher:T}).init()}this.enableSeek=function(){Oe(),Ie(),xe(),Re()},this.disableSeek=function(){Oe(),Ie()},this.toggleControlBar=function(){"none"===b.controlBarContainer.style.display?(b.controlBarContainer.style.display="block",T.emit("meride.controlbarShown")):(b.controlBarContainer.style.display="none",T.emit("meride.controlbarHidden"))},this.showControlBar=Q(),this.hideControlBar=X();var Ue=function(e){H=e};this.setHls=Ue;var je=function(e){for(;e.hasChildNodes();)He(e.firstChild)},Ve=function(){var e=n.play();e&&e.catch(function(e){})},He=function(e){for(;e.hasChildNodes();)He(e.firstChild);var t=e.cloneNode(!0);e.parentNode.replaceChild(t,e),t.parentNode.removeChild(t)};if(this.destroy=function(){r&&(r.removeEventListener("touchstart",Ne),r.removeEventListener("mousemove",Ne),je(r)),b.controlBarCenter&&(b.controlBarCenter.removeEventListener("mousemove",Le),b.controlBarCenter.removeEventListener("mouseout",ke)),n&&(n.removeEventListener("loadedmetadata",z),n.removeEventListener("timeupdate",ae),n.removeEventListener("durationchange",se),n.removeEventListener("playing",ie),n.removeEventListener("play",te),n.removeEventListener("pause",ne),n.removeEventListener("waiting",le),n.removeEventListener("canplay",de),n.removeEventListener("seeked",ue)),t&&(t.off("meride.slider_mousemove",ye),t.off("meride.slider_mouseup",Ee),t.off("meride.slider_mousedown",ge),t.off("meride.slider_movetouch",we),t.off("meride.slider_movetouch_notreqanim",we),t.off("meride.slider_touchend",Se),t.off("meride.slider_touchstart",Ae))},u.applyStyles([b.volumeOnBtn,b.volumeOn1_3Btn,b.volumeOn2_3Btn,b.volumeOffBtn],{display:"none"}),!0===k){new f({skinComponents:b,video:n,container:r,interactionManagerDispatcher:T,volume:R,muted:e.muted}).init()}if(b.controlBarCenter.addEventListener("mousemove",Le,!1),b.controlBarCenter.addEventListener("mouseout",ke,!1),this.levelChanged=function(){},this.qualityLevels=function(){},u.applyStyles([b.qualityContainer,b.qualityBtn,b.qualityHDBtn],{display:"none"}),!0===C&&!0===j){var qe=new h({skinComponents:b,video:n,container:r,interactionManagerDispatcher:T});this.levelChanged=function(e){T.emit("meride.qualityLevelChanged",e),qe.levelChanged(e)},this.qualityLevels=function(e){T.emit("meride.qualityLevelsReady",e),qe.qualityLevels(e)},qe.init()}else if(!0===C&&!0===V){var Ge=new p({skinComponents:b,video:n,container:r,interactionManagerDispatcher:T});this.levelChanged=function(e){T.emit("meride.qualityLevelChanged",e),Ge.levelChanged(e)},this.qualityLevels=function(e){T.emit("meride.qualityLevelsReady",e),Ge.qualityLevels(e)},Ge.init()}if(this.audioTrackChanged=function(){},this.audioTracks=function(){},u.applyStyles([b.audioTracksContainer],{display:"none"}),!0===_&&!V){var Ke=new v({skinComponents:b,video:n,container:r,interactionManagerDispatcher:T});this.audioTrackChanged=Ke.audioTrackChanged,this.audioTracks=Ke.audioTracks,Ke.init()}if(this.subtitleTrackChanged=function(){},this.subtitleTracks=function(){},u.applyStyles([b.subtitleTracksContainer],{display:"none"}),!0===D){var We=new m({skinComponents:b,video:n,container:r,interactionManagerDispatcher:T});this.subtitleTrackChanged=We.subtitleTrackChanged,this.subtitleTracks=We.subtitleTracks,We.init()}if(!0===x){M(n,function(e){return n.paused?Ve():n.pause(),!1}),n.className+=" clickable-video"}var ze=null;e.controls&&-1!==e.controls.indexOf("keyboard")&&(ze=new l({player:n,container:r})),this.enableKeyboard=function(e){ze.enabled=e},"none"===q||!1===j?ne():le()}var i=n(12),a=n(2),o=n(122),s=n(0),l=n(123),d=n(39),u=n(3),c=n(124),f=n(125),h=n(126),p=n(127),v=n(128),m=n(129),g=n(130),y=n(132);e.exports=r},function(e,t){var n={formatTime:function(e){var t=parseInt(e,10),n=Math.floor(t/3600),r=Math.floor((t-3600*n)/60),i=t-3600*n-60*r;return n<10&&(n="0"+n),r<10&&(r="0"+r),i<10&&(i="0"+i),isNaN(n)||isNaN(r)||isNaN(i)?"":"00"!==n?n+":"+r+":"+i:r+":"+i}};e.exports=n},function(e,t,n){var r=n(12),i=function(e){if(!e)throw new Error("No parameter passed to Keyboard. 'player' and 'container' params required");if(!e.player)throw new Error("No player passed to Keyboard. 'player' param required");if(!e.container)throw new Error("No player passed to Keyboard. 'container' param required");var t={},n=e.player,i=e.container,a=-1,o=function(e){return e<=0?0:e>=1?1:e},s=function(e){return e<=0?0:(e>=n.duration&&n.duration,e)},l=r.getFullScreenAPI().api;t.enabled=!0;var d=function(){if(r.isFullScreen())l.exitFullscreen(document);else try{l.requestFullscreen(i)}catch(e){l.requestFullscreen(video)}},u=function(){!0===n.muted&&(n.volume=.6),n.muted=!n.muted},c=function(e){if(!1!==t.enabled&&a===i.getAttribute("data-plr-rnd-id")){e.preventDefault();var r=document.activeElement.tagName.toUpperCase(),l=document.activeElement.getAttribute("contenteditable");if("INPUT"!==r&&"TEXTAREA"!==r&&""!==l&&"true"!==l){var c=e||window.event;switch(c.preventDefault(),c.keyCode){case 32:n.paused?n.play():n.pause();break;case 37:n.currentTime=s(n.currentTime-5);break;case 39:n.currentTime=s(n.currentTime+5);break;case 38:n.volume=o(n.volume+.1);break;case 40:n.volume=o(n.volume-.1);break;case 70:d();break;case 77:u()}}}},f=function(e){var t=e.path||e.composedPath&&e.composedPath();if(t){return t.filter(function(e){return"meride-video-container"===e.className})}try{var n=e.target.parentNode;if(-1!==n.className.search("meride-video-container"))return[n]}catch(e){}return[]};return document.body.addEventListener("click",function(e){var t=f(e);t.length>0?(a=t[0].getAttribute("data-plr-rnd-id"),document.documentElement.addEventListener("keydown",c)):document.documentElement.removeEventListener("keydown",c)},!0),t};e.exports=i},function(e,t,n){var r=n(12),i=n(2),a=n(3),o=function(e){if(!e)throw new Error("No options interactions/Fullscreen");if(!e.skinComponents)throw new Error("No skinComponents interactions/Fullscreen");if(!e.video)throw new Error("No video interactions/Fullscreen");if(!e.container)throw new Error("No container interactions/Fullscreen");if(!e.interactionManagerDispatcher)throw new Error("No interactionManagerDispatcher interactions/Fullscreen");var t={},n=r.getFullScreenAPI().api,o=i.addClickTouch,s=(i.removeClickTouch,e.skinComponents),l=e.video,d=e.container,u=e.interactionManagerDispatcher,c=!1!==e.dblClickFullscreen,f=function(e){if(e.preventDefault(),r.isFullScreen())n.exitFullscreen(document);else try{n.requestFullscreen(d)}catch(e){n.requestFullscreen(l)}},h=function(e){r.isFullScreen()||n.requestFullscreen(l)},p=function(e){r.isFullScreen()?(a.applyStyles([l,d],{width:"100%",height:"100%"}),s.fullBtn.style.display="none",s.reduceBtn.style.display="inline-block",u.emit("meride.enterfullscreen")):(a.applyStyles([l,d],{width:l.getAttribute("width")+"px",height:l.getAttribute("height")+"px"}),s.reduceBtn.style.display="none",s.fullBtn.style.display="inline-block",d.style.cursor="default",u.emit("meride.exitfullscreen")),u.emit("fullscreenChange",r.isFullScreen())},v=function(e){l.removeEventListener("playing",v),navigator.userAgent.match(/(iPod|iPhone|iPad)/)&&(r.isFullScreen()?(s.fullBtn.style.display="none",s.reduceBtn.style.display="inline-block"):(s.reduceBtn.style.display="none",s.fullBtn.style.display="inline-block"),o(s.fullBtn,f),o(s.reduceBtn,f))};return t.init=function(){r.attachOnFullScreenError(l.ownerDocument,h),r.attachOnFullScreenChange(l.ownerDocument,p),navigator.userAgent.match(/(iPod|iPhone|iPad)/)?s.fullBtn.style.display="none":(o(s.fullBtn,f),o(s.reduceBtn,f)),l.addEventListener("playing",v,!1),!0===c&&l.addEventListener("dblclick",f,!1)},t};e.exports=o},function(e,t,n){var r=n(2),i=n(3),a=n(39),o=function(e){if(!e)throw new Error("No options interactions/Volume");if(!e.skinComponents)throw new Error("No skinComponents interactions/Volume");if(!e.video)throw new Error("No video interactions/Volume");if(!e.container)throw new Error("No container interactions/Volume");if(!e.interactionManagerDispatcher)throw new Error("No interactionManagerDispatcher interactions/Volume");var t,n={},o=r.addClickTouch,s=(r.removeClickTouch,e.skinComponents),l=e.video,d=(e.container,e.interactionManagerDispatcher,void 0!==e.volume&&e.volume>=0&&e.volume<=1?e.volume:.8),u=!0===e.muted,c=function(){var e=window.navigator.userAgent,t=e.indexOf("OS ");return(e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1)&&t>-1&&window.Number(e.substr(t+3,3).replace("_","."))}(),f=function(e){setTimeout(function(){m()},500)},h=function(e){s.volumeHandlerBtn.offsetTop>=84?l.volume=0:s.volumeHandlerBtn.offsetTop>0&&(l.volume=parseFloat(1-s.volumeHandlerBtn.offsetTop/84).toFixed(1))},p=function(e){l.muted=!0,e.preventDefault()},v=function(e){l.muted=!1,l.volume<.1&&(l.volume=.5),e.preventDefault()},m=function(e){!0===l.muted||0===l.volume?(i.applyStyles([s.volumeOnBtn,s.volumeOn1_3Btn,s.volumeOn2_3Btn],{display:"none"}),s.volumeOffBtn.style.display="inline-block"):(i.applyStyles([s.volumeOffBtn,s.volumeOn1_3Btn,s.volumeOn2_3Btn,s.volumeOnBtn],{display:"none"}),l.volume<.4?s.volumeOn1_3Btn.style.display="inline-block":l.volume<.7?s.volumeOn2_3Btn.style.display="inline-block":s.volumeOnBtn.style.display="inline-block"),!1===t.mouseDown()&&t.setPosition({level:l.volume})},g=function(e){s.volumeBarContainer.className="volumeBarContainer active"},y=function(e){s.volumeBarContainer.className="volumeBarContainer inactive"};return n.init=function(){l.volume=d,l.muted=u,s.volumeBarContainer.className="volumeBarContainer inactive",t=new a({handlerEl:s.volumeHandlerBtn,barEl:s.volumeBarLevel,scrollDirection:"vertical",initLoad:d,spinnerEl:s.volumeBarSpinner}),t.on("meride.slider_mousemove",h),t.init(),s.volumeContainer.addEventListener("mouseover",g,!1),s.volumeContainer.addEventListener("mouseout",y,!1),l.addEventListener("loadedmetadata",f,!1),l.addEventListener("volumechange",m,!1),navigator.userAgent.match(/(iPod|iPhone|iPad)/)?c>=10?(s.volumeBarContainer.style.display="none",o(s.volumeOnBtn,p),o(s.volumeOffBtn,v)):s.volumeContainer.style.display="none":(o(s.volumeOnBtn,p),o(s.volumeOn1_3Btn,p),o(s.volumeOn2_3Btn,p),o(s.volumeOffBtn,v)),m()},n};e.exports=o},function(e,t,n){var r=n(2),i=n(3),a=function(e){if(!e)throw new Error("No options interactions/HlsQuality");if(!e.skinComponents)throw new Error("No skinComponents interactions/HlsQuality");if(!e.video)throw new Error("No video interactions/HlsQuality");if(!e.container)throw new Error("No container interactions/HlsQuality");if(!e.interactionManagerDispatcher)throw new Error("No interactionManagerDispatcher interactions/HlsQuality");var t,n,a={},o=r.addClickTouch,s=(r.removeClickTouch,e.skinComponents),l=e.video,d=(e.container,e.interactionManagerDispatcher),u=function(e){d.emit("meride.qualityChanged",Number(e),n)},c=function(e){var t=document.querySelector(".qualityMenu .settingChooseMenuLinkActive");t&&(t.className="settingChooseMenuLink"),e.className="settingChooseMenuLinkActive"},f=function(e){var t=e.currentTarget;s.qualitySelectionContainer.className="qualitySelectionContainer inactive",c(t),u(t.getAttribute("data-quality")),e.preventDefault()},h=function(e){s.qualitySelectionContainer.className="qualitySelectionContainer active"},p=function(e){s.qualitySelectionContainer.className="qualitySelectionContainer inactive"},v=function(e){"qualitySelectionContainer inactive"===s.qualitySelectionContainer.className?s.qualitySelectionContainer.className="qualitySelectionContainer active":s.qualitySelectionContainer.className="qualitySelectionContainer inactive",e.preventDefault()};return a.levelChanged=function(e){if(!(n&&n.length<=1))if(void 0!==e.width&&void 0!==e.height){e.width>=1280&&e.height>=720?(s.qualityBtn.style.display="none",s.qualityHDBtn.style.display="inline-block"):(s.qualityHDBtn.style.display="none",s.qualityBtn.style.display="inline-block");var t=document.querySelector(".qualityMenu a[data-height='"+e.height+"']");null!==t&&c(document.querySelector(".qualityMenu a[data-height='"+e.height+"']"))}else e.bitrate>72e4?(s.qualityBtn.style.display="none",s.qualityHDBtn.style.display="inline-block"):(s.qualityHDBtn.style.display="none",s.qualityBtn.style.display="inline-block"),c(document.querySelector(".qualityMenu a[data-bitrate='"+e.bitrate+"']"))},a.qualityLevels=function(e){if(n=e,e&&e.length>1){s.qualityContainer.style.display="table-cell";try{s.qualitySelectionContainer.removeChild(t)}catch(e){}t.innerHTML="";var r;r=document.createElement("a"),r.className="settingChooseMenuLink",r.innerHTML="auto",r.setAttribute("href","#"),r.setAttribute("data-quality","-1"),r.setAttribute("data-bitrate","-1"),o(r,f),t.appendChild(r);var i,a="",l=e.length-1,d=e.slice();d.reverse(),d.forEach(function(e,n,s){var d=!1;a="",r=document.createElement("a"),r.className="settingChooseMenuLink",i=Math.floor(parseInt(e.bitrate,10)/1e3),void 0!==e.width&&void 0!==e.height?(d=e.height>e.width,d?(e.height>=1280&&e.width>=720&&(a="HD"),e.height>=1920&&e.width>=1080&&(a="FHD"),e.height>=3840&&e.width>=2160&&(a="4k"),r.innerHTML=e.width+"p"):(e.width>=1280&&e.height>=720&&(a="HD"),e.width>=1920&&e.height>=1080&&(a="FHD"),e.width>=3840&&e.height>=2160&&(a="4k"),r.innerHTML=e.height+"p")):(i>720&&i<2160?a="HD":i>=2160&&(a="4k"),r.innerHTML=i),r.innerHTML+='<span class="hd_apex">'+a+"</span>",r.setAttribute("data-quality",l),r.setAttribute("data-bitrate",e.bitrate),r.setAttribute("data-width",e.width),r.setAttribute("data-height",e.height),o(r,f),t.appendChild(r),l-=1}),s.qualitySelectionContainer.appendChild(t)}},a.init=function(){s.qualitySelectionContainer.className="qualitySelectionContainer inactive",t=document.createElement("div"),t.className="qualityMenu settingChooseMenu",s.qualityContainer.addEventListener("mouseover",h,!1),s.qualityContainer.addEventListener("mouseout",p,!1),o(s.qualityBtn,v),o(s.qualityHDBtn,v),s.qualitySelectionContainer.style.maxHeight=l.offsetHeight-120+"px"},i.applyStyles([s.qualityContainer],{display:"none"}),a};e.exports=a},function(e,t,n){var r=n(2),i=n(3),a=function(e){if(!e)throw new Error("No options interactions/DashQuality");if(!e.skinComponents)throw new Error("No skinComponents interactions/DashQuality");if(!e.video)throw new Error("No video interactions/DashQuality");if(!e.container)throw new Error("No container interactions/DashQuality");if(!e.interactionManagerDispatcher)throw new Error("No interactionManagerDispatcher interactions/DashQuality");var t,n,a={},o=r.addClickTouch,s=(r.removeClickTouch,e.skinComponents),l=e.video,d=(e.container,e.interactionManagerDispatcher),u=function(e){d.emit("meride.qualityChanged",Number(e),n)},c=function(e){var t=document.querySelector(".qualityMenu .settingChooseMenuLinkActive");t&&(t.className="settingChooseMenuLink"),e.className="settingChooseMenuLinkActive"},f=function(e){var t=e.currentTarget;s.qualitySelectionContainer.className="qualitySelectionContainer inactive",c(t),u(t.getAttribute("data-quality")),e.preventDefault()},h=function(e){s.qualitySelectionContainer.className="qualitySelectionContainer active"},p=function(e){s.qualitySelectionContainer.className="qualitySelectionContainer inactive"},v=function(e){"qualitySelectionContainer inactive"===s.qualitySelectionContainer.className?s.qualitySelectionContainer.className="qualitySelectionContainer active":s.qualitySelectionContainer.className="qualitySelectionContainer inactive",e.preventDefault()};return a.levelChanged=function(e){if(!(n&&n.length<=1))if(void 0!==e.width&&void 0!==e.height){e.width>=1280&&e.height>=720?(s.qualityBtn.style.display="none",s.qualityHDBtn.style.display="inline-block"):(s.qualityHDBtn.style.display="none",s.qualityBtn.style.display="inline-block");var t=document.querySelector(".qualityMenu a[data-height='"+e.qualityIndex+"']");null!==t&&c(document.querySelector(".qualityMenu a[data-height='"+e.qualityIndex+"']"))}else e.bitrate>72e4?(s.qualityBtn.style.display="none",s.qualityHDBtn.style.display="inline-block"):(s.qualityHDBtn.style.display="none",s.qualityBtn.style.display="inline-block"),c(document.querySelector(".qualityMenu a[data-quality='"+e.qualityIndex+"']"))},a.qualityLevels=function(e){if(n=e,e&&e.length>1){s.qualityContainer.style.display="table-cell";try{s.qualitySelectionContainer.removeChild(t)}catch(e){}t.innerHTML="";var r;r=document.createElement("a"),r.className="settingChooseMenuLink",r.innerHTML="auto",r.setAttribute("href","#"),r.setAttribute("data-quality","-1"),r.setAttribute("data-bitrate","-1"),o(r,f),t.appendChild(r);var i,a="",l=e.length-1,d=e.slice();d.reverse(),d.forEach(function(e,n,s){var d=!1;a="",r=document.createElement("a"),r.className="settingChooseMenuLink",e.bitrate&&(i=Math.floor(parseInt(e.bitrate,10)/1e3),void 0!==e.width&&void 0!==e.height?(d=e.height>e.width,d?(e.height>=1280&&e.width>=720&&(a="HD"),e.height>=1920&&e.width>=1080&&(a="FHD"),e.height>=3840&&e.width>=2160&&(a="4k"),r.innerHTML=e.width+"p"):(e.width>=1280&&e.height>=720&&(a="HD"),e.width>=1920&&e.height>=1080&&(a="FHD"),e.width>=3840&&e.height>=2160&&(a="4k"),r.innerHTML=e.height+"p")):(i>720&&i<2160?a="HD":i>=2160&&(a="4k"),r.innerHTML=i),a+=" "+parseInt(i,10)),r.innerHTML+='<span class="hd_apex">'+a+"</span>",r.setAttribute("data-quality",e.qualityIndex),r.setAttribute("data-bitrate",e.bitrate),r.setAttribute("data-width",e.width),r.setAttribute("data-height",e.height),o(r,f),t.appendChild(r),l-=1}),s.qualitySelectionContainer.appendChild(t)}},a.init=function(){s.qualitySelectionContainer.className="qualitySelectionContainer inactive",t=document.createElement("div"),t.className="qualityMenu settingChooseMenu",s.qualityContainer.addEventListener("mouseover",h,!1),s.qualityContainer.addEventListener("mouseout",p,!1),o(s.qualityBtn,v),o(s.qualityHDBtn,v),s.qualitySelectionContainer.style.maxHeight=l.offsetHeight-120+"px"},i.applyStyles([s.qualityContainer],{display:"none"}),a};e.exports=a},function(e,t,n){var r=n(2),i=n(3),a=function(e){if(!e)throw new Error("No options interactions/AudioTracks");if(!e.skinComponents)throw new Error("No skinComponents interactions/AudioTracks");if(!e.video)throw new Error("No video interactions/AudioTracks");if(!e.container)throw new Error("No container interactions/AudioTracks");if(!e.interactionManagerDispatcher)throw new Error("No interactionManagerDispatcher interactions/AudioTracks");var t,n,a={},o=r.addClickTouch,s=(r.removeClickTouch,e.skinComponents),l=e.video,d=(e.container,e.interactionManagerDispatcher),u=[],c=[],f=function(e){d.emit("meride.audioTrackChanged",e)},h=function(e){if(e){var t=document.querySelector(".audioTracksMenu .settingChooseMenuLinkActive");t&&(t.className="settingChooseMenuLink"),e.className="settingChooseMenuLinkActive"}},p=function(e){s.audioTracksLabel.innerHTML=e},v=function(e){try{var t=e.currentTarget;s.audioTracksSelectionContainer.className="audioTracksSelectionContainer inactive",h(t),f(t.getAttribute("data-audiotrack"))}catch(e){}e.preventDefault()},m=function(e){s.audioTracksSelectionContainer.className="audioTracksSelectionContainer active"},g=function(e){s.audioTracksSelectionContainer.className="audioTracksSelectionContainer inactive"},y=function(e){"audioTracksSelectionContainer inactive"===s.audioTracksSelectionContainer.className?s.audioTracksSelectionContainer.className="audioTracksSelectionContainer active":s.audioTracksSelectionContainer.className="audioTracksSelectionContainer inactive",e.preventDefault()},E=function(e){b(e)},b=function(e){if((n=u[e])&&n.length>1&&t.getAttribute("data-audiogroup")!==e){s.audioTracksContainer.style.display="table-cell";try{s.audioTracksSelectionContainer.removeChild(t)}catch(e){}t.innerHTML="",t.setAttribute("data-audiogroup",e);var r,i="",a=n.length-1,l=n.slice();l.reverse(),l.forEach(function(e,n,s){i="",r=document.createElement("a"),r.className="settingChooseMenuLink",i=e.name,r.innerHTML=i,r.setAttribute("data-audiotrack",e.id),r.setAttribute("data-audiolang",e.lang||""),!0===e.default&&h(r),o(r,v),t.appendChild(r),a-=1}),s.audioTracksSelectionContainer.appendChild(t)}},T=function(e){var t=null;for(var n in u)if(u.hasOwnProperty(n)&&(t=u[n].filter(function(t){return t.id==e})),null!==t){try{t=t[0]}catch(e){}break}return t};return a.audioTrackChanged=function(e){if(!(n&&n.length<=1)){h(document.querySelector(".audioTracksMenu a[data-audiotrack='"+e.id+"']"));var t=T(e.id);t&&p(t.lang)}},a.audioTracks=function(e){(n=e)&&n.length>1&&(n.forEach(function(e,t,n){void 0===u[e.groupId]&&(u[e.groupId]=[]),u[e.groupId].push(e)}),b(Object.keys(u)[0]))},a.init=function(){s.audioTracksSelectionContainer.className="audioTracksSelectionContainer inactive",t=document.createElement("div"),t.className="audioTracksMenu settingChooseMenu",s.audioTracksContainer.addEventListener("mouseover",m,!1),s.audioTracksContainer.addEventListener("mouseout",g,!1),o(s.audioTracksBtn,y),s.audioTracksSelectionContainer.style.maxHeight=l.offsetHeight-120+"px"},d.on("meride.qualityChanged",function(e){if(-1!==e.arguments[0]){var t=e.arguments[1][e.arguments[0]];E(t.attrs.AUDIO)}}),d.on("meride.qualityLevelsReady",function(e){try{c=e.arguments[0].levels}catch(e){}}),d.on("meride.qualityLevelChanged",function(e){try{E(e.arguments[0].attrs.AUDIO)}catch(e){}}),i.applyStyles([s.audioTracksContainer],{display:"none"}),a};e.exports=a},function(e,t,n){var r=n(2),i=n(3),a=function(e){if(!e)throw new Error("No options interactions/HlsVttTracks");if(!e.skinComponents)throw new Error("No skinComponents interactions/HlsVttTracks");if(!e.video)throw new Error("No video interactions/HlsVttTracks");if(!e.container)throw new Error("No container interactions/HlsVttTracks");if(!e.interactionManagerDispatcher)throw new Error("No interactionManagerDispatcher interactions/HlsVttTracks");var t,n,a={},o=r.addClickTouch,s=(r.removeClickTouch,e.skinComponents),l=e.video,d=(e.container,e.interactionManagerDispatcher),u=[],c=function(e){d.emit("meride.subtitleTrackChanged",e)},f=function(e){if(e){var t=document.querySelector(".subtitleTracksMenu .settingChooseMenuLinkActive");t&&(t.className="settingChooseMenuLink"),e.className="settingChooseMenuLinkActive"}},h=function(e){s.subtitleTracksLabel.innerHTML=e},p=function(e){s.subtitleTracksLabel.innerHTML=""},v=function(e){try{var t=e.currentTarget;s.subtitleTracksSelectionContainer.className="subtitleTracksSelectionContainer inactive",f(t),c(t.getAttribute("data-subtitletrack")),"-1"===t.getAttribute("data-subtitletrack")&&p()}catch(e){}e.preventDefault()},m=function(e){s.subtitleTracksSelectionContainer.className="subtitleTracksSelectionContainer active"},g=function(e){s.subtitleTracksSelectionContainer.className="subtitleTracksSelectionContainer inactive"},y=function(e){"subtitleTracksSelectionContainer inactive"===s.subtitleTracksSelectionContainer.className?s.subtitleTracksSelectionContainer.className="subtitleTracksSelectionContainer active":s.subtitleTracksSelectionContainer.className="subtitleTracksSelectionContainer inactive",e.preventDefault()},E=function(e){if((n=u[e])&&n.length>0&&t.getAttribute("data-subtitlegroup")!==e){s.subtitleTracksContainer.style.display="table-cell";try{s.subtitleTracksSelectionContainer.removeChild(t)}catch(e){}t.innerHTML="",t.setAttribute("data-subtitlegroup",e);var r,i="",a=n.slice();a.reverse(),i="",r=document.createElement("a"),r.className="settingChooseMenuLink",i="Disabled",r.innerHTML=i,r.setAttribute("data-subtitletrack","-1"),r.setAttribute("data-subtitlelang",""),o(r,v),t.appendChild(r),a.forEach(function(e){i="",r=document.createElement("a"),r.className="settingChooseMenuLink",i=e.name,r.innerHTML=i,r.setAttribute("data-subtitletrack",e.id),r.setAttribute("data-subtitlelang",e.lang||""),!0===e.default&&f(r),o(r,v),t.appendChild(r)}),s.subtitleTracksSelectionContainer.appendChild(t)}},b=function(e){var t=null;for(var n in u)if(u.hasOwnProperty(n)&&(t=u[n].filter(function(t){return t.id==e})),null!==t){try{t=t[0]}catch(e){}break}return t};return a.subtitleTrackChanged=function(e){if(!(n&&n.length<=0)){f(document.querySelector(".subtitleTracksMenu a[data-subtitletrack='"+e.id+"']"));var t=b(e.id);t&&h(t.lang)}},a.subtitleTracks=function(e){(n=e)&&n.length>0&&(n.forEach(function(e){void 0===u[e.groupId]&&(u[e.groupId]=[]),u[e.groupId].push(e)}),E(Object.keys(u)[0]))},a.init=function(){s.subtitleTracksSelectionContainer.className="subtitleTracksSelectionContainer inactive",t=document.createElement("div"),t.className="subtitleTracksMenu settingChooseMenu",s.subtitleTracksContainer.addEventListener("mouseover",m,!1),s.subtitleTracksContainer.addEventListener("mouseout",g,!1),o(s.subtitleTracksBtn,y),s.subtitleTracksSelectionContainer.style.maxHeight=l.offsetHeight-120+"px"},i.applyStyles([s.subtitleTracksContainer],{display:"none"}),a};e.exports=a},function(e,t,n){var r=n(131),i=function(e){if(!e)throw new Error("No options interactions/VR");if(!e.skinComponents)throw new Error("No skinComponents interactions/VR");if(!e.video)throw new Error("No video interactions/VR");if(!e.container)throw new Error("No container interactions/VR");if(!e.interactionManagerDispatcher)throw new Error("No interactionManagerDispatcher interactions/VR");var t={},n=null,i=function(){switch(e.driver||"AFrame"){case"AFrame":n=new r(e)}return n};return t.setUp=i,t};e.exports=i},function(e,t,n){var r=n(4),i=n(2),a=n(3),o=function(e){if(!e)throw new Error("No options interactions/AFrame");if(!e.skinComponents)throw new Error("No skinComponents interactions/AFrame");if(!e.video)throw new Error("No video interactions/AFrame");if(!e.container)throw new Error("No container interactions/AFrame");if(!e.interactionManagerDispatcher)throw new Error("No interactionManagerDispatcher interactions/AFrame");var t={},n=e.container,o=e.video,s=!1!==e.embedded,l=(e.interactionManagerDispatcher,e.skinComponents),d=e.scriptURL||"https://aframe.io/releases/0.9.0/aframe.min.js",u=!0===e.vrModeUI,c=i.addClickTouch,f=(i.removeClickTouch,null),h=null,p=function(){return parseInt(1e4*Math.random(),10)},v=function(e){f.removeEventListener("loaded",v),a.applyStyles(l.vrBtnContainer,{display:"table-cell"}),c(l.vrBtnContainer,function(){f.enterVR(),h.components.material.material.map.image.play()})},m=function(e){l.vrBtn.id="merideVrBtn_"+p(),e.setAttribute("vr-mode-ui","enterVRButton: #"+l.vrBtn.id),e.addEventListener("loaded",v)},g=function(){var e="meride360_"+p();o.setAttribute("id",e),o.setAttribute("crossorigin","anonymous"),o.crossOrigin="anonymous",document.createElement("div").className="meride_360_scene",f=document.createElement("a-scene"),!0===s&&f.setAttribute("embedded",""),f.setAttribute("loading-screen","enabled: false");var t=document.createElement("a-assets");t.appendChild(o),h=document.createElement("a-videosphere"),h.setAttribute("src","#"+e),f.appendChild(t),f.appendChild(h),r.include(d,function(){var e=function(){o.removeEventListener("canplay",e),!1===u?f.setAttribute("vr-mode-ui","enabled: false"):m(f),n.appendChild(f)};4===o.readyState?e():o.addEventListener("canplay",e)})};return t.init=g,a.applyStyles([l.vrBtnContainer],{display:"none"}),t};e.exports=o},function(e,t,n){var r=n(3),i=n(2),a=function(e){if(!e)throw new Error("No options interactions/PiP");if(!e.skinComponents)throw new Error("No skinComponents interactions/PiP");if(!e.video)throw new Error("No video interactions/PiP");if(!e.interactionManagerDispatcher)throw new Error("No interactionManagerDispatcher interactions/PiP");var t={},n=i.addClickTouch,a=e.video,o=e.skinComponents,s=function(e){try{document.pictureInPictureElement?document.exitPictureInPicture():a.requestPictureInPicture()}catch(e){}},l=function(e){r.applyStyles([o.pipBtn],{display:"none"}),r.applyStyles([o.pipExitBtn],{display:"inline-block"})},d=function(e){r.applyStyles([o.pipExitBtn],{display:"none"}),r.applyStyles([o.pipBtn],{display:"inline-block"})};return t.init=function(){r.applyStyles([o.pipBtnContainer],{display:"table-cell"}),r.applyStyles([o.pipBtn],{display:"inline-block"}),n(o.pipBtn,s),n(o.pipExitBtn,s),a.addEventListener("enterpictureinpicture",l),a.addEventListener("leavepictureinpicture",d)},t};e.exports=a},function(e,t){function n(e){if(!e.tracks)throw new Error("Tracks required");if(!e.video)throw new Error("Video element required");this.tracks=e.tracks,this.video=e.video}n.prototype.render=function(){var e=this.video,t="";this.tracks.forEach(function(e,n){var r=document.createElement("track");r.setAttribute("label",e.label),r.setAttribute("kind",e.kind),r.setAttribute("srclang",e.srclang),r.setAttribute("src",e.src),e.default&&!0===e.default&&(r.setAttribute("default","true"),t=e.srclang),this.video.appendChild(r)},this),setTimeout(function(){for(var n=0;n<e.textTracks.length;n++)e.textTracks[n].language===t?e.textTracks[n].mode="showing":e.textTracks[n].mode="hidden"},500)},e.exports=n},function(e,t,n){function r(e){if(!e.container)throw new Error("CCComponent require a container");if(!e.video)throw new Error("CCComponent require a video");var t=this,n=function(e){t.ccContainer.style.display="block",e.preventDefault()},r=function(e){t.ccContainer.style.display="none",e.preventDefault()},i=o.addClickTouch;t.tracks=e.tracks||[],t.container=e.container,t.video=e.video,t.comp=document.createElement("div"),t.comp.className="settingComponent",t.ccBtn=document.createElement("button"),t.ccContainer=document.createElement("div"),t.ccContainer.className="settingChildContainer ccContainer",t.closeBtn=document.createElement("button"),i(t.closeBtn,r),s.applyComponent(t.closeBtn,a.closeSettingsBtn,"X");var l=document.createElement("div");l.className="ccMenu settingChooseMenu";var d,u=function(e){for(var n in t.video.textTracks)t.video.textTracks.hasOwnProperty(n)&&(t.video.textTracks[n].language===e?t.video.textTracks[n].mode="showing":t.video.textTracks[n].mode="hidden")},c=function(e){var n=document.querySelector(".ccMenu .settingChooseMenuLinkActive");n&&(n.className="settingChooseMenuLink"),e.target.className="settingChooseMenuLinkActive",u(e.target.getAttribute("data-cc-lang")),t.ccContainer.style.display="none",e.preventDefault()};d=document.createElement("a"),d.className="settingChooseMenuLink",d.innerHTML="disable",d.setAttribute("href","#"),i(d,c),l.appendChild(d),t.tracks.forEach(function(e,t){d=document.createElement("a"),d.className="settingChooseMenuLink",d.innerHTML=e.label,d.setAttribute("href","#"),d.setAttribute("data-cc-lang",e.srclang),i(d,c),l.appendChild(d)},t),i(t.ccBtn,n),s.applyComponent(t.ccBtn,a.ccBtn,"&#8801;"),t.ccContainer.appendChild(t.closeBtn),t.ccContainer.appendChild(l),t.comp.appendChild(t.ccBtn),t.container.appendChild(t.ccContainer)}var i=n(135),a=n(36),o=n(2),s=n(3);r.prototype=Object.create(i.prototype),e.exports=r},function(e,t){function n(){this.comp=document.createElement("div")}n.prototype.element=function(){return this.comp},e.exports=n},function(e,t,n){var r=(n(2),n(0)),i=function(e){if(!e)throw new Error("Watermark needs some parameter");if(!e.container)throw new Error("Watermark needs a container element");if(!e.interactionManager)throw new Error("Watermark needs a InteractionManager");if(!e.logoURL)throw new Error("Watermark needs a logoURL parameter");var t={},n=document.createElement("div"),i=document.createElement("a"),a=document.createElement("img"),o=(new r,function(e,t){for(var n in t)t.hasOwnProperty(n)&&e.setAttribute(n,t[n])}),s=function(e,t,n){isNaN(n/1)?e.style[t]=n:e.style[t]=n+"px"};n.style.position="absolute",e.right&&s(n,"right",e.right),e.bottom&&s(n,"bottom",e.bottom),e.top&&s(n,"top",e.top),e.left&&s(n,"left",e.left),e.right||e.bottom||e.top||e.left||(s(n,"top","4%"),s(n,"left","4%")),e.width&&(a.style.width=e.width+"px"),e.height&&(a.style.height=e.height+"px"),e.opacity&&(a.style.opacity=e.opacity),e.displayTime&&setTimeout(function(){n.remove()},e.displayTime),o(a,{src:e.logoURL,alt:"Player watermark"}),e.link&&o(i,{href:e.link,title:"Open link",onclick:"window.open(this.href, 'meride_wmarkurl'); return false;"}),e.hide&&!0===e.hide&&(e.interactionManager.on("meride.controlbarShown",function(){n.style.display="block"}),e.interactionManager.on("meride.controlbarHidden",function(){n.style.display="none"}));var l=function(){n.style.visibility="visible"},d=function(){n.style.visibility="hidden"},u=function(){e.link?(i.appendChild(a),n.appendChild(i)):n.appendChild(a),e.container.appendChild(n)};return t.render=u,t.show=l,t.hide=d,t};e.exports=i},function(e,t){var n={include:function(e,t,n){var r=document.getElementsByTagName("head")[0],i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",e),void 0!==i.onload?i.onload=t:void 0!==i.onreadystatechange?"loaded"!=i.readyState&&"complete"!=i.readyState||t():i.onload=t,"function"==typeof n&&(i.onerror=n),r.appendChild(i)}};e.exports=n},function(e,t,n){"undefined"!=typeof window&&function(t,n){e.exports=n()}(0,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(t){return e[t]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":function(e,t,n){"use strict";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,n,r,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var o=new i(n,r||e,a),s=d?d+t:t;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],o]:e._events[s].push(o):(e._events[s]=o,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}var l=Object.prototype.hasOwnProperty,d="~";Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(d=!1)),s.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)l.call(e,t)&&n.push(d?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},s.prototype.listeners=function(e){var t=d?d+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,a=new Array(i);r<i;r++)a[r]=n[r].fn;return a},s.prototype.listenerCount=function(e){var t=d?d+e:e,n=this._events[t];return n?n.fn?1:n.length:0},s.prototype.emit=function(e,t,n,r,i,a){var o=d?d+e:e;if(!this._events[o])return!1;var s,l,u=this._events[o],c=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,r),!0;case 5:return u.fn.call(u.context,t,n,r,i),!0;case 6:return u.fn.call(u.context,t,n,r,i,a),!0}for(l=1,s=new Array(c-1);l<c;l++)s[l-1]=arguments[l];u.fn.apply(u.context,s)}else{var f,h=u.length;for(l=0;l<h;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),c){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,n);break;case 4:u[l].fn.call(u[l].context,t,n,r);break;default:if(!s)for(f=1,s=new Array(c-1);f<c;f++)s[f-1]=arguments[f];u[l].fn.apply(u[l].context,s)}}return!0},s.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,n,r){var i=d?d+e:e;if(!this._events[i])return this;if(!t)return o(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||r&&!a.once||n&&a.context!==n||o(this,i);else{for(var s=0,l=[],u=a.length;s<u;s++)(a[s].fn!==t||r&&!a[s].once||n&&a[s].context!==n)&&l.push(a[s]);l.length?this._events[i]=1===l.length?l[0]:l:o(this,i)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=d?d+e:e,this._events[t]&&o(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=d,s.EventEmitter=s,e.exports=s},"./node_modules/url-toolkit/src/url-toolkit.js":function(e,t,n){!function(t){var n=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,r=/^([^\/?#]*)([^]*)$/,i=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var i=o.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=o.normalizePath(i.path),o.buildURLFromParts(i)}var a=o.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return n.alwaysNormalize?(a.path=o.normalizePath(a.path),o.buildURLFromParts(a)):t;var s=o.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var l=r.exec(s.path);s.netLoc=l[1],s.path=l[2]}s.netLoc&&!s.path&&(s.path="/");var d={scheme:s.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(d.netLoc=s.netLoc,"/"!==a.path[0]))if(a.path){var u=s.path,c=u.substring(0,u.lastIndexOf("/")+1)+a.path;d.path=o.normalizePath(c)}else d.path=s.path,a.params||(d.params=s.params,a.query||(d.query=s.query));return null===d.path&&(d.path=n.alwaysNormalize?o.normalizePath(a.path):a.path),o.buildURLFromParts(d)},parseURL:function(e){var t=n.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(i,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=o}()},"./node_modules/webworkify-webpack/index.js":function(e,t,n){function r(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t.oe=function(e){throw e};var r=t(t.s=ENTRY_MODULE);return r.default||r}function i(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function a(e){return!isNaN(1*e)}function o(e,t,r){var o={};o[r]=[];var s=t.toString(),l=s.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!l)return o;for(var c,f=l[1],h=new RegExp("(\\\\n|\\W)"+i(f)+u,"g");c=h.exec(s);)"dll-reference"!==c[3]&&o[r].push(c[3]);for(h=new RegExp("\\("+i(f)+'\\("(dll-reference\\s('+d+'))"\\)\\)'+u,"g");c=h.exec(s);)e[c[2]]||(o[r].push(c[1]),e[c[2]]=n(c[1]).m),o[c[2]]=o[c[2]]||[],o[c[2]].push(c[4]);for(var p=Object.keys(o),v=0;v<p.length;v++)for(var m=0;m<o[p[v]].length;m++)a(o[p[v]][m])&&(o[p[v]][m]=1*o[p[v]][m]);return o}function s(e){return Object.keys(e).reduce(function(t,n){return t||e[n].length>0},!1)}function l(e,t){for(var n={main:[t]},r={main:[]},i={main:{}};s(n);)for(var a=Object.keys(n),l=0;l<a.length;l++){var d=a[l],u=n[d],c=u.pop();if(i[d]=i[d]||{},!i[d][c]&&e[d][c]){i[d][c]=!0,r[d]=r[d]||[],r[d].push(c);for(var f=o(e,e[d][c],d),h=Object.keys(f),p=0;p<h.length;p++)n[h[p]]=n[h[p]]||[],n[h[p]]=n[h[p]].concat(f[h[p]])}}return r}var d="[\\.|\\-|\\+|\\w|/|@]+",u="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+d+").*?\\)";e.exports=function(e,t){t=t||{};var i={main:n.m},a=t.all?{main:Object.keys(i.main)}:l(i,e),o="";Object.keys(a).filter(function(e){return"main"!==e}).forEach(function(e){for(var t=0;a[e][t];)t++;a[e].push(t),i[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o=o+"var "+e+" = ("+r.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+a[e].map(function(t){return JSON.stringify(t)+": "+i[e][t].toString()}).join(",")+"});\n"}),o=o+"new (("+r.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+a.main.map(function(e){return JSON.stringify(e)+": "+i.main[e].toString()}).join(",")+"}))(self);";var s=new window.Blob([o],{type:"text/javascript"});if(t.bare)return s;var d=window.URL||window.webkitURL||window.mozURL||window.msURL,u=d.createObjectURL(s),c=new window.Worker(u);return c.objectURL=u,c}},"./src/config.ts":function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==t.liveMaxLatencyDurationCount&&(void 0===t.liveSyncDurationCount||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(void 0===t.liveSyncDuration||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return r({},e,t)}function l(e){var t=e.loader;if(t!==T.default&&t!==b.default)A.logger.log("[config]: Custom loader detected, cannot enable progressive streaming"),e.progressive=!1;else{Object(T.fetchSupported)()&&(e.loader=T.default,e.progressive=!0,e.enableSoftwareAES=!0,A.logger.log("[config]: Progressive streaming enabled, using FetchLoader"))}}n.r(t),n.d(t,"hlsDefaultConfig",function(){return L}),n.d(t,"mergeConfig",function(){return s}),n.d(t,"enableStreamingMode",function(){return l});var d=n("./src/controller/abr-controller.ts"),u=n("./src/controller/audio-stream-controller.ts"),c=n("./src/controller/audio-track-controller.ts"),f=n("./src/controller/subtitle-stream-controller.ts"),h=n("./src/controller/subtitle-track-controller.ts"),p=n("./src/controller/buffer-controller.ts"),v=n("./src/controller/timeline-controller.ts"),m=n("./src/controller/cap-level-controller.ts"),g=n("./src/controller/fps-controller.ts"),y=n("./src/controller/eme-controller.ts"),E=n("./src/controller/cmcd-controller.ts"),b=n("./src/utils/xhr-loader.ts"),T=n("./src/utils/fetch-loader.ts"),w=n("./src/utils/cues.ts"),S=n("./src/utils/mediakeys-helper.ts"),A=n("./src/utils/logger.ts"),L=a(a({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:b.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:d.default,bufferController:p.default,capLevelController:m.default,fpsController:g.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:S.requestMediaKeySystemAccess,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0},function(){return{cueHandler:w.default,enableCEA708Captions:!0,enableWebVTT:!0,enableIMSC1:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}()),{},{subtitleStreamController:f.SubtitleStreamController,subtitleTrackController:h.default,timelineController:v.TimelineController,audioStreamController:u.default,audioTrackController:c.default,emeController:y.default,cmcdController:E.default})},"./src/controller/abr-controller.ts":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.r(t);var a=n("./src/polyfills/number.ts"),o=n("./src/utils/ewma-bandwidth-estimator.ts"),s=n("./src/events.ts"),l=n("./src/utils/buffer-helper.ts"),d=n("./src/errors.ts"),u=n("./src/types/loader.ts"),c=n("./src/utils/logger.ts"),f=function(){function e(e){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=e;var t=e.config;this.bwEstimator=new o.default(t.abrEwmaSlowVoD,t.abrEwmaFastVoD,t.abrEwmaDefaultEstimate),this.registerListeners()}var t=e.prototype;return t.registerListeners=function(){var e=this.hls;e.on(s.Events.FRAG_LOADING,this.onFragLoading,this),e.on(s.Events.FRAG_LOADED,this.onFragLoaded,this),e.on(s.Events.FRAG_BUFFERED,this.onFragBuffered,this),e.on(s.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(s.Events.ERROR,this.onError,this)},t.unregisterListeners=function(){var e=this.hls;e.off(s.Events.FRAG_LOADING,this.onFragLoading,this),e.off(s.Events.FRAG_LOADED,this.onFragLoaded,this),e.off(s.Events.FRAG_BUFFERED,this.onFragBuffered,this),e.off(s.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(s.Events.ERROR,this.onError,this)},t.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},t.onFragLoading=function(e,t){var n=t.frag;if(n.type===u.PlaylistLevelType.MAIN&&!this.timer){var r;this.fragCurrent=n,this.partCurrent=null!=(r=t.part)?r:null,this.timer=self.setInterval(this.onCheck,100)}},t.onLevelLoaded=function(e,t){var n=this.hls.config;t.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD)},t._abandonRulesCheck=function(){var e=this.fragCurrent,t=this.partCurrent,n=this.hls,r=n.autoLevelEnabled,i=n.config,o=n.media;if(e&&o){var d=t?t.stats:e.stats,u=t?t.duration:e.duration;if(d.aborted)return c.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);if(r&&!o.paused&&o.playbackRate&&o.readyState){var f=performance.now()-d.loading.start,h=Math.abs(o.playbackRate);if(!(f<=500*u/h)){var p=n.levels,v=n.minAutoLevel,m=p[e.level],g=d.total||Math.max(d.loaded,Math.round(u*m.maxBitrate/8)),y=Math.max(1,d.bwEstimate?d.bwEstimate/8:1e3*d.loaded/f),E=(g-d.loaded)/y,b=o.currentTime,T=(l.BufferHelper.bufferInfo(o,b,i.maxBufferHole).end-b)/h;if(!(T>=2*u/h||E<=T)){var w,S=Number.POSITIVE_INFINITY;for(w=e.level-1;w>v;w--){if((S=u*p[w].maxBitrate/(6.4*y))<T)break}if(!(S>=E)){var A=this.bwEstimator.getEstimate();c.logger.warn("Fragment "+e.sn+(t?" part "+t.index:"")+" of level "+e.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+w+"\n      Current BW estimate: "+(Object(a.isFiniteNumber)(A)?(A/1024).toFixed(3):"Unknown")+" Kb/s\n      Estimated load time for current fragment: "+E.toFixed(3)+" s\n      Estimated load time for the next fragment: "+S.toFixed(3)+" s\n      Time to underbuffer: "+T.toFixed(3)+" s"),n.nextLoadLevel=w,this.bwEstimator.sample(f,d.loaded),this.clearTimer(),e.loader&&(this.fragCurrent=this.partCurrent=null,e.loader.abort()),n.trigger(s.Events.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,part:t,stats:d})}}}}}},t.onFragLoaded=function(e,t){var n=t.frag,r=t.part;if(n.type===u.PlaylistLevelType.MAIN&&Object(a.isFiniteNumber)(n.sn)){var i=r?r.stats:n.stats,o=r?r.duration:n.duration;if(this.clearTimer(),this.lastLoadedFragLevel=n.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var l=this.hls.levels[n.level],d=(l.loaded?l.loaded.bytes:0)+i.loaded,c=(l.loaded?l.loaded.duration:0)+o;l.loaded={bytes:d,duration:c},l.realBitrate=Math.round(8*d/c)}if(n.bitrateTest){var f={stats:i,frag:n,part:r,id:n.type};this.onFragBuffered(s.Events.FRAG_BUFFERED,f),n.bitrateTest=!1}}},t.onFragBuffered=function(e,t){var n=t.frag,r=t.part,i=r?r.stats:n.stats;if(!i.aborted&&n.type===u.PlaylistLevelType.MAIN&&"initSegment"!==n.sn){var a=i.parsing.end-i.loading.start;this.bwEstimator.sample(a,i.loaded),i.bwEstimate=this.bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}},t.onError=function(e,t){switch(t.details){case d.ErrorDetails.FRAG_LOAD_ERROR:case d.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},t.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},t.getNextABRAutoLevel=function(){var e=this.fragCurrent,t=this.partCurrent,n=this.hls,r=n.maxAutoLevel,i=n.config,a=n.minAutoLevel,o=n.media,s=t?t.duration:e?e.duration:0,d=o?o.currentTime:0,u=o&&0!==o.playbackRate?Math.abs(o.playbackRate):1,f=this.bwEstimator?this.bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,h=(l.BufferHelper.bufferInfo(o,d,i.maxBufferHole).end-d)/u,p=this.findBestLevel(f,a,r,h,i.abrBandWidthFactor,i.abrBandWidthUpFactor);if(p>=0)return p;c.logger.trace((h?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var v=s?Math.min(s,i.maxStarvationDelay):i.maxStarvationDelay,m=i.abrBandWidthFactor,g=i.abrBandWidthUpFactor;if(!h){var y=this.bitrateTestDelay;if(y){v=(s?Math.min(s,i.maxLoadingDelay):i.maxLoadingDelay)-y,c.logger.trace("bitrate test took "+Math.round(1e3*y)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*v)+" ms"),m=g=1}}return p=this.findBestLevel(f,a,r,h+v,m,g),Math.max(p,0)},t.findBestLevel=function(e,t,n,r,i,a){for(var o,s=this.fragCurrent,l=this.partCurrent,d=this.lastLoadedFragLevel,u=this.hls.levels,f=u[d],h=!(null===f||void 0===f||null===(o=f.details)||void 0===o||!o.live),p=null===f||void 0===f?void 0:f.codecSet,v=l?l.duration:s?s.duration:0,m=n;m>=t;m--){var g=u[m];if(g&&(!p||g.codecSet===p)){var y=g.details,E=(l?null===y||void 0===y?void 0:y.partTarget:null===y||void 0===y?void 0:y.averagetargetduration)||v,b=void 0;b=m<=d?i*e:a*e;var T=u[m].maxBitrate,w=T*E/b;if(c.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+m+"/"+Math.round(b)+"/"+T+"/"+E+"/"+r+"/"+w),b>T&&(!w||h&&!this.bitrateTestDelay||w<r))return m}}return-1},i(e,[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this.bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var n=this.getNextABRAutoLevel();return-1!==e&&(n=Math.min(e,n)),n},set:function(e){this._nextAutoLevel=e}}]),e}();t.default=f},"./src/controller/audio-stream-controller.ts":function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,a(e,t)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.r(t);var o=n("./src/polyfills/number.ts"),s=n("./src/controller/base-stream-controller.ts"),l=n("./src/events.ts"),d=n("./src/utils/buffer-helper.ts"),u=n("./src/controller/fragment-tracker.ts"),c=n("./src/types/level.ts"),f=n("./src/types/loader.ts"),h=n("./src/loader/fragment.ts"),p=n("./src/demux/chunk-cache.ts"),v=n("./src/demux/transmuxer-interface.ts"),m=n("./src/types/transmuxer.ts"),g=n("./src/controller/fragment-finders.ts"),y=n("./src/utils/discontinuities.ts"),E=n("./src/errors.ts"),b=n("./src/utils/logger.ts"),T=function(e){function t(t,n){var r;return r=e.call(this,t,n,"[audio-stream-controller]")||this,r.videoBuffer=null,r.videoTrackCC=-1,r.waitingVideoCC=-1,r.audioSwitch=!1,r.trackId=-1,r.waitingData=null,r.mainDetails=null,r.bufferFlushed=!1,r._registerListeners(),r}i(t,e);var n=t.prototype;return n.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},n._registerListeners=function(){var e=this.hls;e.on(l.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(l.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(l.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(l.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(l.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(l.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(l.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(l.Events.ERROR,this.onError,this),e.on(l.Events.BUFFER_RESET,this.onBufferReset,this),e.on(l.Events.BUFFER_CREATED,this.onBufferCreated,this),e.on(l.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(l.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(l.Events.FRAG_BUFFERED,this.onFragBuffered,this)},n._unregisterListeners=function(){var e=this.hls;e.off(l.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(l.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(l.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(l.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(l.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(l.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(l.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(l.Events.ERROR,this.onError,this),e.off(l.Events.BUFFER_RESET,this.onBufferReset,this),e.off(l.Events.BUFFER_CREATED,this.onBufferCreated,this),e.off(l.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(l.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(l.Events.FRAG_BUFFERED,this.onFragBuffered,this)},n.onInitPtsFound=function(e,t){var n=t.frag,r=t.id,i=t.initPTS;if("main"===r){var a=n.cc;this.initPTS[n.cc]=i,this.log("InitPTS for cc: "+a+" found from main: "+i),this.videoTrackCC=a,this.state===s.State.WAITING_INIT_PTS&&this.tick()}},n.startLoad=function(e){if(!this.levels)return this.startPosition=e,void(this.state=s.State.STOPPED);var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,t>0&&-1===e?(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=s.State.IDLE):(this.loadedmetadata=!1,this.state=s.State.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()},n.doTick=function(){switch(this.state){case s.State.IDLE:this.doTickIdle();break;case s.State.WAITING_TRACK:var t,n=this.levels,r=this.trackId,i=null===n||void 0===n?void 0:null===(t=n[r])||void 0===t?void 0:t.details;if(i){if(this.waitForCdnTuneIn(i))break;this.state=s.State.WAITING_INIT_PTS}break;case s.State.FRAG_LOADING_WAITING_RETRY:var a,o=performance.now(),l=this.retryDate;(!l||o>=l||null!==(a=this.media)&&void 0!==a&&a.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.state=s.State.IDLE);break;case s.State.WAITING_INIT_PTS:var u=this.waitingData;if(u){var c=u.frag,f=u.part,h=u.cache,p=u.complete;if(void 0!==this.initPTS[c.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=s.State.FRAG_LOADING;var v=h.flush(),m={frag:c,part:f,payload:v,networkDetails:null};this._handleFragmentLoadProgress(m),p&&e.prototype._handleFragmentLoadComplete.call(this,m)}else if(this.videoTrackCC!==this.waitingVideoCC)b.logger.log("Waiting fragment cc ("+c.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var y=this.getLoadPosition(),E=d.BufferHelper.bufferInfo(this.mediaBuffer,y,this.config.maxBufferHole),T=Object(g.fragmentWithinToleranceTest)(E.end,this.config.maxFragLookUpTolerance,c);T<0&&(b.logger.log("Waiting fragment cc ("+c.cc+") @ "+c.start+" cancelled because another fragment at "+E.end+" is needed"),this.clearWaitingFragment())}}else this.state=s.State.IDLE}this.onTickEnd()},n.clearWaitingFragment=function(){var e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=s.State.IDLE)},n.onTickEnd=function(){var e=this.media;if(e&&e.readyState){var t=this.mediaBuffer?this.mediaBuffer:e,n=t.buffered;!this.loadedmetadata&&n.length&&(this.loadedmetadata=!0),this.lastCurrentTime=e.currentTime}},n.doTickIdle=function(){var e,t,n=this.hls,r=this.levels,i=this.media,a=this.trackId,o=n.config;if(r&&r[a]&&(i||!this.startFragRequested&&o.startFragPrefetch)){var d=r[a],u=d.details;if(!u||u.live&&this.levelLastLoaded!==a||this.waitForCdnTuneIn(u))return void(this.state=s.State.WAITING_TRACK);this.bufferFlushed&&(this.bufferFlushed=!1,this.afterBufferFlushed(this.mediaBuffer?this.mediaBuffer:this.media,h.ElementaryStreamTypes.AUDIO,f.PlaylistLevelType.AUDIO));var c=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,f.PlaylistLevelType.AUDIO);if(null!==c){var p=c.len,v=this.getMaxBufferLength(),m=this.audioSwitch;if(!(p>=v)||m){if(!m&&this._streamEnded(c,u))return n.trigger(l.Events.BUFFER_EOS,{type:"audio"}),void(this.state=s.State.ENDED);var g=u.fragments,y=g[0].start,E=c.end;if(m){var b=this.getLoadPosition();E=b,u.PTSKnown&&b<y&&(c.end>y||c.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),i.currentTime=y+.05)}var T=this.getNextFragment(E,u);if(!T)return void(this.bufferFlushed=!0);"identity"!==(null===(e=T.decryptdata)||void 0===e?void 0:e.keyFormat)||null!==(t=T.decryptdata)&&void 0!==t&&t.key?this.loadFragment(T,u,E):this.loadKey(T,u)}}}},n.getMaxBufferLength=function(){var t=e.prototype.getMaxBufferLength.call(this),n=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,f.PlaylistLevelType.MAIN);return null===n?t:Math.max(t,n.len)},n.onMediaDetaching=function(){this.videoBuffer=null,e.prototype.onMediaDetaching.call(this)},n.onAudioTracksUpdated=function(e,t){var n=t.audioTracks;this.resetTransmuxer(),this.levels=n.map(function(e){return new c.Level(e)})},n.onAudioTrackSwitching=function(e,t){var n=!!t.url;this.trackId=t.id;var r=this.fragCurrent;null!==r&&void 0!==r&&r.loader&&r.loader.abort(),this.fragCurrent=null,this.clearWaitingFragment(),n?this.setInterval(100):this.resetTransmuxer(),n?(this.audioSwitch=!0,this.state=s.State.IDLE):this.state=s.State.STOPPED,this.tick()},n.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1},n.onLevelLoaded=function(e,t){this.mainDetails=t.details},n.onAudioTrackLoaded=function(e,t){var n,r=this.levels,i=t.details,a=t.id;if(!r)return void this.warn("Audio tracks were reset while loading level "+a);this.log("Track "+a+" loaded ["+i.startSN+","+i.endSN+"],duration:"+i.totalduration);var o=r[a],l=0;if(i.live||null!==(n=o.details)&&void 0!==n&&n.live){var d=this.mainDetails;if(i.fragments[0]||(i.deltaUpdateFailed=!0),i.deltaUpdateFailed||!d)return;!o.details&&i.hasProgramDateTime&&d.hasProgramDateTime?(Object(y.alignMediaPlaylistByPDT)(i,d),l=i.fragments[0].start):l=this.alignPlaylists(i,o.details)}o.details=i,this.levelLastLoaded=a,this.startFragRequested||!this.mainDetails&&i.live||this.setStartPosition(o.details,l),this.state!==s.State.WAITING_TRACK||this.waitForCdnTuneIn(i)||(this.state=s.State.IDLE),this.tick()},n._handleFragmentLoadProgress=function(e){var t,n=e.frag,r=e.part,i=e.payload,a=this.config,o=this.trackId,l=this.levels;if(!l)return void this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+n.sn+" of level "+n.level+" will not be buffered");var d=l[o],u=d.details,c=a.defaultAudioCodec||d.audioCodec||"mp4a.40.2",h=this.transmuxer;h||(h=this.transmuxer=new v.default(this.hls,f.PlaylistLevelType.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var g=this.initPTS[n.cc],y=null===(t=n.initSegment)||void 0===t?void 0:t.data;if(void 0!==g){var E=r?r.index:-1,T=-1!==E,w=new m.ChunkMetadata(n.level,n.sn,n.stats.chunkCount,i.byteLength,E,T);h.push(i,y,c,"",n,r,u.totalduration,!1,w,g)}else{b.logger.log("Unknown video PTS for cc "+n.cc+", waiting for video PTS before demuxing audio frag "+n.sn+" of ["+u.startSN+" ,"+u.endSN+"],track "+o);(this.waitingData=this.waitingData||{frag:n,part:r,cache:new p.default,complete:!1}).cache.push(new Uint8Array(i)),this.waitingVideoCC=this.videoTrackCC,this.state=s.State.WAITING_INIT_PTS}},n._handleFragmentLoadComplete=function(t){if(this.waitingData)return void(this.waitingData.complete=!0);e.prototype._handleFragmentLoadComplete.call(this,t)},n.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},n.onBufferCreated=function(e,t){var n=t.tracks.audio;n&&(this.mediaBuffer=n.buffer),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer)},n.onFragBuffered=function(e,t){var n=t.frag,r=t.part;if(n.type===f.PlaylistLevelType.AUDIO){if(this.fragContextChanged(n))return void this.warn("Fragment "+n.sn+(r?" p: "+r.index:"")+" of level "+n.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch);"initSegment"!==n.sn&&(this.fragPrevious=n,this.audioSwitch&&(this.audioSwitch=!1,this.hls.trigger(l.Events.AUDIO_TRACK_SWITCHED,{id:this.trackId}))),this.fragBufferedComplete(n,r)}},n.onError=function(t,n){switch(n.details){case E.ErrorDetails.FRAG_LOAD_ERROR:case E.ErrorDetails.FRAG_LOAD_TIMEOUT:case E.ErrorDetails.KEY_LOAD_ERROR:case E.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(f.PlaylistLevelType.AUDIO,n);break;case E.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case E.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:this.state!==s.State.ERROR&&this.state!==s.State.STOPPED&&(this.state=n.fatal?s.State.ERROR:s.State.IDLE,this.warn(n.details+" while loading frag, switching to "+this.state+" state"));break;case E.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===n.parent&&(this.state===s.State.PARSING||this.state===s.State.PARSED)){var r=!0,i=this.getFwdBufferInfo(this.mediaBuffer,f.PlaylistLevelType.AUDIO);i&&i.len>.5&&(r=!this.reduceMaxBufferLength(i.len)),r&&(this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,e.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.resetLoadingState()}}},n.onBufferFlushed=function(e,t){t.type===h.ElementaryStreamTypes.AUDIO&&(this.bufferFlushed=!0)},n._handleTransmuxComplete=function(e){var t,n="audio",i=this.hls,a=e.remuxResult,o=e.chunkMeta,d=this.getCurrentContext(o);if(!d)return this.warn("The loading context changed while buffering fragment "+o.sn+" of level "+o.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(o.level);var u=d.frag,c=d.part,f=a.audio,p=a.text,v=a.id3,m=a.initSegment;if(!this.fragContextChanged(u)){if(this.state=s.State.PARSING,this.audioSwitch&&f&&this.completeAudioSwitch(),null!==m&&void 0!==m&&m.tracks&&(this._bufferInitSegment(m.tracks,u,o),i.trigger(l.Events.FRAG_PARSING_INIT_SEGMENT,{frag:u,id:n,tracks:m.tracks})),f){var g=f.startPTS,y=f.endPTS,E=f.startDTS,b=f.endDTS;c&&(c.elementaryStreams[h.ElementaryStreamTypes.AUDIO]={startPTS:g,endPTS:y,startDTS:E,endDTS:b}),u.setElementaryStreamInfo(h.ElementaryStreamTypes.AUDIO,g,y,E,b),this.bufferFragmentData(f,u,c,o)}if(null!==v&&void 0!==v&&null!==(t=v.samples)&&void 0!==t&&t.length){var T=r({frag:u,id:n},v);i.trigger(l.Events.FRAG_PARSING_METADATA,T)}if(p){var w=r({frag:u,id:n},p);i.trigger(l.Events.FRAG_PARSING_USERDATA,w)}}},n._bufferInitSegment=function(e,t,n){if(this.state===s.State.PARSING){e.video&&delete e.video;var r=e.audio;if(r){r.levelCodec=r.codec,r.id="audio",this.log("Init audio buffer, container:"+r.container+", codecs[parsed]=["+r.codec+"]"),this.hls.trigger(l.Events.BUFFER_CODECS,e);var i=r.initSegment;if(null!==i&&void 0!==i&&i.byteLength){var a={type:"audio",frag:t,part:null,chunkMeta:n,parent:t.type,data:i};this.hls.trigger(l.Events.BUFFER_APPENDING,a)}this.tick()}}},n.loadFragment=function(t,n,r){var i=this.fragmentTracker.getState(t);this.fragCurrent=t,(this.audioSwitch||i===u.FragmentState.NOT_LOADED||i===u.FragmentState.PARTIAL)&&("initSegment"===t.sn?this._loadInitSegment(t):n.live&&!Object(o.isFiniteNumber)(this.initPTS[t.cc])?(this.log("Waiting for video PTS in continuity counter "+t.cc+" of live stream before loading audio fragment "+t.sn+" of level "+this.trackId),this.state=s.State.WAITING_INIT_PTS):(this.startFragRequested=!0,e.prototype.loadFragment.call(this,t,n,r)))},n.completeAudioSwitch=function(){var t=this.hls,n=this.media,r=this.trackId;n&&(this.log("Switching audio track : flushing all audio"),e.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.audioSwitch=!1,t.trigger(l.Events.AUDIO_TRACK_SWITCHED,{id:r})},t}(s.default);t.default=T},"./src/controller/audio-track-controller.ts":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,o(e,t)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.r(t);var s=n("./src/events.ts"),l=n("./src/errors.ts"),d=n("./src/controller/base-playlist-controller.ts"),u=n("./src/types/loader.ts"),c=function(e){function t(t){var n;return n=e.call(this,t,"[audio-track-controller]")||this,n.tracks=[],n.groupId=null,n.tracksInGroup=[],n.trackId=-1,n.trackName="",n.selectDefaultTrack=!0,n.registerListeners(),n}a(t,e);var n=t.prototype;return n.registerListeners=function(){var e=this.hls;e.on(s.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(s.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(s.Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(s.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(s.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(s.Events.ERROR,this.onError,this)},n.unregisterListeners=function(){var e=this.hls;e.off(s.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(s.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(s.Events.LEVEL_LOADING,this.onLevelLoading,this),e.off(s.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(s.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(s.Events.ERROR,this.onError,this)},n.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,e.prototype.destroy.call(this)},n.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.trackName="",this.selectDefaultTrack=!0},n.onManifestParsed=function(e,t){this.tracks=t.audioTracks||[]},n.onAudioTrackLoaded=function(e,t){var n=t.id,r=t.details,i=this.tracksInGroup[n];if(!i)return void this.warn("Invalid audio track id "+n);var a=i.details;i.details=t.details,this.log("audioTrack "+n+" loaded ["+r.startSN+"-"+r.endSN+"]"),n===this.trackId&&(this.retryCount=0,this.playlistLoaded(n,t,a))},n.onLevelLoading=function(e,t){this.switchLevel(t.level)},n.onLevelSwitching=function(e,t){this.switchLevel(t.level)},n.switchLevel=function(e){var t=this.hls.levels[e];if(null!==t&&void 0!==t&&t.audioGroupIds){var n=t.audioGroupIds[t.urlId];if(this.groupId!==n){this.groupId=n;var r=this.tracks.filter(function(e){return!n||e.groupId===n});this.selectDefaultTrack&&!r.some(function(e){return e.default})&&(this.selectDefaultTrack=!1),this.tracksInGroup=r;var i={audioTracks:r};this.log("Updating audio tracks, "+r.length+' track(s) found in "'+n+'" group-id'),this.hls.trigger(s.Events.AUDIO_TRACKS_UPDATED,i),this.selectInitialTrack()}}},n.onError=function(t,n){e.prototype.onError.call(this,t,n),!n.fatal&&n.context&&n.context.type===u.PlaylistContextType.AUDIO_TRACK&&n.context.id===this.trackId&&n.context.groupId===this.groupId&&this.retryLoadingOrFail(n)},n.setAudioTrack=function(e){var t=this.tracksInGroup;if(e<0||e>=t.length)return void this.warn("Invalid id passed to audio-track controller");this.clearTimer();var n=t[this.trackId];this.log("Now switching to audio-track index "+e);var r=t[e],i=r.id,a=r.groupId,o=void 0===a?"":a,l=r.name,d=r.type,u=r.url;if(this.trackId=e,this.trackName=l,this.selectDefaultTrack=!1,this.hls.trigger(s.Events.AUDIO_TRACK_SWITCHING,{id:i,groupId:o,name:l,type:d,url:u}),!r.details||r.details.live){var c=this.switchParams(r.url,null===n||void 0===n?void 0:n.details);this.loadPlaylist(c)}},n.selectInitialTrack=function(){var e=(this.tracksInGroup,this.trackName),t=this.findTrackId(e)||this.findTrackId();-1!==t?this.setAudioTrack(t):(this.warn("No track found for running audio group-ID: "+this.groupId),this.hls.trigger(s.Events.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))},n.findTrackId=function(e){for(var t=this.tracksInGroup,n=0;n<t.length;n++){var r=t[n];if((!this.selectDefaultTrack||r.default)&&(!e||e===r.name))return r.id}return-1},n.loadPlaylist=function(e){var t=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(t)){var n=t.id,r=t.groupId,i=t.url;if(e)try{i=e.addDirectives(i)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}this.log("loading audio-track playlist for id: "+n),this.clearTimer(),this.hls.trigger(s.Events.AUDIO_TRACK_LOADING,{url:i,id:n,groupId:r,deliveryDirectives:e||null})}},i(t,[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}}]),t}(d.default);t.default=c},"./src/controller/base-playlist-controller.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return l});var r=n("./src/polyfills/number.ts"),i=n("./src/types/level.ts"),a=n("./src/controller/level-helper.ts"),o=n("./src/utils/logger.ts"),s=n("./src/errors.ts"),l=function(){function e(e,t){this.hls=void 0,this.timer=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=o.logger.log.bind(o.logger,t+":"),this.warn=o.logger.warn.bind(o.logger,t+":"),this.hls=e}var t=e.prototype;return t.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},t.onError=function(e,t){t.fatal&&t.type===s.ErrorTypes.NETWORK_ERROR&&this.clearTimer()},t.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},t.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.loadPlaylist()},t.stopLoad=function(){this.canLoad=!1,this.clearTimer()},t.switchParams=function(e,t){var n=null===t||void 0===t?void 0:t.renditionReports;if(n)for(var a=0;a<n.length;a++){var o=n[a],s=""+o.URI;if(s===e.substr(-s.length)){var l=parseInt(o["LAST-MSN"]),d=parseInt(o["LAST-PART"]);if(t&&this.hls.config.lowLatencyMode){var u=Math.min(t.age-t.partTarget,t.targetduration);void 0!==d&&u>t.partTarget&&(d+=1)}if(Object(r.isFiniteNumber)(l))return new i.HlsUrlParameters(l,Object(r.isFiniteNumber)(d)?d:void 0,i.HlsSkip.No)}}},t.loadPlaylist=function(e){},t.shouldLoadTrack=function(e){return this.canLoad&&e&&!!e.url&&(!e.details||e.details.live)},t.playlistLoaded=function(e,t,n){var r=this,i=t.details,o=t.stats,s=o.loading.end?Math.max(0,self.performance.now()-o.loading.end):0;if(i.advancedDateTime=Date.now()-s,i.live||null!==n&&void 0!==n&&n.live){if(i.reloaded(n),n&&this.log("live playlist "+e+" "+(i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:"MISSED")),n&&i.fragments.length>0&&Object(a.mergeDetails)(n,i),!this.canLoad||!i.live)return;var l,d=void 0,u=void 0;if(i.canBlockReload&&i.endSN&&i.advanced){var c=this.hls.config.lowLatencyMode,f=i.lastPartSn,h=i.endSN,p=i.lastPartIndex,v=-1!==p,m=f===h,g=c?0:p;v?(d=m?h+1:f,u=m?g:p+1):d=h+1;var y=i.age,E=y+i.ageHeader,b=Math.min(E-i.partTarget,1.5*i.targetduration);if(b>0){if(n&&b>n.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+n.tuneInGoal+" to: "+b+" with playlist age: "+i.age),b=0;else{var T=Math.floor(b/i.targetduration);if(d+=T,void 0!==u){u+=Math.round(b%i.targetduration/i.partTarget)}this.log("CDN Tune-in age: "+i.ageHeader+"s last advanced "+y.toFixed(2)+"s goal: "+b+" skip sn "+T+" to part "+u)}i.tuneInGoal=b}if(l=this.getDeliveryDirectives(i,t.deliveryDirectives,d,u),c||!m)return void this.loadPlaylist(l)}else l=this.getDeliveryDirectives(i,t.deliveryDirectives,d,u);var w=Object(a.computeReloadInterval)(i,o);void 0!==d&&i.canBlockReload&&(w-=i.partTarget||1),this.log("reload live playlist "+e+" in "+Math.round(w)+" ms"),this.timer=self.setTimeout(function(){return r.loadPlaylist(l)},w)}else this.clearTimer()},t.getDeliveryDirectives=function(e,t,n,r){var a=Object(i.getSkipValue)(e,n);return null!==t&&void 0!==t&&t.skip&&e.deltaUpdateFailed&&(n=t.msn,r=t.part,a=i.HlsSkip.No),new i.HlsUrlParameters(n,r,a)},t.retryLoadingOrFail=function(e){var t=this,n=this.hls.config,r=this.retryCount<n.levelLoadingMaxRetry;if(r){var i;if(this.retryCount++,e.details.indexOf("LoadTimeOut")>-1&&null!==(i=e.context)&&void 0!==i&&i.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+e.details+'"'),this.loadPlaylist();else{var a=Math.min(Math.pow(2,this.retryCount)*n.levelLoadingRetryDelay,n.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout(function(){return t.loadPlaylist()},a),this.warn("retry playlist loading #"+this.retryCount+" in "+a+' ms after "'+e.details+'"')}}else this.warn('cannot recover from error "'+e.details+'"'),this.clearTimer(),e.fatal=!0;return r},e}()},"./src/controller/base-stream-controller.ts":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.r(t),n.d(t,"State",function(){return A}),n.d(t,"default",function(){return L});var l=n("./src/polyfills/number.ts"),d=n("./src/task-loop.ts"),u=n("./src/controller/fragment-tracker.ts"),c=n("./src/utils/buffer-helper.ts"),f=n("./src/utils/logger.ts"),h=n("./src/events.ts"),p=n("./src/errors.ts"),v=n("./src/types/transmuxer.ts"),m=n("./src/utils/mp4-tools.ts"),g=n("./src/utils/discontinuities.ts"),y=n("./src/controller/fragment-finders.ts"),E=n("./src/controller/level-helper.ts"),b=n("./src/loader/fragment-loader.ts"),T=n("./src/crypt/decrypter.ts"),w=n("./src/utils/time-ranges.ts"),S=n("./src/types/loader.ts"),A={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BACKTRACKING:"BACKTRACKING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},L=function(e){function t(t,n,r){var i;return i=e.call(this)||this,i.hls=void 0,i.fragPrevious=null,i.fragCurrent=null,i.fragmentTracker=void 0,i.transmuxer=null,i._state=A.STOPPED,i.media=void 0,i.mediaBuffer=void 0,i.config=void 0,i.bitrateTest=!1,i.lastCurrentTime=0,i.nextLoadPosition=0,i.startPosition=0,i.loadedmetadata=!1,i.fragLoadError=0,i.retryDate=0,i.levels=null,i.fragmentLoader=void 0,i.levelLastLoaded=null,i.startFragRequested=!1,i.decrypter=void 0,i.initPTS=[],i.onvseeking=null,i.onvended=null,i.logPrefix="",i.log=void 0,i.warn=void 0,i.logPrefix=r,i.log=f.logger.log.bind(f.logger,r+":"),i.warn=f.logger.warn.bind(f.logger,r+":"),i.hls=t,i.fragmentLoader=new b.default(t.config),i.fragmentTracker=n,i.config=t.config,i.decrypter=new T.default(t,t.config),t.on(h.Events.KEY_LOADED,i.onKeyLoaded,a(i)),i}o(t,e);var n=t.prototype;return n.doTick=function(){this.onTickEnd()},n.onTickEnd=function(){},n.startLoad=function(e){},n.stopLoad=function(){this.fragmentLoader.abort();var e=this.fragCurrent;e&&this.fragmentTracker.removeFragment(e),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=A.STOPPED},n._streamEnded=function(e,t){var n=this.fragCurrent,r=this.fragmentTracker;if(!t.live&&n&&n.sn>=t.endSN&&!e.nextStart){var i=t.partList;if(null!==i&&void 0!==i&&i.length){var a=i[i.length-1];return c.BufferHelper.isBuffered(this.media,a.start+a.duration/2)}var o=r.getState(n);return o===u.FragmentState.PARTIAL||o===u.FragmentState.OK}return!1},n.onMediaAttached=function(e,t){var n=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),n.addEventListener("seeking",this.onvseeking),n.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.state===A.STOPPED&&this.startLoad(r.startPosition)},n.onMediaDetaching=function(){var e=this.media;null!==e&&void 0!==e&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},n.onMediaSeeking=function(){var e=this.config,t=this.fragCurrent,n=this.media,r=this.mediaBuffer,i=this.state,a=n?n.currentTime:0,o=c.BufferHelper.bufferInfo(r||n,a,e.maxBufferHole);if(this.log("media seeking to "+(Object(l.isFiniteNumber)(a)?a.toFixed(3):a)+", state: "+i),i===A.ENDED)this.resetLoadingState();else if(t&&!o.len){var s=e.maxFragLookUpTolerance,d=t.start-s,u=t.start+t.duration+s,f=a>u;(a<d||f)&&(f&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.loader.abort()),this.resetLoadingState())}n&&(this.lastCurrentTime=a),this.loadedmetadata||o.len||(this.nextLoadPosition=this.startPosition=a),this.tickImmediate()},n.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},n.onKeyLoaded=function(e,t){if(this.state===A.KEY_LOADING&&t.frag===this.fragCurrent&&this.levels){this.state=A.IDLE;var n=this.levels[t.frag.level].details;n&&this.loadFragment(t.frag,n,t.frag.start)}},n.onHandlerDestroying=function(){this.stopLoad(),e.prototype.onHandlerDestroying.call(this)},n.onHandlerDestroyed=function(){this.state=A.STOPPED,this.hls.off(h.Events.KEY_LOADED,this.onKeyLoaded,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.fragmentLoader=this.fragmentTracker=null,e.prototype.onHandlerDestroyed.call(this)},n.loadKey=function(e,t){this.log("Loading key for "+e.sn+" of ["+t.startSN+"-"+t.endSN+"], "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+e.level),this.state=A.KEY_LOADING,this.fragCurrent=e,this.hls.trigger(h.Events.KEY_LOADING,{frag:e})},n.loadFragment=function(e,t,n){this._loadFragForPlayback(e,t,n)},n._loadFragForPlayback=function(e,t,n){var r=this,i=function(t){if(r.fragContextChanged(e))return r.warn("Fragment "+e.sn+(t.part?" p: "+t.part.index:"")+" of level "+e.level+" was dropped during download."),void r.fragmentTracker.removeFragment(e);e.stats.chunkCount++,r._handleFragmentLoadProgress(t)};this._doFragLoad(e,t,n,i).then(function(t){if(t){r.fragLoadError=0;var n=r.state;return r.fragContextChanged(e)?void((n===A.FRAG_LOADING||n===A.BACKTRACKING||!r.fragCurrent&&n===A.PARSING)&&(r.fragmentTracker.removeFragment(e),r.state=A.IDLE)):"payload"in t&&(r.log("Loaded fragment "+e.sn+" of level "+e.level),r.hls.trigger(h.Events.FRAG_LOADED,t),r.state===A.BACKTRACKING)?(r.fragmentTracker.backtrack(e,t),void r.resetFragmentLoading(e)):void r._handleFragmentLoadComplete(t)}}).catch(function(t){r.warn(t),r.resetFragmentLoading(e)})},n.flushMainBuffer=function(e,t,n){if(void 0===n&&(n=null),e-t){var r={startOffset:e,endOffset:t,type:n};this.fragLoadError=0,this.hls.trigger(h.Events.BUFFER_FLUSHING,r)}},n._loadInitSegment=function(e){var t=this;this._doFragLoad(e).then(function(n){if(!n||t.fragContextChanged(e)||!t.levels)throw new Error("init load aborted");return n}).then(function(n){var r=t.hls,i=n.payload,a=e.decryptdata;if(i&&i.byteLength>0&&a&&a.key&&a.iv&&"AES-128"===a.method){var o=self.performance.now();return t.decrypter.webCryptoDecrypt(new Uint8Array(i),a.key.buffer,a.iv.buffer).then(function(t){var i=self.performance.now();return r.trigger(h.Events.FRAG_DECRYPTED,{frag:e,payload:t,stats:{tstart:o,tdecrypt:i}}),n.payload=t,n})}return n}).then(function(n){var r=t.fragCurrent,i=t.hls,a=t.levels;if(!a)throw new Error("init load aborted, missing levels");var o=(a[e.level].details,e.stats);t.state=A.IDLE,t.fragLoadError=0,e.data=new Uint8Array(n.payload),o.parsing.start=o.buffering.start=self.performance.now(),o.parsing.end=o.buffering.end=self.performance.now(),n.frag===r&&i.trigger(h.Events.FRAG_BUFFERED,{stats:o,frag:r,part:null,id:e.type}),t.tick()}).catch(function(n){t.warn(n),t.resetFragmentLoading(e)})},n.fragContextChanged=function(e){var t=this.fragCurrent;return!e||!t||e.level!==t.level||e.sn!==t.sn||e.urlId!==t.urlId},n.fragBufferedComplete=function(e,t){var n=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+e.type+" sn: "+e.sn+(t?" part: "+t.index:"")+" of "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+e.level+" "+w.default.toString(c.BufferHelper.getBuffered(n))),this.state=A.IDLE,this.tick()},n._handleFragmentLoadComplete=function(e){var t=this.transmuxer;if(t){var n=e.frag,r=e.part,i=e.partsLoaded,a=!i||0===i.length||i.some(function(e){return!e}),o=new v.ChunkMetadata(n.level,n.sn,n.stats.chunkCount+1,0,r?r.index:-1,!a);t.flush(o)}},n._handleFragmentLoadProgress=function(e){},n._doFragLoad=function(e,t,n,r){var i=this;if(void 0===n&&(n=null),!this.levels)throw new Error("frag load aborted, missing levels");if(n=Math.max(e.start,n||0),this.config.lowLatencyMode&&t){var a=t.partList;if(a&&r){n>e.end&&t.fragmentHint&&(e=t.fragmentHint);var o=this.getNextPart(a,e,n);if(o>-1){var s=a[o];return this.log("Loading part sn: "+e.sn+" p: "+s.index+" cc: "+e.cc+" of playlist ["+t.startSN+"-"+t.endSN+"] parts [0-"+o+"-"+(a.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+e.level+", target: "+parseFloat(n.toFixed(3))),this.nextLoadPosition=s.start+s.duration,this.state=A.FRAG_LOADING,this.hls.trigger(h.Events.FRAG_LOADING,{frag:e,part:a[o],targetBufferTime:n}),this.doFragPartsLoad(e,a,o,r).catch(function(e){return i.handleFragLoadError(e)})}if(!e.url||this.loadedEndOfParts(a,n))return Promise.resolve(null)}}return this.log("Loading fragment "+e.sn+" cc: "+e.cc+" "+(t?"of ["+t.startSN+"-"+t.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+e.level+", target: "+parseFloat(n.toFixed(3))),Object(l.isFiniteNumber)(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=A.FRAG_LOADING,this.hls.trigger(h.Events.FRAG_LOADING,{frag:e,targetBufferTime:n}),this.fragmentLoader.load(e,r).catch(function(e){return i.handleFragLoadError(e)})},n.doFragPartsLoad=function(e,t,n,r){var i=this;return new Promise(function(a,o){var s=[];!function n(l){var d=t[l];i.fragmentLoader.loadPart(e,d,r).then(function(r){s[d.index]=r;var o=r.part;i.hls.trigger(h.Events.FRAG_LOADED,r);var u=t[l+1];if(!u||u.fragment!==e)return a({frag:e,part:o,partsLoaded:s});n(l+1)}).catch(o)}(n)})},n.handleFragLoadError=function(e){var t=e.data;return t&&t.details===p.ErrorDetails.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(h.Events.ERROR,t),null},n._handleTransmuxerFlush=function(e){var t=this.getCurrentContext(e);if(!t||this.state!==A.PARSING)return void(this.fragCurrent||(this.state=A.IDLE));var n=t.frag,r=t.part,i=t.level,a=self.performance.now();n.stats.parsing.end=a,r&&(r.stats.parsing.end=a),this.updateLevelTiming(n,r,i,e.partial)},n.getCurrentContext=function(e){var t=this.levels,n=e.level,r=e.sn,i=e.part;if(!t||!t[n])return this.warn("Levels object was unset while buffering fragment "+r+" of level "+n+". The current chunk will not be buffered."),null;var a=t[n],o=i>-1?Object(E.getPartWith)(a,r,i):null,s=o?o.fragment:Object(E.getFragmentWithSN)(a,r,this.fragCurrent);return s?{frag:s,part:o,level:a}:null},n.bufferFragmentData=function(e,t,n,r){if(e&&this.state===A.PARSING){var i=e.data1,a=e.data2,o=i;if(i&&a&&(o=Object(m.appendUint8Array)(i,a)),o&&o.length){var s={type:e.type,frag:t,part:n,chunkMeta:r,parent:t.type,data:o};this.hls.trigger(h.Events.BUFFER_APPENDING,s),e.dropped&&e.independent&&!n&&this.flushBufferGap(t)}}},n.flushBufferGap=function(e){var t=this.media;if(t){if(!c.BufferHelper.isBuffered(t,t.currentTime))return void this.flushMainBuffer(0,e.start);var n=t.currentTime,r=c.BufferHelper.bufferInfo(t,n,0),i=e.duration,a=Math.min(2*this.config.maxFragLookUpTolerance,.25*i),o=Math.max(Math.min(e.start-a,r.end-a),n+a);e.start-o>a&&this.flushMainBuffer(o,e.start)}},n.getFwdBufferInfo=function(e,t){var n=this.config,r=this.getLoadPosition();if(!Object(l.isFiniteNumber)(r))return null;var i=c.BufferHelper.bufferInfo(e,r,n.maxBufferHole);if(0===i.len&&void 0!==i.nextStart){var a=this.fragmentTracker.getBufferedFrag(r,t);if(a&&i.nextStart<a.end)return c.BufferHelper.bufferInfo(e,r,Math.max(i.nextStart,n.maxBufferHole))}return i},n.getMaxBufferLength=function(e){var t,n=this.config;return t=e?Math.max(8*n.maxBufferSize/e,n.maxBufferLength):n.maxBufferLength,Math.min(t,n.maxMaxBufferLength)},n.reduceMaxBufferLength=function(e){var t=this.config,n=e||t.maxBufferLength;return t.maxMaxBufferLength>=n&&(t.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},n.getNextFragment=function(e,t){var n,r,i=t.fragments,a=i.length;if(!a)return null;var o,s=this.config,l=i[0].start;if(t.live){var d=s.initialLiveManifestSize;if(a<d)return this.warn("Not enough fragments to start playback (have: "+a+", need: "+d+")"),null;t.PTSKnown||this.startFragRequested||-1!==this.startPosition||(o=this.getInitialLiveFragment(t,i),this.startPosition=o?this.hls.liveSyncPosition||o.start:e)}else e<=l&&(o=i[0]);if(!o){var u=s.lowLatencyMode?t.partEnd:t.fragmentEnd;o=this.getFragmentAtPosition(e,u,t)}return null===(n=o)||void 0===n||!n.initSegment||null!==(r=o)&&void 0!==r&&r.initSegment.data||this.bitrateTest||(o=o.initSegment),o},n.getNextPart=function(e,t,n){for(var r=-1,i=!1,a=!0,o=0,s=e.length;o<s;o++){var l=e[o];if(a=a&&!l.independent,r>-1&&n<l.start)break;var d=l.loaded;!d&&(i||l.independent||a)&&l.fragment===t&&(r=o),i=d}return r},n.loadedEndOfParts=function(e,t){var n=e[e.length-1];return n&&t>n.start&&n.loaded},n.getInitialLiveFragment=function(e,t){var n=this.fragPrevious,r=null;if(n){if(e.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+n.programDateTime),r=Object(y.findFragmentByPDT)(t,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!r){var i=n.sn+1;if(i>=e.startSN&&i<=e.endSN){var a=t[i-e.startSN];n.cc===a.cc&&(r=a,this.log("Live playlist, switching playlist, load frag with next SN: "+r.sn))}r||(r=Object(y.findFragWithCC)(t,n.cc))&&this.log("Live playlist, switching playlist, load frag with same CC: "+r.sn)}}else{var o=this.hls.liveSyncPosition;null!==o&&(r=this.getFragmentAtPosition(o,this.bitrateTest?e.fragmentEnd:e.edge,e))}return r},n.getFragmentAtPosition=function(e,t,n){var r=this.config,i=this.fragPrevious,a=n.fragments,o=n.endSN,s=n.fragmentHint,l=r.maxFragLookUpTolerance,d=!!(r.lowLatencyMode&&n.partList&&s);d&&s&&!this.bitrateTest&&(a=a.concat(s),o=s.sn);var c;if(e<t){var f=e>t-l?0:l;c=Object(y.findFragmentByPTS)(i,a,e,f)}else c=a[a.length-1];if(c){var h=c.sn-n.startSN,p=i&&c.level===i.level,v=a[h+1];if(this.fragmentTracker.getState(c)===u.FragmentState.BACKTRACKED){c=null;for(var m=h;a[m]&&this.fragmentTracker.getState(a[m])===u.FragmentState.BACKTRACKED;)c=i?a[m--]:a[--m];c||(c=v)}else i&&c.sn===i.sn&&!d&&p&&(c.sn<o&&this.fragmentTracker.getState(v)!==u.FragmentState.OK?(this.log("SN "+c.sn+" just loaded, load next one: "+v.sn),c=v):c=null)}return c},n.synchronizeToLiveEdge=function(e){var t=this.config,n=this.media;if(n){var r=this.hls.liveSyncPosition,i=n.currentTime,a=e.fragments[0].start,o=e.edge,s=i>=a-t.maxFragLookUpTolerance&&i<=o;if(null!==r&&n.duration>r&&(i<r||!s)){var l=void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!s&&n.readyState<4||i<o-l)&&(this.loadedmetadata||(this.nextLoadPosition=r),n.readyState&&(this.warn("Playback: "+i.toFixed(3)+" is located too far from the end of live sliding playlist: "+o+", reset currentTime to : "+r.toFixed(3)),n.currentTime=r))}}},n.alignPlaylists=function(e,t){var n=this.levels,r=this.levelLastLoaded,i=this.fragPrevious,a=null!==r?n[r]:null,o=e.fragments.length;if(!o)return this.warn("No fragments in live playlist"),0;var s=e.fragments[0].start,d=!t,u=e.alignedSliding&&Object(l.isFiniteNumber)(s);if(d||!u&&!s){Object(g.alignStream)(i,a,e);var c=e.fragments[0].start;return this.log("Live playlist sliding: "+c.toFixed(2)+" start-sn: "+(t?t.startSN:"na")+"->"+e.startSN+" prev-sn: "+(i?i.sn:"na")+" fragments: "+o),c}return s},n.waitForCdnTuneIn=function(e){return e.live&&e.canBlockReload&&e.tuneInGoal>Math.max(e.partHoldBack,3*e.partTarget)},n.setStartPosition=function(e,t){var n=this.startPosition;if(n<t&&(n=-1),-1===n||-1===this.lastCurrentTime){var r=e.startTimeOffset;Object(l.isFiniteNumber)(r)?(n=t+r,r<0&&(n+=e.totalduration),n=Math.min(Math.max(t,n),t+e.totalduration),this.log("Start time offset "+r+" found in playlist, adjust startPosition to "+n),this.startPosition=n):e.live?n=this.hls.liveSyncPosition||t:this.startPosition=n=0,this.lastCurrentTime=n}this.nextLoadPosition=n},n.getLoadPosition=function(){var e=this.media,t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t},n.handleFragLoadAborted=function(e,t){this.transmuxer&&"initSegment"!==e.sn&&e.stats.aborted&&(this.warn("Fragment "+e.sn+(t?" part"+t.index:"")+" of level "+e.level+" was aborted"),this.resetFragmentLoading(e))},n.resetFragmentLoading=function(e){this.fragCurrent&&this.fragContextChanged(e)||(this.state=A.IDLE)},n.onFragmentOrKeyLoadError=function(e,t){if(!t.fatal){var n=t.frag;if(n&&n.type===e){var r=(this.fragCurrent,this.config);if(this.fragLoadError+1<=r.fragLoadingMaxRetry){if(this.resetLiveStartWhenNotLoaded(n.level))return;var i=Math.min(Math.pow(2,this.fragLoadError)*r.fragLoadingRetryDelay,r.fragLoadingMaxRetryTimeout);this.warn("Fragment "+n.sn+" of "+e+" "+n.level+" failed to load, retrying in "+i+"ms"),this.retryDate=self.performance.now()+i,this.fragLoadError++,this.state=A.FRAG_LOADING_WAITING_RETRY}else t.levelRetry?(e===S.PlaylistLevelType.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=A.IDLE):(f.logger.error(t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.hls.stopLoad(),this.state=A.ERROR)}}},n.afterBufferFlushed=function(e,t,n){if(e){var r=c.BufferHelper.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,r,n),this.state===A.ENDED&&this.resetLoadingState()}},n.resetLoadingState=function(){this.fragCurrent=null,this.fragPrevious=null,this.state=A.IDLE},n.resetLiveStartWhenNotLoaded=function(e){if(!this.loadedmetadata){this.startFragRequested=!1;var t=this.levels?this.levels[e].details:null;if(null!==t&&void 0!==t&&t.live)return this.startPosition=-1,this.setStartPosition(t,0),this.resetLoadingState(),!0;this.nextLoadPosition=this.startPosition}return!1},n.updateLevelTiming=function(e,t,n,r){var i=this,a=n.details;Object.keys(e.elementaryStreams).reduce(function(t,o){var s=e.elementaryStreams[o];if(s){var l=s.endPTS-s.startPTS;if(l<=0)return i.warn("Could not parse fragment "+e.sn+" "+o+" duration reliably ("+l+") resetting transmuxer to fallback to playlist timing"),i.resetTransmuxer(),t||!1;var d=r?0:Object(E.updateFragPTSDTS)(a,e,s.startPTS,s.endPTS,s.startDTS,s.endDTS);return i.hls.trigger(h.Events.LEVEL_PTS_UPDATED,{details:a,level:n,drift:d,type:o,frag:e,start:s.startPTS,end:s.endPTS}),!0}return t},!1)?(this.state=A.PARSED,this.hls.trigger(h.Events.FRAG_PARSED,{frag:e,part:t})):this.resetLoadingState()},n.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},i(t,[{key:"state",get:function(){return this._state},set:function(e){var t=this._state;t!==e&&(this._state=e,this.log(t+"->"+e))}}]),t}(d.default)},"./src/controller/buffer-controller.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return h});var r=n("./src/polyfills/number.ts"),i=n("./src/events.ts"),a=n("./src/utils/logger.ts"),o=n("./src/errors.ts"),s=n("./src/utils/buffer-helper.ts"),l=n("./src/utils/mediasource-helper.ts"),d=n("./src/loader/fragment.ts"),u=n("./src/controller/buffer-operation-queue.ts"),c=Object(l.getMediaSource)(),f=/([ha]vc.)(?:\.[^.,]+)+/,h=function(){function e(e){var t=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var e=t.hls,n=t.media,r=t.mediaSource;a.logger.log("[buffer-controller]: Media source opened"),n&&(t.updateMediaElementDuration(),e.trigger(i.Events.MEDIA_ATTACHED,{media:n})),r&&r.removeEventListener("sourceopen",t._onMediaSourceOpen),t.checkPendingTracks()},this._onMediaSourceClose=function(){a.logger.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){a.logger.log("[buffer-controller]: Media source ended")},this.hls=e,this._initSourceBuffer(),this.registerListeners()}var t=e.prototype;return t.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},t.destroy=function(){this.unregisterListeners(),this.details=null},t.registerListeners=function(){var e=this.hls;e.on(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(i.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(i.Events.BUFFER_RESET,this.onBufferReset,this),e.on(i.Events.BUFFER_APPENDING,this.onBufferAppending,this),e.on(i.Events.BUFFER_CODECS,this.onBufferCodecs,this),e.on(i.Events.BUFFER_EOS,this.onBufferEos,this),e.on(i.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(i.Events.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(i.Events.FRAG_PARSED,this.onFragParsed,this),e.on(i.Events.FRAG_CHANGED,this.onFragChanged,this)},t.unregisterListeners=function(){var e=this.hls;e.off(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(i.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(i.Events.BUFFER_RESET,this.onBufferReset,this),e.off(i.Events.BUFFER_APPENDING,this.onBufferAppending,this),e.off(i.Events.BUFFER_CODECS,this.onBufferCodecs,this),e.off(i.Events.BUFFER_EOS,this.onBufferEos,this),e.off(i.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(i.Events.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(i.Events.FRAG_PARSED,this.onFragParsed,this),e.off(i.Events.FRAG_CHANGED,this.onFragChanged,this)},t._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new u.default(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]}},t.onManifestParsed=function(e,t){var n=2;(t.audio&&!t.video||!t.altAudio)&&(n=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=n,this.details=null,a.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},t.onMediaAttaching=function(e,t){var n=this.media=t.media;if(n&&c){var r=this.mediaSource=new c;r.addEventListener("sourceopen",this._onMediaSourceOpen),r.addEventListener("sourceended",this._onMediaSourceEnded),r.addEventListener("sourceclose",this._onMediaSourceClose),n.src=self.URL.createObjectURL(r),this._objectUrl=n.src}},t.onMediaDetaching=function(){var e=this.media,t=this.mediaSource,n=this._objectUrl;if(t){if(a.logger.log("[buffer-controller]: media source detaching"),"open"===t.readyState)try{t.endOfStream()}catch(e){a.logger.warn("[buffer-controller]: onMediaDetaching: "+e.message+" while calling endOfStream")}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),e&&(n&&self.URL.revokeObjectURL(n),e.src===n?(e.removeAttribute("src"),e.load()):a.logger.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(i.Events.MEDIA_DETACHED,void 0)},t.onBufferReset=function(){var e=this;this.getSourceBufferTypes().forEach(function(t){var n=e.sourceBuffer[t];try{n&&(e.removeBufferListeners(t),e.mediaSource&&e.mediaSource.removeSourceBuffer(n),e.sourceBuffer[t]=void 0)}catch(e){a.logger.warn("[buffer-controller]: Failed to reset the "+t+" buffer",e)}}),this._initSourceBuffer()},t.onBufferCodecs=function(e,t){var n=this,r=this.getSourceBufferTypes().length;Object.keys(t).forEach(function(e){if(r){var i=n.tracks[e];if(i&&"function"==typeof i.buffer.changeType){var a=t[e],o=a.codec,s=a.levelCodec,l=a.container;if((i.levelCodec||i.codec).replace(f,"$1")!==(s||o).replace(f,"$1")){var d=l+";codecs="+(s||o);n.appendChangeType(e,d)}}}else n.pendingTracks[e]=t[e]}),r||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},t.appendChangeType=function(e,t){var n=this,r=this.operationQueue,i={execute:function(){var i=n.sourceBuffer[e];i&&(a.logger.log("[buffer-controller]: changing "+e+" sourceBuffer type to "+t),i.changeType(t)),r.shiftAndExecuteNext(e)},onStart:function(){},onComplete:function(){},onError:function(t){a.logger.warn("[buffer-controller]: Failed to change "+e+" SourceBuffer type",t)}};r.append(i,e)},t.onBufferAppending=function(e,t){var n=this,r=this.hls,l=this.operationQueue,d=this.tracks,u=t.data,c=t.type,f=t.frag,h=t.part,p=t.chunkMeta,v=p.buffering[c],m=self.performance.now();v.start=m;var g=f.stats.buffering,y=h?h.stats.buffering:null;0===g.start&&(g.start=m),y&&0===y.start&&(y.start=m);var E=d.audio,b="audio"===c&&1===p.id&&"audio/mpeg"===(null===E||void 0===E?void 0:E.container),T={execute:function(){if(v.executeStart=self.performance.now(),b){var e=n.sourceBuffer[c];if(e){var t=f.start-e.timestampOffset;Math.abs(t)>=.1&&(a.logger.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+f.start+" (delta: "+t+") sn: "+f.sn+")"),e.timestampOffset=f.start)}}n.appendExecutor(u,c)},onStart:function(){},onComplete:function(){var e=self.performance.now();v.executeEnd=v.end=e,0===g.first&&(g.first=e),y&&0===y.first&&(y.first=e);var t=n.sourceBuffer,r={};for(var a in t)r[a]=s.BufferHelper.getBuffered(t[a]);n.appendError=0,n.hls.trigger(i.Events.BUFFER_APPENDED,{type:c,frag:f,part:h,chunkMeta:p,parent:f.type,timeRanges:r})},onError:function(e){a.logger.error("[buffer-controller]: Error encountered while trying to append to the "+c+" SourceBuffer",e);var t={type:o.ErrorTypes.MEDIA_ERROR,parent:f.type,details:o.ErrorDetails.BUFFER_APPEND_ERROR,err:e,fatal:!1};e.code===DOMException.QUOTA_EXCEEDED_ERR?t.details=o.ErrorDetails.BUFFER_FULL_ERROR:(n.appendError++,t.details=o.ErrorDetails.BUFFER_APPEND_ERROR,n.appendError>r.config.appendErrorMaxRetry&&(a.logger.error("[buffer-controller]: Failed "+r.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),t.fatal=!0)),r.trigger(i.Events.ERROR,t)}};l.append(T,c)},t.onBufferFlushing=function(e,t){var n=this,r=this.operationQueue,o=function(e){return{execute:n.removeExecutor.bind(n,e,t.startOffset,t.endOffset),onStart:function(){},onComplete:function(){n.hls.trigger(i.Events.BUFFER_FLUSHED,{type:e})},onError:function(t){a.logger.warn("[buffer-controller]: Failed to remove from "+e+" SourceBuffer",t)}}};t.type?r.append(o(t.type),t.type):this.getSourceBufferTypes().forEach(function(e){r.append(o(e),e)})},t.onFragParsed=function(e,t){var n=this,r=t.frag,o=t.part,s=[],l=o?o.elementaryStreams:r.elementaryStreams;l[d.ElementaryStreamTypes.AUDIOVIDEO]?s.push("audiovideo"):(l[d.ElementaryStreamTypes.AUDIO]&&s.push("audio"),l[d.ElementaryStreamTypes.VIDEO]&&s.push("video"));var u=function(){var e=self.performance.now();r.stats.buffering.end=e,o&&(o.stats.buffering.end=e);var t=o?o.stats:r.stats;n.hls.trigger(i.Events.FRAG_BUFFERED,{frag:r,part:o,stats:t,id:r.type})};0===s.length&&a.logger.warn("Fragments must have at least one ElementaryStreamType set. type: "+r.type+" level: "+r.level+" sn: "+r.sn),this.blockBuffers(u,s)},t.onFragChanged=function(e,t){this.flushBackBuffer()},t.onBufferEos=function(e,t){var n=this;this.getSourceBufferTypes().reduce(function(e,r){var i=n.sourceBuffer[r];return t.type&&t.type!==r||i&&!i.ended&&(i.ended=!0,a.logger.log("[buffer-controller]: "+r+" sourceBuffer now EOS")),e&&!(i&&!i.ended)},!0)&&this.blockBuffers(function(){var e=n.mediaSource;e&&"open"===e.readyState&&e.endOfStream()})},t.onLevelUpdated=function(e,t){var n=t.details;n.fragments.length&&(this.details=n,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},t.flushBackBuffer=function(){var e=this.hls,t=this.details,n=this.media,a=this.sourceBuffer;if(n&&null!==t){var o=this.getSourceBufferTypes();if(o.length){var l=t.live&&null!==e.config.liveBackBufferLength?e.config.liveBackBufferLength:e.config.backBufferLength;if(Object(r.isFiniteNumber)(l)&&!(l<0)){var d=n.currentTime,u=t.levelTargetDuration,c=Math.max(l,u),f=Math.floor(d/u)*u-c;o.forEach(function(n){var r=a[n];if(r){var o=s.BufferHelper.getBuffered(r);o.length>0&&f>o.start(0)&&(e.trigger(i.Events.BACK_BUFFER_REACHED,{bufferEnd:f}),t.live&&e.trigger(i.Events.LIVE_BACK_BUFFER_REACHED,{bufferEnd:f}),e.trigger(i.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:f,type:n}))}})}}}},t.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState){var e=this.details,t=this.hls,n=this.media,i=this.mediaSource,o=e.fragments[0].start+e.totalduration,s=n.duration,l=Object(r.isFiniteNumber)(i.duration)?i.duration:0;e.live&&t.config.liveDurationInfinity?(a.logger.log("[buffer-controller]: Media Source duration is set to Infinity"),i.duration=1/0,this.updateSeekableRange(e)):(o>l&&o>s||!Object(r.isFiniteNumber)(s))&&(a.logger.log("[buffer-controller]: Updating Media Source duration to "+o.toFixed(3)),i.duration=o)}},t.updateSeekableRange=function(e){var t=this.mediaSource,n=e.fragments;if(n.length&&e.live&&null!==t&&void 0!==t&&t.setLiveSeekableRange){var r=Math.max(0,n[0].start),i=Math.max(r,r+e.totalduration);t.setLiveSeekableRange(r,i)}},t.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.operationQueue,n=this.pendingTracks,r=Object.keys(n).length;if(r&&!e||2===r){this.createSourceBuffers(n),this.pendingTracks={};var a=this.getSourceBufferTypes();if(0===a.length)return void this.hls.trigger(i.Events.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});a.forEach(function(e){t.executeNext(e)})}},t.createSourceBuffers=function(e){var t=this.sourceBuffer,n=this.mediaSource;if(!n)throw Error("createSourceBuffers called when mediaSource was null");var r=0;for(var s in e)if(!t[s]){var l=e[s];if(!l)throw Error("source buffer exists for track "+s+", however track does not");var d=l.levelCodec||l.codec,u=l.container+";codecs="+d;a.logger.log("[buffer-controller]: creating sourceBuffer("+u+")");try{var c=t[s]=n.addSourceBuffer(u),f=s;this.addBufferListener(f,"updatestart",this._onSBUpdateStart),this.addBufferListener(f,"updateend",this._onSBUpdateEnd),this.addBufferListener(f,"error",this._onSBUpdateError),this.tracks[s]={buffer:c,codec:d,container:l.container,levelCodec:l.levelCodec,id:l.id},r++}catch(e){a.logger.error("[buffer-controller]: error while trying to add sourceBuffer: "+e.message),this.hls.trigger(i.Events.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:e,mimeType:u})}}r&&this.hls.trigger(i.Events.BUFFER_CREATED,{tracks:this.tracks})},t._onSBUpdateStart=function(e){this.operationQueue.current(e).onStart()},t._onSBUpdateEnd=function(e){var t=this.operationQueue;t.current(e).onComplete(),t.shiftAndExecuteNext(e)},t._onSBUpdateError=function(e,t){a.logger.error("[buffer-controller]: "+e+" SourceBuffer error",t),this.hls.trigger(i.Events.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1});var n=this.operationQueue.current(e);n&&n.onError(t)},t.removeExecutor=function(e,t,n){var i=this.media,o=this.mediaSource,s=this.operationQueue,l=this.sourceBuffer,d=l[e];if(!i||!o||!d)return a.logger.warn("[buffer-controller]: Attempting to remove from the "+e+" SourceBuffer, but it does not exist"),void s.shiftAndExecuteNext(e);var u=Object(r.isFiniteNumber)(i.duration)?i.duration:1/0,c=Object(r.isFiniteNumber)(o.duration)?o.duration:1/0,f=Math.max(0,t),h=Math.min(n,u,c);h>f?(a.logger.log("[buffer-controller]: Removing ["+f+","+h+"] from the "+e+" SourceBuffer"),d.remove(f,h)):s.shiftAndExecuteNext(e)},t.appendExecutor=function(e,t){var n=this.operationQueue,r=this.sourceBuffer,i=r[t];if(!i)return a.logger.warn("[buffer-controller]: Attempting to append to the "+t+" SourceBuffer, but it does not exist"),void n.shiftAndExecuteNext(t);i.ended=!1,i.appendBuffer(e)},t.blockBuffers=function(e,t){var n=this;if(void 0===t&&(t=this.getSourceBufferTypes()),!t.length)return a.logger.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve(e);var r=this.operationQueue,i=t.map(function(e){return r.appendBlocker(e)});Promise.all(i).then(function(){e(),t.forEach(function(e){var t=n.sourceBuffer[e];t&&t.updating||r.shiftAndExecuteNext(e)})})},t.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},t.addBufferListener=function(e,t,n){var r=this.sourceBuffer[e];if(r){var i=n.bind(this,e);this.listeners[e].push({event:t,listener:i}),r.addEventListener(t,i)}},t.removeBufferListeners=function(e){var t=this.sourceBuffer[e];t&&this.listeners[e].forEach(function(e){t.removeEventListener(e.event,e.listener)})},e}()},"./src/controller/buffer-operation-queue.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return i});var r=n("./src/utils/logger.ts"),i=function(){function e(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}var t=e.prototype;return t.append=function(e,t){var n=this.queues[t];n.push(e),1===n.length&&this.buffers[t]&&this.executeNext(t)},t.insertAbort=function(e,t){this.queues[t].unshift(e),this.executeNext(t)},t.appendBlocker=function(e){var t,n=new Promise(function(e){t=e}),r={execute:t,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(r,e),n},t.executeNext=function(e){var t=this.buffers,n=this.queues,i=t[e],a=n[e];if(a.length){var o=a[0];try{o.execute()}catch(t){r.logger.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),o.onError(t),i&&i.updating||(a.shift(),this.executeNext(e))}}},t.shiftAndExecuteNext=function(e){this.queues[e].shift(),this.executeNext(e)},t.current=function(e){return this.queues[e][0]},e}()},"./src/controller/cap-level-controller.ts":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.r(t);var a=n("./src/events.ts"),o=function(){function e(e){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var t=e.prototype;return t.setStreamController=function(e){this.streamController=e},t.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},t.registerListeners=function(){var e=this.hls;e.on(a.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(a.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(a.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(a.Events.BUFFER_CODECS,this.onBufferCodecs,this),e.on(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},t.unregisterListener=function(){var e=this.hls;e.off(a.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(a.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(a.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(a.Events.BUFFER_CODECS,this.onBufferCodecs,this),e.off(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},t.onFpsDropLevelCapping=function(t,n){e.isLevelAllowed(n.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(n.droppedLevel)},t.onMediaAttaching=function(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null},t.onManifestParsed=function(e,t){var n=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,n.config.capLevelToPlayerSize&&t.video&&this.startCapping()},t.onBufferCodecs=function(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()},t.onMediaDetaching=function(){this.stopCapping()},t.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var e=this.hls.levels;if(e.length){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e.length-1),t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},t.getMaxLevel=function(t){var n=this,r=this.hls.levels;if(!r.length)return-1;var i=r.filter(function(r,i){return e.isLevelAllowed(i,n.restrictedLevels)&&i<=t});return this.clientRect=null,e.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)},t.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},t.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},t.getDimensions=function(){if(this.clientRect)return this.clientRect;var e=this.media,t={width:0,height:0};if(e){var n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,t.width||t.height||(t.width=n.right-n.left||e.width||0,t.height=n.bottom-n.top||e.height||0)}return this.clientRect=t,t},e.isLevelAllowed=function(e,t){return void 0===t&&(t=[]),-1===t.indexOf(e)},e.getMaxLevelByMediaSize=function(e,t,n){if(!e||!e.length)return-1;for(var r=e.length-1,i=0;i<e.length;i+=1){var a=e[i];if((a.width>=t||a.height>=n)&&function(e,t){return!t||(e.width!==t.width||e.height!==t.height)}(a,e[i+1])){r=i;break}}return r},i(e,[{key:"mediaWidth",get:function(){return this.getDimensions().width*e.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*e.contentScaleFactor}}],[{key:"contentScaleFactor",get:function(){var e=1;try{e=self.devicePixelRatio}catch(e){}return e}}]),e}();t.default=o},"./src/controller/cmcd-controller.ts":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=o(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}n.r(t),n.d(t,"default",function(){return h});var d=n("./src/events.ts"),u=n("./src/types/cmcd.ts"),c=n("./src/utils/buffer-helper.ts"),f=n("./src/utils/logger.ts"),h=function(){function e(t){var n=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){n.initialized&&(n.starved=!0),n.buffering=!0},this.onPlaying=function(){n.initialized||(n.initialized=!0),n.buffering=!1},this.applyPlaylistData=function(e){try{n.apply(e,{ot:u.CMCDObjectType.MANIFEST,su:!n.initialized})}catch(e){f.logger.warn("Could not generate manifest CMCD data.",e)}},this.applyFragmentData=function(e){try{var t=e.frag,r=n.hls.levels[t.level],i=n.getObjectType(t),a={d:1e3*t.duration,ot:i};i!==u.CMCDObjectType.VIDEO&&i!==u.CMCDObjectType.AUDIO&&i!=u.CMCDObjectType.MUXED||(a.br=r.bitrate/1e3,a.tb=n.getTopBandwidth(i)/1e3,a.bl=n.getBufferLength(i)),n.apply(e,a)}catch(e){f.logger.warn("Could not generate segment CMCD data.",e)}},this.hls=t;var r=this.config=t.config,i=r.cmcd;null!=i&&(r.pLoader=this.createPlaylistLoader(),r.fLoader=this.createFragmentLoader(),this.sid=i.sessionId||e.uuid(),this.cid=i.contentId,this.useHeaders=!0===i.useHeaders,this.registerListeners())}var t=e.prototype;return t.registerListeners=function(){var e=this.hls;e.on(d.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(d.Events.MEDIA_DETACHED,this.onMediaDetached,this),e.on(d.Events.BUFFER_CREATED,this.onBufferCreated,this)},t.unregisterListeners=function(){var e=this.hls;e.off(d.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(d.Events.MEDIA_DETACHED,this.onMediaDetached,this),e.off(d.Events.BUFFER_CREATED,this.onBufferCreated,this),this.onMediaDetached()},t.destroy=function(){this.unregisterListeners(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},t.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},t.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},t.onBufferCreated=function(e,t){var n,r;this.audioBuffer=null===(n=t.tracks.audio)||void 0===n?void 0:n.buffer,this.videoBuffer=null===(r=t.tracks.video)||void 0===r?void 0:r.buffer},t.createData=function(){var e;return{v:u.CMCDVersion,sf:u.CMCDStreamingFormat.HLS,sid:this.sid,cid:this.cid,pr:null===(e=this.media)||void 0===e?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},t.apply=function(t,n){void 0===n&&(n={}),l(n,this.createData());var r=n.ot===u.CMCDObjectType.INIT||n.ot===u.CMCDObjectType.VIDEO||n.ot===u.CMCDObjectType.MUXED;if(this.starved&&r&&(n.bs=!0,n.su=!0,this.starved=!1),null==n.su&&(n.su=this.buffering),this.useHeaders){var i=e.toHeaders(n);if(!Object.keys(i).length)return;t.headers||(t.headers={}),l(t.headers,i)}else{var a=e.toQuery(n);if(!a)return;t.url=e.appendQueryToUri(t.url,a)}},t.getObjectType=function(e){var t=e.type;return"subtitle"===t?u.CMCDObjectType.TIMED_TEXT:"initSegment"===e.sn?u.CMCDObjectType.INIT:"audio"===t?u.CMCDObjectType.AUDIO:"main"===t?this.hls.audioTracks.length?u.CMCDObjectType.VIDEO:u.CMCDObjectType.MUXED:void 0},t.getTopBandwidth=function(e){var t,n=0,r=this.hls;if(e===u.CMCDObjectType.AUDIO)t=r.audioTracks;else{var i=r.maxAutoLevel,o=i>-1?i+1:r.levels.length;t=r.levels.slice(0,o)}for(var s,l=a(t);!(s=l()).done;){var d=s.value;d.bitrate>n&&(n=d.bitrate)}return n>0?n:NaN},t.getBufferLength=function(e){var t=this.hls.media,n=e===u.CMCDObjectType.AUDIO?this.audioBuffer:this.videoBuffer;return n&&t?1e3*c.BufferHelper.bufferInfo(n,t.currentTime,this.config.maxBufferHole).len:NaN},t.createPlaylistLoader=function(){var e=this.config.pLoader,t=this.applyPlaylistData,n=e||this.config.loader;return function(){function e(e){this.loader=void 0,this.loader=new n(e)}var r=e.prototype;return r.destroy=function(){this.loader.destroy()},r.abort=function(){this.loader.abort()},r.load=function(e,n,r){t(e),this.loader.load(e,n,r)},i(e,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),e}()},t.createFragmentLoader=function(){var e=this.config.fLoader,t=this.applyFragmentData,n=e||this.config.loader;return function(){function e(e){this.loader=void 0,this.loader=new n(e)}var r=e.prototype;return r.destroy=function(){this.loader.destroy()},r.abort=function(){this.loader.abort()},r.load=function(e,n,r){t(e),this.loader.load(e,n,r)},i(e,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),e}()},e.uuid=function(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)},e.serialize=function(e){for(var t,n=[],r=function(e){return Math.round(e)},i=function(e){return 100*r(e/100)},o=function(e){return encodeURIComponent(e)},s={br:r,d:r,bl:i,dl:i,mtp:i,nor:o,rtp:i,tb:r},l=Object.keys(e||{}).sort(),d=a(l);!(t=d()).done;){var u=t.value,c=e[u];if(function(e){return!Number.isNaN(e)&&null!=e&&""!==e&&!1!==e}(c)&&!("v"===u&&1===c||"pr"==u&&1===c)){var f=s[u];f&&(c=f(c));var h=typeof c,p=void 0;p="ot"===u||"sf"===u||"st"===u?u+"="+c:"boolean"===h?u:"number"===h?u+"="+c:u+"="+JSON.stringify(c),n.push(p)}}return n.join(",")},e.toHeaders=function(t){for(var n=Object.keys(t),r={},i=["Object","Request","Session","Status"],a=[{},{},{},{}],o={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},s=0,l=n;s<l.length;s++){var d=l[s];a[null!=o[d]?o[d]:1][d]=t[d]}for(var u=0;u<a.length;u++){var c=e.serialize(a[u]);c&&(r["CMCD-"+i[u]]=c)}return r},e.toQuery=function(t){return"CMCD="+encodeURIComponent(e.serialize(t))},e.appendQueryToUri=function(e,t){return t?e+(e.includes("?")?"&":"?")+t:e},e}()},"./src/controller/eme-controller.ts":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.r(t);var a=n("./src/events.ts"),o=n("./src/errors.ts"),s=n("./src/utils/logger.ts"),l=n("./src/utils/mediakeys-helper.ts"),d=function(e,t,n){var r={audioCapabilities:[],videoCapabilities:[]};return e.forEach(function(e){r.audioCapabilities.push({contentType:'audio/mp4; codecs="'+e+'"',robustness:n.audioRobustness||""})}),t.forEach(function(e){r.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"',robustness:n.videoRobustness||""})}),[r]},u=function(e,t,n,r){switch(e){case l.KeySystems.WIDEVINE:return d(t,n,r);default:throw new Error("Unknown key-system: "+e)}},c=function(){function e(e){this.hls=void 0,this._widevineLicenseUrl=void 0,this._licenseXhrSetup=void 0,this._licenseResponseCallback=void 0,this._emeEnabled=void 0,this._requestMediaKeySystemAccess=void 0,this._drmSystemOptions=void 0,this._config=void 0,this._mediaKeysList=[],this._media=null,this._hasSetMediaKeys=!1,this._requestLicenseFailureCount=0,this.mediaKeysPromise=null,this._onMediaEncrypted=this.onMediaEncrypted.bind(this),this.hls=e,this._config=e.config,this._widevineLicenseUrl=this._config.widevineLicenseUrl,this._licenseXhrSetup=this._config.licenseXhrSetup,this._licenseResponseCallback=this._config.licenseResponseCallback,this._emeEnabled=this._config.emeEnabled,this._requestMediaKeySystemAccess=this._config.requestMediaKeySystemAccessFunc,this._drmSystemOptions=this._config.drmSystemOptions,this._registerListeners()}var t=e.prototype;return t.destroy=function(){this._unregisterListeners(),this.hls=this._onMediaEncrypted=null,this._requestMediaKeySystemAccess=null},t._registerListeners=function(){this.hls.on(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(a.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(a.Events.MANIFEST_PARSED,this.onManifestParsed,this)},t._unregisterListeners=function(){this.hls.off(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(a.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(a.Events.MANIFEST_PARSED,this.onManifestParsed,this)},t.getLicenseServerUrl=function(e){switch(e){case l.KeySystems.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+e+'"')},t._attemptKeySystemAccess=function(e,t,n){var r=this,i=u(e,t,n,this._drmSystemOptions);s.logger.log("Requesting encrypted media key-system access");var a=this.requestMediaKeySystemAccess(e,i);this.mediaKeysPromise=a.then(function(t){return r._onMediaKeySystemAccessObtained(e,t)}),a.catch(function(t){s.logger.error('Failed to obtain key-system "'+e+'" access:',t)})},t._onMediaKeySystemAccessObtained=function(e,t){var n=this;s.logger.log('Access for key-system "'+e+'" obtained');var r={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:t,mediaKeySystemDomain:e};this._mediaKeysList.push(r);var i=Promise.resolve().then(function(){return t.createMediaKeys()}).then(function(t){return r.mediaKeys=t,s.logger.log('Media-keys created for key-system "'+e+'"'),n._onMediaKeysCreated(),t});return i.catch(function(e){s.logger.error("Failed to create media-keys:",e)}),i},t._onMediaKeysCreated=function(){var e=this;this._mediaKeysList.forEach(function(t){t.mediaKeysSession||(t.mediaKeysSession=t.mediaKeys.createSession(),e._onNewMediaKeySession(t.mediaKeysSession))})},t._onNewMediaKeySession=function(e){var t=this;s.logger.log("New key-system session "+e.sessionId),e.addEventListener("message",function(n){t._onKeySessionMessage(e,n.message)},!1)},t._onKeySessionMessage=function(e,t){s.logger.log("Got EME message event, creating license request"),this._requestLicense(t,function(t){s.logger.log("Received license data (length: "+(t?t.byteLength:t)+"), updating key-session"),e.update(t)})},t.onMediaEncrypted=function(e){var t=this;if(s.logger.log('Media is encrypted using "'+e.initDataType+'" init data type'),!this.mediaKeysPromise)return s.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),void this.hls.trigger(a.Events.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});var n=function(n){t._media&&(t._attemptSetMediaKeys(n),t._generateRequestWithPreferredKeySession(e.initDataType,e.initData))};this.mediaKeysPromise.then(n).catch(n)},t._attemptSetMediaKeys=function(e){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var t=this._mediaKeysList[0];if(!t||!t.mediaKeys)return s.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(a.Events.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});s.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(t.mediaKeys),this._hasSetMediaKeys=!0}},t._generateRequestWithPreferredKeySession=function(e,t){var n=this,r=this._mediaKeysList[0];if(!r)return s.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(a.Events.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(r.mediaKeysSessionInitialized)return void s.logger.warn("Key-Session already initialized but requested again");var i=r.mediaKeysSession;return i?t?(s.logger.log('Generating key-session request for "'+e+'" init data type'),r.mediaKeysSessionInitialized=!0,void i.generateRequest(e,t).then(function(){s.logger.debug("Key-session generation succeeded")}).catch(function(e){s.logger.error("Error generating key-session request:",e),n.hls.trigger(a.Events.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})})):(s.logger.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(a.Events.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0})):(s.logger.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(a.Events.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0}))},t._createLicenseXhr=function(e,t,n){var r=new XMLHttpRequest;r.responseType="arraybuffer",r.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,r,e,t,n);var i=this._licenseXhrSetup;if(i)try{i.call(this.hls,r,e),i=void 0}catch(e){s.logger.error(e)}try{r.readyState||r.open("POST",e,!0),i&&i.call(this.hls,r,e)}catch(e){throw new Error("issue setting up KeySystem license XHR "+e)}return r},t._onLicenseRequestReadyStageChange=function(e,t,n,r){switch(e.readyState){case 4:if(200===e.status){this._requestLicenseFailureCount=0,s.logger.log("License request succeeded");var i=e.response,l=this._licenseResponseCallback;if(l)try{i=l.call(this.hls,e,t)}catch(e){s.logger.error(e)}r(i)}else{if(s.logger.error("License Request XHR failed ("+t+"). Status: "+e.status+" ("+e.statusText+")"),++this._requestLicenseFailureCount>3)return void this.hls.trigger(a.Events.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var d=3-this._requestLicenseFailureCount+1;s.logger.warn("Retrying license request, "+d+" attempts left"),this._requestLicense(n,r)}}},t._generateLicenseRequestChallenge=function(e,t){switch(e.mediaKeySystemDomain){case l.KeySystems.WIDEVINE:return t}throw new Error("unsupported key-system: "+e.mediaKeySystemDomain)},t._requestLicense=function(e,t){s.logger.log("Requesting content license for key-system");var n=this._mediaKeysList[0];if(!n)return s.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(a.Events.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var r=this.getLicenseServerUrl(n.mediaKeySystemDomain),i=this._createLicenseXhr(r,e,t);s.logger.log("Sending license request to URL: "+r);var l=this._generateLicenseRequestChallenge(n,e);i.send(l)}catch(e){s.logger.error("Failure requesting DRM license: "+e),this.hls.trigger(a.Events.ERROR,{type:o.ErrorTypes.KEY_SYSTEM_ERROR,details:o.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},t.onMediaAttached=function(e,t){if(this._emeEnabled){var n=t.media;this._media=n,n.addEventListener("encrypted",this._onMediaEncrypted)}},t.onMediaDetached=function(){var e=this._media,t=this._mediaKeysList;e&&(e.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(t.map(function(e){if(e.mediaKeysSession)return e.mediaKeysSession.close().catch(function(){})})).then(function(){return e.setMediaKeys(null)}).catch(function(){}))},t.onManifestParsed=function(e,t){if(this._emeEnabled){var n=t.levels.map(function(e){return e.audioCodec}).filter(function(e){return!!e}),r=t.levels.map(function(e){return e.videoCodec}).filter(function(e){return!!e});this._attemptKeySystemAccess(l.KeySystems.WIDEVINE,n,r)}},i(e,[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),e}();t.default=c},"./src/controller/fps-controller.ts":function(e,t,n){"use strict";n.r(t);var r=n("./src/events.ts"),i=n("./src/utils/logger.ts"),a=function(){function e(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}var t=e.prototype;return t.setStreamController=function(e){this.streamController=e},t.registerListeners=function(){this.hls.on(r.Events.MEDIA_ATTACHING,this.onMediaAttaching,this)},t.unregisterListeners=function(){this.hls.off(r.Events.MEDIA_ATTACHING,this.onMediaAttaching)},t.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},t.onMediaAttaching=function(e,t){var n=this.hls.config;if(n.capLevelOnFPSDrop){var r=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=r,r&&"function"==typeof r.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}},t.checkFPS=function(e,t,n){var a=performance.now();if(t){if(this.lastTime){var o=a-this.lastTime,s=n-this.lastDroppedFrames,l=t-this.lastDecodedFrames,d=1e3*s/o,u=this.hls;if(u.trigger(r.Events.FPS_DROP,{currentDropped:s,currentDecoded:l,totalDroppedFrames:n}),d>0&&s>u.config.fpsDroppedMonitoringThreshold*l){var c=u.currentLevel;i.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+c),c>0&&(-1===u.autoLevelCapping||u.autoLevelCapping>=c)&&(c-=1,u.trigger(r.Events.FPS_DROP_LEVEL_CAPPING,{level:c,droppedLevel:u.currentLevel}),u.autoLevelCapping=c,this.streamController.nextLevelSwitch())}}this.lastTime=a,this.lastDroppedFrames=n,this.lastDecodedFrames=t}},t.checkFPSInterval=function(){var e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},e}();t.default=a},"./src/controller/fragment-finders.ts":function(e,t,n){"use strict";function r(e,t,n){if(null===t||!Array.isArray(e)||!e.length||!Object(l.isFiniteNumber)(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;n=n||0;for(var r=0;r<e.length;++r){var i=e[r];if(o(t,n,i))return i}return null}function i(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i=null;if(e?i=t[e.sn-t[0].sn+1]||null:0===n&&0===t[0].start&&(i=t[0]),i&&0===a(n,r,i))return i;var o=d.default.search(t,a.bind(null,n,r));return o||i}function a(e,t,n){void 0===e&&(e=0),void 0===t&&(t=0);var r=Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-r<=e?1:n.start-r>e&&n.start?-1:0}function o(e,t,n){var r=1e3*Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return(n.endProgramDateTime||0)-r>e}function s(e,t){return d.default.search(e,function(e){return e.cc<t?1:e.cc>t?-1:0})}n.r(t),n.d(t,"findFragmentByPDT",function(){return r}),n.d(t,"findFragmentByPTS",function(){return i}),n.d(t,"fragmentWithinToleranceTest",function(){return a}),n.d(t,"pdtWithinToleranceTest",function(){return o}),n.d(t,"findFragWithCC",function(){return s});var l=n("./src/polyfills/number.ts"),d=n("./src/utils/binary-search.ts")},"./src/controller/fragment-tracker.ts":function(e,t,n){"use strict";function r(e){var t,n;return e.buffered&&((null===(t=e.range.video)||void 0===t?void 0:t.partial)||(null===(n=e.range.audio)||void 0===n?void 0:n.partial))}function i(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn}n.r(t),n.d(t,"FragmentState",function(){return a}),n.d(t,"FragmentTracker",function(){return l});var a,o=n("./src/events.ts"),s=n("./src/types/loader.ts");!function(e){e.NOT_LOADED="NOT_LOADED",e.BACKTRACKED="BACKTRACKED",e.APPENDING="APPENDING",e.PARTIAL="PARTIAL",e.OK="OK"}(a||(a={}));var l=function(){function e(e){this.activeFragment=null,this.activeParts=null,this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=e,this._registerListeners()}var t=e.prototype;return t._registerListeners=function(){var e=this.hls;e.on(o.Events.BUFFER_APPENDED,this.onBufferAppended,this),e.on(o.Events.FRAG_BUFFERED,this.onFragBuffered,this),e.on(o.Events.FRAG_LOADED,this.onFragLoaded,this)},t._unregisterListeners=function(){var e=this.hls;e.off(o.Events.BUFFER_APPENDED,this.onBufferAppended,this),e.off(o.Events.FRAG_BUFFERED,this.onFragBuffered,this),e.off(o.Events.FRAG_LOADED,this.onFragLoaded,this)},t.destroy=function(){this._unregisterListeners(),this.fragments=this.timeRanges=null},t.getAppendedFrag=function(e,t){if(t===s.PlaylistLevelType.MAIN){var n=this.activeFragment,r=this.activeParts;if(!n)return null;if(r)for(var i=r.length;i--;){var a=r[i],o=a?a.end:n.appendedPTS;if(a.start<=e&&void 0!==o&&e<=o)return i>9&&(this.activeParts=r.slice(i-9)),a}else if(n.start<=e&&void 0!==n.appendedPTS&&e<=n.appendedPTS)return n}return this.getBufferedFrag(e,t)},t.getBufferedFrag=function(e,t){for(var n=this.fragments,r=Object.keys(n),i=r.length;i--;){var a=n[r[i]];if((null===a||void 0===a?void 0:a.body.type)===t&&a.buffered){var o=a.body;if(o.start<=e&&e<=o.end)return o}}return null},t.detectEvictedFragments=function(e,t,n){var r=this;Object.keys(this.fragments).forEach(function(i){var a=r.fragments[i];if(a){if(!a.buffered)return void(a.body.type===n&&r.removeFragment(a.body));var o=a.range[e];o&&o.time.some(function(e){var n=!r.isTimeBuffered(e.startPTS,e.endPTS,t);return n&&r.removeFragment(a.body),n})}})},t.detectPartialFragments=function(e){var t=this,n=this.timeRanges,r=e.frag,a=e.part;if(n&&"initSegment"!==r.sn){var o=i(r),s=this.fragments[o];s&&(Object.keys(n).forEach(function(e){var i=r.elementaryStreams[e];if(i){var o=n[e],l=null!==a||!0===i.partial;s.range[e]=t.getBufferedTimes(r,a,l,o)}}),s.backtrack=s.loaded=null,Object.keys(s.range).length?s.buffered=!0:this.removeFragment(s.body))}},t.fragBuffered=function(e){var t=i(e),n=this.fragments[t];n&&(n.backtrack=n.loaded=null,n.buffered=!0)},t.getBufferedTimes=function(e,t,n,r){for(var i={time:[],partial:n},a=t?t.start:e.start,o=t?t.end:e.end,s=e.minEndPTS||o,l=e.maxStartPTS||a,d=0;d<r.length;d++){var u=r.start(d)-this.bufferPadding,c=r.end(d)+this.bufferPadding;if(l>=u&&s<=c){i.time.push({startPTS:Math.max(a,r.start(d)),endPTS:Math.min(o,r.end(d))});break}if(a<c&&o>u)i.partial=!0,i.time.push({startPTS:Math.max(a,r.start(d)),endPTS:Math.min(o,r.end(d))});else if(o<=u)break}return i},t.getPartialFragment=function(e){var t,n,i,a=null,o=0,s=this.bufferPadding,l=this.fragments;return Object.keys(l).forEach(function(d){var u=l[d];u&&r(u)&&(n=u.body.start-s,i=u.body.end+s,e>=n&&e<=i&&(t=Math.min(e-n,i-e),o<=t&&(a=u.body,o=t)))}),a},t.getState=function(e){var t=i(e),n=this.fragments[t];return n?n.buffered?r(n)?a.PARTIAL:a.OK:n.backtrack?a.BACKTRACKED:a.APPENDING:a.NOT_LOADED},t.backtrack=function(e,t){var n=i(e),r=this.fragments[n];if(!r||r.backtrack)return null;var a=r.backtrack=t||r.loaded;return r.loaded=null,a},t.getBacktrackData=function(e){var t=i(e),n=this.fragments[t];if(n){var r,a=n.backtrack;if(null!==a&&void 0!==a&&null!==(r=a.payload)&&void 0!==r&&r.byteLength)return a;this.removeFragment(e)}return null},t.isTimeBuffered=function(e,t,n){for(var r,i,a=0;a<n.length;a++){if(r=n.start(a)-this.bufferPadding,i=n.end(a)+this.bufferPadding,e>=r&&t<=i)return!0;if(t<=r)return!1}return!1},t.onFragLoaded=function(e,t){var n=t.frag,r=t.part;if("initSegment"!==n.sn&&!n.bitrateTest&&!r){var a=i(n);this.fragments[a]={body:n,loaded:t,backtrack:null,buffered:!1,range:Object.create(null)}}},t.onBufferAppended=function(e,t){var n=this,r=t.frag,i=t.part,a=t.timeRanges;if(r.type===s.PlaylistLevelType.MAIN)if(this.activeFragment=r,i){var o=this.activeParts;o||(this.activeParts=o=[]),o.push(i)}else this.activeParts=null;this.timeRanges=a,Object.keys(a).forEach(function(e){var t=a[e];if(n.detectEvictedFragments(e,t),!i)for(var o=0;o<t.length;o++)r.appendedPTS=Math.max(t.end(o),r.appendedPTS||0)})},t.onFragBuffered=function(e,t){this.detectPartialFragments(t)},t.hasFragment=function(e){var t=i(e);return!!this.fragments[t]},t.removeFragmentsInRange=function(e,t,n){var r=this;Object.keys(this.fragments).forEach(function(i){var a=r.fragments[i];if(a&&a.buffered){var o=a.body;o.type===n&&o.start<t&&o.end>e&&r.removeFragment(o)}})},t.removeFragment=function(e){var t=i(e);e.stats.loaded=0,e.clearElementaryStreamInfo(),delete this.fragments[t]},t.removeAllFragments=function(){this.fragments=Object.create(null),this.activeFragment=null,this.activeParts=null},e}()},"./src/controller/gap-controller.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"STALL_MINIMUM_DURATION_MS",function(){return s}),n.d(t,"MAX_START_GAP_JUMP",function(){return l}),n.d(t,"SKIP_BUFFER_HOLE_STEP_SECONDS",function(){return d}),n.d(t,"SKIP_BUFFER_RANGE_START",function(){return u}),n.d(t,"default",function(){return c});var r=n("./src/utils/buffer-helper.ts"),i=n("./src/errors.ts"),a=n("./src/events.ts"),o=n("./src/utils/logger.ts"),s=250,l=2,d=.1,u=.05,c=function(){function e(e,t,n,r){this.config=void 0,this.media=void 0,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=n,this.hls=r}var t=e.prototype;return t.destroy=function(){this.hls=this.fragmentTracker=this.media=null},t.poll=function(e){var t=this.config,n=this.media,i=this.stalled,a=n.currentTime,d=n.seeking,u=this.seeking&&!d,c=!this.seeking&&d;if(this.seeking=d,a===e){if((c||u)&&(this.stalled=null),!n.paused&&!n.ended&&0!==n.playbackRate&&r.BufferHelper.getBuffered(n).length){var f=r.BufferHelper.bufferInfo(n,a,0),h=f.len>0,p=f.nextStart||0;if(h||p){if(d){var v=f.len>l,m=!p||p-a>l&&!this.fragmentTracker.getPartialFragment(a);if(v||m)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var g,y=Math.max(p,f.start||0)-a,E=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,b=null===E||void 0===E?void 0:null===(g=E.details)||void 0===g?void 0:g.live,T=b?2*E.details.targetduration:l;if(y>0&&y<=T)return void this._trySkipBufferHole(null)}var w=self.performance.now();if(null===i)return void(this.stalled=w);var S=w-i;!d&&S>=s&&this._reportStall(f.len);var A=r.BufferHelper.bufferInfo(n,a,t.maxBufferHole);this._tryFixBufferStall(A,S)}}}else if(this.moved=!0,null!==i){if(this.stallReported){var L=self.performance.now()-i;o.logger.warn("playback not stuck anymore @"+a+", after "+Math.round(L)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},t._tryFixBufferStall=function(e,t){var n=this.config,r=this.fragmentTracker,i=this.media,a=i.currentTime,s=r.getPartialFragment(a);if(s){if(this._trySkipBufferHole(s))return}e.len>n.maxBufferHole&&t>1e3*n.highBufferWatchdogPeriod&&(o.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},t._reportStall=function(e){var t=this.hls,n=this.media;this.stallReported||(this.stallReported=!0,o.logger.warn("Playback stalling at @"+n.currentTime+" due to low buffer (buffer="+e+")"),t.trigger(a.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},t._trySkipBufferHole=function(e){for(var t=this.config,n=this.hls,s=this.media,l=s.currentTime,c=0,f=r.BufferHelper.getBuffered(s),h=0;h<f.length;h++){var p=f.start(h);if(l+t.maxBufferHole>=c&&l<p){var v=Math.max(p+u,s.currentTime+d);return o.logger.warn("skipping hole, adjusting currentTime from "+l+" to "+v),this.moved=!0,this.stalled=null,s.currentTime=v,e&&n.trigger(a.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+l+" to "+v,frag:e}),v}c=f.end(h)}return 0},t._tryNudgeBuffer=function(){var e=this.config,t=this.hls,n=this.media,r=n.currentTime,s=(this.nudgeRetry||0)+1;if(this.nudgeRetry=s,s<e.nudgeMaxRetry){var l=r+s*e.nudgeOffset;o.logger.warn("Nudging 'currentTime' from "+r+" to "+l),n.currentTime=l,t.trigger(a.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else o.logger.error("Playhead still not moving while enough data buffered @"+r+" after "+e.nudgeMaxRetry+" nudges"),t.trigger(a.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},e}()},"./src/controller/id3-track-controller.ts":function(e,t,n){"use strict";n.r(t);var r=n("./src/events.ts"),i=n("./src/utils/texttrack-utils.ts"),a=n("./src/demux/id3.ts"),o=function(){function e(e){this.hls=void 0,this.id3Track=null,this.media=null,this.hls=e,this._registerListeners()}var t=e.prototype;return t.destroy=function(){this._unregisterListeners()},t._registerListeners=function(){var e=this.hls;e.on(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(r.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(r.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},t._unregisterListeners=function(){var e=this.hls;e.off(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(r.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(r.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},t.onMediaAttached=function(e,t){this.media=t.media},t.onMediaDetaching=function(){this.id3Track&&(Object(i.clearCurrentCues)(this.id3Track),this.id3Track=null,this.media=null)},t.getID3Track=function(e){if(this.media){for(var t=0;t<e.length;t++){var n=e[t];if("metadata"===n.kind&&"id3"===n.label)return Object(i.sendAddTrackEvent)(n,this.media),n}return this.media.addTextTrack("metadata","id3")}},t.onFragParsingMetadata=function(e,t){if(this.media){var n=t.frag,r=t.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var i=self.WebKitDataCue||self.VTTCue||self.TextTrackCue,o=0;o<r.length;o++){var s=a.getID3Frames(r[o].data);if(s){var l=r[o].pts,d=o<r.length-1?r[o+1].pts:n.end;d-l<=0&&(d=l+.25);for(var u=0;u<s.length;u++){var c=s[u];if(!a.isTimeStampFrame(c)){var f=new i(l,d,"");f.value=c,this.id3Track.addCue(f)}}}}}},t.onBufferFlushing=function(e,t){var n=t.startOffset,r=t.endOffset,a=t.type;if(!a||"audio"===a){var o=this.id3Track;o&&Object(i.removeCuesInRange)(o,n,r)}},e}();t.default=o},"./src/controller/latency-controller.ts":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.r(t),n.d(t,"default",function(){return l});var a=n("./src/errors.ts"),o=n("./src/events.ts"),s=n("./src/utils/logger.ts"),l=function(){function e(e){var t=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return t.timeupdate()},this.hls=e,this.config=e.config,this.registerListeners()}var t=e.prototype;return t.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},t.registerListeners=function(){this.hls.on(o.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(o.Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(o.Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(o.Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(o.Events.ERROR,this.onError,this)},t.unregisterListeners=function(){this.hls.off(o.Events.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(o.Events.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(o.Events.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(o.Events.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(o.Events.ERROR,this.onError)},t.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},t.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},t.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},t.onLevelUpdated=function(e,t){var n=t.details;this.levelDetails=n,n.advanced&&this.timeupdate(),!n.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},t.onError=function(e,t){t.details===a.ErrorDetails.BUFFER_STALLED_ERROR&&(this.stallCount++,s.logger.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},t.timeupdate=function(){var e=this.media,t=this.levelDetails;if(e&&t){this.currentTime=e.currentTime;var n=this.computeLatency();if(null!==n){this._latency=n;var r=this.config,i=r.lowLatencyMode,a=r.maxLiveSyncPlaybackRate;if(i&&1!==a){var o=this.targetLatency;if(null!==o){var s=n-o,l=Math.min(this.maxLatency,o+t.targetduration),d=s<l;if(t.live&&d&&s>.05&&this.forwardBufferLength>1){var u=Math.min(2,Math.max(1,a)),c=Math.round(2/(1+Math.exp(-.75*s-this.edgeStalled))*20)/20;e.playbackRate=Math.min(u,Math.max(1,c))}else 1!==e.playbackRate&&0!==e.playbackRate&&(e.playbackRate=1)}}}}},t.estimateLiveEdge=function(){var e=this.levelDetails;return null===e?null:e.edge+e.age},t.computeLatency=function(){var e=this.estimateLiveEdge();return null===e?null:e-this.currentTime},i(e,[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var e=this.config,t=this.levelDetails;return void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}},{key:"targetLatency",get:function(){var e=this.levelDetails;if(null===e)return null;var t=e.holdBack,n=e.partHoldBack,r=e.targetduration,i=this.config,a=i.liveSyncDuration,o=i.liveSyncDurationCount,s=i.lowLatencyMode,l=this.hls.userConfig,d=s?n||t:t;(l.liveSyncDuration||l.liveSyncDurationCount||0===d)&&(d=void 0!==a?a:o*r);var u=r;return d+Math.min(1*this.stallCount,u)}},{key:"liveSyncPosition",get:function(){var e=this.estimateLiveEdge(),t=this.targetLatency,n=this.levelDetails;if(null===e||null===t||null===n)return null;var r=n.edge,i=e-t-this.edgeStalled,a=r-n.totalduration,o=r-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(a,i),o)}},{key:"drift",get:function(){var e=this.levelDetails;return null===e?1:e.drift}},{key:"edgeStalled",get:function(){var e=this.levelDetails;if(null===e)return 0;var t=3*(this.config.lowLatencyMode&&e.partTarget||e.targetduration);return Math.max(e.age-t,0)}},{key:"forwardBufferLength",get:function(){var e=this.media,t=this.levelDetails;if(!e||!t)return 0;var n=e.buffered.length;return n?e.buffered.end(n-1):t.edge-this.currentTime}}]),e}()},"./src/controller/level-controller.ts":function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.r(t),n.d(t,"default",function(){return m});var l=n("./src/types/level.ts"),d=n("./src/events.ts"),u=n("./src/errors.ts"),c=n("./src/utils/codecs.ts"),f=n("./src/controller/level-helper.ts"),h=n("./src/controller/base-playlist-controller.ts"),p=n("./src/types/loader.ts"),v=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),m=function(e){function t(t){var n;return n=e.call(this,t,"[level-controller]")||this,n._levels=[],n._firstLevel=-1,n._startLevel=void 0,n.currentLevelIndex=-1,n.manualLevelIndex=-1,n.onParsedComplete=void 0,n._registerListeners(),n}o(t,e);var n=t.prototype;return n._registerListeners=function(){var e=this.hls;e.on(d.Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(d.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(d.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(d.Events.FRAG_LOADED,this.onFragLoaded,this),e.on(d.Events.ERROR,this.onError,this)},n._unregisterListeners=function(){var e=this.hls;e.off(d.Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(d.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(d.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(d.Events.FRAG_LOADED,this.onFragLoaded,this),e.off(d.Events.ERROR,this.onError,this)},n.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,e.prototype.destroy.call(this)},n.startLoad=function(){this._levels.forEach(function(e){e.loadError=0}),e.prototype.startLoad.call(this)},n.onManifestLoaded=function(e,t){var n,r,i=[],a=[],o=[],s={},h=!1,p=!1,m=!1;if(t.levels.forEach(function(e){var t=e.attrs;h=h||!(!e.width||!e.height),p=p||!!e.videoCodec,m=m||!!e.audioCodec,v&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0);var n=e.bitrate+"-"+e.attrs.RESOLUTION+"-"+e.attrs.CODECS;r=s[n],r?r.url.push(e.url):(r=new l.Level(e),s[n]=r,i.push(r)),t&&(t.AUDIO&&Object(f.addGroupId)(r,"audio",t.AUDIO),t.SUBTITLES&&Object(f.addGroupId)(r,"text",t.SUBTITLES))}),(h||p)&&m&&(i=i.filter(function(e){var t=e.videoCodec,n=e.width,r=e.height;return!!t||!(!n||!r)})),i=i.filter(function(e){var t=e.audioCodec,n=e.videoCodec;return(!t||Object(c.isCodecSupportedInMp4)(t,"audio"))&&(!n||Object(c.isCodecSupportedInMp4)(n,"video"))}),t.audioTracks&&(a=t.audioTracks.filter(function(e){return!e.audioCodec||Object(c.isCodecSupportedInMp4)(e.audioCodec,"audio")}),Object(f.assignTrackIdsByGroup)(a)),t.subtitles&&(o=t.subtitles,Object(f.assignTrackIdsByGroup)(o)),i.length>0){n=i[0].bitrate,i.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=i;for(var g=0;g<i.length;g++)if(i[g].bitrate===n){this._firstLevel=g,this.log("manifest loaded, "+i.length+" level(s) found, first bitrate: "+n);break}var y=m&&!p,E={levels:i,audioTracks:a,subtitleTracks:o,firstLevel:this._firstLevel,stats:t.stats,audio:m,video:p,altAudio:!y&&a.some(function(e){return!!e.url})};this.hls.trigger(d.Events.MANIFEST_PARSED,E),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(d.Events.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,reason:"no level with compatible codecs found in manifest"})},n.onError=function(t,n){if(e.prototype.onError.call(this,t,n),!n.fatal){var r=n.context,i=this._levels[this.currentLevelIndex];if(r&&(r.type===p.PlaylistContextType.AUDIO_TRACK&&i.audioGroupIds&&r.groupId===i.audioGroupIds[i.urlId]||r.type===p.PlaylistContextType.SUBTITLE_TRACK&&i.textGroupIds&&r.groupId===i.textGroupIds[i.urlId]))return void this.redundantFailover(this.currentLevelIndex);var a,o=!1,s=!0;switch(n.details){case u.ErrorDetails.FRAG_LOAD_ERROR:case u.ErrorDetails.FRAG_LOAD_TIMEOUT:case u.ErrorDetails.KEY_LOAD_ERROR:case u.ErrorDetails.KEY_LOAD_TIMEOUT:if(n.frag){var l=this._levels[n.frag.level];l?++l.fragmentError>this.hls.config.fragLoadingMaxRetry&&(a=n.frag.level):a=n.frag.level}break;case u.ErrorDetails.LEVEL_LOAD_ERROR:case u.ErrorDetails.LEVEL_LOAD_TIMEOUT:r&&(r.deliveryDirectives&&(s=!1),a=r.level),o=!0;break;case u.ErrorDetails.REMUX_ALLOC_ERROR:a=n.level,o=!0}void 0!==a&&this.recoverLevel(n,a,o,s)}},n.recoverLevel=function(e,t,n,r){var i=e.details,a=this._levels[t];if(a.loadError++,n){if(!this.retryLoadingOrFail(e))return void(this.currentLevelIndex=-1);e.levelRetry=!0}if(r){var o=a.url.length;if(o>1&&a.loadError<o)e.levelRetry=!0,this.redundantFailover(t);else if(-1===this.manualLevelIndex){var s=0===t?this._levels.length-1:t-1;this.currentLevelIndex!==s&&0===this._levels[s].loadError&&(this.warn(i+": switch to "+s),e.levelRetry=!0,this.hls.nextAutoLevel=s)}}},n.redundantFailover=function(e){var t=this._levels[e],n=t.url.length;if(n>1){var r=(t.urlId+1)%n;this.warn("Switching to redundant URL-id "+r),this._levels.forEach(function(e){e.urlId=r}),this.level=e}},n.onFragLoaded=function(e,t){var n=t.frag;if(void 0!==n&&n.type===p.PlaylistLevelType.MAIN){var r=this._levels[n.level];void 0!==r&&(r.fragmentError=0,r.loadError=0)}},n.onLevelLoaded=function(e,t){var n,r=t.level,i=t.details,a=this._levels[r];if(!a){var o;return this.warn("Invalid level index "+r),void(null!==(o=t.deliveryDirectives)&&void 0!==o&&o.skip&&(i.deltaUpdateFailed=!0))}r===this.currentLevelIndex?(0===a.fragmentError&&(a.loadError=0,this.retryCount=0),this.playlistLoaded(r,t,a.details)):null!==(n=t.deliveryDirectives)&&void 0!==n&&n.skip&&(i.deltaUpdateFailed=!0)},n.onAudioTrackSwitched=function(e,t){var n=this.hls.levels[this.currentLevelIndex];if(n&&n.audioGroupIds){for(var r=-1,i=this.hls.audioTracks[t.id].groupId,a=0;a<n.audioGroupIds.length;a++)if(n.audioGroupIds[a]===i){r=a;break}r!==n.urlId&&(n.urlId=r,this.startLoad())}},n.loadPlaylist=function(e){var t=this.currentLevelIndex,n=this._levels[t];if(this.canLoad&&n&&n.url.length>0){var r=n.urlId,i=n.url[r];if(e)try{i=e.addDirectives(i)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}this.log("Attempt loading level index "+t+(e?" at sn "+e.msn+" part "+e.part:"")+" with URL-id "+r+" "+i),this.clearTimer(),this.hls.trigger(d.Events.LEVEL_LOADING,{url:i,level:t,id:r,deliveryDirectives:e||null})}},n.removeLevel=function(e,t){var n=function(e,n){return n!==t},r=this._levels.filter(function(r,i){return i!==e||r.url.length>1&&void 0!==t&&(r.url=r.url.filter(n),r.audioGroupIds&&(r.audioGroupIds=r.audioGroupIds.filter(n)),r.textGroupIds&&(r.textGroupIds=r.textGroupIds.filter(n)),r.urlId=0,!0)}).map(function(e,t){var n=e.details;return null!==n&&void 0!==n&&n.fragments&&n.fragments.forEach(function(e){e.level=t}),e});this._levels=r,this.hls.trigger(d.Events.LEVELS_UPDATED,{levels:r})},a(t,[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t,n=this._levels;if(0!==n.length&&(this.currentLevelIndex!==e||null===(t=n[e])||void 0===t||!t.details)){if(e<0||e>=n.length){var i=e<0;if(this.hls.trigger(d.Events.ERROR,{type:u.ErrorTypes.OTHER_ERROR,details:u.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:i,reason:"invalid level idx"}),i)return;e=Math.min(e,n.length-1)}this.clearTimer();var a=this.currentLevelIndex,o=n[a],s=n[e];this.log("switching to level "+e+" from "+a),this.currentLevelIndex=e;var l=r({},s,{level:e,maxBitrate:s.maxBitrate,uri:s.uri,urlId:s.urlId});delete l._urlId,this.hls.trigger(d.Events.LEVEL_SWITCHING,l);var c=s.details;if(!c||c.live){var f=this.switchParams(s.uri,null===o||void 0===o?void 0:o.details);this.loadPlaylist(f)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}]),t}(h.default)},"./src/controller/level-helper.ts":function(e,t,n){"use strict";function r(e,t,n){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(n);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(n)}}function i(e){var t={};e.forEach(function(e){var n=e.groupId||"";e.id=t[n]=t[n]||0,t[n]++})}function a(e,t,n){o(e[t],e[n])}function o(e,t){var n=t.startPTS;if(Object(m.isFiniteNumber)(n)){var r,i=0;t.sn>e.sn?(i=n-e.start,r=e):(i=e.start-n,r=t),r.duration!==i&&(r.duration=i)}else if(t.sn>e.sn){var a=e.cc===t.cc;a&&e.minEndPTS?t.start=e.start+(e.minEndPTS-e.start):t.start=e.start+e.duration}else t.start=Math.max(e.start-t.duration,0)}function s(e,t,n,r,i,a){r-n<=0&&(g.logger.warn("Fragment should have a positive duration",t),r=n+t.duration,a=i+t.duration);var s=n,l=r,d=t.startPTS,u=t.endPTS;if(Object(m.isFiniteNumber)(d)){var c=Math.abs(d-n);Object(m.isFiniteNumber)(t.deltaPTS)?t.deltaPTS=Math.max(c,t.deltaPTS):t.deltaPTS=c,s=Math.max(n,d),n=Math.min(n,d),i=Math.min(i,t.startDTS),l=Math.min(r,u),r=Math.max(r,u),a=Math.max(a,t.endDTS)}t.duration=r-n;var f=n-t.start;t.appendedPTS=r,t.start=t.startPTS=n,t.maxStartPTS=s,t.startDTS=i,t.endPTS=r,t.minEndPTS=l,t.endDTS=a;var h=t.sn;if(!e||h<e.startSN||h>e.endSN)return 0;var p,v=h-e.startSN,y=e.fragments;for(y[v]=t,p=v;p>0;p--)o(y[p],y[p-1]);for(p=v;p<y.length-1;p++)o(y[p],y[p+1]);return e.fragmentHint&&o(y[y.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,f}function l(e,t){for(var n=null,r=e.fragments,i=r.length-1;i>=0;i--){var a=r[i].initSegment;if(a){n=a;break}}e.fragmentHint&&delete e.fragmentHint.endPTS;var o,l=0;if(u(e,t,function(e,r){e.relurl&&(l=e.cc-r.cc),Object(m.isFiniteNumber)(e.startPTS)&&Object(m.isFiniteNumber)(e.endPTS)&&(r.start=r.startPTS=e.startPTS,r.startDTS=e.startDTS,r.appendedPTS=e.appendedPTS,r.maxStartPTS=e.maxStartPTS,r.endPTS=e.endPTS,r.endDTS=e.endDTS,r.minEndPTS=e.minEndPTS,r.duration=e.endPTS-e.startPTS,r.duration&&(o=r),t.PTSKnown=t.alignedSliding=!0),r.elementaryStreams=e.elementaryStreams,r.loader=e.loader,r.stats=e.stats,r.urlId=e.urlId,e.initSegment&&(r.initSegment=e.initSegment,n=e.initSegment)}),n){(t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments).forEach(function(e){var t;e.initSegment&&e.initSegment.relurl!==(null===(t=n)||void 0===t?void 0:t.relurl)||(e.initSegment=n)})}if(t.skippedSegments&&(t.deltaUpdateFailed=t.fragments.some(function(e){return!e}),t.deltaUpdateFailed)){g.logger.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var f=t.skippedSegments;f--;)t.fragments.shift();t.startSN=t.fragments[0].sn,t.startCC=t.fragments[0].cc}var h=t.fragments;if(l){g.logger.warn("discontinuity sliding from playlist, take drift into account");for(var p=0;p<h.length;p++)h[p].cc+=l}t.skippedSegments&&(t.startCC=t.fragments[0].cc),d(e.partList,t.partList,function(e,t){t.elementaryStreams=e.elementaryStreams,t.stats=e.stats}),o?s(t,o,o.startPTS,o.endPTS,o.startDTS,o.endDTS):c(e,t),h.length&&(t.totalduration=t.edge-h[0].start),t.driftStartTime=e.driftStartTime,t.driftStart=e.driftStart;var v=t.advancedDateTime;if(t.advanced&&v){var y=t.edge;t.driftStart||(t.driftStartTime=v,t.driftStart=y),t.driftEndTime=v,t.driftEnd=y}else t.driftEndTime=e.driftEndTime,t.driftEnd=e.driftEnd,t.advancedDateTime=e.advancedDateTime}function d(e,t,n){if(e&&t)for(var r=0,i=0,a=e.length;i<=a;i++){var o=e[i],s=t[i+r];o&&s&&o.index===s.index&&o.fragment.sn===s.fragment.sn?n(o,s):r--}}function u(e,t,n){for(var r=t.skippedSegments,i=Math.max(e.startSN,t.startSN)-t.startSN,a=(e.fragmentHint?1:0)+(r?t.endSN:Math.min(e.endSN,t.endSN))-t.startSN,o=t.startSN-e.startSN,s=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,l=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,d=i;d<=a;d++){var u=l[o+d],c=s[d];r&&!c&&d<r&&(c=t.fragments[d]=u),u&&c&&n(u,c)}}function c(e,t){var n=t.startSN+t.skippedSegments-e.startSN,r=e.fragments;n<0||n>=r.length||f(t,r[n].start)}function f(e,t){if(t){for(var n=e.fragments,r=e.skippedSegments;r<n.length;r++)n[r].start+=t;e.fragmentHint&&(e.fragmentHint.start+=t)}}function h(e,t){var n,r=1e3*e.levelTargetDuration,i=r/2,a=e.age,o=a>0&&a<3*r,s=t.loading.end-t.loading.start,l=e.availabilityDelay;if(!1===e.updated)if(o){var d=333*e.misses;n=Math.max(Math.min(i,2*s),d),e.availabilityDelay=(e.availabilityDelay||0)+n}else n=i;else o?(l=Math.min(l||r/2,a),e.availabilityDelay=l,n=l+r-a):n=r-s;return Math.round(n)}function p(e,t,n){if(!e||!e.details)return null;var r=e.details,i=r.fragments[t-r.startSN];return i||(i=r.fragmentHint,i&&i.sn===t?i:t<r.startSN&&n&&n.sn===t?n:null)}function v(e,t,n){if(!e||!e.details)return null;var r=e.details.partList;if(r)for(var i=r.length;i--;){var a=r[i];if(a.index===n&&a.fragment.sn===t)return a}return null}n.r(t),n.d(t,"addGroupId",function(){return r}),n.d(t,"assignTrackIdsByGroup",function(){return i}),n.d(t,"updatePTS",function(){return a}),n.d(t,"updateFragPTSDTS",function(){return s}),n.d(t,"mergeDetails",function(){return l}),n.d(t,"mapPartIntersection",function(){return d}),n.d(t,"mapFragmentIntersection",function(){return u}),n.d(t,"adjustSliding",function(){return c}),n.d(t,"addSliding",function(){return f}),n.d(t,"computeReloadInterval",function(){return h}),n.d(t,"getFragmentWithSN",function(){return p}),n.d(t,"getPartWith",function(){return v});var m=n("./src/polyfills/number.ts"),g=n("./src/utils/logger.ts")},"./src/controller/stream-controller.ts":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,o(e,t)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.r(t),n.d(t,"default",function(){return b});var s=n("./src/polyfills/number.ts"),l=n("./src/controller/base-stream-controller.ts"),d=n("./src/is-supported.ts"),u=n("./src/events.ts"),c=n("./src/utils/buffer-helper.ts"),f=n("./src/controller/fragment-tracker.ts"),h=n("./src/types/loader.ts"),p=n("./src/loader/fragment.ts"),v=n("./src/demux/transmuxer-interface.ts"),m=n("./src/types/transmuxer.ts"),g=n("./src/controller/gap-controller.ts"),y=n("./src/errors.ts"),E=n("./src/utils/logger.ts"),b=function(e){function t(t,n){var r;return r=e.call(this,t,n,"[stream-controller]")||this,r.audioCodecSwap=!1,r.gapController=null,r.level=-1,r._forceStartLoad=!1,r.altAudio=!1,r.audioOnly=!1,r.fragPlaying=null,r.onvplaying=null,r.onvseeked=null,r.fragLastKbps=0,r.stalled=!1,r.couldBacktrack=!1,r.audioCodecSwitch=!1,r.videoBuffer=null,r._registerListeners(),r}a(t,e);var n=t.prototype;return n._registerListeners=function(){var e=this.hls;e.on(u.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(u.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(u.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(u.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(u.Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(u.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(u.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(u.Events.ERROR,this.onError,this),e.on(u.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(u.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(u.Events.BUFFER_CREATED,this.onBufferCreated,this),e.on(u.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(u.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(u.Events.FRAG_BUFFERED,this.onFragBuffered,this)},n._unregisterListeners=function(){var e=this.hls;e.off(u.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(u.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(u.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(u.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(u.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(u.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(u.Events.ERROR,this.onError,this),e.off(u.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(u.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(u.Events.BUFFER_CREATED,this.onBufferCreated,this),e.off(u.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(u.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(u.Events.FRAG_BUFFERED,this.onFragBuffered,this)},n.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},n.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var r=n.startLevel;-1===r&&(n.config.testBandwidth?(r=0,this.bitrateTest=!0):r=n.nextAutoLevel),this.level=n.nextLoadLevel=r,this.loadedmetadata=!1}t>0&&-1===e&&(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=l.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=l.State.STOPPED},n.stopLoad=function(){this._forceStartLoad=!1,e.prototype.stopLoad.call(this)},n.doTick=function(){switch(this.state){case l.State.IDLE:this.doTickIdle();break;case l.State.WAITING_LEVEL:var e,t=this.levels,n=this.level,r=null===t||void 0===t?void 0:null===(e=t[n])||void 0===e?void 0:e.details;if(r&&(!r.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(r))break;this.state=l.State.IDLE;break}break;case l.State.FRAG_LOADING_WAITING_RETRY:var i,a=self.performance.now(),o=this.retryDate;(!o||a>=o||null!==(i=this.media)&&void 0!==i&&i.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.state=l.State.IDLE)}this.onTickEnd()},n.onTickEnd=function(){e.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},n.doTickIdle=function(){var e,t,n=this.hls,r=this.levelLastLoaded,i=this.levels,a=this.media,o=n.config,s=n.nextLoadLevel;if(null!==r&&(a||!this.startFragRequested&&o.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&i&&i[s]){var d=i[s];this.level=n.nextLoadLevel=s;var c=d.details;if(!c||this.state===l.State.WAITING_LEVEL||c.live&&this.levelLastLoaded!==s)return void(this.state=l.State.WAITING_LEVEL);var v=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:a,h.PlaylistLevelType.MAIN);if(null!==v){if(!(v.len>=this.getMaxBufferLength(d.maxBitrate))){if(this._streamEnded(v,c)){var m={};return this.altAudio&&(m.type="video"),this.hls.trigger(u.Events.BUFFER_EOS,m),void(this.state=l.State.ENDED)}var g=v.end,y=this.getNextFragment(g,c);if(this.couldBacktrack&&!this.fragPrevious&&y&&"initSegment"!==y.sn){var E=y.sn-c.startSN;E>1&&(y=c.fragments[E-1],this.fragmentTracker.removeFragment(y))}if(y&&this.fragmentTracker.getState(y)===f.FragmentState.OK&&this.nextLoadPosition>g){var b=this.audioOnly&&!this.altAudio?p.ElementaryStreamTypes.AUDIO:p.ElementaryStreamTypes.VIDEO;this.afterBufferFlushed(a,b,h.PlaylistLevelType.MAIN),y=this.getNextFragment(this.nextLoadPosition,c)}y&&(!y.initSegment||y.initSegment.data||this.bitrateTest||(y=y.initSegment),"identity"!==(null===(e=y.decryptdata)||void 0===e?void 0:e.keyFormat)||null!==(t=y.decryptdata)&&void 0!==t&&t.key?this.loadFragment(y,c,g):this.loadKey(y,c))}}}},n.loadFragment=function(t,n,r){var i,a=this.fragmentTracker.getState(t);if(this.fragCurrent=t,a===f.FragmentState.BACKTRACKED){var o=this.fragmentTracker.getBacktrackData(t);if(o)return this._handleFragmentLoadProgress(o),void this._handleFragmentLoadComplete(o);a=f.FragmentState.NOT_LOADED}a===f.FragmentState.NOT_LOADED||a===f.FragmentState.PARTIAL?"initSegment"===t.sn?this._loadInitSegment(t):this.bitrateTest?(t.bitrateTest=!0,this.log("Fragment "+t.sn+" of level "+t.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(t)):(this.startFragRequested=!0,e.prototype.loadFragment.call(this,t,n,r)):a===f.FragmentState.APPENDING?this.reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t):0===(null===(i=this.media)||void 0===i?void 0:i.buffered.length)&&this.fragmentTracker.removeAllFragments()},n.getAppendedFrag=function(e){var t=this.fragmentTracker.getAppendedFrag(e,h.PlaylistLevelType.MAIN);return t&&"fragment"in t?t.fragment:t},n.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,h.PlaylistLevelType.MAIN)},n.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.end+.5):null},n.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},n.nextLevelSwitch=function(){var e=this.levels,t=this.media;if(null!==t&&void 0!==t&&t.readyState){var n,r=this.getAppendedFrag(t.currentTime);if(r&&r.start>1&&this.flushMainBuffer(0,r.start-1),!t.paused&&e){var i=this.hls.nextLoadLevel,a=e[i],o=this.fragLastKbps;n=o&&this.fragCurrent?this.fragCurrent.duration*a.maxBitrate/(1e3*o)+1:0}else n=0;var s=this.getBufferedFrag(t.currentTime+n);if(s){var l=this.followingBufferedFrag(s);if(l){this.abortCurrentFrag();var d=l.maxStartPTS?l.maxStartPTS:l.start,u=l.duration,c=Math.max(s.end,d+Math.min(Math.max(u-this.config.maxFragLookUpTolerance,.5*u),.75*u));this.flushMainBuffer(c,Number.POSITIVE_INFINITY)}}}},n.abortCurrentFrag=function(){var e=this.fragCurrent;this.fragCurrent=null,null!==e&&void 0!==e&&e.loader&&e.loader.abort(),this.state===l.State.KEY_LOADING&&(this.state=l.State.IDLE),this.nextLoadPosition=this.getLoadPosition()},n.flushMainBuffer=function(t,n){e.prototype.flushMainBuffer.call(this,t,n,this.altAudio?"video":null)},n.onMediaAttached=function(t,n){e.prototype.onMediaAttached.call(this,t,n);var r=n.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),r.addEventListener("playing",this.onvplaying),r.addEventListener("seeked",this.onvseeked),this.gapController=new g.default(this.config,r,this.fragmentTracker,this.hls)},n.onMediaDetaching=function(){var t=this.media;t&&(t.removeEventListener("playing",this.onvplaying),t.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),e.prototype.onMediaDetaching.call(this)},n.onMediaPlaying=function(){this.tick()},n.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:null;Object(s.isFiniteNumber)(t)&&this.log("Media seeked to "+t.toFixed(3)),this.tick()},n.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(u.Events.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=this.stalled=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null},n.onManifestParsed=function(e,t){var n,r=!1,i=!1;t.levels.forEach(function(e){(n=e.audioCodec)&&(-1!==n.indexOf("mp4a.40.2")&&(r=!0),-1!==n.indexOf("mp4a.40.5")&&(i=!0))}),this.audioCodecSwitch=r&&i&&!Object(d.changeTypeSupported)(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1},n.onLevelLoading=function(e,t){var n=this.levels;if(n&&this.state===l.State.IDLE){var r=n[t.level];(!r.details||r.details.live&&this.levelLastLoaded!==t.level||this.waitForCdnTuneIn(r.details))&&(this.state=l.State.WAITING_LEVEL)}},n.onLevelLoaded=function(e,t){var n,r=this.levels,i=t.level,a=t.details,o=a.totalduration;if(!r)return void this.warn("Levels were reset while loading level "+i);this.log("Level "+i+" loaded ["+a.startSN+","+a.endSN+"], cc ["+a.startCC+", "+a.endCC+"] duration:"+o);var s=this.fragCurrent;!s||this.state!==l.State.FRAG_LOADING&&this.state!==l.State.FRAG_LOADING_WAITING_RETRY||s.level!==t.level&&s.loader&&(this.state=l.State.IDLE,s.loader.abort());var d=r[i],c=0;if(a.live||null!==(n=d.details)&&void 0!==n&&n.live){if(a.fragments[0]||(a.deltaUpdateFailed=!0),a.deltaUpdateFailed)return;c=this.alignPlaylists(a,d.details)}if(d.details=a,this.levelLastLoaded=i,this.hls.trigger(u.Events.LEVEL_UPDATED,{details:a,level:i}),this.state===l.State.WAITING_LEVEL){if(this.waitForCdnTuneIn(a))return;this.state=l.State.IDLE}this.startFragRequested?a.live&&this.synchronizeToLiveEdge(a):this.setStartPosition(a,c),this.tick()},n._handleFragmentLoadProgress=function(e){var t,n=e.frag,r=e.part,i=e.payload,a=this.levels;if(!a)return void this.warn("Levels were reset while fragment load was in progress. Fragment "+n.sn+" of level "+n.level+" will not be buffered");var o=a[n.level],s=o.details;if(!s)return void this.warn("Dropping fragment "+n.sn+" of level "+n.level+" after level details were reset");var l=o.videoCodec,d=s.PTSKnown||!s.live,u=null===(t=n.initSegment)||void 0===t?void 0:t.data,c=this._getAudioCodec(o),f=this.transmuxer=this.transmuxer||new v.default(this.hls,h.PlaylistLevelType.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),p=r?r.index:-1,g=-1!==p,y=new m.ChunkMetadata(n.level,n.sn,n.stats.chunkCount,i.byteLength,p,g),E=this.initPTS[n.cc];f.push(i,u,c,l,n,r,s.totalduration,d,y,E)},n.onAudioTrackSwitching=function(e,t){var n=this.altAudio,r=!!t.url,i=t.id;if(!r){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var a=this.fragCurrent;null!==a&&void 0!==a&&a.loader&&(this.log("Switching to main audio track, cancel main fragment load"),a.loader.abort()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var o=this.hls;n&&o.trigger(u.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),o.trigger(u.Events.AUDIO_TRACK_SWITCHED,{id:i})}},n.onAudioTrackSwitched=function(e,t){var n=t.id,r=!!this.hls.audioTracks[n].url;if(r){var i=this.videoBuffer;i&&this.mediaBuffer!==i&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=r,this.tick()},n.onBufferCreated=function(e,t){var n,r,i=t.tracks,a=!1;for(var o in i){var s=i[o];if("main"===s.id){if(r=o,n=s,"video"===o){var l=i[o];l&&(this.videoBuffer=l.buffer)}}else a=!0}a&&n?(this.log("Alternate track found, use "+r+".buffered to schedule main fragment loading"),this.mediaBuffer=n.buffer):this.mediaBuffer=this.media},n.onFragBuffered=function(e,t){var n=t.frag,r=t.part;if(!n||n.type===h.PlaylistLevelType.MAIN){if(this.fragContextChanged(n))return this.warn("Fragment "+n.sn+(r?" p: "+r.index:"")+" of level "+n.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===l.State.PARSED&&(this.state=l.State.IDLE));var i=r?r.stats:n.stats;this.fragLastKbps=Math.round(8*i.total/(i.buffering.end-i.loading.first)),"initSegment"!==n.sn&&(this.fragPrevious=n),this.fragBufferedComplete(n,r)}},n.onError=function(e,t){switch(t.details){case y.ErrorDetails.FRAG_LOAD_ERROR:case y.ErrorDetails.FRAG_LOAD_TIMEOUT:case y.ErrorDetails.KEY_LOAD_ERROR:case y.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(h.PlaylistLevelType.MAIN,t);break;case y.ErrorDetails.LEVEL_LOAD_ERROR:case y.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==l.State.ERROR&&(t.fatal?(this.warn(""+t.details),this.state=l.State.ERROR):t.levelRetry||this.state!==l.State.WAITING_LEVEL||(this.state=l.State.IDLE));break;case y.ErrorDetails.BUFFER_FULL_ERROR:if("main"===t.parent&&(this.state===l.State.PARSING||this.state===l.State.PARSED)){var n=!0,r=this.getFwdBufferInfo(this.media,h.PlaylistLevelType.MAIN);r&&r.len>.5&&(n=!this.reduceMaxBufferLength(r.len)),n&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}}},n.checkBuffer=function(){var e=this.media,t=this.gapController;if(e&&t&&e.readyState){var n=c.BufferHelper.getBuffered(e);!this.loadedmetadata&&n.length?(this.loadedmetadata=!0,this.seekToStartPos()):t.poll(this.lastCurrentTime),this.lastCurrentTime=e.currentTime}},n.onFragLoadEmergencyAborted=function(){this.state=l.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},n.onBufferFlushed=function(e,t){var n=t.type;if(n!==p.ElementaryStreamTypes.AUDIO||this.audioOnly&&!this.altAudio){var r=(n===p.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(r,n,h.PlaylistLevelType.MAIN)}},n.onLevelsUpdated=function(e,t){this.levels=t.levels},n.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},n.seekToStartPos=function(){var e=this.media,t=e.currentTime,n=this.startPosition;if(n>=0&&t<n){if(e.seeking)return void E.logger.log("could not seek to "+n+", already seeking at "+t);var r=c.BufferHelper.getBuffered(e),i=r.length?r.start(0):0,a=i-n;a>0&&(a<this.config.maxBufferHole||a<this.config.maxFragLookUpTolerance)&&(E.logger.log("adjusting start position by "+a+" to match buffer start"),n+=a,this.startPosition=n),this.log("seek to target start position "+n+" from current time "+t),e.currentTime=n}},n._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),t},n._loadBitrateTestFrag=function(e){var t=this;this._doFragLoad(e).then(function(n){var r=t.hls;if(n&&!r.nextLoadLevel&&!t.fragContextChanged(e)){t.fragLoadError=0,t.state=l.State.IDLE,t.startFragRequested=!1,t.bitrateTest=!1;var i=e.stats;i.parsing.start=i.parsing.end=i.buffering.start=i.buffering.end=self.performance.now(),r.trigger(u.Events.FRAG_LOADED,n)}})},n._handleTransmuxComplete=function(e){var t,n="main",r=this.hls,i=e.remuxResult,a=e.chunkMeta,o=this.getCurrentContext(a);if(!o)return this.warn("The loading context changed while buffering fragment "+a.sn+" of level "+a.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(a.level);var d=o.frag,c=o.part,f=o.level,h=i.video,v=i.text,m=i.id3,g=i.initSegment,y=this.altAudio?void 0:i.audio;if(!this.fragContextChanged(d)){if(this.state=l.State.PARSING,g){g.tracks&&(this._bufferInitSegment(f,g.tracks,d,a),r.trigger(u.Events.FRAG_PARSING_INIT_SEGMENT,{frag:d,id:n,tracks:g.tracks}));var E=g.initPTS,b=g.timescale;Object(s.isFiniteNumber)(E)&&(this.initPTS[d.cc]=E,r.trigger(u.Events.INIT_PTS_FOUND,{frag:d,id:n,initPTS:E,timescale:b}))}if(h&&!1!==i.independent){if(f.details){var T=h.startPTS,w=h.endPTS,S=h.startDTS,A=h.endDTS;if(c)c.elementaryStreams[h.type]={startPTS:T,endPTS:w,startDTS:S,endDTS:A};else if(h.firstKeyFrame&&h.independent&&(this.couldBacktrack=!0),h.dropped&&h.independent){var L=this.getLoadPosition()+this.config.maxBufferHole;if(L<T)return void this.backtrack(d);d.setElementaryStreamInfo(h.type,d.start,w,d.start,A,!0)}d.setElementaryStreamInfo(h.type,T,w,S,A),this.bufferFragmentData(h,d,c,a)}}else if(!1===i.independent)return void this.backtrack(d);if(y){var k=y.startPTS,C=y.endPTS,_=y.startDTS,D=y.endDTS;c&&(c.elementaryStreams[p.ElementaryStreamTypes.AUDIO]={startPTS:k,endPTS:C,startDTS:_,endDTS:D}),d.setElementaryStreamInfo(p.ElementaryStreamTypes.AUDIO,k,C,_,D),this.bufferFragmentData(y,d,c,a)}if(null!==m&&void 0!==m&&null!==(t=m.samples)&&void 0!==t&&t.length){var R={frag:d,id:n,samples:m.samples};r.trigger(u.Events.FRAG_PARSING_METADATA,R)}if(v){var I={frag:d,id:n,samples:v.samples};r.trigger(u.Events.FRAG_PARSING_USERDATA,I)}}},n._bufferInitSegment=function(e,t,n,r){var i=this;if(this.state===l.State.PARSING){this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&delete t.audio;var a=t.audio,o=t.video,s=t.audiovideo;if(a){var d=e.audioCodec,c=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(d&&(d=-1!==d.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==a.metadata.channelCount&&-1===c.indexOf("firefox")&&(d="mp4a.40.5")),-1!==c.indexOf("android")&&"audio/mpeg"!==a.container&&(d="mp4a.40.2",this.log("Android: force audio codec to "+d)),e.audioCodec&&e.audioCodec!==d&&this.log('Swapping manifest audio codec "'+e.audioCodec+'" for "'+d+'"'),a.levelCodec=d,a.id="main",this.log("Init audio buffer, container:"+a.container+", codecs[selected/level/parsed]=["+(d||"")+"/"+(e.audioCodec||"")+"/"+a.codec+"]")}o&&(o.levelCodec=e.videoCodec,o.id="main",this.log("Init video buffer, container:"+o.container+", codecs[level/parsed]=["+(e.videoCodec||"")+"/"+o.codec+"]")),s&&this.log("Init audiovideo buffer, container:"+s.container+", codecs[level/parsed]=["+(e.attrs.CODECS||"")+"/"+s.codec+"]"),this.hls.trigger(u.Events.BUFFER_CODECS,t),Object.keys(t).forEach(function(e){var a=t[e],o=a.initSegment;null!==o&&void 0!==o&&o.byteLength&&i.hls.trigger(u.Events.BUFFER_APPENDING,{type:e,data:o,frag:n,part:null,chunkMeta:r,parent:n.type})}),this.tick()}},n.backtrack=function(e){this.couldBacktrack=!0,this.resetTransmuxer(),this.flushBufferGap(e);var t=this.fragmentTracker.backtrack(e);this.fragPrevious=null,this.nextLoadPosition=e.start,t?this.resetFragmentLoading(e):this.state=l.State.BACKTRACKING},n.checkFragmentChanged=function(){var e=this.media,t=null;if(e&&e.readyState>1&&!1===e.seeking){var n=e.currentTime;if(c.BufferHelper.isBuffered(e,n)?t=this.getAppendedFrag(n):c.BufferHelper.isBuffered(e,n+.1)&&(t=this.getAppendedFrag(n+.1)),t){var r=this.fragPlaying,i=t.level;r&&t.sn===r.sn&&r.level===i&&t.urlId===r.urlId||(this.hls.trigger(u.Events.FRAG_CHANGED,{frag:t}),r&&r.level===i||this.hls.trigger(u.Events.LEVEL_SWITCHED,{level:i}),this.fragPlaying=t)}}},i(t,[{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getAppendedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;if(e){var t=this.getAppendedFrag(e.currentTime);return this.followingBufferedFrag(t)}return null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}]),t}(l.default)},"./src/controller/subtitle-stream-controller.ts":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,o(e,t)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.r(t),n.d(t,"SubtitleStreamController",function(){return m});var s=n("./src/events.ts"),l=n("./src/utils/buffer-helper.ts"),d=n("./src/controller/fragment-finders.ts"),u=n("./src/utils/discontinuities.ts"),c=n("./src/controller/level-helper.ts"),f=n("./src/controller/fragment-tracker.ts"),h=n("./src/controller/base-stream-controller.ts"),p=n("./src/types/loader.ts"),v=n("./src/types/level.ts"),m=function(e){function t(t,n){var r;return r=e.call(this,t,n,"[subtitle-stream-controller]")||this,r.levels=[],r.currentTrackId=-1,r.tracksBuffered=[],r.mainDetails=null,r._registerListeners(),r}a(t,e);var n=t.prototype;return n.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},n._registerListeners=function(){var e=this.hls;e.on(s.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(s.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(s.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(s.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(s.Events.ERROR,this.onError,this),e.on(s.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(s.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(s.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(s.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(s.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},n._unregisterListeners=function(){var e=this.hls;e.off(s.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(s.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(s.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(s.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(s.Events.ERROR,this.onError,this),e.off(s.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(s.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(s.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(s.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(s.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},n.startLoad=function(){this.stopLoad(),this.state=h.State.IDLE,this.setInterval(500),this.tick()},n.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},n.onLevelLoaded=function(e,t){this.mainDetails=t.details},n.onSubtitleFragProcessed=function(e,t){var n=t.frag,r=t.success;if(this.fragPrevious=n,this.state=h.State.IDLE,r){var i=this.tracksBuffered[this.currentTrackId];if(i){for(var a,o=n.start,s=0;s<i.length;s++)if(o>=i[s].start&&o<=i[s].end){a=i[s];break}var l=n.start+n.duration;a?a.end=l:(a={start:o,end:l},i.push(a)),this.fragmentTracker.fragBuffered(n)}}},n.onBufferFlushing=function(e,t){var n=t.startOffset,r=t.endOffset;if(0===n&&r!==Number.POSITIVE_INFINITY){var i=this.currentTrackId,a=this.levels;if(!a.length||!a[i]||!a[i].details)return;var o=a[i].details,s=o.targetduration,l=r-s;if(l<=0)return;t.endOffsetSubtitles=Math.max(0,l),this.tracksBuffered.forEach(function(e){for(var t=0;t<e.length;)if(e[t].end<=l)e.shift();else{if(!(e[t].start<l))break;e[t].start=l,t++}}),this.fragmentTracker.removeFragmentsInRange(n,l,p.PlaylistLevelType.SUBTITLE)}},n.onError=function(e,t){var n,r=t.frag;r&&r.type===p.PlaylistLevelType.SUBTITLE&&(null!==(n=this.fragCurrent)&&void 0!==n&&n.loader&&this.fragCurrent.loader.abort(),this.state=h.State.IDLE)},n.onSubtitleTracksUpdated=function(e,t){var n=this,r=t.subtitleTracks;this.tracksBuffered=[],this.levels=r.map(function(e){return new v.Level(e)}),this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.levels.forEach(function(e){n.tracksBuffered[e.id]=[]}),this.mediaBuffer=null},n.onSubtitleTrackSwitch=function(e,t){if(this.currentTrackId=t.id,!this.levels.length||-1===this.currentTrackId)return void this.clearInterval();var n=this.levels[this.currentTrackId];null!==n&&void 0!==n&&n.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,n&&this.setInterval(500)},n.onSubtitleTrackLoaded=function(e,t){var n,r=t.details,i=t.id,a=this.currentTrackId,o=this.levels;if(o.length){var s=o[a];if(!(i>=o.length||i!==a)&&s){if(this.mediaBuffer=this.mediaBufferTimeRanges,r.live||null!==(n=s.details)&&void 0!==n&&n.live){var l=this.mainDetails;if(r.deltaUpdateFailed||!l)return;var f=l.fragments[0];if(s.details){0===this.alignPlaylists(r,s.details)&&f&&Object(c.addSliding)(r,f.start)}else r.hasProgramDateTime&&l.hasProgramDateTime?Object(u.alignMediaPlaylistByPDT)(r,l):f&&Object(c.addSliding)(r,f.start)}if(s.details=r,this.levelLastLoaded=i,this.tick(),r.live&&!this.fragCurrent&&this.media&&this.state===h.State.IDLE){Object(d.findFragmentByPTS)(null,r.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),s.details=void 0)}}}},n._handleFragmentLoadComplete=function(e){var t=e.frag,n=e.payload,r=t.decryptdata,i=this.hls;if(!this.fragContextChanged(t)&&n&&n.byteLength>0&&r&&r.key&&r.iv&&"AES-128"===r.method){var a=performance.now();this.decrypter.webCryptoDecrypt(new Uint8Array(n),r.key.buffer,r.iv.buffer).then(function(e){var n=performance.now();i.trigger(s.Events.FRAG_DECRYPTED,{frag:t,payload:e,stats:{tstart:a,tdecrypt:n}})})}},n.doTick=function(){if(!this.media)return void(this.state=h.State.IDLE);if(this.state===h.State.IDLE){var e,t=this.currentTrackId,n=this.levels;if(!n.length||!n[t]||!n[t].details)return;var r=n[t].details,i=r.targetduration,a=this.config,o=this.media,s=l.BufferHelper.bufferedInfo(this.mediaBufferTimeRanges,o.currentTime-i,a.maxBufferHole),u=s.end;if(s.len>this.getMaxBufferLength()+i)return;var c,p=r.fragments,v=p.length,m=r.edge,g=this.fragPrevious;if(u<m){var y=a.maxFragLookUpTolerance;c=Object(d.findFragmentByPTS)(g,p,u,y),!c&&g&&g.start<p[0].start&&(c=p[0])}else c=p[v-1];null!==(e=c)&&void 0!==e&&e.encrypted?this.loadKey(c,r):c&&this.fragmentTracker.getState(c)===f.FragmentState.NOT_LOADED&&this.loadFragment(c,r,u)}},n.loadFragment=function(t,n,r){this.fragCurrent=t,e.prototype.loadFragment.call(this,t,n,r)},i(t,[{key:"mediaBufferTimeRanges",get:function(){return this.tracksBuffered[this.currentTrackId]||[]}}]),t}(h.default)},"./src/controller/subtitle-track-controller.ts":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,o(e,t)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];"subtitles"===r.kind&&r.label&&t.push(e[n])}return t}n.r(t);var l=n("./src/events.ts"),d=n("./src/utils/texttrack-utils.ts"),u=n("./src/controller/base-playlist-controller.ts"),c=n("./src/types/loader.ts"),f=function(e){function t(t){var n;return n=e.call(this,t,"[subtitle-track-controller]")||this,n.media=null,n.tracks=[],n.groupId=null,n.tracksInGroup=[],n.trackId=-1,n.selectDefaultTrack=!0,n.queuedDefaultTrack=-1,n.trackChangeListener=function(){return n.onTextTracksChanged()},n.asyncPollTrackChange=function(){return n.pollTrackChange(0)},n.useTextTrackPolling=!1,n.subtitlePollingInterval=-1,n.subtitleDisplay=!0,n.registerListeners(),n}a(t,e);var n=t.prototype;return n.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,e.prototype.destroy.call(this)},n.registerListeners=function(){var e=this.hls;e.on(l.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(l.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(l.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(l.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(l.Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(l.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(l.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(l.Events.ERROR,this.onError,this)},n.unregisterListeners=function(){var e=this.hls;e.off(l.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(l.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(l.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(l.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(l.Events.LEVEL_LOADING,this.onLevelLoading,this),e.off(l.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(l.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(l.Events.ERROR,this.onError,this)},n.onMediaAttached=function(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},n.pollTrackChange=function(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,e)},n.onMediaDetaching=function(){if(this.media){self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId);s(this.media.textTracks).forEach(function(e){Object(d.clearCurrentCues)(e)}),this.subtitleTrack=-1,this.media=null}},n.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},n.onManifestParsed=function(e,t){this.tracks=t.subtitleTracks},n.onSubtitleTrackLoaded=function(e,t){var n=t.id,r=t.details,i=this.trackId,a=this.tracksInGroup[i];if(!a)return void this.warn("Invalid subtitle track id "+n);var o=a.details;a.details=t.details,this.log("subtitle track "+n+" loaded ["+r.startSN+"-"+r.endSN+"]"),n===this.trackId&&(this.retryCount=0,this.playlistLoaded(n,t,o))},n.onLevelLoading=function(e,t){this.switchLevel(t.level)},n.onLevelSwitching=function(e,t){this.switchLevel(t.level)},n.switchLevel=function(e){var t=this.hls.levels[e];if(null!==t&&void 0!==t&&t.textGroupIds){var n=t.textGroupIds[t.urlId];if(this.groupId!==n){var r=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,i=this.tracks.filter(function(e){return!n||e.groupId===n});this.tracksInGroup=i;var a=this.findTrackId(null===r||void 0===r?void 0:r.name)||this.findTrackId();this.groupId=n;var o={subtitleTracks:i};this.log("Updating subtitle tracks, "+i.length+' track(s) found in "'+n+'" group-id'),this.hls.trigger(l.Events.SUBTITLE_TRACKS_UPDATED,o),-1!==a&&this.setSubtitleTrack(a,r)}}},n.findTrackId=function(e){for(var t=this.tracksInGroup,n=0;n<t.length;n++){var r=t[n];if((!this.selectDefaultTrack||r.default)&&(!e||e===r.name))return r.id}return-1},n.onError=function(t,n){e.prototype.onError.call(this,t,n),!n.fatal&&n.context&&n.context.type===c.PlaylistContextType.SUBTITLE_TRACK&&n.context.id===this.trackId&&n.context.groupId===this.groupId&&this.retryLoadingOrFail(n)},n.loadPlaylist=function(e){var t=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(t)){var n=t.id,r=t.groupId,i=t.url;if(e)try{i=e.addDirectives(i)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}this.log("Loading subtitle playlist for id "+n),this.hls.trigger(l.Events.SUBTITLE_TRACK_LOADING,{url:i,id:n,groupId:r,deliveryDirectives:e||null})}},n.toggleTrackModes=function(e){var t=this,n=this.media,r=this.subtitleDisplay,i=this.trackId;if(n){var a=s(n.textTracks),o=a.filter(function(e){return e.groupId===t.groupId});if(-1===e)[].slice.call(a).forEach(function(e){e.mode="disabled"});else{var l=o[i];l&&(l.mode="disabled")}var d=o[e];d&&(d.mode=r?"showing":"hidden")}},n.setSubtitleTrack=function(e,t){var n,r=this.tracksInGroup;if(!this.media)return void(this.queuedDefaultTrack=e);if(this.trackId!==e&&this.toggleTrackModes(e),!(this.trackId===e&&(-1===e||null!==(n=r[e])&&void 0!==n&&n.details)||e<-1||e>=r.length)){this.clearTimer();var i=r[e];if(this.log("Switching to subtitle track "+e),this.trackId=e,i){var a=i.id,o=i.groupId,s=void 0===o?"":o,d=i.name,u=i.type,c=i.url;this.hls.trigger(l.Events.SUBTITLE_TRACK_SWITCH,{id:a,groupId:s,name:d,type:u,url:c});var f=this.switchParams(i.url,null===t||void 0===t?void 0:t.details);this.loadPlaylist(f)}else this.hls.trigger(l.Events.SUBTITLE_TRACK_SWITCH,{id:e})}},n.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),this.media&&this.hls.config.renderTextTracksNatively){for(var e=-1,t=s(this.media.textTracks),n=0;n<t.length;n++)if("hidden"===t[n].mode)e=n;else if("showing"===t[n].mode){e=n;break}this.subtitleTrack!==e&&(this.subtitleTrack=e)}},i(t,[{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.selectDefaultTrack=!1;var t=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(e,t)}}]),t}(u.default);t.default=f},"./src/controller/timeline-controller.ts":function(e,t,n){"use strict";function r(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}function i(e,t,n,r){return Math.min(t,r)-Math.max(e,n)}function a(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}}}n.r(t),n.d(t,"TimelineController",function(){return v});var o=n("./src/polyfills/number.ts"),s=n("./src/events.ts"),l=n("./src/utils/cea-608-parser.ts"),d=n("./src/utils/output-filter.ts"),u=n("./src/utils/webvtt-parser.ts"),c=n("./src/utils/texttrack-utils.ts"),f=n("./src/utils/imsc1-ttml-parser.ts"),h=n("./src/types/loader.ts"),p=n("./src/utils/logger.ts"),v=function(){function e(e){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.timescale=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=a(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var t=new d.default(this,"textTrack1"),n=new d.default(this,"textTrack2"),r=new d.default(this,"textTrack3"),i=new d.default(this,"textTrack4");this.cea608Parser1=new l.default(1,t,n),this.cea608Parser2=new l.default(3,r,i)}e.on(s.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(s.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(s.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(s.Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(s.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(s.Events.FRAG_LOADING,this.onFragLoading,this),e.on(s.Events.FRAG_LOADED,this.onFragLoaded,this),e.on(s.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(s.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(s.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(s.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(s.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)}var t=e.prototype;return t.destroy=function(){var e=this.hls;e.off(s.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(s.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(s.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(s.Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(s.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(s.Events.FRAG_LOADING,this.onFragLoading,this),e.off(s.Events.FRAG_LOADED,this.onFragLoaded,this),e.off(s.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(s.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(s.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(s.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(s.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},t.addCues=function(e,t,n,r,a){for(var o=!1,l=a.length;l--;){var d=a[l],u=i(d[0],d[1],t,n);if(u>=0&&(d[0]=Math.min(d[0],t),d[1]=Math.max(d[1],n),o=!0,u/(n-t)>.5))return}if(o||a.push([t,n]),this.config.renderTextTracksNatively){var c=this.captionsTracks[e];this.Cues.newCue(c,t,n,r)}else{var f=this.Cues.newCue(null,t,n,r);this.hls.trigger(s.Events.CUES_PARSED,{type:"captions",cues:f,track:e})}},t.onInitPtsFound=function(e,t){var n=this,r=t.frag,i=t.id,a=t.initPTS,o=t.timescale,l=this.unparsedVttFrags;"main"===i&&(this.initPTS[r.cc]=a,this.timescale[r.cc]=o),l.length&&(this.unparsedVttFrags=[],l.forEach(function(e){n.onFragLoaded(s.Events.FRAG_LOADED,e)}))},t.getExistingTrack=function(e){var t=this.media;if(t)for(var n=0;n<t.textTracks.length;n++){var r=t.textTracks[n];if(r[e])return r}return null},t.createCaptionsTrack=function(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)},t.createNativeTrack=function(e){if(!this.captionsTracks[e]){var t=this.captionsProperties,n=this.captionsTracks,r=this.media,i=t[e],a=i.label,o=i.languageCode,s=this.getExistingTrack(e);if(s)n[e]=s,Object(c.clearCurrentCues)(n[e]),Object(c.sendAddTrackEvent)(n[e],r);else{var l=this.createTextTrack("captions",a,o);l&&(l[e]=!0,n[e]=l)}}},t.createNonNativeTrack=function(e){if(!this.nonNativeCaptionsTracks[e]){var t=this.captionsProperties[e];if(t){var n=t.label,r={_id:e,label:n,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=r,this.hls.trigger(s.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[r]})}}},t.createTextTrack=function(e,t,n){var r=this.media;if(r)return r.addTextTrack(e,t,n)},t.onMediaAttaching=function(e,t){this.media=t.media,this._cleanTracks()},t.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach(function(t){Object(c.clearCurrentCues)(e[t]),delete e[t]}),this.nonNativeCaptionsTracks={}},t.onManifestLoading=function(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=a(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.timescale=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},t._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var n=0;n<t.length;n++)Object(c.clearCurrentCues)(t[n])}},t.onSubtitleTracksUpdated=function(e,t){var n=this;this.textTracks=[];var i=t.subtitleTracks||[],a=i.some(function(e){return e.textCodec===f.IMSC1_CODEC});if(this.config.enableWebVTT||a&&this.config.enableIMSC1){var o=this.tracks&&i&&this.tracks.length===i.length;if(this.tracks=i||[],this.config.renderTextTracksNatively){var l=this.media?this.media.textTracks:[];this.tracks.forEach(function(e,t){var i;if(t<l.length){for(var a=null,o=0;o<l.length;o++)if(r(l[o],e)){a=l[o];break}a&&(i=a)}i?Object(c.clearCurrentCues)(i):(i=n.createTextTrack("subtitles",e.name,e.lang))&&(i.mode="disabled"),i&&(i.groupId=e.groupId,n.textTracks.push(i))})}else if(!o&&this.tracks&&this.tracks.length){var d=this.tracks.map(function(e){return{label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e}});this.hls.trigger(s.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:d})}}},t.onManifestLoaded=function(e,t){var n=this;this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(function(e){var t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(t){var r="textTrack"+t[1],i=n.captionsProperties[r];i&&(i.label=e.name,e.lang&&(i.languageCode=e.lang),i.media=e)}})},t.onFragLoading=function(e,t){var n=this.cea608Parser1,r=this.cea608Parser2,i=this.lastSn,a=this.lastPartIndex;if(this.enabled&&n&&r&&t.frag.type===h.PlaylistLevelType.MAIN){var o,s,l=t.frag.sn,d=null!=(o=null===t||void 0===t?void 0:null===(s=t.part)||void 0===s?void 0:s.index)?o:-1;l===i+1||l===i&&d===a+1||(n.reset(),r.reset()),this.lastSn=l,this.lastPartIndex=d}},t.onFragLoaded=function(e,t){var n=t.frag,r=t.payload,i=this.initPTS,a=this.unparsedVttFrags;if(n.type===h.PlaylistLevelType.SUBTITLE)if(r.byteLength){if(!Object(o.isFiniteNumber)(i[n.cc]))return a.push(t),void(i.length&&this.hls.trigger(s.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Missing initial subtitle PTS")}));var l=n.decryptdata,d="stats"in t;if(null==l||null==l.key||"AES-128"!==l.method||d){var u=this.tracks[n.level],c=this.vttCCs;c[n.cc]||(c[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),u&&u.textCodec===f.IMSC1_CODEC?this._parseIMSC1(n,r):this._parseVTTs(n,r,c)}}else this.hls.trigger(s.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})},t._parseIMSC1=function(e,t){var n=this,r=this.hls;Object(f.parseIMSC1)(t,this.initPTS[e.cc],this.timescale[e.cc],function(t){n._appendCues(t,e.level),r.trigger(s.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},function(t){p.logger.log("Failed to parse IMSC1: "+t),r.trigger(s.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:t})})},t._parseVTTs=function(e,t,n){var r=this,i=this.hls;Object(u.parseWebVTT)(t,this.initPTS[e.cc],this.timescale[e.cc],n,e.cc,e.start,function(t){r._appendCues(t,e.level),i.trigger(s.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},function(n){r._fallbackToIMSC1(e,t),p.logger.log("Failed to parse VTT cue: "+n),i.trigger(s.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:n})})},t._fallbackToIMSC1=function(e,t){var n=this,r=this.tracks[e.level];r.textCodec||Object(f.parseIMSC1)(t,this.initPTS[e.cc],this.timescale[e.cc],function(){r.textCodec=f.IMSC1_CODEC,n._parseIMSC1(e,t)},function(){r.textCodec="wvtt"})},t._appendCues=function(e,t){var n=this.hls;if(this.config.renderTextTracksNatively){var r=this.textTracks[t];if("disabled"===r.mode)return;e.forEach(function(e){return Object(c.addCueToTrack)(r,e)})}else{var i=this.tracks[t],a=i.default?"default":"subtitles"+t;n.trigger(s.Events.CUES_PARSED,{type:"subtitles",cues:e,track:a})}},t.onFragDecrypted=function(e,t){var n=t.frag;if(n.type===h.PlaylistLevelType.SUBTITLE){if(!Object(o.isFiniteNumber)(this.initPTS[n.cc]))return void this.unparsedVttFrags.push(t);this.onFragLoaded(s.Events.FRAG_LOADED,t)}},t.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},t.onFragParsingUserdata=function(e,t){var n=this.cea608Parser1,r=this.cea608Parser2;if(this.enabled&&n&&r)for(var i=0;i<t.samples.length;i++){var a=t.samples[i].bytes;if(a){var o=this.extractCea608Data(a);n.addData(t.samples[i].pts,o[0]),r.addData(t.samples[i].pts,o[1])}}},t.onBufferFlushing=function(e,t){var n=t.startOffset,r=t.endOffset,i=t.endOffsetSubtitles,a=t.type,o=this.media;if(o&&!(o.currentTime<r)){if(!a||"video"===a){var s=this.captionsTracks;Object.keys(s).forEach(function(e){return Object(c.removeCuesInRange)(s[e],n,r)})}if(this.config.renderTextTracksNatively&&0===n&&void 0!==i){var l=this.textTracks;Object.keys(l).forEach(function(e){return Object(c.removeCuesInRange)(l[e],n,i)})}}},t.extractCea608Data=function(e){for(var t=31&e[0],n=2,r=[[],[]],i=0;i<t;i++){var a=e[n++],o=127&e[n++],s=127&e[n++],l=0!=(4&a),d=3&a;0===o&&0===s||l&&(0!==d&&1!==d||(r[d].push(o),r[d].push(s)))}return r},e}()},"./src/crypt/aes-crypto.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return r});var r=function(){function e(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}()},"./src/crypt/aes-decryptor.ts":function(e,t,n){"use strict";function r(e){var t=e.byteLength,n=t&&new DataView(e.buffer).getUint8(t-1);return n?Object(i.sliceUint8)(e,0,t-n):e}n.r(t),n.d(t,"removePadding",function(){return r}),n.d(t,"default",function(){return a});var i=n("./src/utils/typed-array.ts"),a=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var t=e.prototype;return t.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),n=new Uint32Array(4),r=0;r<4;r++)n[r]=t.getUint32(4*r);return n},t.initTable=function(){var e=this.sBox,t=this.invSBox,n=this.subMix,r=n[0],i=n[1],a=n[2],o=n[3],s=this.invSubMix,l=s[0],d=s[1],u=s[2],c=s[3],f=new Uint32Array(256),h=0,p=0,v=0;for(v=0;v<256;v++)f[v]=v<128?v<<1:v<<1^283;for(v=0;v<256;v++){var m=p^p<<1^p<<2^p<<3^p<<4;m=m>>>8^255&m^99,e[h]=m,t[m]=h;var g=f[h],y=f[g],E=f[y],b=257*f[m]^16843008*m;r[h]=b<<24|b>>>8,i[h]=b<<16|b>>>16,a[h]=b<<8|b>>>24,o[h]=b,b=16843009*E^65537*y^257*g^16843008*h,l[m]=b<<24|b>>>8,d[m]=b<<16|b>>>16,u[m]=b<<8|b>>>24,c[m]=b,h?(h=g^f[f[f[E^g]]],p^=f[f[p]]):h=p=1}},t.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),n=!0,r=0;r<t.length&&n;)n=t[r]===this.key[r],r++;if(!n){this.key=t;var i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var a,o,s,l,d=this.ksRows=4*(i+6+1),u=this.keySchedule=new Uint32Array(d),c=this.invKeySchedule=new Uint32Array(d),f=this.sBox,h=this.rcon,p=this.invSubMix,v=p[0],m=p[1],g=p[2],y=p[3];for(a=0;a<d;a++)a<i?s=u[a]=t[a]:(l=s,a%i==0?(l=l<<8|l>>>24,l=f[l>>>24]<<24|f[l>>>16&255]<<16|f[l>>>8&255]<<8|f[255&l],l^=h[a/i|0]<<24):i>6&&a%i==4&&(l=f[l>>>24]<<24|f[l>>>16&255]<<16|f[l>>>8&255]<<8|f[255&l]),u[a]=s=(u[a-i]^l)>>>0);for(o=0;o<d;o++)a=d-o,l=3&o?u[a]:u[a-4],c[o]=o<4||a<=4?l:v[f[l>>>24]]^m[f[l>>>16&255]]^g[f[l>>>8&255]]^y[f[255&l]],c[o]=c[o]>>>0}},t.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},t.decrypt=function(e,t,n){for(var r,i,a,o,s,l,d,u,c,f,h,p,v,m,g=this.keySize+6,y=this.invKeySchedule,E=this.invSBox,b=this.invSubMix,T=b[0],w=b[1],S=b[2],A=b[3],L=this.uint8ArrayToUint32Array_(n),k=L[0],C=L[1],_=L[2],D=L[3],R=new Int32Array(e),I=new Int32Array(R.length),x=this.networkToHostOrderSwap;t<R.length;){for(c=x(R[t]),f=x(R[t+1]),h=x(R[t+2]),p=x(R[t+3]),s=c^y[0],l=p^y[1],d=h^y[2],u=f^y[3],v=4,m=1;m<g;m++)r=T[s>>>24]^w[l>>16&255]^S[d>>8&255]^A[255&u]^y[v],i=T[l>>>24]^w[d>>16&255]^S[u>>8&255]^A[255&s]^y[v+1],a=T[d>>>24]^w[u>>16&255]^S[s>>8&255]^A[255&l]^y[v+2],o=T[u>>>24]^w[s>>16&255]^S[l>>8&255]^A[255&d]^y[v+3],s=r,l=i,d=a,u=o,v+=4;r=E[s>>>24]<<24^E[l>>16&255]<<16^E[d>>8&255]<<8^E[255&u]^y[v],i=E[l>>>24]<<24^E[d>>16&255]<<16^E[u>>8&255]<<8^E[255&s]^y[v+1],a=E[d>>>24]<<24^E[u>>16&255]<<16^E[s>>8&255]<<8^E[255&l]^y[v+2],o=E[u>>>24]<<24^E[s>>16&255]<<16^E[l>>8&255]<<8^E[255&d]^y[v+3],I[t]=x(r^k),I[t+1]=x(o^C),I[t+2]=x(a^_),I[t+3]=x(i^D),k=c,C=f,_=h,D=p,t+=4}return I.buffer},e}()},"./src/crypt/decrypter.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return d});var r=n("./src/crypt/aes-crypto.ts"),i=n("./src/crypt/fast-aes-key.ts"),a=n("./src/crypt/aes-decryptor.ts"),o=n("./src/utils/logger.ts"),s=n("./src/utils/mp4-tools.ts"),l=n("./src/utils/typed-array.ts"),d=function(){function e(e,t,n){var r=void 0===n?{}:n,i=r.removePKCS7Padding,a=void 0===i||i;if(this.logEnabled=!0,this.observer=void 0,this.config=void 0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.observer=e,this.config=t,this.removePKCS7Padding=a,a)try{var o=self.crypto;o&&(this.subtle=o.subtle||o.webkitSubtle)}catch(e){}null===this.subtle&&(this.config.enableSoftwareAES=!0)}var t=e.prototype;return t.destroy=function(){this.observer=null},t.isSync=function(){return this.config.enableSoftwareAES},t.flush=function(){var e=this.currentResult;if(!e)return void this.reset();var t=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?Object(a.removePadding)(t):t},t.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},t.decrypt=function(e,t,n,r){if(this.config.enableSoftwareAES){this.softwareDecrypt(new Uint8Array(e),t,n);var i=this.flush();i&&r(i.buffer)}else this.webCryptoDecrypt(new Uint8Array(e),t,n).then(r)},t.softwareDecrypt=function(e,t,n){var r=this.currentIV,i=this.currentResult,o=this.remainderData;this.logOnce("JS AES decrypt"),o&&(e=Object(s.appendUint8Array)(o,e),this.remainderData=null);var d=this.getValidChunk(e);if(!d.length)return null;r&&(n=r);var u=this.softwareDecrypter;u||(u=this.softwareDecrypter=new a.default),u.expandKey(t);var c=i;return this.currentResult=u.decrypt(d.buffer,0,n),this.currentIV=Object(l.sliceUint8)(d,-16).buffer,c||null},t.webCryptoDecrypt=function(e,t,n){var a=this,o=this.subtle;return this.key===t&&this.fastAesKey||(this.key=t,this.fastAesKey=new i.default(o,t)),this.fastAesKey.expandKey().then(function(t){return o?new r.default(o,n).decrypt(e.buffer,t):Promise.reject(new Error("web crypto not initialized"))}).catch(function(r){return a.onWebCryptoError(r,e,t,n)})},t.onWebCryptoError=function(e,t,n,r){return o.logger.warn("[decrypter.ts]: WebCrypto Error, disable WebCrypto API:",e),this.config.enableSoftwareAES=!0,this.logEnabled=!0,this.softwareDecrypt(t,n,r)},t.getValidChunk=function(e){var t=e,n=e.length-e.length%16;return n!==e.length&&(t=Object(l.sliceUint8)(e,0,n),this.remainderData=Object(l.sliceUint8)(e,n)),t},t.logOnce=function(e){this.logEnabled&&(o.logger.log("[decrypter.ts]: "+e),this.logEnabled=!1)},e}()},"./src/crypt/fast-aes-key.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return r});var r=function(){function e(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}()},"./src/demux/aacdemuxer.ts":function(e,t,n){"use strict";function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.r(t);var a=n("./src/demux/base-audio-demuxer.ts"),o=n("./src/demux/adts.ts"),s=n("./src/utils/logger.ts"),l=n("./src/demux/id3.ts"),d=function(e){function t(t,n){var r;return r=e.call(this)||this,r.observer=void 0,r.config=void 0,r.observer=t,r.config=n,r}r(t,e);var n=t.prototype;return n.resetInitSegment=function(t,n,r){e.prototype.resetInitSegment.call(this,t,n,r),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,isAAC:!0,samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}},t.probe=function(e){if(!e)return!1;for(var t=l.getID3Data(e,0)||[],n=t.length,r=e.length;n<r;n++)if(o.probe(e,n))return s.logger.log("ADTS sync word found !"),!0;return!1},n.canParse=function(e,t){return o.canParse(e,t)},n.appendFrame=function(e,t,n){o.initTrackConfig(e,this.observer,t,n,e.manifestCodec);var r=o.appendFrame(e,t,n,this.initPTS,this.frameIndex);if(r&&0===r.missing)return r},t}(a.default);d.minProbeByteLength=9,t.default=d},"./src/demux/adts.ts":function(e,t,n){"use strict";function r(e,t,n,r){var i,a,o,s,l=navigator.userAgent.toLowerCase(),d=r,u=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];i=1+((192&t[n+2])>>>6);var c=(60&t[n+2])>>>2;return c>u.length-1?void e.trigger(g.Events.ERROR,{type:m.ErrorTypes.MEDIA_ERROR,details:m.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+c}):(o=(1&t[n+2])<<2,o|=(192&t[n+3])>>>6,v.logger.log("manifest codec:"+r+", ADTS type:"+i+", samplingIndex:"+c),/firefox/i.test(l)?c>=6?(i=5,s=new Array(4),a=c-3):(i=2,s=new Array(2),a=c):-1!==l.indexOf("android")?(i=2,s=new Array(2),a=c):(i=5,s=new Array(4),r&&(-1!==r.indexOf("mp4a.40.29")||-1!==r.indexOf("mp4a.40.5"))||!r&&c>=6?a=c-3:((r&&-1!==r.indexOf("mp4a.40.2")&&(c>=6&&1===o||/vivaldi/i.test(l))||!r&&1===o)&&(i=2,s=new Array(2)),a=c)),s[0]=i<<3,s[0]|=(14&c)>>1,s[1]|=(1&c)<<7,s[1]|=o<<3,5===i&&(s[1]|=(14&a)>>1,s[2]=(1&a)<<7,s[2]|=8,s[3]=0),{config:s,samplerate:u[c],channelCount:o,codec:"mp4a.40."+i,manifestCodec:d})}function i(e,t){return 255===e[t]&&240==(246&e[t+1])}function a(e,t){return 1&e[t+1]?7:9}function o(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function s(e,t){return t+5<e.length}function l(e,t){return t+1<e.length&&i(e,t)}function d(e,t){return s(e,t)&&i(e,t)&&o(e,t)<=e.length-t}function u(e,t){if(l(e,t)){var n=a(e,t);if(t+n>=e.length)return!1;var r=o(e,t);if(r<=n)return!1;var i=t+r;return i===e.length||l(e,i)}return!1}function c(e,t,n,i,a){if(!e.samplerate){var o=r(t,n,i,a);if(!o)return;e.config=o.config,e.samplerate=o.samplerate,e.channelCount=o.channelCount,e.codec=o.codec,e.manifestCodec=o.manifestCodec,v.logger.log("parsed codec:"+e.codec+", rate:"+o.samplerate+", channels:"+o.channelCount)}}function f(e){return 9216e4/e}function h(e,t,n,r,i){var s=a(e,t),l=o(e,t);if((l-=s)>0){return{headerLength:s,frameLength:l,stamp:n+r*i}}}function p(e,t,n,r,i){var a=f(e.samplerate),o=h(t,n,r,i,a);if(o){var s,l=o.frameLength,d=o.headerLength,u=o.stamp,c=d+l,p=Math.max(0,n+c-t.length);p?(s=new Uint8Array(c-d),s.set(t.subarray(n+d,t.length),0)):s=t.subarray(n+d,n+c);var v={unit:s,pts:u};return p||e.samples.push(v),{sample:v,length:c,missing:p}}}n.r(t),n.d(t,"getAudioConfig",function(){return r}),n.d(t,"isHeaderPattern",function(){return i}),n.d(t,"getHeaderLength",function(){return a}),n.d(t,"getFullFrameLength",function(){return o}),n.d(t,"canGetFrameLength",function(){return s}),n.d(t,"isHeader",function(){return l}),n.d(t,"canParse",function(){return d}),n.d(t,"probe",function(){return u}),n.d(t,"initTrackConfig",function(){return c}),n.d(t,"getFrameDuration",function(){return f}),n.d(t,"parseFrameHeader",function(){return h}),n.d(t,"appendFrame",function(){return p});var v=n("./src/utils/logger.ts"),m=n("./src/errors.ts"),g=n("./src/events.ts")},"./src/demux/base-audio-demuxer.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"initPTSFn",function(){return d});var r=n("./src/polyfills/number.ts"),i=n("./src/demux/id3.ts"),a=n("./src/demux/dummy-demuxed-track.ts"),o=n("./src/utils/mp4-tools.ts"),s=n("./src/utils/typed-array.ts"),l=function(){function e(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.initPTS=null}var t=e.prototype;return t.resetInitSegment=function(e,t,n){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},t.resetTimeStamp=function(){},t.resetContiguity=function(){},t.canParse=function(e,t){return!1},t.appendFrame=function(e,t,n){},t.demux=function(e,t){this.cachedData&&(e=Object(o.appendUint8Array)(this.cachedData,e),this.cachedData=null);var n,r,l=i.getID3Data(e,0),u=l?l.length:0,c=this._audioTrack,f=this._id3Track,h=l?i.getTimeStamp(l):void 0,p=e.length;for(0!==this.frameIndex&&null!==this.initPTS||(this.initPTS=d(h,t)),l&&l.length>0&&f.samples.push({pts:this.initPTS,dts:this.initPTS,data:l}),r=this.initPTS;u<p;){if(this.canParse(e,u)){var v=this.appendFrame(c,e,u);v?(this.frameIndex++,r=v.sample.pts,u+=v.length,n=u):u=p}else i.canParse(e,u)?(l=i.getID3Data(e,u),f.samples.push({pts:r,dts:r,data:l}),u+=l.length,n=u):u++;if(u===p&&n!==p){var m=Object(s.sliceUint8)(e,n);this.cachedData?this.cachedData=Object(o.appendUint8Array)(this.cachedData,m):this.cachedData=m}}return{audioTrack:c,avcTrack:Object(a.dummyTrack)(),id3Track:f,textTrack:Object(a.dummyTrack)()}},t.demuxSampleAes=function(e,t,n){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},t.flush=function(e){var t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),this.frameIndex=0,{audioTrack:this._audioTrack,avcTrack:Object(a.dummyTrack)(),id3Track:this._id3Track,textTrack:Object(a.dummyTrack)()}},t.destroy=function(){},e}(),d=function(e,t){return Object(r.isFiniteNumber)(e)?90*e:9e4*t};t.default=l},"./src/demux/chunk-cache.ts":function(e,t,n){"use strict";function r(e,t){for(var n=new Uint8Array(t),r=0,i=0;i<e.length;i++){var a=e[i];n.set(a,r),r+=a.length}return n}n.r(t),n.d(t,"default",function(){return i});var i=function(){function e(){this.chunks=[],this.dataLength=0}var t=e.prototype;return t.push=function(e){this.chunks.push(e),this.dataLength+=e.length},t.flush=function(){var e,t=this.chunks,n=this.dataLength;return t.length?(e=1===t.length?t[0]:r(t,n),this.reset(),e):new Uint8Array(0)},t.reset=function(){this.chunks.length=0,this.dataLength=0},e}()},"./src/demux/dummy-demuxed-track.ts":function(e,t,n){"use strict";function r(){return{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}n.r(t),n.d(t,"dummyTrack",function(){return r})},"./src/demux/exp-golomb.ts":function(e,t,n){"use strict";n.r(t);var r=n("./src/utils/logger.ts"),i=function(){function e(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}var t=e.prototype;return t.loadWord=function(){var e=this.data,t=this.bytesAvailable,n=e.byteLength-t,r=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");r.set(e.subarray(n,n+i)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},t.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},t.readBits=function(e){var t=Math.min(this.bitsAvailable,e),n=this.word>>>32-t;return e>32&&r.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),t=e-t,t>0&&this.bitsAvailable?n<<t|this.readBits(t):n},t.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},t.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.skipEG=function(){this.skipBits(1+this.skipLZ())},t.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},t.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},t.readBoolean=function(){return 1===this.readBits(1)},t.readUByte=function(){return this.readBits(8)},t.readUShort=function(){return this.readBits(16)},t.readUInt=function(){return this.readBits(32)},t.skipScalingList=function(e){for(var t,n=8,r=8,i=0;i<e;i++)0!==r&&(t=this.readEG(),r=(n+t+256)%256),n=0===r?n:r},t.readSPS=function(){var e,t,n,r=0,i=0,a=0,o=0,s=this.readUByte.bind(this),l=this.readBits.bind(this),d=this.readUEG.bind(this),u=this.readBoolean.bind(this),c=this.skipBits.bind(this),f=this.skipEG.bind(this),h=this.skipUEG.bind(this),p=this.skipScalingList.bind(this);s();var v=s();if(l(5),c(3),s(),h(),100===v||110===v||122===v||244===v||44===v||83===v||86===v||118===v||128===v){var m=d();if(3===m&&c(1),h(),h(),c(1),u())for(t=3!==m?8:12,n=0;n<t;n++)u()&&p(n<6?16:64)}h();var g=d();if(0===g)d();else if(1===g)for(c(1),f(),f(),e=d(),n=0;n<e;n++)f();h(),c(1);var y=d(),E=d(),b=l(1);0===b&&c(1),c(1),u()&&(r=d(),i=d(),a=d(),o=d());var T=[1,1];if(u()&&u()){switch(s()){case 1:T=[1,1];break;case 2:T=[12,11];break;case 3:T=[10,11];break;case 4:T=[16,11];break;case 5:T=[40,33];break;case 6:T=[24,11];break;case 7:T=[20,11];break;case 8:T=[32,11];break;case 9:T=[80,33];break;case 10:T=[18,11];break;case 11:T=[15,11];break;case 12:T=[64,33];break;case 13:T=[160,99];break;case 14:T=[4,3];break;case 15:T=[3,2];break;case 16:T=[2,1];break;case 255:T=[s()<<8|s(),s()<<8|s()]}}return{width:Math.ceil(16*(y+1)-2*r-2*i),height:(2-b)*(E+1)*16-(b?2:4)*(a+o),pixelRatio:T}},t.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}();t.default=i},"./src/demux/id3.ts":function(e,t,n){"use strict";function r(){return i||void 0===self.TextDecoder||(i=new self.TextDecoder("utf-8")),i}n.r(t),n.d(t,"isHeader",function(){return a}),n.d(t,"isFooter",function(){return o}),n.d(t,"getID3Data",function(){return s}),n.d(t,"canParse",function(){return d}),n.d(t,"getTimeStamp",function(){return u}),n.d(t,"isTimeStampFrame",function(){return c}),n.d(t,"getID3Frames",function(){return h}),n.d(t,"decodeFrame",function(){return p}),n.d(t,"utf8ArrayToStr",function(){return E}),n.d(t,"testables",function(){return b});var i,a=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},o=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},s=function(e,t){for(var n=t,r=0;a(e,t);){r+=10;r+=l(e,t+6),o(e,t+10)&&(r+=10),t+=r}if(r>0)return e.subarray(n,n+r)},l=function(e,t){var n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3]},d=function(e,t){return a(e,t)&&l(e,t+6)+10<=e.length-t},u=function(e){for(var t=h(e),n=0;n<t.length;n++){var r=t[n];if(c(r))return y(r)}},c=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},f=function(e){var t=String.fromCharCode(e[0],e[1],e[2],e[3]),n=l(e,4);return{type:t,size:n,data:e.subarray(10,10+n)}},h=function(e){for(var t=0,n=[];a(e,t);){var r=l(e,t+6);t+=10;for(var i=t+r;t+8<i;){var s=f(e.subarray(t)),d=p(s);d&&n.push(d),t+=s.size+10}o(e,t)&&(t+=10)}return n},p=function(e){return"PRIV"===e.type?v(e):"W"===e.type[0]?g(e):m(e)},v=function(e){if(!(e.size<2)){var t=E(e.data,!0),n=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:n.buffer}}},m=function(e){if(!(e.size<2)){if("TXXX"===e.type){var t=1,n=E(e.data.subarray(t),!0);t+=n.length+1;var r=E(e.data.subarray(t));return{key:e.type,info:n,data:r}}var i=E(e.data.subarray(1));return{key:e.type,data:i}}},g=function(e){if("WXXX"===e.type){if(e.size<2)return;var t=1,n=E(e.data.subarray(t),!0);t+=n.length+1;var r=E(e.data.subarray(t));return{key:e.type,info:n,data:r}}var i=E(e.data);return{key:e.type,data:i}},y=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),n=1&t[3],r=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return r/=45,n&&(r+=47721858.84),Math.round(r)}},E=function(e,t){void 0===t&&(t=!1);var n=r();if(n){var i=n.decode(e);if(t){var a=i.indexOf("\0");return-1!==a?i.substring(0,a):i}return i.replace(/\0/g,"")}for(var o,s,l,d=e.length,u="",c=0;c<d;){if(0===(o=e[c++])&&t)return u;if(0!==o&&3!==o)switch(o>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:u+=String.fromCharCode(o);break;case 12:case 13:s=e[c++],u+=String.fromCharCode((31&o)<<6|63&s);break;case 14:s=e[c++],l=e[c++],u+=String.fromCharCode((15&o)<<12|(63&s)<<6|(63&l)<<0)}}return u},b={decodeTextFrame:m}},"./src/demux/mp3demuxer.ts":function(e,t,n){"use strict";function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.r(t);var a=n("./src/demux/base-audio-demuxer.ts"),o=n("./src/demux/id3.ts"),s=n("./src/utils/logger.ts"),l=n("./src/demux/mpegaudio.ts"),d=function(e){function t(){return e.apply(this,arguments)||this}r(t,e);var n=t.prototype;return n.resetInitSegment=function(t,n,r){e.prototype.resetInitSegment.call(this,t,n,r),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,isAAC:!1,samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}},t.probe=function(e){if(!e)return!1;for(var t=o.getID3Data(e,0)||[],n=t.length,r=e.length;n<r;n++)if(l.probe(e,n))return s.logger.log("MPEG Audio sync word found !"),!0;return!1},n.canParse=function(e,t){return l.canParse(e,t)},n.appendFrame=function(e,t,n){if(null!==this.initPTS)return l.appendFrame(e,t,n,this.initPTS,this.frameIndex)},t}(a.default);d.minProbeByteLength=4,t.default=d},"./src/demux/mp4demuxer.ts":function(e,t,n){"use strict";n.r(t);var r=n("./src/utils/mp4-tools.ts"),i=n("./src/demux/dummy-demuxed-track.ts"),a=function(){function e(e,t){this.remainderData=null,this.config=void 0,this.config=t}var t=e.prototype;return t.resetTimeStamp=function(){},t.resetInitSegment=function(){},t.resetContiguity=function(){},e.probe=function(e){return Object(r.findBox)({data:e,start:0,end:Math.min(e.length,16384)},["moof"]).length>0},t.demux=function(e){var t=e,n=Object(i.dummyTrack)();if(this.config.progressive){this.remainderData&&(t=Object(r.appendUint8Array)(this.remainderData,e));var a=Object(r.segmentValidRange)(t);this.remainderData=a.remainder,n.samples=a.valid||new Uint8Array}else n.samples=t;return{audioTrack:Object(i.dummyTrack)(),avcTrack:n,id3Track:Object(i.dummyTrack)(),textTrack:Object(i.dummyTrack)()}},t.flush=function(){var e=Object(i.dummyTrack)();return e.samples=this.remainderData||new Uint8Array,this.remainderData=null,{audioTrack:Object(i.dummyTrack)(),avcTrack:e,id3Track:Object(i.dummyTrack)(),textTrack:Object(i.dummyTrack)()}},t.demuxSampleAes=function(e,t,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},t.destroy=function(){},e}();a.minProbeByteLength=1024,t.default=a},"./src/demux/mpegaudio.ts":function(e,t,n){"use strict";function r(e,t,n,r,a){if(!(n+24>t.length)){var o=i(t,n);if(o&&n+o.frameLength<=t.length){var s=9e4*o.samplesPerFrame/o.sampleRate,l=r+a*s,d={unit:t.subarray(n,n+o.frameLength),pts:l,dts:l};return e.config=[],e.channelCount=o.channelCount,e.samplerate=o.sampleRate,e.samples.push(d),{sample:d,length:o.frameLength,missing:0}}}}function i(e,t){var n=e[t+1]>>3&3,r=e[t+1]>>1&3,i=e[t+2]>>4&15,a=e[t+2]>>2&3;if(1!==n&&0!==i&&15!==i&&3!==a){var o=e[t+2]>>1&1,s=e[t+3]>>6,l=3===n?3-r:3===r?3:4,p=1e3*u[14*l+i-1],v=3===n?0:2===n?1:2,m=c[3*v+a],g=3===s?1:2,y=f[n][r],E=h[r],b=8*y*E,T=Math.floor(y*p/m+o)*E;if(null===d){var w=navigator.userAgent||"",S=w.match(/Chrome\/(\d+)/i);d=S?parseInt(S[1]):0}return!!d&&d<=87&&2===r&&p>=224e3&&0===s&&(e[t+3]=128|e[t+3]),{sampleRate:m,channelCount:g,frameLength:T,samplesPerFrame:b}}}function a(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])}function o(e,t){return t+1<e.length&&a(e,t)}function s(e,t){return a(e,t)&&4<=e.length-t}function l(e,t){if(t+1<e.length&&a(e,t)){var n=i(e,t),r=4;null!==n&&void 0!==n&&n.frameLength&&(r=n.frameLength);var s=t+r;return s===e.length||o(e,s)}return!1}n.r(t),n.d(t,"appendFrame",function(){return r}),n.d(t,"parseHeader",function(){return i}),n.d(t,"isHeaderPattern",function(){return a}),n.d(t,"isHeader",function(){return o}),n.d(t,"canParse",function(){return s}),n.d(t,"probe",function(){return l});var d=null,u=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],c=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],f=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],h=[0,1,1,4]},"./src/demux/sample-aes.ts":function(e,t,n){"use strict";n.r(t);var r=n("./src/crypt/decrypter.ts"),i=n("./src/demux/tsdemuxer.ts"),a=function(){function e(e,t,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new r.default(e,t,{removePKCS7Padding:!1})}var t=e.prototype;return t.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,t)},t.decryptAacSample=function(e,t,n,r){var i=e[t].unit,a=i.subarray(16,i.length-i.length%16),o=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),s=this;this.decryptBuffer(o,function(a){var o=new Uint8Array(a);i.set(o,16),r||s.decryptAacSamples(e,t+1,n)})},t.decryptAacSamples=function(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32)){var r=this.decrypter.isSync();if(this.decryptAacSample(e,t,n,r),!r)return}}},t.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t),r=0,i=32;i<e.length-16;i+=160,r+=16)n.set(e.subarray(i,i+16),r);return n},t.getAvcDecryptedUnit=function(e,t){for(var n=new Uint8Array(t),r=0,i=32;i<e.length-16;i+=160,r+=16)e.set(n.subarray(r,r+16),i);return e},t.decryptAvcSample=function(e,t,n,r,a,o){var s=Object(i.discardEPB)(a.data),l=this.getAvcEncryptedData(s),d=this;this.decryptBuffer(l.buffer,function(i){a.data=d.getAvcDecryptedUnit(s,i),o||d.decryptAvcSamples(e,t,n+1,r)})},t.decryptAvcSamples=function(e,t,n,r){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,n=0){if(t>=e.length)return void r();for(var i=e[t].units;!(n>=i.length);n++){var a=i[n];if(!(a.data.length<=48||1!==a.type&&5!==a.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(e,t,n,r,a,o),!o)return}}}},e}();t.default=a},"./src/demux/transmuxer-interface.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return c});var r=n("./node_modules/webworkify-webpack/index.js"),i=n("./src/events.ts"),a=n("./src/demux/transmuxer.ts"),o=n("./src/utils/logger.ts"),s=n("./src/errors.ts"),l=n("./src/utils/mediasource-helper.ts"),d=n("./node_modules/eventemitter3/index.js"),u=Object(l.getMediaSource)()||{isTypeSupported:function(){return!1}},c=function(){function e(e,t,n,l){var c=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.hls=e,this.id=t,this.onTransmuxComplete=n,this.onFlush=l;var f=e.config,h=function(t,n){n=n||{},n.frag=c.frag,n.id=c.id,e.trigger(t,n)};this.observer=new d.EventEmitter,this.observer.on(i.Events.FRAG_DECRYPTED,h),this.observer.on(i.Events.ERROR,h);var p={mp4:u.isTypeSupported("video/mp4"),mpeg:u.isTypeSupported("audio/mpeg"),mp3:u.isTypeSupported('audio/mp4; codecs="mp3"')},v=navigator.vendor;if(f.enableWorker&&"undefined"!=typeof Worker){o.logger.log("demuxing in webworker");var m;try{m=this.worker=r("./src/demux/transmuxer-worker.ts"),this.onwmsg=this.onWorkerMessage.bind(this),m.addEventListener("message",this.onwmsg),m.onerror=function(t){e.trigger(i.Events.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",error:new Error(t.message+"  ("+t.filename+":"+t.lineno+")")})},m.postMessage({cmd:"init",typeSupported:p,vendor:v,id:t,config:JSON.stringify(f)})}catch(e){o.logger.warn("Error in worker:",e),o.logger.error("Error while initializing DemuxerWorker, fallback to inline"),m&&self.URL.revokeObjectURL(m.objectURL),this.transmuxer=new a.default(this.observer,p,f,v,t),this.worker=null}}else this.transmuxer=new a.default(this.observer,p,f,v,t)}var t=e.prototype;return t.destroy=function(){var e=this.worker;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.worker=null;else{var t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}var n=this.observer;n&&n.removeAllListeners(),this.observer=null},t.push=function(e,t,n,r,i,s,l,d,u,c){var f,h,p=this;u.transmuxing.start=self.performance.now();var v=this.transmuxer,m=this.worker,g=s?s.start:i.start,y=i.decryptdata,E=this.frag,b=!(E&&i.cc===E.cc),T=!(E&&u.level===E.level),w=E?u.sn-E.sn:-1,S=this.part?u.part-this.part.index:1,A=!T&&(1===w||0===w&&1===S),L=self.performance.now();(T||w||0===i.stats.parsing.start)&&(i.stats.parsing.start=L),!s||!S&&A||(s.stats.parsing.start=L);var k=!(E&&(null===(f=i.initSegment)||void 0===f?void 0:f.url)===(null===(h=E.initSegment)||void 0===h?void 0:h.url)),C=new a.TransmuxState(b,A,d,T,g,k);if(!A||b||k){o.logger.log("[transmuxer-interface, "+i.type+"]: Starting new transmux session for sn: "+u.sn+" p: "+u.part+" level: "+u.level+" id: "+u.id+"\n        discontinuity: "+b+"\n        trackSwitch: "+T+"\n        contiguous: "+A+"\n        accurateTimeOffset: "+d+"\n        timeOffset: "+g+"\n        initSegmentChange: "+k);var _=new a.TransmuxConfig(n,r,t,l,c);this.configureTransmuxer(_)}if(this.frag=i,this.part=s,m)m.postMessage({cmd:"demux",data:e,decryptdata:y,chunkMeta:u,state:C},e instanceof ArrayBuffer?[e]:[]);else if(v){var D=v.push(e,y,u,C);Object(a.isPromise)(D)?D.then(function(e){p.handleTransmuxComplete(e)}):this.handleTransmuxComplete(D)}},t.flush=function(e){var t=this;e.transmuxing.start=self.performance.now();var n=this.transmuxer,r=this.worker;if(r)r.postMessage({cmd:"flush",chunkMeta:e});else if(n){var i=n.flush(e);Object(a.isPromise)(i)?i.then(function(n){t.handleFlushResult(n,e)}):this.handleFlushResult(i,e)}},t.handleFlushResult=function(e,t){var n=this;e.forEach(function(e){n.handleTransmuxComplete(e)}),this.onFlush(t)},t.onWorkerMessage=function(e){var t=e.data,n=this.hls;switch(t.event){case"init":self.URL.revokeObjectURL(this.worker.objectURL);break;case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data)}},t.configureTransmuxer=function(e){var t=this.worker,n=this.transmuxer;t?t.postMessage({cmd:"configure",config:e}):n&&n.configure(e)},t.handleTransmuxComplete=function(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)},e}()},"./src/demux/transmuxer-worker.ts":function(e,t,n){"use strict";function r(e){var t=new c.EventEmitter,n=function(t,n){e.postMessage({event:t,data:n})};t.on(d.Events.FRAG_DECRYPTED,n),t.on(d.Events.ERROR,n),e.addEventListener("message",function(r){var a=r.data;switch(a.cmd){case"init":var s=JSON.parse(a.config);e.transmuxer=new l.default(t,a.typeSupported,s,a.vendor,a.id),Object(u.enableLogs)(s.debug),n("init",null);break;case"configure":e.transmuxer.configure(a.config);break;case"demux":var d=e.transmuxer.push(a.data,a.decryptdata,a.chunkMeta,a.state);Object(l.isPromise)(d)?d.then(function(t){i(e,t)}):i(e,d);break;case"flush":var c=a.chunkMeta,f=e.transmuxer.flush(c);Object(l.isPromise)(f)?f.then(function(t){o(e,t,c)}):o(e,f,c)}})}function i(e,t){if(!s(t.remuxResult)){var n=[],r=t.remuxResult,i=r.audio,o=r.video;i&&a(n,i),o&&a(n,o),e.postMessage({event:"transmuxComplete",data:t},n)}}function a(e,t){t.data1&&e.push(t.data1.buffer),t.data2&&e.push(t.data2.buffer)}function o(e,t,n){t.forEach(function(t){i(e,t)}),e.postMessage({event:"flush",data:n})}function s(e){return!(e.audio||e.video||e.text||e.id3||e.initSegment)}n.r(t),n.d(t,"default",function(){return r});var l=n("./src/demux/transmuxer.ts"),d=n("./src/events.ts"),u=n("./src/utils/logger.ts"),c=n("./node_modules/eventemitter3/index.js")},"./src/demux/transmuxer.ts":function(e,t,n){"use strict";function r(e,t){var n=null;return e.byteLength>0&&null!=t&&null!=t.key&&null!==t.iv&&null!=t.method&&(n=t),n}function i(e){return"then"in e&&e.then instanceof Function}n.r(t),n.d(t,"default",function(){return b}),n.d(t,"isPromise",function(){return i}),n.d(t,"TransmuxConfig",function(){return w}),n.d(t,"TransmuxState",function(){return S});var a,o=n("./src/events.ts"),s=n("./src/errors.ts"),l=n("./src/crypt/decrypter.ts"),d=n("./src/demux/aacdemuxer.ts"),u=n("./src/demux/mp4demuxer.ts"),c=n("./src/demux/tsdemuxer.ts"),f=n("./src/demux/mp3demuxer.ts"),h=n("./src/remux/mp4-remuxer.ts"),p=n("./src/remux/passthrough-remuxer.ts"),v=n("./src/demux/chunk-cache.ts"),m=n("./src/utils/mp4-tools.ts"),g=n("./src/utils/logger.ts");try{a=self.performance.now.bind(self.performance)}catch(e){g.logger.debug("Unable to use Performance API on this environment"),a=self.Date.now}var y=[{demux:c.default,remux:h.default},{demux:u.default,remux:p.default},{demux:d.default,remux:h.default},{demux:f.default,remux:h.default}],E=1024;y.forEach(function(e){var t=e.demux;E=Math.max(E,t.minProbeByteLength)});var b=function(){function e(e,t,n,r,i){this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.cache=new v.default,this.observer=e,this.typeSupported=t,this.config=n,this.vendor=r,this.id=i}var t=e.prototype;return t.configure=function(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()},t.push=function(e,t,n,i){var o=this,s=n.transmuxing;s.executeStart=a();var l=new Uint8Array(e),d=this.cache,u=this.config,c=this.currentTransmuxState,f=this.transmuxConfig;i&&(this.currentTransmuxState=i);var h=r(l,t);if(h&&"AES-128"===h.method){var p=this.getDecrypter();if(!u.enableSoftwareAES)return this.decryptionPromise=p.webCryptoDecrypt(l,h.key.buffer,h.iv.buffer).then(function(e){var t=o.push(e,null,n);return o.decryptionPromise=null,t}),this.decryptionPromise;var v=p.softwareDecrypt(l,h.key.buffer,h.iv.buffer);if(!v)return s.executeEnd=a(),T(n);l=new Uint8Array(v)}var g=i||c,y=g.contiguous,E=g.discontinuity,b=g.trackSwitch,w=g.accurateTimeOffset,S=g.timeOffset,A=g.initSegmentChange,L=f.audioCodec,k=f.videoCodec,C=f.defaultInitPts,_=f.duration,D=f.initSegmentData;if((E||b||A)&&this.resetInitSegment(D,L,k,_),(E||A)&&this.resetInitialTimestamp(C),y||this.resetContiguity(),this.needsProbing(l,E,b)){if(d.dataLength){var R=d.flush();l=Object(m.appendUint8Array)(R,l)}this.configureTransmuxer(l,f)}var I=this.transmux(l,h,S,w,n),x=this.currentTransmuxState;return x.contiguous=!0,x.discontinuity=!1,x.trackSwitch=!1,s.executeEnd=a(),I},t.flush=function(e){var t=this,n=e.transmuxing;n.executeStart=a();var r=this.decrypter,l=this.cache,d=this.currentTransmuxState,u=this.decryptionPromise;if(u)return u.then(function(){return t.flush(e)});var c=[],f=d.timeOffset;if(r){var h=r.flush();h&&c.push(this.push(h,null,e))}var p=l.dataLength;l.reset();var v=this.demuxer,m=this.remuxer;if(!v||!m)return p>=E&&this.observer.emit(o.Events.ERROR,o.Events.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),n.executeEnd=a(),[T(e)];var g=v.flush(f);return i(g)?g.then(function(n){return t.flushRemux(c,n,e),c}):(this.flushRemux(c,g,e),c)},t.flushRemux=function(e,t,n){var r=t.audioTrack,i=t.avcTrack,o=t.id3Track,s=t.textTrack,l=this.currentTransmuxState,d=l.accurateTimeOffset,u=l.timeOffset;g.logger.log("[transmuxer.ts]: Flushed fragment "+n.sn+(n.part>-1?" p: "+n.part:"")+" of level "+n.level);var c=this.remuxer.remux(r,i,o,s,u,d,!0,this.id);e.push({remuxResult:c,chunkMeta:n}),n.transmuxing.executeEnd=a()},t.resetInitialTimestamp=function(e){var t=this.demuxer,n=this.remuxer;t&&n&&(t.resetTimeStamp(e),n.resetTimeStamp(e))},t.resetContiguity=function(){var e=this.demuxer,t=this.remuxer;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())},t.resetInitSegment=function(e,t,n,r){var i=this.demuxer,a=this.remuxer;i&&a&&(i.resetInitSegment(t,n,r),a.resetInitSegment(e,t,n))},t.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},t.transmux=function(e,t,n,r,i){return t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,n,r,i):this.transmuxUnencrypted(e,n,r,i)},t.transmuxUnencrypted=function(e,t,n,r){var i=this.demuxer.demux(e,t,!1,!this.config.progressive),a=i.audioTrack,o=i.avcTrack,s=i.id3Track,l=i.textTrack;return{remuxResult:this.remuxer.remux(a,o,s,l,t,n,!1,this.id),chunkMeta:r}},t.transmuxSampleAes=function(e,t,n,r,i){var a=this;return this.demuxer.demuxSampleAes(e,t,n).then(function(e){return{remuxResult:a.remuxer.remux(e.audioTrack,e.avcTrack,e.id3Track,e.textTrack,n,r,!1,a.id),chunkMeta:i}})},t.configureTransmuxer=function(e,t){for(var n,r=this.config,i=this.observer,a=this.typeSupported,o=this.vendor,s=t.audioCodec,l=t.defaultInitPts,d=t.duration,c=t.initSegmentData,f=t.videoCodec,h=0,v=y.length;h<v;h++)if(y[h].demux.probe(e)){n=y[h];break}n||(g.logger.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),n={demux:u.default,remux:p.default});var m=this.demuxer,E=this.remuxer,b=n.remux,T=n.demux;E&&E instanceof b||(this.remuxer=new b(i,r,a,o)),m&&m instanceof T||(this.demuxer=new T(i,r,a),this.probe=T.probe),this.resetInitSegment(c,s,f,d),this.resetInitialTimestamp(l)},t.needsProbing=function(e,t,n){return!this.demuxer||!this.remuxer||t||n},t.getDecrypter=function(){var e=this.decrypter;return e||(e=this.decrypter=new l.default(this.observer,this.config)),e},e}(),T=function(e){return{remuxResult:{},chunkMeta:e}},w=function(e,t,n,r,i){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=n,this.duration=r,this.defaultInitPts=i},S=function(e,t,n,r,i,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=n,this.trackSwitch=r,this.timeOffset=i,this.initSegmentChange=a}},"./src/demux/tsdemuxer.ts":function(e,t,n){"use strict";function r(e,t,n,r){return{key:e,frame:!1,pts:t,dts:n,units:[],debug:r,length:0}}function i(e,t){return(31&e[t+10])<<8|e[t+11]}function a(e,t,n,r){var i={audio:-1,avc:-1,id3:-1,isAAC:!0},a=(15&e[t+1])<<8|e[t+2],o=t+3+a-4,s=(15&e[t+10])<<8|e[t+11];for(t+=12+s;t<o;){var l=(31&e[t+1])<<8|e[t+2];switch(e[t]){case 207:if(!r){g.logger.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===i.audio&&(i.audio=l);break;case 21:-1===i.id3&&(i.id3=l);break;case 219:if(!r){g.logger.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===i.avc&&(i.avc=l);break;case 3:case 4:n?-1===i.audio&&(i.audio=l,i.isAAC=!1):g.logger.log("MPEG audio found, not supported in this browser");break;case 36:g.logger.warn("Unsupported HEVC stream type found")}t+=5+((15&e[t+3])<<8|e[t+4])}return i}function o(e){var t,n,r,i,a,o=0,s=e.data;if(!e||0===e.size)return null;for(;s[0].length<19&&s.length>1;){var l=new Uint8Array(s[0].length+s[1].length);l.set(s[0]),l.set(s[1],s[0].length),s[0]=l,s.splice(1,1)}if(t=s[0],1===(t[0]<<16)+(t[1]<<8)+t[2]){if((n=(t[4]<<8)+t[5])&&n>e.size-6)return null;var d=t[7];192&d&&(i=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&d?(a=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,i-a>54e5&&(g.logger.warn(Math.round((i-a)/9e4)+"s delta between PTS and DTS, align them"),i=a)):a=i),r=t[8];var u=r+9;if(e.size<=u)return null;e.size-=u;for(var c=new Uint8Array(e.size),f=0,h=s.length;f<h;f++){t=s[f];var p=t.byteLength;if(u){if(u>p){u-=p;continue}t=t.subarray(u),p-=u,u=0}c.set(t,o),o+=p}return n&&(n-=r+3),{data:c,pts:i,dts:a,len:n}}return null}function s(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){var n=t.samples,r=n.length;if(!r)return void t.dropped++;var i=n[r-1];e.pts=i.pts,e.dts=i.dts}t.samples.push(e)}e.debug.length&&g.logger.log(e.pts+"/"+e.dts+":"+e.debug)}function l(e,t){var n=e.length;if(n>0){if(t.pts>=e[n-1].pts)e.push(t);else for(var r=n-1;r>=0;r--)if(t.pts<e[r].pts){e.splice(r,0,t);break}}else e.push(t)}function d(e){for(var t=e.byteLength,n=[],r=1;r<t-2;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(n.push(r+2),r+=2):r++;if(0===n.length)return e;var i=t-n.length,a=new Uint8Array(i),o=0;for(r=0;r<i;o++,r++)o===n[0]&&(o++,n.shift()),a[r]=e[o];return a}n.r(t),n.d(t,"discardEPB",function(){return d});var u=n("./src/demux/adts.ts"),c=n("./src/demux/mpegaudio.ts"),f=n("./src/demux/exp-golomb.ts"),h=n("./src/demux/id3.ts"),p=n("./src/demux/sample-aes.ts"),v=n("./src/events.ts"),m=n("./src/utils/mp4-tools.ts"),g=n("./src/utils/logger.ts"),y=n("./src/errors.ts"),E={video:1,audio:2,id3:3,text:4},b=function(){function e(e,t,n){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this.aacLastPTS=null,this._initPTS=null,this._initDTS=null,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=e,this.config=t,this.typeSupported=n}e.probe=function(t){var n=e.syncOffset(t);return!(n<0)&&(n&&g.logger.warn("MPEG2-TS detected but first sync word found @ offset "+n+", junk ahead ?"),!0)},e.syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(71===e[n]&&71===e[n+188]&&71===e[n+376])return n;n++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:E[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}};var t=e.prototype;return t.resetInitSegment=function(t,n,r){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=e.createTrack("video",r),this._audioTrack=e.createTrack("audio",r),this._id3Track=e.createTrack("id3",r),this._txtTrack=e.createTrack("text",r),this._audioTrack.isAAC=!0,this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=t,this.videoCodec=n,this._duration=r},t.resetTimeStamp=function(){},t.resetContiguity=function(){var e=this._audioTrack,t=this._avcTrack,n=this._id3Track;e&&(e.pesData=null),t&&(t.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.aacLastPTS=null},t.demux=function(t,n,r,s){void 0===r&&(r=!1),void 0===s&&(s=!1),r||(this.sampleAes=null);var l,d=this._avcTrack,u=this._audioTrack,c=this._id3Track,f=d.pid,h=d.pesData,p=u.pid,E=c.pid,b=u.pesData,T=c.pesData,w=!1,S=this.pmtParsed,A=this._pmtId,L=t.length;if(this.remainderData&&(t=Object(m.appendUint8Array)(this.remainderData,t),L=t.length,this.remainderData=null),L<188&&!s)return this.remainderData=t,{audioTrack:u,avcTrack:d,id3Track:c,textTrack:this._txtTrack};var k=Math.max(0,e.syncOffset(t));(L-=(L+k)%188)<t.byteLength&&!s&&(this.remainderData=new Uint8Array(t.buffer,L,t.buffer.byteLength-L));for(var C=0,_=k;_<L;_+=188)if(71===t[_]){var D=!!(64&t[_+1]),R=((31&t[_+1])<<8)+t[_+2],I=(48&t[_+3])>>4,x=void 0;if(I>1){if((x=_+5+t[_+4])===_+188)continue}else x=_+4;switch(R){case f:D&&(h&&(l=o(h))&&this.parseAVCPES(l,!1),h={data:[],size:0}),h&&(h.data.push(t.subarray(x,_+188)),h.size+=_+188-x);break;case p:D&&(b&&(l=o(b))&&(u.isAAC?this.parseAACPES(l):this.parseMPEGPES(l)),b={data:[],size:0}),b&&(b.data.push(t.subarray(x,_+188)),b.size+=_+188-x);break;case E:D&&(T&&(l=o(T))&&this.parseID3PES(l),T={data:[],size:0}),T&&(T.data.push(t.subarray(x,_+188)),T.size+=_+188-x);break;case 0:D&&(x+=t[x]+1),A=this._pmtId=i(t,x);break;case A:D&&(x+=t[x]+1);var O=a(t,x,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,r);f=O.avc,f>0&&(d.pid=f),p=O.audio,p>0&&(u.pid=p,u.isAAC=O.isAAC),E=O.id3,E>0&&(c.pid=E),w&&!S&&(g.logger.log("reparse from beginning"),w=!1,_=k-188),S=this.pmtParsed=!0;break;case 17:case 8191:break;default:w=!0}}else C++;C>0&&this.observer.emit(v.Events.ERROR,v.Events.ERROR,{type:y.ErrorTypes.MEDIA_ERROR,details:y.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"Found "+C+" TS packet/s that do not start with 0x47"}),d.pesData=h,u.pesData=b,c.pesData=T;var M={audioTrack:u,avcTrack:d,id3Track:c,textTrack:this._txtTrack};return s&&this.extractRemainingSamples(M),M},t.flush=function(){var e=this.remainderData;this.remainderData=null;var t;return t=e?this.demux(e,-1,!1,!0):{audioTrack:this._audioTrack,avcTrack:this._avcTrack,textTrack:this._txtTrack,id3Track:this._id3Track},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t},t.extractRemainingSamples=function(e){var t,n=e.audioTrack,r=e.avcTrack,i=e.id3Track,a=r.pesData,s=n.pesData,l=i.pesData;a&&(t=o(a))?(this.parseAVCPES(t,!0),r.pesData=null):r.pesData=a,s&&(t=o(s))?(n.isAAC?this.parseAACPES(t):this.parseMPEGPES(t),n.pesData=null):(null!==s&&void 0!==s&&s.size&&g.logger.log("last AAC PES packet truncated,might overlap between fragments"),n.pesData=s),l&&(t=o(l))?(this.parseID3PES(t),i.pesData=null):i.pesData=l},t.demuxSampleAes=function(e,t,n){var r=this.demux(e,n,!0,!this.config.progressive),i=this.sampleAes=new p.default(this.observer,this.config,t);return this.decrypt(r,i)},t.decrypt=function(e,t){return new Promise(function(n){var r=e.audioTrack,i=e.avcTrack;r.samples&&r.isAAC?t.decryptAacSamples(r.samples,0,function(){i.samples?t.decryptAvcSamples(i.samples,0,0,function(){n(e)}):n(e)}):i.samples&&t.decryptAvcSamples(i.samples,0,0,function(){n(e)})})},t.destroy=function(){this._initPTS=this._initDTS=null,this._duration=0},t.parseAVCPES=function(e,t){var n,i=this,a=this._avcTrack,o=this.parseAVCNALu(e.data),u=this.avcSample,c=!1;e.data=null,u&&o.length&&!a.audFound&&(s(u,a),u=this.avcSample=r(!1,e.pts,e.dts,"")),o.forEach(function(t){switch(t.type){case 1:n=!0,u||(u=i.avcSample=r(!0,e.pts,e.dts,"")),u.frame=!0;var o=t.data;if(c&&o.length>4){var p=new f.default(o).readSliceType();2!==p&&4!==p&&7!==p&&9!==p||(u.key=!0)}break;case 5:n=!0,u||(u=i.avcSample=r(!0,e.pts,e.dts,"")),u.key=!0,u.frame=!0;break;case 6:n=!0;var v=new f.default(d(t.data));v.readUByte();for(var m=0,g=0,y=!1,E=0;!y&&v.bytesAvailable>1;){m=0;do{E=v.readUByte(),m+=E}while(255===E);g=0;do{E=v.readUByte(),g+=E}while(255===E);if(4===m&&0!==v.bytesAvailable){y=!0;if(181===v.readUByte()){if(49===v.readUShort()){if(1195456820===v.readUInt()){if(3===v.readUByte()){for(var b=v.readUByte(),T=v.readUByte(),w=31&b,S=[b,T],A=0;A<w;A++)S.push(v.readUByte()),S.push(v.readUByte()),S.push(v.readUByte());l(i._txtTrack.samples,{type:3,pts:e.pts,bytes:S})}}}}}else if(5===m&&0!==v.bytesAvailable){if(y=!0,g>16){for(var L=[],k=0;k<16;k++)L.push(v.readUByte().toString(16)),3!==k&&5!==k&&7!==k&&9!==k||L.push("-");for(var C=g-16,_=new Uint8Array(C),D=0;D<C;D++)_[D]=v.readUByte();l(i._txtTrack.samples,{pts:e.pts,payloadType:m,uuid:L.join(""),userData:Object(h.utf8ArrayToStr)(_),userDataBytes:_})}}else if(g<v.bytesAvailable)for(var R=0;R<g;R++)v.readUByte()}break;case 7:if(n=!0,c=!0,!a.sps){var I=new f.default(t.data),x=I.readSPS();a.width=x.width,a.height=x.height,a.pixelRatio=x.pixelRatio,a.sps=[t.data],a.duration=i._duration;for(var O=t.data.subarray(1,4),M="avc1.",B=0;B<3;B++){var N=O[B].toString(16);N.length<2&&(N="0"+N),M+=N}a.codec=M}break;case 8:n=!0,a.pps||(a.pps=[t.data]);break;case 9:n=!1,a.audFound=!0,u&&s(u,a),u=i.avcSample=r(!1,e.pts,e.dts,"");break;case 12:n=!1;break;default:n=!1,u&&(u.debug+="unknown NAL "+t.type+" ")}if(u&&n){u.units.push(t)}}),t&&u&&(s(u,a),this.avcSample=null)},t.getLastNalUnit=function(){var e,t,n=this.avcSample;if(!n||0===n.units.length){var r=this._avcTrack.samples;n=r[r.length-1]}if(null!==(e=n)&&void 0!==e&&e.units){var i=n.units;t=i[i.length-1]}return t},t.parseAVCNALu=function(e){var t,n,r,i=e.byteLength,a=this._avcTrack,o=a.naluState||0,s=o,l=[],d=0,u=-1,c=0;for(-1===o&&(u=0,c=31&e[0],o=0,d=1);d<i;)if(t=e[d++],o)if(1!==o)if(t)if(1===t){if(u>=0){var f={data:e.subarray(u,d-o-1),type:c};l.push(f)}else{var h=this.getLastNalUnit();if(h&&(s&&d<=4-s&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-s)),(n=d-o-1)>0)){var p=new Uint8Array(h.data.byteLength+n);p.set(h.data,0),p.set(e.subarray(0,n),h.data.byteLength),h.data=p,h.state=0}}d<i?(r=31&e[d],u=d,c=r,o=0):o=-1}else o=0;else o=3;else o=t?0:2;else o=t?0:1;if(u>=0&&o>=0){var v={data:e.subarray(u,i),type:c,state:o};l.push(v)}if(0===l.length){var m=this.getLastNalUnit();if(m){var g=new Uint8Array(m.data.byteLength+e.byteLength);g.set(m.data,0),g.set(e,m.data.byteLength),m.data=g}}return a.naluState=o,l},t.parseAACPES=function(e){var t=0,n=this._audioTrack,r=this.aacOverFlow,i=e.data;if(r){this.aacOverFlow=null;var a=r.sample.unit.byteLength,o=Math.min(r.missing,a),s=a-o;r.sample.unit.set(i.subarray(0,o),s),n.samples.push(r.sample),t=r.missing}var l,d;for(l=t,d=i.length;l<d-1&&!u.isHeader(i,l);l++);if(l!==t){var c,f;if(l<d-1?(c="AAC PES did not start with ADTS header,offset:"+l,f=!1):(c="no ADTS header found in AAC PES",f=!0),g.logger.warn("parsing error:"+c),this.observer.emit(v.Events.ERROR,v.Events.ERROR,{type:y.ErrorTypes.MEDIA_ERROR,details:y.ErrorDetails.FRAG_PARSING_ERROR,fatal:f,reason:c}),f)return}u.initTrackConfig(n,this.observer,i,l,this.audioCodec);var h;if(void 0!==e.pts)h=e.pts;else{if(!r)return void g.logger.warn("[tsdemuxer]: AAC PES unknown PTS");var p=u.getFrameDuration(n.samplerate);h=r.sample.pts+p}for(var m=0;l<d;){if(u.isHeader(i,l)){if(l+5<d){var E=u.appendFrame(n,i,l,h,m);if(E){if(!E.missing){l+=E.length,m++;continue}this.aacOverFlow=E}}break}l++}},t.parseMPEGPES=function(e){var t=e.data,n=t.length,r=0,i=0,a=e.pts;if(void 0===a)return void g.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");for(;i<n;)if(c.isHeader(t,i)){var o=c.appendFrame(this._audioTrack,t,i,a,r);if(!o)break;i+=o.length,r++}else i++},t.parseID3PES=function(e){if(void 0===e.pts)return void g.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");this._id3Track.samples.push(e)},e}();b.minProbeByteLength=188,t.default=b},"./src/errors.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ErrorTypes",function(){return r}),n.d(t,"ErrorDetails",function(){return i});var r;!function(e){e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError"}(r||(r={}));var i;!function(e){e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_EMPTY_ERROR="levelEmptyError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",e.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.INTERNAL_EXCEPTION="internalException",e.INTERNAL_ABORTED="aborted",e.UNKNOWN="unknown"}(i||(i={}))},"./src/events.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"Events",function(){return r});var r;!function(e){e.MEDIA_ATTACHING="hlsMediaAttaching",e.MEDIA_ATTACHED="hlsMediaAttached",e.MEDIA_DETACHING="hlsMediaDetaching",e.MEDIA_DETACHED="hlsMediaDetached",e.BUFFER_RESET="hlsBufferReset",e.BUFFER_CODECS="hlsBufferCodecs",e.BUFFER_CREATED="hlsBufferCreated",e.BUFFER_APPENDING="hlsBufferAppending",e.BUFFER_APPENDED="hlsBufferAppended",e.BUFFER_EOS="hlsBufferEos",e.BUFFER_FLUSHING="hlsBufferFlushing",e.BUFFER_FLUSHED="hlsBufferFlushed",e.MANIFEST_LOADING="hlsManifestLoading",e.MANIFEST_LOADED="hlsManifestLoaded",e.MANIFEST_PARSED="hlsManifestParsed",e.LEVEL_SWITCHING="hlsLevelSwitching",e.LEVEL_SWITCHED="hlsLevelSwitched",e.LEVEL_LOADING="hlsLevelLoading",e.LEVEL_LOADED="hlsLevelLoaded",e.LEVEL_UPDATED="hlsLevelUpdated",e.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",e.LEVELS_UPDATED="hlsLevelsUpdated",e.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",e.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",e.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",e.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",e.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",e.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",e.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",e.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",e.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",e.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",e.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",e.CUES_PARSED="hlsCuesParsed",e.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",e.INIT_PTS_FOUND="hlsInitPtsFound",e.FRAG_LOADING="hlsFragLoading",e.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",e.FRAG_LOADED="hlsFragLoaded",e.FRAG_DECRYPTED="hlsFragDecrypted",e.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",e.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",e.FRAG_PARSING_METADATA="hlsFragParsingMetadata",e.FRAG_PARSED="hlsFragParsed",e.FRAG_BUFFERED="hlsFragBuffered",e.FRAG_CHANGED="hlsFragChanged",e.FPS_DROP="hlsFpsDrop",e.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",e.ERROR="hlsError",e.DESTROYING="hlsDestroying",e.KEY_LOADING="hlsKeyLoading",e.KEY_LOADED="hlsKeyLoaded",e.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",e.BACK_BUFFER_REACHED="hlsBackBufferReached"}(r||(r={}))},"./src/hls.ts":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.r(t),n.d(t,"default",function(){return E});var a=n("./node_modules/url-toolkit/src/url-toolkit.js"),o=n("./src/loader/playlist-loader.ts"),s=n("./src/loader/key-loader.ts"),l=n("./src/controller/id3-track-controller.ts"),d=n("./src/controller/latency-controller.ts"),u=n("./src/controller/level-controller.ts"),c=n("./src/controller/fragment-tracker.ts"),f=n("./src/controller/stream-controller.ts"),h=n("./src/is-supported.ts"),p=n("./src/utils/logger.ts"),v=n("./src/config.ts"),m=n("./node_modules/eventemitter3/index.js"),g=n("./src/events.ts"),y=n("./src/errors.ts"),E=function(){function e(t){void 0===t&&(t={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new m.EventEmitter,this._autoLevelCapping=void 0,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null;var n=this.config=Object(v.mergeConfig)(e.DefaultConfig,t);this.userConfig=t,Object(p.enableLogs)(n.debug),this._autoLevelCapping=-1,n.progressive&&Object(v.enableStreamingMode)(n);var r=n.abrController,i=n.bufferController,a=n.capLevelController,h=n.fpsController,g=this.abrController=new r(this),y=this.bufferController=new i(this),E=this.capLevelController=new a(this),b=new h(this),T=new o.default(this),w=new s.default(this),S=new l.default(this),A=this.levelController=new u.default(this),L=new c.FragmentTracker(this),k=this.streamController=new f.default(this,L);E.setStreamController(k),b.setStreamController(k);var C=[A,k];this.networkControllers=C;var _=[T,w,g,y,E,b,S,L];this.audioTrackController=this.createController(n.audioTrackController,null,C),this.createController(n.audioStreamController,L,C),this.subtitleTrackController=this.createController(n.subtitleTrackController,null,C),this.createController(n.subtitleStreamController,L,C),this.createController(n.timelineController,null,_),this.emeController=this.createController(n.emeController,null,_),this.cmcdController=this.createController(n.cmcdController,null,_),this.latencyController=this.createController(d.default,null,_),this.coreComponents=_}e.isSupported=function(){return Object(h.isSupported)()};var t=e.prototype;return t.createController=function(e,t,n){if(e){var r=t?new e(this,t):new e(this);return n&&n.push(r),r}return null},t.on=function(e,t,n){void 0===n&&(n=this),this._emitter.on(e,t,n)},t.once=function(e,t,n){void 0===n&&(n=this),this._emitter.once(e,t,n)},t.removeAllListeners=function(e){this._emitter.removeAllListeners(e)},t.off=function(e,t,n,r){void 0===n&&(n=this),this._emitter.off(e,t,n,r)},t.listeners=function(e){return this._emitter.listeners(e)},t.emit=function(e,t,n){return this._emitter.emit(e,t,n)},t.trigger=function(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(t){p.logger.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.trigger(g.Events.ERROR,{type:y.ErrorTypes.OTHER_ERROR,details:y.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,error:t})}return!1},t.listenerCount=function(e){return this._emitter.listenerCount(e)},t.destroy=function(){p.logger.log("destroy"),this.trigger(g.Events.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(function(e){return e.destroy()}),this.networkControllers.length=0,this.coreComponents.forEach(function(e){return e.destroy()}),this.coreComponents.length=0},t.attachMedia=function(e){p.logger.log("attachMedia"),this._media=e,this.trigger(g.Events.MEDIA_ATTACHING,{media:e})},t.detachMedia=function(){p.logger.log("detachMedia"),this.trigger(g.Events.MEDIA_DETACHING,void 0),this._media=null},t.loadSource=function(e){this.stopLoad();var t=this.media,n=this.url,r=this.url=a.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});p.logger.log("loadSource:"+r),t&&n&&n!==r&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(t)),this.trigger(g.Events.MANIFEST_LOADING,{url:e})},t.startLoad=function(e){void 0===e&&(e=-1),p.logger.log("startLoad("+e+")"),this.networkControllers.forEach(function(t){t.startLoad(e)})},t.stopLoad=function(){p.logger.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})},t.swapAudioCodec=function(){p.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},t.recoverMediaError=function(){p.logger.log("recoverMediaError");var e=this._media;this.detachMedia(),e&&this.attachMedia(e)},t.removeLevel=function(e,t){void 0===t&&(t=0),this.levelController.removeLevel(e,t)},i(e,[{key:"levels",get:function(){var e=this.levelController.levels;return e||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){p.logger.log("set currentLevel:"+e),this.loadLevel=e,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){p.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){p.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){p.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){p.logger.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(e){var t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){this._autoLevelCapping!==e&&(p.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e)}},{key:"bandwidthEstimate",get:function(){var e=this.abrController.bwEstimator;return e?e.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var e=this.levels,t=this.config.minAutoBitrate;if(!e)return 0;for(var n=e.length,r=0;r<n;r++)if(e[r].maxBitrate>t)return r;return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(e){this.config.lowLatencyMode=e}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}],[{key:"version",get:function(){return"1.1.5"}},{key:"Events",get:function(){return g.Events}},{key:"ErrorTypes",get:function(){return y.ErrorTypes}},{key:"ErrorDetails",get:function(){return y.ErrorDetails}},{key:"DefaultConfig",get:function(){return e.defaultConfig?e.defaultConfig:v.hlsDefaultConfig},set:function(t){e.defaultConfig=t}}]),e}();E.defaultConfig=void 0},"./src/is-supported.ts":function(e,t,n){"use strict";function r(){return self.SourceBuffer||self.WebKitSourceBuffer}function i(){var e=Object(o.getMediaSource)();if(!e)return!1;var t=r(),n=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!n&&!!i}function a(){var e,t=r();return"function"==typeof(null===t||void 0===t?void 0:null===(e=t.prototype)||void 0===e?void 0:e.changeType)}n.r(t),n.d(t,"isSupported",function(){return i}),n.d(t,"changeTypeSupported",function(){return a});var o=n("./src/utils/mediasource-helper.ts")},"./src/loader/fragment-loader.ts":function(e,t,n){"use strict";function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,l(e,t)}function i(e){var t="function"==typeof Map?new Map:void 0;return(i=function(e){function n(){return a(e,arguments,d(this).constructor)}if(null===e||!s(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),l(n,e)})(e)}function a(e,t,n){return a=o()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=Function.bind.apply(e,r),a=new i;return n&&l(a,n.prototype),a},a.apply(null,arguments)}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function s(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){void 0===t&&(t=null);var n=t||e,r={frag:e,part:t,responseType:"arraybuffer",url:n.url,headers:{},rangeStart:0,rangeEnd:0},i=n.byteRangeStartOffset,a=n.byteRangeEndOffset;return Object(c.isFiniteNumber)(i)&&Object(c.isFiniteNumber)(a)&&(r.rangeStart=i,r.rangeEnd=a),r}n.r(t),n.d(t,"default",function(){return p}),n.d(t,"LoadError",function(){return v});var c=n("./src/polyfills/number.ts"),f=n("./src/errors.ts"),h=Math.pow(2,17),p=function(){function e(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}var t=e.prototype;return t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t.abort=function(){this.loader&&this.loader.abort()},t.load=function(e,t){var n=this,r=e.url;if(!r)return Promise.reject(new v({type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e,networkDetails:null},"Fragment does not have a "+(r?"part list":"url")));this.abort();var i=this.config,a=i.fLoader,o=i.loader;return new Promise(function(r,s){n.loader&&n.loader.destroy();var l=n.loader=e.loader=a?new a(i):new o(i),d=u(e),c={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout,highWaterMark:h};e.stats=l.stats,l.load(d,c,{onSuccess:function(t,i,a,o){n.resetLoader(e,l),r({frag:e,part:null,payload:t.data,networkDetails:o})},onError:function(t,r,i){n.resetLoader(e,l),s(new v({type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:t,networkDetails:i}))},onAbort:function(t,r,i){n.resetLoader(e,l),s(new v({type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:e,networkDetails:i}))},onTimeout:function(t,r,i){n.resetLoader(e,l),s(new v({type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,networkDetails:i}))},onProgress:function(n,r,i,a){t&&t({frag:e,part:null,payload:i,networkDetails:a})}})})},t.loadPart=function(e,t,n){var r=this;this.abort();var i=this.config,a=i.fLoader,o=i.loader;return new Promise(function(s,l){r.loader&&r.loader.destroy();var d=r.loader=e.loader=a?new a(i):new o(i),c=u(e,t),p={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout,highWaterMark:h};t.stats=d.stats,d.load(c,p,{onSuccess:function(i,a,o,l){r.resetLoader(e,d),r.updateStatsFromPart(e,t);var u={frag:e,part:t,payload:i.data,networkDetails:l};n(u),s(u)},onError:function(n,i,a){r.resetLoader(e,d),l(new v({type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:n,networkDetails:a}))},onAbort:function(n,i,a){e.stats.aborted=t.stats.aborted,r.resetLoader(e,d),l(new v({type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,networkDetails:a}))},onTimeout:function(n,i,a){r.resetLoader(e,d),l(new v({type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,networkDetails:a}))}})})},t.updateStatsFromPart=function(e,t){var n=e.stats,r=t.stats,i=r.total;if(n.loaded+=r.loaded,i){var a=Math.round(e.duration/t.duration),o=Math.min(Math.round(n.loaded/i),a),s=a-o,l=s*Math.round(n.loaded/o);n.total=n.loaded+l}else n.total=Math.max(n.loaded,n.total);var d=n.loading,u=r.loading;d.start?d.first+=u.first-u.start:(d.start=u.start,d.first=u.first),d.end=u.end},t.resetLoader=function(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()},e}(),v=function(e){function t(t){for(var n,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return n=e.call.apply(e,[this].concat(i))||this,n.data=void 0,n.data=t,n}return r(t,e),t}(i(Error))},"./src/loader/fragment.ts":function(e,t,n){"use strict";function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}n.r(t),n.d(t,"ElementaryStreamTypes",function(){return s}),n.d(t,"BaseSegment",function(){return h}),n.d(t,"Fragment",function(){return p}),n.d(t,"Part",function(){return v});var s,l=n("./src/polyfills/number.ts"),d=n("./node_modules/url-toolkit/src/url-toolkit.js"),u=n("./src/utils/logger.ts"),c=n("./src/loader/level-key.ts"),f=n("./src/loader/load-stats.ts");!function(e){e.AUDIO="audio",e.VIDEO="video",e.AUDIOVIDEO="audiovideo"}(s||(s={}));var h=function(){function e(e){var t;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=(t={},t[s.AUDIO]=null,t[s.VIDEO]=null,t[s.AUDIOVIDEO]=null,t),this.baseurl=e}return e.prototype.setByteRange=function(e,t){var n=e.split("@",2),r=[];1===n.length?r[0]=t?t.byteRangeEndOffset:0:r[0]=parseInt(n[1]),r[1]=parseInt(n[0])+r[0],this._byteRange=r},o(e,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Object(d.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(e){this._url=e}}]),e}(),p=function(e){function t(t,n){var r;return r=e.call(this,n)||this,r._decryptdata=null,r.rawProgramDateTime=null,r.programDateTime=null,r.tagList=[],r.duration=0,r.sn=0,r.levelkey=void 0,r.type=void 0,r.loader=null,r.level=-1,r.cc=0,r.startPTS=void 0,r.endPTS=void 0,r.appendedPTS=void 0,r.startDTS=void 0,r.endDTS=void 0,r.start=0,r.deltaPTS=void 0,r.maxStartPTS=void 0,r.minEndPTS=void 0,r.stats=new f.LoadStats,r.urlId=0,r.data=void 0,r.bitrateTest=!1,r.title=null,r.initSegment=null,r.type=t,r}r(t,e);var n=t.prototype;return n.createInitializationVector=function(e){for(var t=new Uint8Array(16),n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t},n.setDecryptDataFromLevelKey=function(e,t){var n=e;return"AES-128"===(null===e||void 0===e?void 0:e.method)&&e.uri&&!e.iv&&(n=c.LevelKey.fromURI(e.uri),n.method=e.method,n.iv=this.createInitializationVector(t),n.keyFormat="identity"),n},n.setElementaryStreamInfo=function(e,t,n,r,i,a){void 0===a&&(a=!1);var o=this.elementaryStreams,s=o[e];if(!s)return void(o[e]={startPTS:t,endPTS:n,startDTS:r,endDTS:i,partial:a});s.startPTS=Math.min(s.startPTS,t),s.endPTS=Math.max(s.endPTS,n),s.startDTS=Math.min(s.startDTS,r),s.endDTS=Math.max(s.endDTS,i)},n.clearElementaryStreamInfo=function(){var e=this.elementaryStreams;e[s.AUDIO]=null,e[s.VIDEO]=null,e[s.AUDIOVIDEO]=null},o(t,[{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var e=this.sn;"number"!=typeof e&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&u.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),e=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,e)}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(l.isFiniteNumber)(this.programDateTime))return null;var e=Object(l.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*e}},{key:"encrypted",get:function(){var e;return!(null===(e=this.decryptdata)||void 0===e||!e.keyFormat||!this.decryptdata.uri)}}]),t}(h),v=function(e){function t(t,n,r,i,a){var o;o=e.call(this,r)||this,o.fragOffset=0,o.duration=0,o.gap=!1,o.independent=!1,o.relurl=void 0,o.fragment=void 0,o.index=void 0,o.stats=new f.LoadStats,o.duration=t.decimalFloatingPoint("DURATION"),o.gap=t.bool("GAP"),o.independent=t.bool("INDEPENDENT"),o.relurl=t.enumeratedString("URI"),o.fragment=n,o.index=i;var s=t.enumeratedString("BYTERANGE");return s&&o.setByteRange(s,a),a&&(o.fragOffset=a.fragOffset+a.duration),o}return r(t,e),o(t,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var e=this.elementaryStreams;return!!(e.audio||e.video||e.audiovideo)}}]),t}(h)},"./src/loader/key-loader.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return o});var r=n("./src/events.ts"),i=n("./src/errors.ts"),a=n("./src/utils/logger.ts"),o=function(){function e(e){this.hls=void 0,this.loaders={},this.decryptkey=null,this.decrypturl=null,this.hls=e,this._registerListeners()}var t=e.prototype;return t._registerListeners=function(){this.hls.on(r.Events.KEY_LOADING,this.onKeyLoading,this)},t._unregisterListeners=function(){this.hls.off(r.Events.KEY_LOADING,this.onKeyLoading)},t.destroy=function(){this._unregisterListeners();for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={}},t.onKeyLoading=function(e,t){var n=t.frag,i=n.type,o=this.loaders[i];if(!n.decryptdata)return void a.logger.warn("Missing decryption data on fragment in onKeyLoading");var s=n.decryptdata.uri;if(s!==this.decrypturl||null===this.decryptkey){var l=this.hls.config;if(o&&(a.logger.warn("abort previous key loader for type:"+i),o.abort()),!s)return void a.logger.warn("key uri is falsy");var d=l.loader,u=n.loader=this.loaders[i]=new d(l);this.decrypturl=s,this.decryptkey=null;var c={url:s,frag:n,responseType:"arraybuffer"},f={timeout:l.fragLoadingTimeOut,maxRetry:0,retryDelay:l.fragLoadingRetryDelay,maxRetryDelay:l.fragLoadingMaxRetryTimeout,highWaterMark:0},h={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};u.load(c,f,h)}else this.decryptkey&&(n.decryptdata.key=this.decryptkey,this.hls.trigger(r.Events.KEY_LOADED,{frag:n}))},t.loadsuccess=function(e,t,n){var i=n.frag;if(!i.decryptdata)return void a.logger.error("after key load, decryptdata unset");this.decryptkey=i.decryptdata.key=new Uint8Array(e.data),i.loader=null,delete this.loaders[i.type],this.hls.trigger(r.Events.KEY_LOADED,{frag:i})},t.loaderror=function(e,t){var n=t.frag,a=n.loader;a&&a.abort(),delete this.loaders[n.type],this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:n,response:e})},t.loadtimeout=function(e,t){var n=t.frag,a=n.loader;a&&a.abort(),delete this.loaders[n.type],this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})},e}()},"./src/loader/level-details.ts":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.r(t),n.d(t,"LevelDetails",function(){return o});var a=n("./src/polyfills/number.ts"),o=function(){function e(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.fragments=[],this.url=e}return e.prototype.reloaded=function(e){if(!e)return this.advanced=!0,void(this.updated=!0);var t=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!t,this.advanced=this.endSN>e.endSN||t>0||0===t&&n>0,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay},i(e,[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&Object(a.isFiniteNumber)(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var e=this.driftEndTime-this.driftStartTime;return e>0?1e3*(this.driftEnd-this.driftStart)/e:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var e;return null!==(e=this.partList)&&void 0!==e&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var e;return null!==(e=this.fragments)&&void 0!==e&&e.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var e;return null!==(e=this.partList)&&void 0!==e&&e.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var e;return null!==(e=this.partList)&&void 0!==e&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}]),e}()},"./src/loader/level-key.ts":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.r(t),n.d(t,"LevelKey",function(){return o});var a=n("./node_modules/url-toolkit/src/url-toolkit.js"),o=function(){function e(e,t){this._uri=null,this.method=null,this.keyFormat=null,this.keyFormatVersions=null,this.keyID=null,this.key=null,this.iv=null,this._uri=t?Object(a.buildAbsoluteURL)(e,t,{alwaysNormalize:!0}):e}return e.fromURL=function(t,n){return new e(t,n)},e.fromURI=function(t){return new e(t)},i(e,[{key:"uri",get:function(){return this._uri}}]),e}()},"./src/loader/load-stats.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"LoadStats",function(){return r});var r=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},"./src/loader/m3u8-parser.ts":function(e,t,n){"use strict";function r(e){var t,n;return b.test(null!=(t=null===(n=d.parseURL(e))||void 0===n?void 0:n.path)?t:"")}function i(e,t){["video","audio","text"].forEach(function(n){var r=e.filter(function(e){return Object(v.isCodecType)(e,n)});if(r.length){var i=r.filter(function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)});t[n+"Codec"]=i.length>0?i[0]:r[0],e=e.filter(function(e){return-1===r.indexOf(e)})}}),t.unknownCodecs=e}function a(e,t,n){var r=t[n];r&&(e[n]=r)}function o(e,t){for(var n=e[t],r=t;r--;){var i=e[r];if(!i)return;i.programDateTime=n.programDateTime-1e3*i.duration,n=i}}function s(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):null!==t&&void 0!==t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),Object(l.isFiniteNumber)(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}n.r(t),n.d(t,"default",function(){return T});var l=n("./src/polyfills/number.ts"),d=n("./node_modules/url-toolkit/src/url-toolkit.js"),u=n("./src/loader/fragment.ts"),c=n("./src/loader/level-details.ts"),f=n("./src/loader/level-key.ts"),h=n("./src/utils/attr-list.ts"),p=n("./src/utils/logger.ts"),v=n("./src/utils/codecs.ts"),m=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+/g,g=/#EXT-X-MEDIA:(.*)/g,y=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),E=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(PLAYLIST-TYPE):(.+)/.source,/#EXT-X-(MEDIA-SEQUENCE): *(\d+)/.source,/#EXT-X-(SKIP):(.+)/.source,/#EXT-X-(TARGETDURATION): *(\d+)/.source,/#EXT-X-(KEY):(.+)/.source,/#EXT-X-(START):(.+)/.source,/#EXT-X-(ENDLIST)/.source,/#EXT-X-(DISCONTINUITY-SEQ)UENCE: *(\d+)/.source,/#EXT-X-(DIS)CONTINUITY/.source,/#EXT-X-(VERSION):(\d+)/.source,/#EXT-X-(MAP):(.+)/.source,/#EXT-X-(SERVER-CONTROL):(.+)/.source,/#EXT-X-(PART-INF):(.+)/.source,/#EXT-X-(GAP)/.source,/#EXT-X-(BITRATE):\s*(\d+)/.source,/#EXT-X-(PART):(.+)/.source,/#EXT-X-(PRELOAD-HINT):(.+)/.source,/#EXT-X-(RENDITION-REPORT):(.+)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),b=/\.(mp4|m4s|m4v|m4a)$/i,T=function(){function e(){}return e.findGroup=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.id===t)return r}},e.convertAVC1ToAVCOTI=function(e){var t=e.split(".");if(t.length>2){var n=t.shift()+".";return n+=parseInt(t.shift()).toString(16),n+=("000"+parseInt(t.shift()).toString(16)).substr(-4)}return e},e.resolve=function(e,t){return d.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},e.parseMasterPlaylist=function(t,n){var r=[],a={},o=!1;m.lastIndex=0;for(var s;null!=(s=m.exec(t));)if(s[1]){var l=new h.AttrList(s[1]),d={attrs:l,bitrate:l.decimalInteger("AVERAGE-BANDWIDTH")||l.decimalInteger("BANDWIDTH"),name:l.NAME,url:e.resolve(s[2],n)},u=l.decimalResolution("RESOLUTION");u&&(d.width=u.width,d.height=u.height),i((l.CODECS||"").split(/[ ,]+/).filter(function(e){return e}),d),d.videoCodec&&-1!==d.videoCodec.indexOf("avc1")&&(d.videoCodec=e.convertAVC1ToAVCOTI(d.videoCodec)),r.push(d)}else if(s[3]){var c=new h.AttrList(s[3]);c["DATA-ID"]&&(o=!0,a[c["DATA-ID"]]=c)}return{levels:r,sessionData:o?a:null}},e.parseMasterPlaylistMedia=function(t,n,r,i){void 0===i&&(i=[]);var o,s=[],l=0;for(g.lastIndex=0;null!==(o=g.exec(t));){var d=new h.AttrList(o[1]);if(d.TYPE===r){var u={attrs:d,bitrate:0,id:l++,groupId:d["GROUP-ID"],instreamId:d["INSTREAM-ID"],name:d.NAME||d.LANGUAGE||"",type:r,default:d.bool("DEFAULT"),autoselect:d.bool("AUTOSELECT"),forced:d.bool("FORCED"),lang:d.LANGUAGE,url:d.URI?e.resolve(d.URI,n):""};if(i.length){var c=e.findGroup(i,u.groupId)||i[0];a(u,c,"audioCodec"),a(u,c,"textCodec")}s.push(u)}}return s},e.parseLevelPlaylist=function(e,t,n,i,a){var d,v,m,g=new c.LevelDetails(t),b=g.fragments,T=null,w=0,S=0,A=0,L=0,k=null,C=new u.Fragment(i,t),_=-1,D=!1;for(y.lastIndex=0,g.m3u8=e;null!==(d=y.exec(e));){D&&(D=!1,C=new u.Fragment(i,t),C.start=A,C.sn=w,C.cc=L,C.level=n,T&&(C.initSegment=T,C.rawProgramDateTime=T.rawProgramDateTime));var R=d[1];if(R){C.duration=parseFloat(R);var I=(" "+d[2]).slice(1);C.title=I||null,C.tagList.push(I?["INF",R,I]:["INF",R])}else if(d[3])Object(l.isFiniteNumber)(C.duration)&&(C.start=A,m&&(C.levelkey=m),C.sn=w,C.level=n,C.cc=L,C.urlId=a,b.push(C),C.relurl=(" "+d[3]).slice(1),s(C,k),k=C,A+=C.duration,w++,S=0,D=!0);else if(d[4]){var x=(" "+d[4]).slice(1);k?C.setByteRange(x,k):C.setByteRange(x)}else if(d[5])C.rawProgramDateTime=(" "+d[5]).slice(1),C.tagList.push(["PROGRAM-DATE-TIME",C.rawProgramDateTime]),-1===_&&(_=b.length);else{if(!(d=d[0].match(E))){p.logger.warn("No matches on slow regex match for level playlist!");continue}for(v=1;v<d.length&&void 0===d[v];v++);var O=(" "+d[v]).slice(1),M=(" "+d[v+1]).slice(1),B=d[v+2]?(" "+d[v+2]).slice(1):"";switch(O){case"PLAYLIST-TYPE":g.type=M.toUpperCase();break;case"MEDIA-SEQUENCE":w=g.startSN=parseInt(M);break;case"SKIP":var N=new h.AttrList(M),P=N.decimalInteger("SKIPPED-SEGMENTS");if(Object(l.isFiniteNumber)(P)){g.skippedSegments=P;for(var F=P;F--;)b.unshift(null);w+=P}var U=N.enumeratedString("RECENTLY-REMOVED-DATERANGES");U&&(g.recentlyRemovedDateranges=U.split("\t"));break;case"TARGETDURATION":g.targetduration=parseFloat(M);break;case"VERSION":g.version=parseInt(M);break;case"EXTM3U":break;case"ENDLIST":g.live=!1;break;case"#":(M||B)&&C.tagList.push(B?[M,B]:[M]);break;case"DIS":L++;case"GAP":C.tagList.push([O]);break;case"BITRATE":C.tagList.push([O,M]);break;case"DISCONTINUITY-SEQ":L=parseInt(M);break;case"KEY":var j,V=new h.AttrList(M),H=V.enumeratedString("METHOD"),q=V.URI,G=V.hexadecimalInteger("IV"),K=V.enumeratedString("KEYFORMATVERSIONS"),W=V.enumeratedString("KEYID"),z=null!=(j=V.enumeratedString("KEYFORMAT"))?j:"identity",Y=["com.apple.streamingkeydelivery","com.microsoft.playready","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine"];if(Y.indexOf(z)>-1){p.logger.warn("Keyformat "+z+" is not supported from the manifest");continue}if("identity"!==z)continue;H&&(m=f.LevelKey.fromURL(t,q),q&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(H)>=0&&(m.method=H,m.keyFormat=z,W&&(m.keyID=W),K&&(m.keyFormatVersions=K),m.iv=G));break;case"START":var X=new h.AttrList(M),Q=X.decimalFloatingPoint("TIME-OFFSET");Object(l.isFiniteNumber)(Q)&&(g.startTimeOffset=Q);break;case"MAP":var J=new h.AttrList(M);C.relurl=J.URI,J.BYTERANGE&&C.setByteRange(J.BYTERANGE),C.level=n,C.sn="initSegment",m&&(C.levelkey=m),C.initSegment=null,T=C,D=!0;break;case"SERVER-CONTROL":var $=new h.AttrList(M);g.canBlockReload=$.bool("CAN-BLOCK-RELOAD"),g.canSkipUntil=$.optionalFloat("CAN-SKIP-UNTIL",0),g.canSkipDateRanges=g.canSkipUntil>0&&$.bool("CAN-SKIP-DATERANGES"),g.partHoldBack=$.optionalFloat("PART-HOLD-BACK",0),g.holdBack=$.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var Z=new h.AttrList(M);g.partTarget=Z.decimalFloatingPoint("PART-TARGET");break;case"PART":var ee=g.partList;ee||(ee=g.partList=[]);var te=S>0?ee[ee.length-1]:void 0,ne=S++,re=new u.Part(new h.AttrList(M),C,t,ne,te);ee.push(re),C.duration+=re.duration;break;case"PRELOAD-HINT":var ie=new h.AttrList(M);g.preloadHint=ie;break;case"RENDITION-REPORT":var ae=new h.AttrList(M);g.renditionReports=g.renditionReports||[],g.renditionReports.push(ae);break;default:p.logger.warn("line parsed but not handled: "+d)}}}k&&!k.relurl?(b.pop(),A-=k.duration,g.partList&&(g.fragmentHint=k)):g.partList&&(s(C,k),C.cc=L,g.fragmentHint=C);var oe=b.length,se=b[0],le=b[oe-1];if((A+=g.skippedSegments*g.targetduration)>0&&oe&&le){g.averagetargetduration=A/oe;var de=le.sn;g.endSN="initSegment"!==de?de:0,se&&(g.startCC=se.cc,se.initSegment||g.fragments.every(function(e){return e.relurl&&r(e.relurl)})&&(p.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),C=new u.Fragment(i,t),C.relurl=le.relurl,C.level=n,C.sn="initSegment",se.initSegment=C,g.needSidxRanges=!0))}else g.endSN=0,g.startCC=0;return g.fragmentHint&&(A+=g.fragmentHint.duration),g.totalduration=A,g.endCC=L,_>0&&o(b,_),g},e}()},"./src/loader/playlist-loader.ts":function(e,t,n){"use strict";function r(e){switch(e.type){case c.PlaylistContextType.AUDIO_TRACK:return c.PlaylistLevelType.AUDIO;case c.PlaylistContextType.SUBTITLE_TRACK:return c.PlaylistLevelType.SUBTITLE;default:return c.PlaylistLevelType.MAIN}}function i(e,t){var n=e.url;return void 0!==n&&0!==n.indexOf("data:")||(n=t.url),n}n.r(t);var a=n("./src/polyfills/number.ts"),o=n("./src/events.ts"),s=n("./src/errors.ts"),l=n("./src/utils/logger.ts"),d=n("./src/utils/mp4-tools.ts"),u=n("./src/loader/m3u8-parser.ts"),c=n("./src/types/loader.ts"),f=n("./src/utils/attr-list.ts"),h=function(){function e(e){this.hls=void 0,this.loaders=Object.create(null),this.hls=e,this.registerListeners()}var t=e.prototype;return t.registerListeners=function(){var e=this.hls;e.on(o.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(o.Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(o.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(o.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},t.unregisterListeners=function(){var e=this.hls;e.off(o.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(o.Events.LEVEL_LOADING,this.onLevelLoading,this),e.off(o.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(o.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},t.createInternalLoader=function(e){var t=this.hls.config,n=t.pLoader,r=t.loader,i=n||r,a=new i(t);return e.loader=a,this.loaders[e.type]=a,a},t.getInternalLoader=function(e){return this.loaders[e.type]},t.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},t.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},t.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},t.onManifestLoading=function(e,t){var n=t.url;this.load({id:null,groupId:null,level:0,responseType:"text",type:c.PlaylistContextType.MANIFEST,url:n,deliveryDirectives:null})},t.onLevelLoading=function(e,t){var n=t.id,r=t.level,i=t.url,a=t.deliveryDirectives;this.load({id:n,groupId:null,level:r,responseType:"text",type:c.PlaylistContextType.LEVEL,url:i,deliveryDirectives:a})},t.onAudioTrackLoading=function(e,t){var n=t.id,r=t.groupId,i=t.url,a=t.deliveryDirectives;this.load({id:n,groupId:r,level:null,responseType:"text",type:c.PlaylistContextType.AUDIO_TRACK,url:i,deliveryDirectives:a})},t.onSubtitleTrackLoading=function(e,t){var n=t.id,r=t.groupId,i=t.url,a=t.deliveryDirectives;this.load({id:n,groupId:r,level:null,responseType:"text",type:c.PlaylistContextType.SUBTITLE_TRACK,url:i,deliveryDirectives:a})},t.load=function(e){var t,n=this.hls.config,r=this.getInternalLoader(e);if(r){var i=r.context;if(i&&i.url===e.url)return void l.logger.trace("[playlist-loader]: playlist request ongoing");l.logger.log("[playlist-loader]: aborting previous loader for type: "+e.type),r.abort()}var a,o,s,d;switch(e.type){case c.PlaylistContextType.MANIFEST:a=n.manifestLoadingMaxRetry,o=n.manifestLoadingTimeOut,s=n.manifestLoadingRetryDelay,d=n.manifestLoadingMaxRetryTimeout;break;case c.PlaylistContextType.LEVEL:case c.PlaylistContextType.AUDIO_TRACK:case c.PlaylistContextType.SUBTITLE_TRACK:a=0,o=n.levelLoadingTimeOut;break;default:a=n.levelLoadingMaxRetry,o=n.levelLoadingTimeOut,s=n.levelLoadingRetryDelay,d=n.levelLoadingMaxRetryTimeout}if(r=this.createInternalLoader(e),null!==(t=e.deliveryDirectives)&&void 0!==t&&t.part){var u;if(e.type===c.PlaylistContextType.LEVEL&&null!==e.level?u=this.hls.levels[e.level].details:e.type===c.PlaylistContextType.AUDIO_TRACK&&null!==e.id?u=this.hls.audioTracks[e.id].details:e.type===c.PlaylistContextType.SUBTITLE_TRACK&&null!==e.id&&(u=this.hls.subtitleTracks[e.id].details),u){var f=u.partTarget,h=u.targetduration;f&&h&&(o=Math.min(1e3*Math.max(3*f,.8*h),o))}}var p={timeout:o,maxRetry:a,retryDelay:s,maxRetryDelay:d,highWaterMark:0},v={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};r.load(e,p,v)},t.loadsuccess=function(e,t,n,r){if(void 0===r&&(r=null),n.isSidxRequest)return this.handleSidxRequest(e,n),void this.handlePlaylistLoaded(e,t,n,r);this.resetInternalLoader(n.type);var i=e.data;if(0!==i.indexOf("#EXTM3U"))return void this.handleManifestParsingError(e,n,"no EXTM3U delimiter",r);t.parsing.start=performance.now(),i.indexOf("#EXTINF:")>0||i.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(e,t,n,r):this.handleMasterPlaylist(e,t,n,r)},t.loaderror=function(e,t,n){void 0===n&&(n=null),this.handleNetworkError(t,n,!1,e)},t.loadtimeout=function(e,t,n){void 0===n&&(n=null),this.handleNetworkError(t,n,!0)},t.handleMasterPlaylist=function(e,t,n,r){var a=this.hls,s=e.data,d=i(e,n),c=u.default.parseMasterPlaylist(s,d),h=c.levels,p=c.sessionData;if(!h.length)return void this.handleManifestParsingError(e,n,"no level found in manifest",r);var v=h.map(function(e){return{id:e.attrs.AUDIO,audioCodec:e.audioCodec}}),m=h.map(function(e){return{id:e.attrs.SUBTITLES,textCodec:e.textCodec}}),g=u.default.parseMasterPlaylistMedia(s,d,"AUDIO",v),y=u.default.parseMasterPlaylistMedia(s,d,"SUBTITLES",m),E=u.default.parseMasterPlaylistMedia(s,d,"CLOSED-CAPTIONS");if(g.length){g.some(function(e){return!e.url})||!h[0].audioCodec||h[0].attrs.AUDIO||(l.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),g.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new f.AttrList({}),bitrate:0,url:""}))}a.trigger(o.Events.MANIFEST_LOADED,{levels:h,audioTracks:g,subtitles:y,captions:E,url:d,stats:t,networkDetails:r,sessionData:p})},t.handleTrackOrLevelPlaylist=function(e,t,n,l){var d=this.hls,h=n.id,p=n.level,v=n.type,m=i(e,n),g=Object(a.isFiniteNumber)(h)?h:0,y=Object(a.isFiniteNumber)(p)?p:g,E=r(n),b=u.default.parseLevelPlaylist(e.data,m,y,E,g);if(!b.fragments.length)return void d.trigger(o.Events.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:m,reason:"no fragments found in level",level:"number"==typeof n.level?n.level:void 0});if(v===c.PlaylistContextType.MANIFEST){var T={attrs:new f.AttrList({}),bitrate:0,details:b,name:"",url:m};d.trigger(o.Events.MANIFEST_LOADED,{levels:[T],audioTracks:[],url:m,stats:t,networkDetails:l,sessionData:null})}if(t.parsing.end=performance.now(),b.needSidxRanges){var w,S=null===(w=b.fragments[0].initSegment)||void 0===w?void 0:w.url;return void this.load({url:S,isSidxRequest:!0,type:v,level:p,levelDetails:b,id:h,groupId:null,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer",deliveryDirectives:null})}n.levelDetails=b,this.handlePlaylistLoaded(e,t,n,l)},t.handleSidxRequest=function(e,t){var n=Object(d.parseSegmentIndex)(new Uint8Array(e.data));if(n){var r=n.references,i=t.levelDetails;r.forEach(function(e,t){var r=e.info,a=i.fragments[t];0===a.byteRange.length&&a.setByteRange(String(1+r.end-r.start)+"@"+String(r.start)),a.initSegment&&a.initSegment.setByteRange(String(n.moovEndOffset)+"@0")})}},t.handleManifestParsingError=function(e,t,n,r){this.hls.trigger(o.Events.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:t.type===c.PlaylistContextType.MANIFEST,url:e.url,reason:n,response:e,context:t,networkDetails:r})},t.handleNetworkError=function(e,t,n,r){void 0===n&&(n=!1),l.logger.warn("[playlist-loader]: A network "+(n?"timeout":"error")+" occurred while loading "+e.type+" level: "+e.level+" id: "+e.id+' group-id: "'+e.groupId+'"');var i=s.ErrorDetails.UNKNOWN,a=!1,d=this.getInternalLoader(e);switch(e.type){case c.PlaylistContextType.MANIFEST:i=n?s.ErrorDetails.MANIFEST_LOAD_TIMEOUT:s.ErrorDetails.MANIFEST_LOAD_ERROR,a=!0;break;case c.PlaylistContextType.LEVEL:i=n?s.ErrorDetails.LEVEL_LOAD_TIMEOUT:s.ErrorDetails.LEVEL_LOAD_ERROR,a=!1;break;case c.PlaylistContextType.AUDIO_TRACK:i=n?s.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,a=!1;break;case c.PlaylistContextType.SUBTITLE_TRACK:i=n?s.ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:s.ErrorDetails.SUBTITLE_LOAD_ERROR,a=!1}d&&this.resetInternalLoader(e.type);var u={type:s.ErrorTypes.NETWORK_ERROR,details:i,fatal:a,url:e.url,loader:d,context:e,networkDetails:t};r&&(u.response=r),this.hls.trigger(o.Events.ERROR,u)},t.handlePlaylistLoaded=function(e,t,n,r){var i=n.type,a=n.level,s=n.id,l=n.groupId,d=n.loader,u=n.levelDetails,f=n.deliveryDirectives;if(null===u||void 0===u||!u.targetduration)return void this.handleManifestParsingError(e,n,"invalid target duration",r);if(d)switch(u.live&&(d.getCacheAge&&(u.ageHeader=d.getCacheAge()||0),d.getCacheAge&&!isNaN(u.ageHeader)||(u.ageHeader=0)),i){case c.PlaylistContextType.MANIFEST:case c.PlaylistContextType.LEVEL:this.hls.trigger(o.Events.LEVEL_LOADED,{details:u,level:a||0,id:s||0,stats:t,networkDetails:r,deliveryDirectives:f});break;case c.PlaylistContextType.AUDIO_TRACK:this.hls.trigger(o.Events.AUDIO_TRACK_LOADED,{details:u,id:s||0,groupId:l||"",stats:t,networkDetails:r,deliveryDirectives:f});break;case c.PlaylistContextType.SUBTITLE_TRACK:this.hls.trigger(o.Events.SUBTITLE_TRACK_LOADED,{details:u,id:s||0,groupId:l||"",stats:t,networkDetails:r,deliveryDirectives:f})}},e}();t.default=h},"./src/polyfills/number.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"isFiniteNumber",function(){return r}),n.d(t,"MAX_SAFE_INTEGER",function(){return i});var r=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},i=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/remux/aac-helper.ts":function(e,t,n){"use strict";n.r(t);var r=function(){function e(){}return e.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},e}();t.default=r},"./src/remux/mp4-generator.ts":function(e,t,n){"use strict";n.r(t);var r=Math.pow(2,32)-1,i=function(){function e(){}return e.init=function(){e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var t;for(t in e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:n,audio:r};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=a,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,o,l,o,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,i))},e.box=function(e){for(var t=8,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=r.length,o=a;a--;)t+=r[a].byteLength;var s=new Uint8Array(t);for(s[0]=t>>24&255,s[1]=t>>16&255,s[2]=t>>8&255,s[3]=255&t,s.set(e,4),a=0,t=8;a<o;a++)s.set(r[a],t),t+=r[a].byteLength;return s},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,n){n*=t;var i=Math.floor(n/(r+1)),a=Math.floor(n%(r+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,n,r){return e.box(e.types.moof,e.mfhd(t),e.traf(r,n))},e.moov=function(t){for(var n=t.length,r=[];n--;)r[n]=e.trak(t[n]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(r).concat(e.mvex(t)))},e.mvex=function(t){for(var n=t.length,r=[];n--;)r[n]=e.trex(t[n]);return e.box.apply(null,[e.types.mvex].concat(r))},e.mvhd=function(t,n){n*=t;var i=Math.floor(n/(r+1)),a=Math.floor(n%(r+1)),o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,o)},e.sdtp=function(t){var n,r,i=t.samples||[],a=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)r=i[n].flags,a[n+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return e.box(e.types.sdtp,a)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var n,r,i,a=[],o=[];for(n=0;n<t.sps.length;n++)r=t.sps[n],i=r.byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(r));for(n=0;n<t.pps.length;n++)r=t.pps[n],i=r.byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(r));var s=e.box(e.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|t.sps.length].concat(a).concat([t.pps.length]).concat(o))),l=t.width,d=t.height,u=t.pixelRatio[0],c=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,d>>8&255,255&d,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,255&u,c>>24,c>>16&255,c>>8&255,255&c])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var n=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var n=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var n=t.id,i=t.duration*t.timescale,a=t.width,o=t.height,s=Math.floor(i/(r+1)),l=Math.floor(i%(r+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,l>>24,l>>16&255,l>>8&255,255&l,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,a>>8&255,255&a,0,0,o>>8&255,255&o,0,0]))},e.traf=function(t,n){var i=e.sdtp(t),a=t.id,o=Math.floor(n/(r+1)),s=Math.floor(n%(r+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s])),e.trun(t,i.length+16+20+8+16+8+8),i)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var n=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,n){var r,i,a,o,s,l,d=t.samples||[],u=d.length,c=12+16*u,f=new Uint8Array(c);for(n+=8+c,f.set([0,0,15,1,u>>>24&255,u>>>16&255,u>>>8&255,255&u,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),r=0;r<u;r++)i=d[r],a=i.duration,o=i.size,s=i.flags,l=i.cts,f.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*r);return e.box(e.types.trun,f)},e.initSegment=function(t){e.types||e.init();var n=e.moov(t),r=new Uint8Array(e.FTYP.byteLength+n.byteLength);return r.set(e.FTYP),r.set(n,e.FTYP.byteLength),r},e}();i.types=void 0,i.HDLR_TYPES=void 0,i.STTS=void 0,i.STSC=void 0,i.STCO=void 0,i.STSZ=void 0,i.VMHD=void 0,i.SMHD=void 0,i.STSD=void 0,i.FTYP=void 0,i.DINF=void 0,t.default=i},"./src/remux/mp4-remuxer.ts":function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}function i(e,t){var n;if(null===t)return e;for(n=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e}function a(e){for(var t=0;t<e.length;t++)if(e[t].key)return t;return-1}n.r(t),n.d(t,"default",function(){return g}),n.d(t,"normalizePts",function(){return i});var o=n("./src/polyfills/number.ts"),s=n("./src/remux/aac-helper.ts"),l=n("./src/remux/mp4-generator.ts"),d=n("./src/events.ts"),u=n("./src/errors.ts"),c=n("./src/utils/logger.ts"),f=n("./src/types/loader.ts"),h=n("./src/utils/timescale-conversion.ts"),p=null,v=null,m=!1,g=function(){function e(e,t,n,r){if(void 0===r&&(r=""),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=e,this.config=t,this.typeSupported=n,this.ISGenerated=!1,null===p){var i=navigator.userAgent||"",a=i.match(/Chrome\/(\d+)/i);p=a?parseInt(a[1]):0}if(null===v){var o=navigator.userAgent.match(/Safari\/(\d+)/i);v=o?parseInt(o[1]):0}m=!!p&&p<75||!!v&&v<600}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(e){c.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e},t.resetNextTimestamp=function(){c.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},t.resetInitSegment=function(){c.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},t.getVideoStartPts=function(e){var t=!1,n=e.reduce(function(e,n){var r=n.pts-e;return r<-4294967296?(t=!0,i(e,n.pts)):r>0?e:n.pts},e[0].pts);return t&&c.logger.debug("PTS rollover detected"),n},t.remux=function(e,t,n,r,o,s,l,d){var u,h,p,v,m,g,y=o,E=o,b=e.pid>-1,T=t.pid>-1,w=t.samples.length,S=e.samples.length>0,A=w>1;if((!b||S)&&(!T||A)||this.ISGenerated||l){this.ISGenerated||(p=this.generateIS(e,t,o));var L=this.isVideoContiguous,k=-1;if(A&&(k=a(t.samples),!L&&this.config.forceKeyFrameOnDiscontinuity))if(g=!0,k>0){c.logger.warn("[mp4-remuxer]: Dropped "+k+" out of "+w+" video samples due to a missing keyframe");var C=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(k),t.dropped+=k,E+=(t.samples[0].pts-C)/(t.timescale||9e4)}else-1===k&&(c.logger.warn("[mp4-remuxer]: No keyframe found out of "+w+" video samples"),g=!1);if(this.ISGenerated){if(S&&A){var _=this.getVideoStartPts(t.samples),D=i(e.samples[0].pts,_)-_,R=D/t.inputTimeScale;y+=Math.max(0,R),E+=Math.max(0,-R)}if(S){if(e.samplerate||(c.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),p=this.generateIS(e,t,o)),h=this.remuxAudio(e,y,this.isAudioContiguous,s,T||A||d===f.PlaylistLevelType.AUDIO?E:void 0),A){var I=h?h.endPTS-h.startPTS:0;t.inputTimeScale||(c.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),p=this.generateIS(e,t,o)),u=this.remuxVideo(t,E,L,I)}}else A&&(u=this.remuxVideo(t,E,L,0));u&&(u.firstKeyFrame=k,u.independent=-1!==k)}}return this.ISGenerated&&(n.samples.length&&(m=this.remuxID3(n,o)),r.samples.length&&(v=this.remuxText(r,o))),{audio:h,video:u,initSegment:p,independent:g,text:v,id3:m}},t.generateIS=function(e,t,n){var r,a,s,d=e.samples,u=t.samples,c=this.typeSupported,f={},h=!Object(o.isFiniteNumber)(this._initPTS),p="audio/mp4";if(h&&(r=a=1/0),e.config&&d.length&&(e.timescale=e.samplerate,e.isAAC||(c.mpeg?(p="audio/mpeg",e.codec=""):c.mp3&&(e.codec="mp3")),f.audio={id:"audio",container:p,codec:e.codec,initSegment:!e.isAAC&&c.mpeg?new Uint8Array(0):l.default.initSegment([e]),metadata:{channelCount:e.channelCount}},h&&(s=e.inputTimeScale,r=a=d[0].pts-Math.round(s*n))),t.sps&&t.pps&&u.length&&(t.timescale=t.inputTimeScale,f.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:l.default.initSegment([t]),metadata:{width:t.width,height:t.height}},h)){s=t.inputTimeScale;var v=this.getVideoStartPts(u),m=Math.round(s*n);a=Math.min(a,i(u[0].dts,v)-m),r=Math.min(r,v-m)}if(Object.keys(f).length)return this.ISGenerated=!0,h&&(this._initPTS=r,this._initDTS=a),{tracks:f,initPTS:r,timescale:s}},t.remuxVideo=function(e,t,n,a){var o,s,f,v=e.inputTimeScale,g=e.samples,E=[],b=g.length,T=this._initPTS,w=this.nextAvcDts,S=8,A=Number.POSITIVE_INFINITY,L=Number.NEGATIVE_INFINITY,k=0,C=!1;if(!n||null===w){w=t*v-(g[0].pts-i(g[0].dts,g[0].pts))}for(var _=0;_<b;_++){var D=g[_];if(D.pts=i(D.pts-T,w),D.dts=i(D.dts-T,w),D.dts>D.pts){k=Math.max(Math.min(k,D.pts-D.dts),-18e3)}D.dts<g[_>0?_-1:_].dts&&(C=!0)}C&&g.sort(function(e,t){var n=e.dts-t.dts,r=e.pts-t.pts;return n||r}),s=g[0].dts,f=g[g.length-1].dts;var R=Math.round((f-s)/(b-1));if(k<0){if(k<-2*R){c.logger.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+Object(h.toMsFromMpegTsClock)(-R,!0)+" ms");for(var I=k,x=0;x<b;x++)g[x].dts=I=Math.max(I,g[x].pts-R),g[x].pts=Math.max(I,g[x].pts)}else{c.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Object(h.toMsFromMpegTsClock)(k,!0)+" ms to overcome this issue");for(var O=0;O<b;O++)g[O].dts=g[O].dts+k}s=g[0].dts}if(n){var M=s-w,B=M>R,N=M<-1;if(B||N){B?c.logger.warn("AVC: "+Object(h.toMsFromMpegTsClock)(M,!0)+" ms ("+M+"dts) hole between fragments detected, filling it"):c.logger.warn("AVC: "+Object(h.toMsFromMpegTsClock)(-M,!0)+" ms ("+M+"dts) overlapping between fragments detected"),s=w;var P=g[0].pts-M;g[0].dts=s,g[0].pts=P,c.logger.log("Video: First PTS/DTS adjusted: "+Object(h.toMsFromMpegTsClock)(P,!0)+"/"+Object(h.toMsFromMpegTsClock)(s,!0)+", delta: "+Object(h.toMsFromMpegTsClock)(M,!0)+" ms")}}m&&(s=Math.max(0,s));for(var F=0,U=0,j=0;j<b;j++){for(var V=g[j],H=V.units,q=H.length,G=0,K=0;K<q;K++)G+=H[K].data.length;U+=G,F+=q,V.length=G,V.dts=Math.max(V.dts,s),V.pts=Math.max(V.pts,V.dts,0),A=Math.min(V.pts,A),L=Math.max(V.pts,L)}f=g[b-1].dts;var W,z=U+4*F+8;try{W=new Uint8Array(z)}catch(e){return void this.observer.emit(d.Events.ERROR,d.Events.ERROR,{type:u.ErrorTypes.MUX_ERROR,details:u.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:z,reason:"fail allocating video mdat "+z})}var Y=new DataView(W.buffer);Y.setUint32(0,z),W.set(l.default.types.mdat,4);for(var X=0;X<b;X++){for(var Q=g[X],J=Q.units,$=0,Z=0,ee=J.length;Z<ee;Z++){var te=J[Z],ne=te.data,re=te.data.byteLength;Y.setUint32(S,re),S+=4,W.set(ne,S),S+=re,$+=4+re}if(X<b-1)o=g[X+1].dts-Q.dts;else{var ie=this.config,ae=Q.dts-g[X>0?X-1:X].dts;if(ie.stretchShortVideoTrack&&null!==this.nextAudioPts){var oe=Math.floor(ie.maxBufferHole*v),se=(a?A+a*v:this.nextAudioPts)-Q.pts;se>oe?(o=se-ae,o<0&&(o=ae),c.logger.log("[mp4-remuxer]: It is approximately "+se/90+" ms to the next segment; using duration "+o/90+" ms for the last video frame.")):o=ae}else o=ae}var le=Math.round(Q.pts-Q.dts);E.push(new y(Q.key,o,$,le))}if(E.length&&p&&p<70){var de=E[0].flags;de.dependsOn=2,de.isNonSync=0}this.nextAvcDts=w=f+o,this.isVideoContiguous=!0;var ue=l.default.moof(e.sequenceNumber++,s,r({},e,{samples:E})),ce={data1:ue,data2:W,startPTS:A/v,endPTS:(L+o)/v,startDTS:s/v,endDTS:w/v,type:"video",hasAudio:!1,hasVideo:!0,nb:E.length,dropped:e.dropped};return e.samples=[],e.dropped=0,ce},t.remuxAudio=function(e,t,n,a,o){var f=e.inputTimeScale,h=e.samplerate?e.samplerate:f,p=f/h,v=e.isAAC?1024:1152,m=v*p,g=this._initPTS,E=!e.isAAC&&this.typeSupported.mpeg,b=[],T=e.samples,w=E?0:8,S=this.nextAudioPts||-1,A=t*f;if(this.isAudioContiguous=n=n||T.length&&S>0&&(a&&Math.abs(A-S)<9e3||Math.abs(i(T[0].pts-g,A)-S)<20*m),T.forEach(function(e){e.pts=i(e.pts-g,A)}),!n||S<0){if(T=T.filter(function(e){return e.pts>=0}),!T.length)return;S=0===o?0:a?Math.max(0,A):T[0].pts}if(e.isAAC)for(var L=void 0!==o,k=this.config.maxAudioFramesDrift,C=0,_=S;C<T.length;C++){var D=T[C],R=D.pts,I=R-_,x=Math.abs(1e3*I/f);if(I<=-k*m&&L)0===C&&(c.logger.warn("Audio frame @ "+(R/f).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*I/f)+" ms."),this.nextAudioPts=S=_=R);else if(I>=k*m&&x<1e4&&L){var O=Math.round(I/m);_=R-O*m,_<0&&(O--,_+=m),0===C&&(this.nextAudioPts=S=_),c.logger.warn("[mp4-remuxer]: Injecting "+O+" audio frame @ "+(_/f).toFixed(3)+"s due to "+Math.round(1e3*I/f)+" ms gap.");for(var M=0;M<O;M++){var B=Math.max(_,0),N=s.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);N||(c.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),N=D.unit.subarray()),T.splice(C,0,{unit:N,pts:B}),_+=m,C++}}D.pts=_,_+=m}for(var P,F=null,U=null,j=0,V=T.length;V--;)j+=T[V].unit.byteLength;for(var H=0,q=T.length;H<q;H++){var G=T[H],K=G.unit,W=G.pts;if(null!==U){b[H-1].duration=Math.round((W-U)/p)}else{if(n&&e.isAAC&&(W=S),F=W,!(j>0))return;j+=w;try{P=new Uint8Array(j)}catch(e){return void this.observer.emit(d.Events.ERROR,d.Events.ERROR,{type:u.ErrorTypes.MUX_ERROR,details:u.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:j,reason:"fail allocating audio mdat "+j})}if(!E){new DataView(P.buffer).setUint32(0,j),P.set(l.default.types.mdat,4)}}P.set(K,w);var z=K.byteLength;w+=z,b.push(new y(!0,v,z,0)),U=W}var Y=b.length;if(Y){var X=b[b.length-1];this.nextAudioPts=S=U+p*X.duration;var Q=E?new Uint8Array(0):l.default.moof(e.sequenceNumber++,F/p,r({},e,{samples:b}));e.samples=[];var J=F/f,$=S/f,Z={data1:Q,data2:P,startPTS:J,endPTS:$,startDTS:J,endDTS:$,type:"audio",hasAudio:!0,hasVideo:!1,nb:Y};return this.isAudioContiguous=!0,Z}},t.remuxEmptyAudio=function(e,t,n,r){var i=e.inputTimeScale,a=e.samplerate?e.samplerate:i,o=i/a,l=this.nextAudioPts,d=(null!==l?l:r.startDTS*i)+this._initDTS,u=r.endDTS*i+this._initDTS,f=1024*o,h=Math.ceil((u-d)/f),p=s.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(c.logger.warn("[mp4-remuxer]: remux empty Audio"),!p)return void c.logger.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");for(var v=[],m=0;m<h;m++){var g=d+m*f;v.push({unit:p,pts:g,dts:g})}return e.samples=v,this.remuxAudio(e,t,n,!1)},t.remuxID3=function(e,t){var n=e.samples.length;if(n){for(var r=e.inputTimeScale,a=this._initPTS,o=this._initDTS,s=0;s<n;s++){var l=e.samples[s];l.pts=i(l.pts-a,t*r)/r,l.dts=i(l.dts-o,t*r)/r}var d=e.samples;return e.samples=[],{samples:d}}},t.remuxText=function(e,t){var n=e.samples.length;if(n){for(var r=e.inputTimeScale,a=this._initPTS,o=0;o<n;o++){var s=e.samples[o];s.pts=i(s.pts-a,t*r)/r}e.samples.sort(function(e,t){return e.pts-t.pts});var l=e.samples;return e.samples=[],{samples:l}}},e}(),y=function(e,t,n,r){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=n,this.cts=r,this.flags=new E(e)},E=function(e){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=e?2:1,this.isNonSync=e?0:1}},"./src/remux/passthrough-remuxer.ts":function(e,t,n){"use strict";function r(e,t){var n=null===e||void 0===e?void 0:e.codec;return n&&n.length>4?n:"hvc1"===n?"hvc1.1.c.L120.90":"av01"===n?"av01.0.04M.08":"avc1"===n||t===o.ElementaryStreamTypes.VIDEO?"avc1.42e01e":"mp4a.40.5"}n.r(t);var i=n("./src/polyfills/number.ts"),a=n("./src/utils/mp4-tools.ts"),o=n("./src/loader/fragment.ts"),s=n("./src/utils/logger.ts"),l=function(){function e(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndDTS=null}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(e){this.initPTS=e,this.lastEndDTS=null},t.resetNextTimestamp=function(){this.lastEndDTS=null},t.resetInitSegment=function(e,t,n){this.audioCodec=t,this.videoCodec=n,this.generateInitSegment(e),this.emitInitSegment=!0},t.generateInitSegment=function(e){var t=this.audioCodec,n=this.videoCodec;if(!e||!e.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var i=this.initData=Object(a.parseInitSegment)(e);t||(t=r(i.audio,o.ElementaryStreamTypes.AUDIO)),n||(n=r(i.video,o.ElementaryStreamTypes.VIDEO));var l={};i.audio&&i.video?l.audiovideo={container:"video/mp4",codec:t+","+n,initSegment:e,id:"main"}:i.audio?l.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:i.video?l.video={container:"video/mp4",codec:n,initSegment:e,id:"main"}:s.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=l},t.remux=function(e,t,n,r,o){var l=this.initPTS,u=this.lastEndDTS,c={audio:void 0,video:void 0,text:r,id3:n,initSegment:void 0};Object(i.isFiniteNumber)(u)||(u=this.lastEndDTS=o||0);var f=t.samples;if(!f||!f.length)return c;var h={initPTS:void 0,timescale:1},p=this.initData;if(p&&p.length||(this.generateInitSegment(f),p=this.initData),!p||!p.length)return s.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),c;this.emitInitSegment&&(h.tracks=this.initTracks,this.emitInitSegment=!1),Object(i.isFiniteNumber)(l)||(this.initPTS=h.initPTS=l=d(p,f,u));var v=Object(a.getDuration)(f,p),m=u,g=v+m;Object(a.offsetStartDTS)(p,f,l),v>0?this.lastEndDTS=g:(s.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var y=!!p.audio,E=!!p.video,b="";y&&(b+="audio"),E&&(b+="video");var T={data1:f,startPTS:m,startDTS:m,endPTS:g,endDTS:g,type:b,hasAudio:y,hasVideo:E,nb:1,dropped:0};return c.audio="audio"===T.type?T:void 0,c.video="audio"!==T.type?T:void 0,c.text=r,c.id3=n,c.initSegment=h,c},e}(),d=function(e,t,n){return Object(a.getStartDTS)(e,t)-n};t.default=l},"./src/task-loop.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return r});var r=function(){function e(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var t=e.prototype;return t.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},t.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},t.onHandlerDestroyed=function(){},t.hasInterval=function(){return!!this._tickInterval},t.hasNextTick=function(){return!!this._tickTimer},t.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,e),!0)},t.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},t.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},t.tick=function(){1===++this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},t.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},t.doTick=function(){},e}()},"./src/types/cmcd.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"CMCDVersion",function(){return i}),n.d(t,"CMCDObjectType",function(){return r}),n.d(t,"CMCDStreamingFormat",function(){return a}),n.d(t,"CMCDStreamType",function(){return o});var r,i=1;!function(e){e.MANIFEST="m",e.AUDIO="a",e.VIDEO="v",e.MUXED="av",e.INIT="i",e.CAPTION="c",e.TIMED_TEXT="tt",e.KEY="k",e.OTHER="o"}(r||(r={}));var a;!function(e){e.DASH="d",e.HLS="h",e.SMOOTH="s",e.OTHER="o"}(a||(a={}));var o;!function(e){e.VOD="v",e.LIVE="l"}(o||(o={}))},"./src/types/level.ts":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function a(e,t){var n=e.canSkipUntil,r=e.canSkipDateRanges,i=e.endSN,a=void 0!==t?t-i:0;return n&&a<n?r?o.v2:o.Yes:o.No}n.r(t),n.d(t,"HlsSkip",function(){return o}),n.d(t,"getSkipValue",function(){return a}),n.d(t,"HlsUrlParameters",function(){return s}),n.d(t,"Level",function(){return l});var o;!function(e){e.No="",e.Yes="YES",e.v2="v2"}(o||(o={}));var s=function(){function e(e,t,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=n}return e.prototype.addDirectives=function(e){var t=new self.URL(e);return void 0!==this.msn&&t.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.toString()},e}(),l=function(){function e(e){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[e.url],this.attrs=e.attrs,this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.unknownCodecs=e.unknownCodecs,this.codecSet=[e.videoCodec,e.audioCodec].filter(function(e){return e}).join(",").replace(/\.[^.,]+/g,"")}return i(e,[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(e){var t=e%this.url.length;this._urlId!==t&&(this.details=void 0,this._urlId=t)}}]),e}()},"./src/types/loader.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"PlaylistContextType",function(){return r}),n.d(t,"PlaylistLevelType",function(){return i});var r;!function(e){e.MANIFEST="manifest",e.LEVEL="level",e.AUDIO_TRACK="audioTrack",e.SUBTITLE_TRACK="subtitleTrack"}(r||(r={}));var i;!function(e){e.MAIN="main",e.AUDIO="audio",e.SUBTITLE="subtitle"}(i||(i={}))},"./src/types/transmuxer.ts":function(e,t,n){"use strict";function r(){return{start:0,executeStart:0,executeEnd:0,end:0}}n.r(t),n.d(t,"ChunkMetadata",function(){return i});var i=function(e,t,n,i,a,o){void 0===i&&(i=0),void 0===a&&(a=-1),void 0===o&&(o=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=r(),this.buffering={audio:r(),video:r(),audiovideo:r()},this.level=e,this.sn=t,this.id=n,this.size=i,this.part=a,this.partial=o}},"./src/utils/attr-list.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"AttrList",function(){return a});var r=/^(\d+)x(\d+)$/,i=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,a=function(){function e(t){"string"==typeof t&&(t=e.parseAttrList(t));for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n])}var t=e.prototype;return t.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var n=new Uint8Array(t.length/2),r=0;r<t.length/2;r++)n[r]=parseInt(t.slice(2*r,2*r+2),16);return n}return null},t.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.optionalFloat=function(e,t){var n=this[e];return n?parseFloat(n):t},t.enumeratedString=function(e){return this[e]},t.bool=function(e){return"YES"===this[e]},t.decimalResolution=function(e){var t=r.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},e.parseAttrList=function(e){var t,n={};for(i.lastIndex=0;null!==(t=i.exec(e));){var r=t[2];0===r.indexOf('"')&&r.lastIndexOf('"')===r.length-1&&(r=r.slice(1,-1)),n[t[1]]=r}return n},e}()},"./src/utils/binary-search.ts":function(e,t,n){"use strict";n.r(t);var r={search:function(e,t){for(var n=0,r=e.length-1,i=null,a=null;n<=r;){i=(n+r)/2|0,a=e[i];var o=t(a);if(o>0)n=i+1;else{if(!(o<0))return a;r=i-1}}return null}};t.default=r},"./src/utils/buffer-helper.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"BufferHelper",function(){return a});var r=n("./src/utils/logger.ts"),i={length:0,start:function(){return 0},end:function(){return 0}},a=function(){function e(){}return e.isBuffered=function(t,n){try{if(t)for(var r=e.getBuffered(t),i=0;i<r.length;i++)if(n>=r.start(i)&&n<=r.end(i))return!0}catch(e){}return!1},e.bufferInfo=function(t,n,r){try{if(t){var i,a=e.getBuffered(t),o=[];for(i=0;i<a.length;i++)o.push({start:a.start(i),end:a.end(i)});return this.bufferedInfo(o,n,r)}}catch(e){}return{len:0,start:n,end:n,nextStart:void 0}},e.bufferedInfo=function(e,t,n){t=Math.max(0,t),e.sort(function(e,t){var n=e.start-t.start;return n||t.end-e.end});var r=[];if(n)for(var i=0;i<e.length;i++){var a=r.length;if(a){var o=r[a-1].end;e[i].start-o<n?e[i].end>o&&(r[a-1].end=e[i].end):r.push(e[i])}else r.push(e[i])}else r=e;for(var s,l=0,d=t,u=t,c=0;c<r.length;c++){var f=r[c].start,h=r[c].end;if(t+n>=f&&t<h)d=f,u=h,l=u-t;else if(t+n<f){s=f;break}}return{len:l,start:d||0,end:u||0,nextStart:s}},e.getBuffered=function(e){try{return e.buffered}catch(e){return r.logger.log("failed to get media.buffered",e),i}},e}()},"./src/utils/cea-608-parser.ts":function(e,t,n){"use strict";function r(e,t,n){n.a=e,n.b=t}function i(e,t,n){return n.a===e&&n.b===t}function a(){return{a:null,b:null}}n.r(t),n.d(t,"Row",function(){return T}),n.d(t,"CaptionScreen",function(){return w});var o,s=n("./src/utils/logger.ts"),l={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},d=function(e){var t=e;return l.hasOwnProperty(e)&&(t=l[e]),String.fromCharCode(t)},u=15,c=100,f={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},h={17:2,18:4,21:6,22:8,23:10,19:13,20:15},p={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},v={25:2,26:4,29:6,30:8,31:10,27:13,28:15},m=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];!function(e){e[e.ERROR=0]="ERROR",e[e.TEXT=1]="TEXT",e[e.WARNING=2]="WARNING",e[e.INFO=2]="INFO",e[e.DEBUG=3]="DEBUG",e[e.DATA=3]="DATA"}(o||(o={}));var g=function(){function e(){this.time=null,this.verboseLevel=o.ERROR}return e.prototype.log=function(e,t){this.verboseLevel>=e&&s.logger.log(this.time+" ["+e+"] "+t)},e}(),y=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},E=function(){function e(e,t,n,r,i){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1}var t=e.prototype;return t.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},t.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}},t.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},t.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},t.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),b=function(){function e(e,t,n,r,i,a){this.uchar=void 0,this.penState=void 0,this.uchar=e||" ",this.penState=new E(t,n,r,i,a)}var t=e.prototype;return t.reset=function(){this.uchar=" ",this.penState.reset()},t.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},t.setPenState=function(e){this.penState.copy(e)},t.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},t.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},t.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),T=function(){function e(e){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var t=0;t<c;t++)this.chars.push(new b);this.logger=e,this.pos=0,this.currPenState=new E}var t=e.prototype;return t.equals=function(e){for(var t=!0,n=0;n<c;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<c;t++)this.chars[t].copy(e.chars[t])},t.isEmpty=function(){for(var e=!0,t=0;t<c;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},t.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(o.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>c&&(this.logger.log(o.DEBUG,"Too large cursor position "+this.pos),this.pos=c)},t.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},t.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.insertChar=function(e){e>=144&&this.backSpace();var t=d(e);if(this.pos>=c)return void this.logger.log(o.ERROR,"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)},t.clearFromPos=function(e){var t;for(t=e;t<c;t++)this.chars[t].reset()},t.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.getTextString=function(){for(var e=[],t=!0,n=0;n<c;n++){var r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")},t.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),w=function(){function e(e){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var t=0;t<u;t++)this.rows.push(new T(e));this.logger=e,this.currRow=u-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var t=e.prototype;return t.reset=function(){for(var e=0;e<u;e++)this.rows[e].clear();this.currRow=u-1},t.equals=function(e){for(var t=!0,n=0;n<u;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<u;t++)this.rows[t].copy(e.rows[t])},t.isEmpty=function(){for(var e=!0,t=0;t<u;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},t.backSpace=function(){this.rows[this.currRow].backSpace()},t.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},t.insertChar=function(e){this.rows[this.currRow].insertChar(e)},t.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},t.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},t.setCursor=function(e){this.logger.log(o.INFO,"setCursor: "+e),this.rows[this.currRow].setCursor(e)},t.setPAC=function(e){this.logger.log(o.INFO,"pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var n=0;n<u;n++)this.rows[n].clear();var r=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var a=i.rows[r].cueStartTime,s=this.logger.time;if(a&&null!==s&&a<s)for(var l=0;l<this.nrRollUpRows;l++)this.rows[t-this.nrRollUpRows+l+1].copy(i.rows[r+l])}}this.currRow=t;var d=this.rows[this.currRow];if(null!==e.indent){var c=e.indent,f=Math.max(c-1,0);d.setCursor(e.indent),e.color=d.chars[f].penState.foreground}var h={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(h)},t.setBkgData=function(e){this.logger.log(o.INFO,"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},t.setRollUpRows=function(e){this.nrRollUpRows=e},t.rollUp=function(){if(null===this.nrRollUpRows)return void this.logger.log(o.DEBUG,"roll_up but nrRollUpRows not set yet");this.logger.log(o.TEXT,this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(o.INFO,"Rolling up")},t.getDisplayText=function(e){e=e||!1;for(var t=[],n="",r=-1,i=0;i<u;i++){var a=this.rows[i].getTextString();a&&(r=i+1,e?t.push("Row "+r+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},t.getTextAndFormat=function(){return this.rows},e}(),S=function(){function e(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new w(n),this.nonDisplayedMemory=new w(n),this.lastOutputScreen=new w(n),this.currRollUpRow=this.displayedMemory.rows[u-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}var t=e.prototype;return t.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[u-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},t.getHandler=function(){return this.outputFilter},t.setHandler=function(e){this.outputFilter=e},t.setPAC=function(e){this.writeScreen.setPAC(e)},t.setBkgData=function(e){this.writeScreen.setBkgData(e)},t.setMode=function(e){e!==this.mode&&(this.mode=e,this.logger.log(o.INFO,"MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},t.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(o.INFO,n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(o.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},t.ccRCL=function(){this.logger.log(o.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.ccBS=function(){this.logger.log(o.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.ccAOF=function(){},t.ccAON=function(){},t.ccDER=function(){this.logger.log(o.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.ccRU=function(e){this.logger.log(o.INFO,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},t.ccFON=function(){this.logger.log(o.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},t.ccRDC=function(){this.logger.log(o.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.ccTR=function(){this.logger.log(o.INFO,"TR"),this.setMode("MODE_TEXT")},t.ccRTD=function(){this.logger.log(o.INFO,"RTD"),this.setMode("MODE_TEXT")},t.ccEDM=function(){this.logger.log(o.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.ccCR=function(){this.logger.log(o.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.ccENM=function(){this.logger.log(o.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},t.ccEOC=function(){if(this.logger.log(o.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(o.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},t.ccTO=function(e){this.logger.log(o.INFO,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},t.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16,r=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=r[n]}this.logger.log(o.INFO,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},t.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},t.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}(),A=function(){function e(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var r=new g;this.channels=[null,new S(e,t,r),new S(e+1,n,r)],this.cmdHistory=a(),this.logger=r}var t=e.prototype;return t.getHandler=function(e){return this.channels[e].getHandler()},t.setHandler=function(e,t){this.channels[e].setHandler(t)},t.addData=function(e,t){var n,r,i,a=!1;this.logger.time=e;for(var s=0;s<t.length;s+=2)if(r=127&t[s],i=127&t[s+1],0!==r||0!==i){if(this.logger.log(o.DATA,"["+y([t[s],t[s+1]])+"] -> ("+y([r,i])+")"),n=this.parseCmd(r,i),n||(n=this.parseMidrow(r,i)),n||(n=this.parsePAC(r,i)),n||(n=this.parseBackgroundAttributes(r,i)),!n&&(a=this.parseChars(r,i))){var l=this.currentChannel;if(l&&l>0){var d=this.channels[l];d.insertChars(a)}else this.logger.log(o.WARNING,"No channel found yet. TEXT-MODE?")}n||a||this.logger.log(o.WARNING,"Couldn't parse cleaned data "+y([r,i])+" orig: "+y([t[s],t[s+1]]))}},t.parseCmd=function(e,t){var n=this.cmdHistory,a=(20===e||28===e||21===e||29===e)&&t>=32&&t<=47,s=(23===e||31===e)&&t>=33&&t<=35;if(!a&&!s)return!1;if(i(e,t,n))return r(null,null,n),this.logger.log(o.DEBUG,"Repeated command ("+y([e,t])+") is dropped"),!0;var l=20===e||21===e||23===e?1:2,d=this.channels[l];return 20===e||21===e||28===e||29===e?32===t?d.ccRCL():33===t?d.ccBS():34===t?d.ccAOF():35===t?d.ccAON():36===t?d.ccDER():37===t?d.ccRU(2):38===t?d.ccRU(3):39===t?d.ccRU(4):40===t?d.ccFON():41===t?d.ccRDC():42===t?d.ccTR():43===t?d.ccRTD():44===t?d.ccEDM():45===t?d.ccCR():46===t?d.ccENM():47===t&&d.ccEOC():d.ccTO(t-32),r(e,t,n),this.currentChannel=l,!0},t.parseMidrow=function(e,t){var n=0;if((17===e||25===e)&&t>=32&&t<=47){if((n=17===e?1:2)!==this.currentChannel)return this.logger.log(o.ERROR,"Mismatch channel in midrow parsing"),!1;var r=this.channels[n];return!!r&&(r.ccMIDROW(t),this.logger.log(o.DEBUG,"MIDROW ("+y([e,t])+")"),!0)}return!1},t.parsePAC=function(e,t){var n,a=this.cmdHistory,o=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,s=(16===e||24===e)&&t>=64&&t<=95;if(!o&&!s)return!1;if(i(e,t,a))return r(null,null,a),!0;var l=e<=23?1:2;n=t>=64&&t<=95?1===l?f[e]:p[e]:1===l?h[e]:v[e];var d=this.channels[l];return!!d&&(d.setPAC(this.interpretPAC(n,t)),r(e,t,a),this.currentChannel=l,!0)},t.interpretPAC=function(e,t){var n,r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,r.underline=1==(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r},t.parseChars=function(e,t){var n,i=null,a=null;if(e>=25?(n=2,a=e-8):(n=1,a=e),a>=17&&a<=19){var s;s=17===a?t+80:18===a?t+112:t+144,this.logger.log(o.INFO,"Special char '"+d(s)+"' in channel "+n),i=[s]}else e>=32&&e<=127&&(i=0===t?[e]:[e,t]);if(i){var l=y(i);this.logger.log(o.DEBUG,"Char codes =  "+l.join(",")),r(e,t,this.cmdHistory)}return i},t.parseBackgroundAttributes=function(e,t){var n=(16===e||24===e)&&t>=32&&t<=47,i=(23===e||31===e)&&t>=45&&t<=47;if(!n&&!i)return!1;var a,o={};16===e||24===e?(a=Math.floor((t-32)/2),o.background=m[a],t%2==1&&(o.background=o.background+"_semi")):45===t?o.background="transparent":(o.foreground="black",47===t&&(o.underline=!0));var s=e<=23?1:2;return this.channels[s].setBkgData(o),r(e,t,this.cmdHistory),!0},t.reset=function(){for(var e=0;e<Object.keys(this.channels).length;e++){var t=this.channels[e];t&&t.reset()}this.cmdHistory=a()},t.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++){var n=this.channels[t];n&&n.cueSplitAtTime(e)}},e}();t.default=A},"./src/utils/codecs.ts":function(e,t,n){"use strict";function r(e,t){var n=a[t];return!!n&&!0===n[e.slice(0,4)]}function i(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}n.r(t),n.d(t,"isCodecType",function(){return r}),n.d(t,"isCodecSupportedInMp4",function(){return i});var a={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}}},"./src/utils/cues.ts":function(e,t,n){"use strict";n.r(t);var r=n("./src/utils/vttparser.ts"),i=n("./src/utils/webvtt-parser.ts"),a=n("./src/utils/texttrack-utils.ts"),o=/\s/,s={newCue:function(e,t,n,s){for(var l,d,u,c,f,h=[],p=self.VTTCue||self.TextTrackCue,v=0;v<s.rows.length;v++)if(l=s.rows[v],u=!0,c=0,f="",!l.isEmpty()){for(var m=0;m<l.chars.length;m++)o.test(l.chars[m].uchar)&&u?c++:(f+=l.chars[m].uchar,u=!1);l.cueStartTime=t,t===n&&(n+=1e-4),c>=16?c--:c++;var g=Object(r.fixLineBreaks)(f.trim()),y=Object(i.generateCueId)(t,n,g);e&&e.cues&&e.cues.getCueById(y)||(d=new p(t,n,g),d.id=y,d.line=v+1,d.align="left",d.position=10+Math.min(80,10*Math.floor(8*c/32)),h.push(d))}return e&&h.length&&(h.sort(function(e,t){return"auto"===e.line||"auto"===t.line?0:e.line>8&&t.line>8?t.line-e.line:e.line-t.line}),h.forEach(function(t){return Object(a.addCueToTrack)(e,t)})),h}};t.default=s},"./src/utils/discontinuities.ts":function(e,t,n){"use strict";function r(e,t){for(var n=null,r=0,i=e.length;r<i;r++){var a=e[r];if(a&&a.cc===t){n=a;break}}return n}function i(e,t,n){return!(!t.details||!(n.endCC>n.startCC||e&&e.cc<n.startCC))}function a(e,t){var n=e.fragments,i=t.fragments;if(!i.length||!n.length)return void p.logger.log("No fragments to align");var a=r(n,i[0].cc);return!a||a&&!a.startPTS?void p.logger.log("No frag in previous level to align on"):a}function o(e,t){if(e){var n=e.start+t;e.start=e.startPTS=n,e.endPTS=n+e.duration}}function s(e,t){for(var n=t.fragments,r=0,i=n.length;r<i;r++)o(n[r],e);t.fragmentHint&&o(t.fragmentHint,e),t.alignedSliding=!0}function l(e,t,n){t&&(d(e,n,t),!n.alignedSliding&&t.details&&u(n,t.details),n.alignedSliding||!t.details||n.skippedSegments||Object(v.adjustSliding)(t.details,n))}function d(e,t,n){if(i(e,n,t)){var r=a(n.details,t);r&&Object(h.isFiniteNumber)(r.start)&&(p.logger.log("Adjusting PTS using last level due to CC increase within current level "+t.url),s(r.start,t))}}function u(e,t){if(t.fragments.length&&e.hasProgramDateTime&&t.hasProgramDateTime){var n=t.fragments[0].programDateTime,r=e.fragments[0].programDateTime,i=(r-n)/1e3+t.fragments[0].start;i&&Object(h.isFiniteNumber)(i)&&(p.logger.log("Adjusting PTS using programDateTime delta "+(r-n)+"ms, sliding:"+i.toFixed(3)+" "+e.url+" "),s(i,e))}}function c(e,t){var n=e.programDateTime;if(n){var r=(n-t)/1e3;e.start=e.startPTS=r,e.endPTS=r+e.duration}}function f(e,t){if(t.fragments.length&&e.hasProgramDateTime&&t.hasProgramDateTime){var n=t.fragments[0].programDateTime,r=t.fragments[0].start,i=n-1e3*r;e.fragments.forEach(function(e){c(e,i)}),e.fragmentHint&&c(e.fragmentHint,i),e.alignedSliding=!0}}n.r(t),n.d(t,"findFirstFragWithCC",function(){return r}),n.d(t,"shouldAlignOnDiscontinuities",function(){return i}),n.d(t,"findDiscontinuousReferenceFrag",function(){return a}),n.d(t,"adjustSlidingStart",function(){return s}),n.d(t,"alignStream",function(){return l}),n.d(t,"alignPDT",function(){return u}),n.d(t,"alignFragmentByPDTDelta",function(){return c}),n.d(t,"alignMediaPlaylistByPDT",function(){return f});var h=n("./src/polyfills/number.ts"),p=n("./src/utils/logger.ts"),v=n("./src/controller/level-helper.ts")},"./src/utils/ewma-bandwidth-estimator.ts":function(e,t,n){"use strict";n.r(t);var r=n("./src/utils/ewma.ts"),i=function(){function e(e,t,n){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new r.default(e),this.fast_=new r.default(t)}var t=e.prototype;return t.update=function(e,t){var n=this.slow_,i=this.fast_;this.slow_.halfLife!==e&&(this.slow_=new r.default(e,n.getEstimate(),n.getTotalWeight())),this.fast_.halfLife!==t&&(this.fast_=new r.default(t,i.getEstimate(),i.getTotalWeight()))},t.sample=function(e,t){e=Math.max(e,this.minDelayMs_);var n=8*t,r=e/1e3,i=n/r;this.fast_.sample(r,i),this.slow_.sample(r,i)},t.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},t.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.destroy=function(){},e}();t.default=i},"./src/utils/ewma.ts":function(e,t,n){"use strict";n.r(t);var r=function(){function e(e,t,n){void 0===t&&(t=0),void 0===n&&(n=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=n}var t=e.prototype;return t.sample=function(e,t){var n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e},t.getTotalWeight=function(){return this.totalWeight_},t.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_},e}();t.default=r},"./src/utils/fetch-loader.ts":function(e,t,n){"use strict";function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,l(e,t)}function i(e){var t="function"==typeof Map?new Map:void 0;return(i=function(e){function n(){return a(e,arguments,d(this).constructor)}if(null===e||!s(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),l(n,e)})(e)}function a(e,t,n){return a=o()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=Function.bind.apply(e,r),a=new i;return n&&l(a,n.prototype),a},a.apply(null,arguments)}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function s(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}function c(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(e){}return!1}function f(e,t){var n={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers(u({},e.headers))};return e.rangeEnd&&n.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1)),n}function h(e,t){return new self.Request(e.url,t)}n.r(t),n.d(t,"fetchSupported",function(){return c});var p=n("./src/polyfills/number.ts"),v=n("./src/loader/load-stats.ts"),m=n("./src/demux/chunk-cache.ts"),g=function(){function e(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||h,this.controller=new self.AbortController,this.stats=new v.LoadStats}var t=e.prototype;return t.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},t.abortInternal=function(){var e=this.response;e&&e.ok||(this.stats.aborted=!0,this.controller.abort())},t.abort=function(){var e;this.abortInternal(),null!==(e=this.callbacks)&&void 0!==e&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},t.load=function(e,t,n){var r=this,i=this.stats;if(i.loading.start)throw new Error("Loader can only be used once.");i.loading.start=self.performance.now();var a=f(e,this.controller.signal),o=n.onProgress,s="arraybuffer"===e.responseType,l=s?"byteLength":"length";this.context=e,this.config=t,this.callbacks=n,this.request=this.fetchSetup(e,a),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(function(){r.abortInternal(),n.onTimeout(i,e,r.response)},t.timeout),self.fetch(this.request).then(function(n){if(r.response=r.loader=n,!n.ok){var a=n.status,l=n.statusText;throw new y(l||"fetch, bad network response",a,n)}return i.loading.first=Math.max(self.performance.now(),i.loading.start),i.total=parseInt(n.headers.get("Content-Length")||"0"),o&&Object(p.isFiniteNumber)(t.highWaterMark)?r.loadProgressively(n,i,e,t.highWaterMark,o):s?n.arrayBuffer():n.text()}).then(function(a){var s=r.response;self.clearTimeout(r.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first),i.loaded=i.total=a[l];var d={url:s.url,data:a};o&&!Object(p.isFiniteNumber)(t.highWaterMark)&&o(i,e,a,s),n.onSuccess(d,i,e,s)}).catch(function(t){if(self.clearTimeout(r.requestTimeout),!i.aborted){var a=t.code||0;n.onError({code:a,text:t.message},e,t.details)}})},t.getCacheAge=function(){var e=null;if(this.response){var t=this.response.headers.get("age");e=t?parseFloat(t):null}return e},t.loadProgressively=function(e,t,n,r,i){void 0===r&&(r=0);var a=new m.default,o=e.body.getReader();return function s(){return o.read().then(function(o){if(o.done)return a.dataLength&&i(t,n,a.flush(),e),Promise.resolve(new ArrayBuffer(0));var l=o.value,d=l.length;return t.loaded+=d,d<r||a.dataLength?(a.push(l),a.dataLength>=r&&i(t,n,a.flush(),e)):i(t,n,l,e),s()}).catch(function(){return Promise.reject()})}()},e}(),y=function(e){function t(t,n,r){var i;return i=e.call(this,t)||this,i.code=void 0,i.details=void 0,i.code=n,i.details=r,i}return r(t,e),t}(i(Error));t.default=g},"./src/utils/imsc1-ttml-parser.ts":function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}function i(e,t,n,r,i){var o=Object(v.findBox)(new Uint8Array(e),["mdat"]);if(0===o.length)return void i(new Error("Could not parse IMSC1 mdat"));var s=o[0],l=Object(y.utf8ArrayToStr)(new Uint8Array(e,s.start,s.end-s.start)),d=Object(E.toTimescaleFromScale)(t,1,n);try{r(a(l,d))}catch(e){i(e)}}function a(e,t){var n=new DOMParser,i=n.parseFromString(e,"text/xml"),a=i.getElementsByTagName("tt")[0];if(!a)throw new Error("Invalid ttml");var u={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},h=Object.keys(u).reduce(function(e,t){return e[t]=a.getAttribute("ttp:"+t)||u[t],e},{}),p="preserve"!==a.getAttribute("xml:space"),v=s(o(a,"styling","style")),m=s(o(a,"layout","region")),y=o(a,"body","[begin]");return[].map.call(y,function(e){var n=l(e,p);if(!n||!e.hasAttribute("begin"))return null;var i=f(e.getAttribute("begin"),h),a=f(e.getAttribute("dur"),h),o=f(e.getAttribute("end"),h);if(null===i)throw c(e);if(null===o){if(null===a)throw c(e);o=i+a}var s=new g.default(i-t,o-t,n);s.id=Object(b.generateCueId)(s.startTime,s.endTime,s.text);var u=m[e.getAttribute("region")],y=v[e.getAttribute("style")];s.position=10,s.size=80;var E=d(u,y),T=E.textAlign;if(T){var w=A[T];w&&(s.lineAlign=w),s.align=T}return r(s,E),s}).filter(function(e){return null!==e})}function o(e,t,n){var r=e.getElementsByTagName(t)[0];return r?[].slice.call(r.querySelectorAll(n)):[]}function s(e){return e.reduce(function(e,t){var n=t.getAttribute("xml:id");return n&&(e[n]=t),e},{})}function l(e,t){return[].slice.call(e.childNodes).reduce(function(e,n,r){var i;return"br"===n.nodeName&&r?e+"\n":null!==(i=n.childNodes)&&void 0!==i&&i.length?l(n,t):t?e+n.textContent.trim().replace(/\s+/g," "):e+n.textContent},"")}function d(e,t){var n="http://www.w3.org/ns/ttml#styling";return["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce(function(r,i){var a=u(t,n,i)||u(e,n,i);return a&&(r[i]=a),r},{})}function u(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function c(e){return new Error("Could not parse ttml timestamp "+e)}function f(e,t){if(!e)return null;var n=Object(m.parseTimeStamp)(e);return null===n&&(w.test(e)?n=h(e,t):S.test(e)&&(n=p(e,t))),n}function h(e,t){var n=w.exec(e),r=(0|n[4])+(0|n[5])/t.subFrameRate;return 3600*(0|n[1])+60*(0|n[2])+(0|n[3])+r/t.frameRate}function p(e,t){var n=S.exec(e),r=Number(n[1]);switch(n[2]){case"h":return 3600*r;case"m":return 60*r;case"ms":return 1e3*r;case"f":return r/t.frameRate;case"t":return r/t.tickRate}return r}n.r(t),n.d(t,"IMSC1_CODEC",function(){return T}),n.d(t,"parseIMSC1",function(){return i});var v=n("./src/utils/mp4-tools.ts"),m=n("./src/utils/vttparser.ts"),g=n("./src/utils/vttcue.ts"),y=n("./src/demux/id3.ts"),E=n("./src/utils/timescale-conversion.ts"),b=n("./src/utils/webvtt-parser.ts"),T="stpp.ttml.im1t",w=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,S=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,A={left:"start",center:"center",right:"end",start:"start",end:"end"}},"./src/utils/logger.ts":function(e,t,n){"use strict";function r(e){var t=self.console[e];return t?t.bind(self.console,"["+e+"] >"):o}function i(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];n.forEach(function(t){l[t]=e[t]?e[t].bind(e):r(t)})}function a(e){if(self.console&&!0===e||"object"==typeof e){i(e,"debug","log","info","warn","error");try{l.log()}catch(e){l=s}}else l=s}n.r(t),n.d(t,"enableLogs",function(){return a}),n.d(t,"logger",function(){return d});var o=function(){},s={trace:o,debug:o,log:o,warn:o,info:o,error:o},l=s,d=l},"./src/utils/mediakeys-helper.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"KeySystems",function(){return r}),n.d(t,"requestMediaKeySystemAccess",function(){return i});var r;!function(e){e.WIDEVINE="com.widevine.alpha",e.PLAYREADY="com.microsoft.playready"}(r||(r={}));var i=function(){return"undefined"!=typeof self&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}()},"./src/utils/mediasource-helper.ts":function(e,t,n){"use strict";function r(){return self.MediaSource||self.WebKitMediaSource}n.r(t),n.d(t,"getMediaSource",function(){return r})},"./src/utils/mp4-tools.ts":function(e,t,n){"use strict";function r(e){return String.fromCharCode.apply(null,e)}function i(e,t){"data"in e&&(t+=e.start,e=e.data);var n=e[t]<<8|e[t+1];return n<0?65536+n:n}function a(e,t){"data"in e&&(t+=e.start,e=e.data);var n=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return n<0?4294967296+n:n}function o(e,t,n){"data"in e&&(t+=e.start,e=e.data),e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function s(e,t){var n=[];if(!t.length)return n;var i,o,l;"data"in e?(i=e.data,o=e.start,l=e.end):(i=e,o=0,l=i.byteLength);for(var d=o;d<l;){var u=a(i,d),c=r(i.subarray(d+4,d+8)),f=u>1?d+u:l;if(c===t[0])if(1===t.length)n.push({data:i,start:d+8,end:f});else{var h=s({data:i,start:d+8,end:f},t.slice(1));h.length&&E.apply(n,h)}d=f}return n}function l(e){var t=s(e,["moov"]),n=t[0],r=n?n.end:null,o=s(e,["sidx"]);if(!o||!o[0])return null;var l=[],d=o[0],u=d.data[0],c=0===u?8:16,f=a(d,c);c+=4;c+=0===u?8:16,c+=2;var h=d.end+0,p=i(d,c);c+=2;for(var v=0;v<p;v++){var m=c,g=a(d,m);m+=4;var y=2147483647&g;if(1===(2147483648&g)>>>31)return null;var E=a(d,m);m+=4,l.push({referenceSize:y,subsegmentDuration:E,info:{duration:E/f,start:h,end:h+y-1}}),h+=y,m+=4,c=m}return{earliestPresentationTime:0,timescale:f,version:u,referencesCount:p,references:l,moovEndOffset:r}}function d(e){for(var t=[],n=s(e,["moov","trak"]),i=0;i<n.length;i++){var o=n[i],l=s(o,["tkhd"])[0];if(l){var d=l.data[l.start],u=0===d?12:20,c=a(l,u),f=s(o,["mdia","mdhd"])[0];if(f){d=f.data[f.start],u=0===d?12:20;var h=a(f,u),p=s(o,["mdia","hdlr"])[0];if(p){var v=r(p.data.subarray(p.start+8,p.start+12)),m={soun:g.ElementaryStreamTypes.AUDIO,vide:g.ElementaryStreamTypes.VIDEO}[v];if(m){var y=s(o,["mdia","minf","stbl","stsd"])[0],E=void 0;y&&(E=r(y.data.subarray(y.start+12,y.start+16))),t[c]={timescale:h,type:m},t[m]={timescale:h,id:c,codec:E}}}}}}return s(e,["moov","mvex","trex"]).forEach(function(e){var n=a(e,4),r=t[n];r&&(r.default={duration:a(e,12),flags:a(e,20)})}),t}function u(e,t){return s(t,["moof","traf"]).reduce(function(t,n){var r=s(n,["tfdt"])[0],i=r.data[r.start],o=s(n,["tfhd"]).reduce(function(t,n){var o=a(n,4),s=e[o];if(s){var l=a(r,4);1===i&&(l*=Math.pow(2,32),l+=a(r,8));var d=s.timescale||9e4,u=l/d;if(isFinite(u)&&(null===t||u<t))return u}return t},null);return null!==o&&isFinite(o)&&(null===t||o<t)?o:t},null)||0}function c(e,t){for(var n=0,r=0,i=0,o=s(e,["moof","traf"]),d=0;d<o.length;d++){var u=o[d],c=s(u,["tfhd"])[0],h=a(c,4),p=t[h];if(p){var v=p.default,m=a(c,0)|(null===v||void 0===v?void 0:v.flags),y=null===v||void 0===v?void 0:v.duration;8&m&&(y=2&m?a(c,12):a(c,8));for(var E=p.timescale||9e4,b=s(u,["trun"]),T=0;T<b.length;T++){if(!(n=f(b[T]))&&y){n=y*a(b[T],4)}p.type===g.ElementaryStreamTypes.VIDEO?r+=n/E:p.type===g.ElementaryStreamTypes.AUDIO&&(i+=n/E)}}}if(0===r&&0===i){var w=l(e);if(null!==w&&void 0!==w&&w.references)return w.references.reduce(function(e,t){return e+t.info.duration||0},0)}return r||i}function f(e){var t=a(e,0),n=8;1&t&&(n+=4),4&t&&(n+=4);for(var r=0,i=a(e,4),o=0;o<i;o++){if(256&t){r+=a(e,n),n+=4}512&t&&(n+=4),1024&t&&(n+=4),2048&t&&(n+=4)}return r}function h(e,t,n){s(t,["moof","traf"]).forEach(function(t){s(t,["tfhd"]).forEach(function(r){var i=a(r,4),l=e[i];if(l){var d=l.timescale||9e4;s(t,["tfdt"]).forEach(function(e){var t=e.data[e.start],r=a(e,4);if(0===t)o(e,4,r-n*d);else{r*=Math.pow(2,32),r+=a(e,8),r-=n*d,r=Math.max(r,0);var i=Math.floor(r/(y+1)),s=Math.floor(r%(y+1));o(e,4,i),o(e,8,s)}})}})})}function p(e){var t={valid:null,remainder:null},n=s(e,["moof"]);if(!n)return t;if(n.length<2)return t.remainder=e,t;var r=n[n.length-1];return t.valid=Object(m.sliceUint8)(e,0,r.start-8),t.remainder=Object(m.sliceUint8)(e,r.start-8),t}function v(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}n.r(t),n.d(t,"bin2str",function(){return r}),n.d(t,"readUint16",function(){return i}),n.d(t,"readUint32",function(){return a}),n.d(t,"writeUint32",function(){return o}),n.d(t,"findBox",function(){return s}),n.d(t,"parseSegmentIndex",function(){return l}),n.d(t,"parseInitSegment",function(){return d}),n.d(t,"getStartDTS",function(){return u}),n.d(t,"getDuration",function(){return c}),n.d(t,"computeRawDurationFromSamples",function(){return f}),n.d(t,"offsetStartDTS",function(){return h}),n.d(t,"segmentValidRange",function(){return p}),n.d(t,"appendUint8Array",function(){return v});var m=n("./src/utils/typed-array.ts"),g=n("./src/loader/fragment.ts"),y=Math.pow(2,32)-1,E=[].push},"./src/utils/output-filter.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return r});var r=function(){function e(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}var t=e.prototype;return t.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},t.newCue=function(e,t,n){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)},t.reset=function(){this.cueRanges=[],this.startTime=null},e}()},"./src/utils/texttrack-utils.ts":function(e,t,n){"use strict";function r(e,t){var n;try{n=new Event("addtrack")}catch(e){n=document.createEvent("Event"),n.initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)}function i(e,t){var n=e.mode;if("disabled"===n&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw new Error("addCue is failed for: "+t)}catch(n){d.logger.debug("[texttrack-utils]: "+n);var r=new self.TextTrackCue(t.startTime,t.endTime,t.text);r.id=t.id,e.addCue(r)}"disabled"===n&&(e.mode=n)}function a(e){var t=e.mode;if("disabled"===t&&(e.mode="hidden"),e.cues)for(var n=e.cues.length;n--;)e.removeCue(e.cues[n]);"disabled"===t&&(e.mode=t)}function o(e,t,n){var r=e.mode;if("disabled"===r&&(e.mode="hidden"),e.cues&&e.cues.length>0)for(var i=l(e.cues,t,n),a=0;a<i.length;a++)e.removeCue(i[a]);"disabled"===r&&(e.mode=r)}function s(e,t){if(t<e[0].startTime)return 0;var n=e.length-1;if(t>e[n].endTime)return-1;for(var r=0,i=n;r<=i;){var a=Math.floor((i+r)/2);if(t<e[a].startTime)i=a-1;else{if(!(t>e[a].startTime&&r<n))return a;r=a+1}}return e[r].startTime-t<t-e[i].startTime?r:i}function l(e,t,n){var r=[],i=s(e,t);if(i>-1)for(var a=i,o=e.length;a<o;a++){var l=e[a];if(l.startTime>=t&&l.endTime<=n)r.push(l);else if(l.startTime>n)return r}return r}n.r(t),n.d(t,"sendAddTrackEvent",function(){return r}),n.d(t,"addCueToTrack",function(){return i}),n.d(t,"clearCurrentCues",function(){return a}),n.d(t,"removeCuesInRange",function(){return o}),n.d(t,"getCuesInRange",function(){return l});var d=n("./src/utils/logger.ts")},"./src/utils/time-ranges.ts":function(e,t,n){"use strict";n.r(t);var r={toString:function(e){for(var t="",n=e.length,r=0;r<n;r++)t+="["+e.start(r).toFixed(3)+","+e.end(r).toFixed(3)+"]";return t}};t.default=r},"./src/utils/timescale-conversion.ts":function(e,t,n){"use strict";function r(e,t,n,r){void 0===n&&(n=1),void 0===r&&(r=!1);var i=e*t*n;return r?Math.round(i):i}function i(e,t,n,i){return void 0===n&&(n=1),void 0===i&&(i=!1),r(e,t,1/n,i)}function a(e,t){return void 0===t&&(t=!1),r(e,1e3,1/s,t)}function o(e,t){return void 0===t&&(t=1),r(e,s,1/t)}n.r(t),n.d(t,"toTimescaleFromBase",function(){return r}),n.d(t,"toTimescaleFromScale",function(){return i}),n.d(t,"toMsFromMpegTsClock",function(){return a}),n.d(t,"toMpegTsClockFromTimescale",function(){return o});var s=9e4},"./src/utils/typed-array.ts":function(e,t,n){"use strict";function r(e,t,n){return Uint8Array.prototype.slice?e.slice(t,n):new Uint8Array(Array.prototype.slice.call(e,t,n))}n.r(t),n.d(t,"sliceUint8",function(){return r})},"./src/utils/vttcue.ts":function(e,t,n){"use strict";n.r(t),t.default=function(){function e(e,t){if("string"!=typeof t)return!1;if(!Array.isArray(e))return!1;var n=t.toLowerCase();return!!~e.indexOf(n)&&n}function t(t){return e(a,t)}function n(t){return e(o,t)}function r(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=1;i<arguments.length;i++){var a=arguments[i];for(var o in a)e[o]=a[o]}return e}function i(e,i,a){var o=this,s={enumerable:!0};o.hasBeenReset=!1;var l="",d=!1,u=e,c=i,f=a,h=null,p="",v=!0,m="auto",g="start",y=50,E="middle",b=50,T="middle";Object.defineProperty(o,"id",r({},s,{get:function(){return l},set:function(e){l=""+e}})),Object.defineProperty(o,"pauseOnExit",r({},s,{get:function(){return d},set:function(e){d=!!e}})),Object.defineProperty(o,"startTime",r({},s,{get:function(){return u},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");u=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",r({},s,{get:function(){return c},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");c=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",r({},s,{get:function(){return f},set:function(e){f=""+e,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",r({},s,{get:function(){return h},set:function(e){h=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",r({},s,{get:function(){return p},set:function(e){var n=t(e);if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");p=n,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",r({},s,{get:function(){return v},set:function(e){v=!!e,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",r({},s,{get:function(){return m},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");m=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",r({},s,{get:function(){return g},set:function(e){var t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");g=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",r({},s,{get:function(){return y},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",r({},s,{get:function(){return E},set:function(e){var t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");E=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",r({},s,{get:function(){return b},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",r({},s,{get:function(){return T},set:function(e){var t=n(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");T=t,this.hasBeenReset=!0}})),o.displayState=void 0}if("undefined"!=typeof self&&self.VTTCue)return self.VTTCue;var a=["","lr","rl"],o=["start","middle","end","left","right"];return i.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},i}()},"./src/utils/vttparser.ts":function(e,t,n){"use strict";function r(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+parseFloat(r||0)}var n=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return n?parseFloat(n[2])>59?t(n[2],n[3],0,n[4]):t(n[1],n[2],n[3],n[4]):null}function i(e,t,n,r){var i=r?e.split(r):[e];for(var a in i)if("string"==typeof i[a]){var o=i[a].split(n);if(2===o.length){var s=o[0],l=o[1];t(s,l)}}}function a(e,t,n){function a(){var t=r(e);if(null===t)throw new Error("Malformed timestamp: "+s);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function o(){e=e.replace(/^\s+/,"")}var s=e;if(o(),t.startTime=a(),o(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+s);e=e.substr(3),o(),t.endTime=a(),o(),function(e,t){var r=new d;i(e,function(e,t){var i;switch(e){case"region":for(var a=n.length-1;a>=0;a--)if(n[a].id===t){r.set(e,n[a].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":i=t.split(","),r.integer(e,i[0]),r.percent(e,i[0])&&r.set("snapToLines",!1),r.alt(e,i[0],["auto"]),2===i.length&&r.alt("lineAlign",i[1],["start",c,"end"]);break;case"position":i=t.split(","),r.percent(e,i[0]),2===i.length&&r.alt("positionAlign",i[1],["start",c,"end","line-left","line-right","auto"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start",c,"end","left","right"])}},/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical","");var a=r.get("line","auto");"auto"===a&&-1===u.line&&(a=-1),t.line=a,t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100),t.align=r.get("align",c);var o=r.get("position","auto");"auto"===o&&50===u.position&&(o="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=o}(e,t)}function o(e){return e.replace(/<br(?: \/)?>/gi,"\n")}n.r(t),n.d(t,"parseTimeStamp",function(){return r}),n.d(t,"fixLineBreaks",function(){return o}),n.d(t,"VTTParser",function(){return f});var s=n("./src/utils/vttcue.ts"),l=function(){function e(){}return e.prototype.decode=function(e,t){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))},e}(),d=function(){function e(){this.values=Object.create(null)}var t=e.prototype;return t.set=function(e,t){this.get(e)||""===t||(this.values[e]=t)},t.get=function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},t.has=function(e){return e in this.values},t.alt=function(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}},t.integer=function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},t.percent=function(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){var n=parseFloat(t);if(n>=0&&n<=100)return this.set(e,n),!0}return!1},e}(),u=new s.default(0,0,""),c="middle"===u.align?"middle":"center",f=function(){function e(){this.state="INITIAL",this.buffer="",this.decoder=new l,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var t=e.prototype;return t.parse=function(e){function t(){var e=n.buffer,t=0;for(e=o(e);t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var r=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,n.buffer=e.substr(t),r}var n=this;e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));try{var r="";if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;r=t();var l=r.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!l||!l[0])throw new Error("Malformed WebVTT signature.");n.state="HEADER"}for(var d=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(d?d=!1:r=t(),n.state){case"HEADER":/:/.test(r)?function(e){i(e,function(e,t){},/:/)}(r):r||(n.state="ID");continue;case"NOTE":r||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){n.state="NOTE";break}if(!r)continue;if(n.cue=new s.default(0,0,""),n.state="CUE",-1===r.indexOf("--\x3e")){n.cue.id=r;continue}case"CUE":if(!n.cue){n.state="BADCUE";continue}try{a(r,n.cue,n.regionList)}catch(e){n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var u=-1!==r.indexOf("--\x3e");if(!r||u&&(d=!0)){n.oncue&&n.cue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}if(null===n.cue)continue;n.cue.text&&(n.cue.text+="\n"),n.cue.text+=r;continue;case"BADCUE":r||(n.state="ID")}}}catch(e){"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},t.flush=function(){var e=this;try{if((e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state||"BADWEBVTT"===e.state)throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this},e}()},"./src/utils/webvtt-parser.ts":function(e,t,n){"use strict";function r(e,t,n){return h(e.toString())+h(t.toString())+h(n)}function i(e,t,n,i,a,h,v,m){var g,y=new o.VTTParser,E=Object(s.utf8ArrayToStr)(new Uint8Array(e)).trim().replace(u,"\n").split("\n"),b=[],T=Object(l.toMpegTsClockFromTimescale)(t,n),w="00:00.000",S=0,A=0,L=!0,k=!1;y.oncue=function(e){var t=i[a],n=i.ccOffset,o=(S-T)/9e4;if(null!==t&&void 0!==t&&t.new&&(void 0!==A?n=i.ccOffset=t.start:p(i,a,o)),o&&(n=o-i.presentationOffset),k){var s=e.endTime-e.startTime,l=Object(d.normalizePts)(9e4*(e.startTime+n-A),9e4*h)/9e4;e.startTime=l,e.endTime=l+s}var u=e.text.trim();e.text=decodeURIComponent(encodeURIComponent(u)),e.id||(e.id=r(e.startTime,e.endTime,u)),e.endTime>0&&b.push(e)},y.onparsingerror=function(e){g=e},y.onflush=function(){if(g)return void m(g);v(b)},E.forEach(function(e){if(L){if(c(e,"X-TIMESTAMP-MAP=")){L=!1,k=!0,e.substr(16).split(",").forEach(function(e){c(e,"LOCAL:")?w=e.substr(6):c(e,"MPEGTS:")&&(S=parseInt(e.substr(7)))});try{A=f(w)/1e3}catch(e){k=!1,g=e}return}""===e&&(L=!1)}y.parse(e+"\n")}),y.flush()}n.r(t),n.d(t,"generateCueId",function(){return r}),n.d(t,"parseWebVTT",function(){return i});var a=n("./src/polyfills/number.ts"),o=n("./src/utils/vttparser.ts"),s=n("./src/demux/id3.ts"),l=n("./src/utils/timescale-conversion.ts"),d=n("./src/remux/mp4-remuxer.ts"),u=/\r\n|\n\r|\n|\r/g,c=function(e,t,n){return void 0===n&&(n=0),e.substr(n,t.length)===t},f=function(e){var t=parseInt(e.substr(-3)),n=parseInt(e.substr(-6,2)),r=parseInt(e.substr(-9,2)),i=e.length>9?parseInt(e.substr(0,e.indexOf(":"))):0;if(!(Object(a.isFiniteNumber)(t)&&Object(a.isFiniteNumber)(n)&&Object(a.isFiniteNumber)(r)&&Object(a.isFiniteNumber)(i)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+e);return t+=1e3*n,t+=6e4*r,t+=36e5*i},h=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()},p=function(e,t,n){var r=e[t],i=e[r.prevCC];if(!i||!i.new&&r.new)return e.ccOffset=e.presentationOffset=r.start,void(r.new=!1);for(;null!==(a=i)&&void 0!==a&&a.new;){var a;e.ccOffset+=r.start-i.start,r.new=!1,r=i,i=e[r.prevCC]}e.presentationOffset=n}},"./src/utils/xhr-loader.ts":function(e,t,n){"use strict";n.r(t);var r=n("./src/utils/logger.ts"),i=n("./src/loader/load-stats.ts"),a=/^age:\s*[\d.]+\s*$/m,o=function(){function e(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=e?e.xhrSetup:null,this.stats=new i.LoadStats,this.retryDelay=0}var t=e.prototype;return t.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},t.abortInternal=function(){var e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState&&(this.stats.aborted=!0,e.abort()))},t.abort=function(){var e;this.abortInternal(),null!==(e=this.callbacks)&&void 0!==e&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},t.load=function(e,t,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=n,this.retryDelay=t.retryDelay,this.loadInternal()},t.loadInternal=function(){var e=this.config,t=this.context;if(e){var n=this.loader=new self.XMLHttpRequest,r=this.stats;r.loading.first=0,r.loaded=0;var i=this.xhrSetup;try{if(i)try{i(n,t.url)}catch(e){n.open("GET",t.url,!0),i(n,t.url)}n.readyState||n.open("GET",t.url,!0);var a=this.context.headers;if(a)for(var o in a)n.setRequestHeader(o,a[o])}catch(e){return void this.callbacks.onError({code:n.status,text:e.message},t,n)}t.rangeEnd&&n.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),n.onreadystatechange=this.readystatechange.bind(this),n.onprogress=this.loadprogress.bind(this),n.responseType=t.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),e.timeout),n.send()}},t.readystatechange=function(){var e=this.context,t=this.loader,n=this.stats;if(e&&t){var i=t.readyState,a=this.config;if(!n.aborted&&i>=2)if(self.clearTimeout(this.requestTimeout),0===n.loading.first&&(n.loading.first=Math.max(self.performance.now(),n.loading.start)),4===i){t.onreadystatechange=null,t.onprogress=null;var o=t.status;if(o>=200&&o<300){n.loading.end=Math.max(self.performance.now(),n.loading.first);var s,l;if("arraybuffer"===e.responseType?(s=t.response,l=s.byteLength):(s=t.responseText,l=s.length),n.loaded=n.total=l,!this.callbacks)return;var d=this.callbacks.onProgress;if(d&&d(n,e,s,t),!this.callbacks)return;var u={url:t.responseURL,data:s};this.callbacks.onSuccess(u,n,e,t)}else n.retry>=a.maxRetry||o>=400&&o<499?(r.logger.error(o+" while loading "+e.url),this.callbacks.onError({code:o,text:t.statusText},e,t)):(r.logger.warn(o+" while loading "+e.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),n.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),a.timeout)}},t.loadtimeout=function(){r.logger.warn("timeout while loading "+this.context.url);var e=this.callbacks;e&&(this.abortInternal(),e.onTimeout(this.stats,this.context,this.loader))},t.loadprogress=function(e){var t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)},t.getCacheAge=function(){var e=null;if(this.loader&&a.test(this.loader.getAllResponseHeaders())){var t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e},e}();t.default=o}}).default})},function(e,t,n){var r=n(0),i=function(e){var t={},n=null,i=null,a=e.fairplayLicenseUrl,o=e.fairplaySPCUrl,s=e.src,l=new r;t.on=function(e,t){return l.on(e,t)},t.off=function(e,t){return l.off(e,t)};var d=function(e){for(var t=new ArrayBuffer(2*e.length),n=new Uint16Array(t),r=0,i=e.length;r<i;r++)n[r]=e.charCodeAt(r);return n},u=function(e){var t=new Uint16Array(e.buffer);return String.fromCharCode.apply(null,t)},c=function(e,t,n){n.addEventListener(e,function(){t(arguments[0])},!1)},f=function(e){var t=e.target;i=new Uint8Array(t.response),g()},h=function(e){l.emit("meride.fairplay.certificate_error",e.target)},p=function(e){var t=u(e),n=t.split("://",1),r=n[0].slice(-3),i="";return n=t.split(";",2),i=n.length>1?n[1]:"","skd"==r.toLowerCase()?i:""},v=function(e,t,n){"string"==typeof t&&(t=d(t));var r=0,i=new ArrayBuffer(e.byteLength+4+t.byteLength+4+n.byteLength),a=new DataView(i);new Uint8Array(i,r,e.byteLength).set(e),r+=e.byteLength,a.setUint32(r,t.byteLength,!0),r+=4;var o=new Uint16Array(i,r,t.length);return o.set(t),r+=o.byteLength,a.setUint32(r,n.byteLength,!0),r+=4,new Uint8Array(i,r,n.byteLength).set(n),new Uint8Array(i,0,i.byteLength)},m=function(){WebKitMediaKeys.isTypeSupported("com.apple.fps.1_0","video/mp4")?n="com.apple.fps.1_0":l.emit("meride.fairplay.not_supported")},g=function(){var e=document.getElementsByTagName("video")[0];e.addEventListener("webkitneedkey",y,!1),e.src=s},y=function(e){var t=e.target,r=e.initData,a=p(r);if(r=v(r,a,i),t.webkitKeys||(m(),t.webkitSetMediaKeys(new WebKitMediaKeys(n))),!t.webkitKeys)throw"Could not create MediaKeys";var o=t.webkitKeys.createSession("video/mp4",r);if(!o)throw"Could not create key session";o.contentId=a,c("webkitkeymessage",E,o),c("webkitkeyadded",w,o),c("webkitkeyerror",T,o)},E=function(e){var t=e.target,n=e.message,r=new Blob([n],{type:"application/octet-binary"}),i=new XMLHttpRequest;i.session=t,i.open("POST",o+"?p1="+Date.now(),!0),i.setRequestHeader("Content-type","application/octet-stream"),i.responseType="blob",i.addEventListener("load",b,!1),i.send(r)},b=function(e){var t=e.target;if(200==t.status){var n=t.response,r=new FileReader;r.addEventListener("loadend",function(){var e=new Uint8Array(r.result);t.session.update(e)}),r.readAsArrayBuffer(n)}},T=function(e){},w=function(e){},S=function(){var e=new XMLHttpRequest;e.responseType="arraybuffer",e.addEventListener("load",f,!1),e.addEventListener("error",h,!1),e.open("GET",a,!0),e.send()};return t.loadCertificate=S,t};e.exports=i},function(e,t,n){var r=n(141);"string"==typeof r&&(r=[[e.i,r,""]]);var i={};i.transform=void 0;n(38)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(37)(!1),t.push([e.i,".meride-video-container {\n    background-color: #000;\n    position: relative;\n    clear: both;\n    font-family: 'Open Sans', sans-serif;\n    max-width: 100%;\n    word-break: normal;\n}\n\n.meride-video-container video {\n    max-width: 100%;\n    left: 0;\n}\n\n.meride-video-container video.clickable-video {\n    cursor: pointer;\n}\n\n.meride-video-container * {\n    transition: none;\n    -webkit-transition: none;\n}\n\n.meride-video-container::-webkit-media-controls-play-button,\n.meride-video-container::-webkit-media-controls-start-playback-button {\n    opacity: 0;\n    pointer-events: none;\n    width: 5px;\n}\n\n.meride-video-container .loadingSpinner {\n    width: 60px;\n    height: 60px;\n    background-color: #ffce3e;\n    left: 50%;\n    top: 50%;\n    position: absolute;\n    margin-left: -30px;\n    margin-top: -30px;\n    display: none;\n    border-radius: 100%;\n    z-index: 12;\n    -webkit-animation: sk-scaleout 1.0s infinite ease-in-out;\n    animation: sk-scaleout 1.0s infinite ease-in-out;\n}\n\n@-webkit-keyframes sk-scaleout {\n  0% { -webkit-transform: scale(0) }\n  100% {\n    -webkit-transform: scale(1.0);\n    opacity: 0;\n  }\n}\n\n@keyframes sk-scaleout {\n  0% {\n    -webkit-transform: scale(0);\n    transform: scale(0);\n  } 100% {\n    -webkit-transform: scale(1.0);\n    transform: scale(1.0);\n    opacity: 0;\n  }\n}\n\n.meride-video-container .btn {\n    fill: #fff;\n}\n\n.meride-video-container button:focus {\n    outline: none;\n}\n\n.meride-video-container .controlBarContainer {\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    height: 55px;\n    width: 100%;\n    background-color: transparent;\n    background-color: rgba(0, 0, 0, .25);\n}\n\n.meride-video-container .controlBar {\n    height: 55px;\n    width: 96%;\n    position: absolute;\n    bottom: 0;\n    margin-left: 2%;\n    background-color: transparent;\n    display: table-cell;\n    color: #fff;\n    z-index: 10;\n}\n\n.meride-video-container .controlBar .controlBarBtn:hover g:first-child {\n    fill: #f0f0f0;\n}\n\n.meride-video-container .md-progressBar {\n    height: 8px;\n    background-color: rgb(102, 102, 102);\n    background-color: rgba(102, 102, 102, 1);\n    width: 100%;\n    bottom: 0;\n    left: 0;\n    vertical-align: middle;\n    position: relative;\n    box-sizing: content-box;\n}\n\n.meride-video-container .progressBarTop {\n    position: absolute;\n    top: 0;\n}\n\n.meride-video-container .md-progressBar:hover.disabled {\n    cursor: default;\n}\n\n.meride-video-container .md-progressBar:hover {\n    cursor: pointer;\n}\n\n.meride-video-container .md-progressBar .md-spinner {\n    height: 8px;\n    width: 0;\n    background-color: rgb(255, 206, 62);\n    background-color: rgba(255, 206, 62, 1);\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n\n.meride-video-container .md-progressBar .md-bufferContainer {\n    height: 8px;\n    width: 0;\n    position: absolute;\n    top: 0;\n\n    margin: 0;\n    background-color: rgb(230, 230, 230);\n    background-color: rgba(230, 230, 230, 1);\n}\n\n.meride-video-container .controlBarContainer button, .meride-video-container .md-progressBar button {\n    border: none;\n    background-color: transparent;\n    cursor: pointer;\n    padding: 2px;\n    width: 35px;\n    height: 35px;\n    margin: 0;\n    box-sizing: border-box;\n}\n\n.meride-video-container .controlBarContainer .liveBtn {\n    width: 80px;\n}\n\n.meride-video-container .volumeBarContainer {\n    position: absolute;\n    left: 50%;\n    margin-left: -15px;\n    height: 120px;\n    bottom: 55px;\n    padding-bottom: 2px;\n}\n\n.meride-video-container .volumeBarContainer.active {\n    visibility: visible;\n}\n\n.meride-video-container .volumeBarContainer.inactive {\n    visibility: hidden;\n}\n\n.meride-video-container .volumeContainer {\n    position: relative;\n}\n\n.meride-video-container .volumeBarContainer .volumeBarInnerContainer {\n    position: relative;\n    width: 30px;\n    height: 120px;\n    background-color: rgb(0, 0, 0);\n    background-color: rgba(0, 0, 0, .25);\n}\n\n\n.meride-video-container .volumeBarContainer .volumeBarInnerContainer .volumeBarSpinner {\n    position:  absolute;\n    width: 4px;\n    left: 0;\n    bottom: 0;\n    background-color: rgb(255, 206, 62);\n    background-color: rgba(255, 206, 62, 1);\n    min-height: 8px;\n    z-index: 11;\n}\n\n.meride-video-container .volumeBarContainer .volumeBarInnerContainer .volumeBarLevel {\n    position:  absolute;\n    width: 4px;\n    height: 100px;\n    left: 13px;\n    top: 10px;\n    background-color: #fff;\n    z-index: 10;\n}\n\n\n.meride-video-container .volumeBarContainer .volumeBarInnerContainer .volumeHandlerBtn {\n    position: absolute;\n    left: -6px;\n    width: 16px;\n    height: 16px;\n    border: none;\n    background-color: transparent;\n    cursor: pointer;\n    padding: 0;\n    z-index: 13;\n    max-width: initial;\n}\n\n.meride-video-container .md-progressBar .md-seekBtn {\n    width: 46px;\n    height: 46px;\n    position: absolute;\n    margin-left: -23px;\n    bottom: -18px;\n}\n\n.meride-video-container .toright {\n    float: right;\n}\n\n.meride-video-container .timeUpdate {\n    font-size: 10.5pt;\n    line-height: 40px;\n    min-width: 1.5em;\n    text-align: left;\n    color: #fff;\n}\n\n.meride-video-container .duration {\n    font-size: 10.5pt;\n    min-width: 1.5em;\n    text-align: left;\n    line-height: 40px;\n    color: #fff;\n}\n\n.meride-video-container .fullBtn {\n    display: inline-block;\n}\n\n.meride-video-container .reduceBtn {\n    display: none;\n}\n\n.meride-video-container .pipBtn {\n    display: none;\n}\n\n.meride-video-container .pipExitBtn {\n    display: none;\n}\n\n.meride-video-container .md-settings {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgb(0, 0, 0);\n    background-color: rgba(0, 0, 0, 0.7);\n    display: none;\n    z-index: 999;\n}\n\n.meride-video-container .settings button {\n    width: 60px;\n    height: 60px;\n    border: none;\n    background-color: transparent;\n    float: left;\n    cursor: pointer;\n}\n\n.meride-video-container .settings .closeSettingBtn {\n    position: absolute;\n    top: 2%;\n    right: 2%;\n    width: 30px;\n    height: 30px;\n}\n\n.meride-video-container .settings .closeSettingBtn .btn {\n    fill: #fff;\n}\n\n.meride-video-container .settings .settingsContainer {\n    display: table;\n    position: absolute;\n    width: 90%;\n    margin-left: 5%;\n    top: 50%;\n    margin-top: -23px;\n}\n\n.meride-video-container .settings .settingsContainer .settingComponent {\n    display: table-cell;\n}\n\n.meride-video-container .settings .settingsContainer .settingComponent button {\n    width: 100%;\n}\n\n\n.meride-video-container .boxcenter {\n    left: 50%;\n    top: 50%;\n    position: absolute;\n}\n\n.meride-video-container .boxcenterBtn {\n    width: 100px;\n    height: 100px;\n    border: none;\n    background-color: transparent;\n    cursor: pointer;\n    z-index: 12;\n    margin-left: -50px;\n    margin-top: -50px;\n    padding: 0;\n}\n\n.meride-video-container .boxcenterBtnSmall {\n    width: 90px;\n    height: 90px;\n    border: none;\n    background-color: transparent;\n    cursor: pointer;\n    z-index: 12;\n    margin-left: -45px;\n    margin-top: -55px;\n    padding: 0;\n}\n\n.meride-video-container .boxcenterBtn:hover circle {\n    fill: #000;\n}\n\n.meride-video-container .topBarBtn {\n    height: 40px;\n    border: none;\n    background-color: transparent;\n    cursor: pointer;\n}\n\n.meride-video-container .topBar {\n    height: 60px;\n    width: 96%;\n    position: absolute;\n    top: 10px;\n    margin-left: 2%;\n    z-index: 10;\n}\n\n.meride-video-container .controlBarRight {\n    white-space: nowrap;\n}\n\n.meride-video-container .controlBarCenter {\n    width: 100%;\n    padding: 0;\n}\n\n.meride-video-container .controlBarCell {\n    padding: 0 0.3em;\n    display: table-cell;\n    vertical-align: middle;\n    height: 55px;\n}\n\n.meride-video-container .controlBarCellRight {\n    padding: 0;\n}\n\n.meride-video-container .poster {\n    width: 100%;\n    height: 100%;\n}\n\n.meride-video-container video::cue {\n    color: #fff;\n    text-shadow: 1px 1px 1px #000;\n    font-family: sans-serif;\n    font-weight: normal;\n    bottom: 55px;\n    position: relative;\n}\n.meride-video-container video::-webkit-media-text-track-display {\n    transform: translateY(-55px);\n}\n\n.meride-video-container a {\n    text-decoration: none;\n}\n\n.meride-video-container .settingChooseMenu {\n    font-size: 10.5pt;\n    /*display: none;*/\n    max-height: 100%;\n    overflow: auto;\n    overflow-y: auto;\n    overflow-x: hidden;\n    box-sizing: border-box;\n    z-index: 99;\n}\n\n.meride-video-container .settingChooseMenu .settingChooseMenuLink {\n    color: #fff;\n    padding: 4px 20px;\n    display: block;\n    text-align: left;\n    background-color: #000;\n    background-color: rgba(0, 0, 0, .25);\n    cursor: pointer;\n}\n\n.meride-video-container .settingChooseMenu .settingChooseMenuLinkActive {\n    color: #fff;\n    background-color: #ffce3e;\n    background-color: rgba(255, 206, 62, .5);\n    padding: 4px 20px;\n    display: block;\n    text-align: left;\n    cursor: pointer;\n}\n\n.meride-video-container .settingChooseMenu .settingChooseMenuLink:hover {\n    color: #fff;\n    background-color: #ffce3e;\n    background-color: rgba(255, 206, 62, .5);\n    padding: 4px 20px;\n    display: block;\n    text-align: left;\n    cursor: pointer;\n}\n\n.meride-video-container .settingChooseMenu .hd_apex {\n    vertical-align: super;\n    font-size: 5.5pt;\n    color: #ffce3e;\n    padding-left: 2px;\n}\n\n.meride-video-container .settingChildContainer {\n    position: absolute;\n    background-color: rgb(255, 206, 62);\n    background-color: rgba(255, 206, 62, 1);\n    color: #fff;\n    font-size: 1.2em;\n    display: none;\n    width: 100%;\n    left: 0;\n    top: 0;\n    height: 100%;\n    overflow: auto;\n    box-sizing: border-box;\n    z-index: 99;\n}\n\n.meride-video-container .infoContainer {\n    text-align: center;\n}\n\n.meride-video-container .infoContainer a {\n    color: #fff;\n}\n\n.meride-video-container .infoContainer .merideTxt {\n    font-weight: 900;\n    font-size: 2em;\n    top: 36%;\n    width: 100%;\n    text-align: center;\n    position: absolute;\n}\n\n.meride-video-container .infoContainer .merideSlogan {\n    display: block;\n    font-weight: normal;\n    font-size: 0.8em;\n}\n\n.meride-video-container .infoContainer .mosaicoLab {\n    font-weight: normal;\n    font-size: 0.8em;\n    position: absolute;\n    bottom: 8%;\n    width: 100%;\n    text-align: center;\n}\n\n.meride-video-container .qualityContainer {\n    position: relative;\n}\n\n\n.meride-video-container .qualitySelectionContainer {\n    position: absolute;\n    overflow: auto;\n    overflow-y: auto;\n    overflow-x: hidden;\n    margin-left: -25px;\n    bottom: 55px;\n    padding-bottom: 2px;\n    width: auto;\n    min-width: 80px;\n    max-width: 160px;\n    color: #fff;\n    white-space: nowrap;\n}\n\n.meride-video-container .qualitySelectionContainer.active {\n    visibility: visible;\n}\n\n.meride-video-container .qualitySelectionContainer.inactive {\n    visibility: hidden;\n}\n\n.meride-video-container .audioTracksSelectionContainer {\n    position: absolute;\n    overflow: auto;\n    overflow-y: auto;\n    overflow-x: hidden;\n    margin-left: -25px;\n    bottom: 55px;\n    padding-bottom: 2px;\n    width: 120px;\n    min-width: 80px;\n    color: #fff;\n    white-space: nowrap;\n}\n\n.meride-video-container .audioTracksSelectionContainer.active {\n    visibility: visible;\n}\n\n.meride-video-container .audioTracksSelectionContainer.inactive {\n    visibility: hidden;\n}\n\n.meride-video-container .subtitleTracksSelectionContainer {\n    position: absolute;\n    overflow: auto;\n    overflow-y: auto;\n    overflow-x: hidden;\n    margin-left: -25px;\n    bottom: 55px;\n    padding-bottom: 2px;\n    width: 120px;\n    min-width: 80px;\n    color: #fff;\n    white-space: nowrap;\n}\n\n.meride-video-container .subtitleTracksSelectionContainer.active {\n    visibility: visible;\n}\n\n.meride-video-container .subtitleTracksSelectionContainer.inactive {\n    visibility: hidden;\n}\n\n.meride-video-container .subtitleTracksContainer {\n    position: relative;\n}\n.meride-video-container .subtitleTracksLabel {\n    color: #ffce3e;\n    font-size: 5.5pt;\n    position: absolute;\n    right: 2px;\n    top: 13px;\n}\n\n.meride-video-container .md-timeTooltip {\n    position: absolute;\n    visibility: hidden;\n    top: -34px;\n    left: 0;\n    width: 60px;\n    height: 24px;\n    background-color: rgb(0, 0, 0);\n    background-color: rgba(0, 0, 0, .5);\n    color: #fff;\n    text-align: center;\n    font-size: 13px;\n    line-height: 24px;\n}\n.meride-video-container .audioTracksContainer {\n    position: relative;\n}\n.meride-video-container .audioTracksLabel {\n    color: #ffce3e;\n    font-size: 5.5pt;\n    position: absolute;\n    right: 2px;\n    top: 13px;\n}",""])}]);